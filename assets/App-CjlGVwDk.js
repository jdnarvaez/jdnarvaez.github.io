import{r as H,R as Wt,j as ee,g as Sa,c as Ji}from"./index-D5K-AdbR.js";function uP(n={}){const{strict:e=!0,errorMessage:t="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:i}=n,r=H.createContext(void 0);r.displayName=i;function s(){var o;const a=H.useContext(r);if(!a&&e){const l=new Error(t);throw l.name="ContextError",(o=Error.captureStackTrace)==null||o.call(Error,l,s),l}return a}return[r.Provider,s,r]}function RM(n){const e=H.useRef(null);return H.useImperativeHandle(n,()=>e.current),e}function LM(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=LM(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function Y4(...n){for(var e=0,t,i,r="";e<n.length;)(t=n[e++])&&(i=LM(t))&&(r&&(r+=" "),r+=i);return r}var hP=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"";function IM(n){if(!n||typeof n!="object")return"";try{return JSON.stringify(n)}catch{return""}}var[fP,ene]=uP({name:"ProviderContext",strict:!1});const dP=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),pP=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function DM(n){if(Intl.Locale){let t=new Intl.Locale(n).maximize(),i=typeof t.getTextInfo=="function"?t.getTextInfo():t.textInfo;if(i)return i.direction==="rtl";if(t.script)return dP.has(t.script)}let e=n.split("-")[0];return pP.has(e)}const vp={prefix:String(Math.round(Math.random()*1e10)),current:0},NM=Wt.createContext(vp),mP=Wt.createContext(!1);let gP=!!(typeof window<"u"&&window.document&&window.document.createElement),Qm=new WeakMap;function vP(n=!1){let e=H.useContext(NM),t=H.useRef(null);if(t.current===null&&!n){var i,r;let s=(r=Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||r===void 0||(i=r.ReactCurrentOwner)===null||i===void 0?void 0:i.current;if(s){let o=Qm.get(s);o==null?Qm.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,Qm.delete(s))}t.current=++e.current}return t.current}function yP(n){let e=H.useContext(NM),t=vP(!!n),i=`react-aria${e.prefix}`;return n||`${i}-${t}`}function xP(n){let e=Wt.useId(),[t]=H.useState(UM()),i=t?"react-aria":`react-aria${vp.prefix}`;return n||`${i}-${e}`}Wt.useId;function _P(){return!1}function SP(){return!0}function MP(n){return()=>{}}function UM(){return typeof Wt.useSyncExternalStore=="function"?Wt.useSyncExternalStore(MP,_P,SP):H.useContext(mP)}const bP=Symbol.for("react-aria.i18n.locale");function FM(){let n=typeof window<"u"&&window[bP]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([n])}catch{n="en-US"}return{locale:n,direction:DM(n)?"rtl":"ltr"}}let Bg=FM(),Kc=new Set;function K4(){Bg=FM();for(let n of Kc)n(Bg)}function wP(){let n=UM(),[e,t]=H.useState(Bg);return H.useEffect(()=>(Kc.size===0&&window.addEventListener("languagechange",K4),Kc.add(t),()=>{Kc.delete(t),Kc.size===0&&window.removeEventListener("languagechange",K4)}),[]),n?{locale:"en-US",direction:"ltr"}:e}const TP=Wt.createContext(null);function AP(n){let{locale:e,children:t}=n,i=wP(),r=Wt.useMemo(()=>e?{locale:e,direction:DM(e)?"rtl":"ltr"}:i,[i,e]);return Wt.createElement(TP.Provider,{value:r},t)}function EP(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function CP(n,e,t){EP(n,e),e.set(n,t)}const $y=typeof document<"u"?Wt.useLayoutEffect:()=>{};function js(n){const e=H.useRef(null);return $y(()=>{e.current=n},[n]),H.useCallback((...t)=>{const i=e.current;return i==null?void 0:i(...t)},[])}let Vg=new Map;typeof FinalizationRegistry<"u"&&new FinalizationRegistry(n=>{Vg.delete(n)});function PP(n,e){if(n===e)return n;let t=Vg.get(n);if(t)return t.forEach(r=>r.current=e),e;let i=Vg.get(e);return i?(i.forEach(r=>r.current=n),n):e}function OM(...n){return(...e)=>{for(let t of n)typeof t=="function"&&t(...e)}}const tr=n=>{var e;return(e=n==null?void 0:n.ownerDocument)!==null&&e!==void 0?e:document},Qi=n=>n&&"window"in n&&n.window===n?n:tr(n).defaultView||window;function RP(n){return n!==null&&typeof n=="object"&&"nodeType"in n&&typeof n.nodeType=="number"}function LP(n){return RP(n)&&n.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&"host"in n}let IP=!1;function Gy(){return IP}function cr(n,e){if(!Gy())return e&&n?n.contains(e):!1;if(!n||!e)return!1;let t=e;for(;t!==null;){if(t===n)return!0;t.tagName==="SLOT"&&t.assignedSlot?t=t.assignedSlot.parentNode:LP(t)?t=t.host:t=t.parentNode}return!1}const zg=(n=document)=>{var e;if(!Gy())return n.activeElement;let t=n.activeElement;for(;t&&"shadowRoot"in t&&(!((e=t.shadowRoot)===null||e===void 0)&&e.activeElement);)t=t.shadowRoot.activeElement;return t};function ii(n){return Gy()&&n.target.shadowRoot&&n.composedPath?n.composedPath()[0]:n.target}function kM(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var r=n.length;for(e=0;e<r;e++)n[e]&&(t=kM(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function BM(){for(var n,e,t=0,i="",r=arguments.length;t<r;t++)(n=arguments[t])&&(e=kM(n))&&(i&&(i+=" "),i+=e);return i}function Wy(...n){let e={...n[0]};for(let t=1;t<n.length;t++){let i=n[t];for(let r in i){let s=e[r],o=i[r];typeof s=="function"&&typeof o=="function"&&r[0]==="o"&&r[1]==="n"&&r.charCodeAt(2)>=65&&r.charCodeAt(2)<=90?e[r]=OM(s,o):(r==="className"||r==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?e[r]=BM(s,o):r==="id"&&s&&o?e.id=PP(s,o):e[r]=o!==void 0?o:s}}return e}function yp(n){if(DP())n.focus({preventScroll:!0});else{let e=NP(n);n.focus(),UP(e)}}let Hf=null;function DP(){if(Hf==null){Hf=!1;try{document.createElement("div").focus({get preventScroll(){return Hf=!0,!0}})}catch{}}return Hf}function NP(n){let e=n.parentNode,t=[],i=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==i;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&t.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return i instanceof HTMLElement&&t.push({element:i,scrollTop:i.scrollTop,scrollLeft:i.scrollLeft}),t}function UP(n){for(let{element:e,scrollTop:t,scrollLeft:i}of n)e.scrollTop=t,e.scrollLeft=i}function Zp(n){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(t=>n.test(t.brand)))||n.test(window.navigator.userAgent)}function jy(n){var e;return typeof window<"u"&&window.navigator!=null?n.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function lo(n){let e=null;return()=>(e==null&&(e=n()),e)}const wu=lo(function(){return jy(/^Mac/i)}),FP=lo(function(){return jy(/^iPhone/i)}),VM=lo(function(){return jy(/^iPad/i)||wu()&&navigator.maxTouchPoints>1}),zM=lo(function(){return FP()||VM()}),OP=lo(function(){return Zp(/AppleWebKit/i)&&!kP()}),kP=lo(function(){return Zp(/Chrome/i)}),HM=lo(function(){return Zp(/Android/i)}),BP=lo(function(){return Zp(/Firefox/i)}),VP=H.createContext({isNative:!0,open:$P,useHref:n=>n});function zP(n){let{children:e,navigate:t,useHref:i}=n,r=H.useMemo(()=>({isNative:!1,open:(s,o,a,l)=>{$M(s,c=>{HP(c,o)?t(a,l):ha(c,o)})},useHref:i||(s=>s)}),[t,i]);return Wt.createElement(VP.Provider,{value:r},e)}function HP(n,e){let t=n.getAttribute("target");return(!t||t==="_self")&&n.origin===location.origin&&!n.hasAttribute("download")&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey}function ha(n,e,t=!0){var i,r;let{metaKey:s,ctrlKey:o,altKey:a,shiftKey:l}=e;BP()&&(!((r=window.event)===null||r===void 0||(i=r.type)===null||i===void 0)&&i.startsWith("key"))&&n.target==="_blank"&&(wu()?s=!0:o=!0);let c=OP()&&wu()&&!VM()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:s,ctrlKey:o,altKey:a,shiftKey:l}):new MouseEvent("click",{metaKey:s,ctrlKey:o,altKey:a,shiftKey:l,bubbles:!0,cancelable:!0});ha.isOpening=t,yp(n),n.dispatchEvent(c),ha.isOpening=!1}ha.isOpening=!1;function $M(n,e){if(n instanceof HTMLAnchorElement)e(n);else if(n.hasAttribute("data-href")){let t=document.createElement("a");t.href=n.getAttribute("data-href"),n.hasAttribute("data-target")&&(t.target=n.getAttribute("data-target")),n.hasAttribute("data-rel")&&(t.rel=n.getAttribute("data-rel")),n.hasAttribute("data-download")&&(t.download=n.getAttribute("data-download")),n.hasAttribute("data-ping")&&(t.ping=n.getAttribute("data-ping")),n.hasAttribute("data-referrer-policy")&&(t.referrerPolicy=n.getAttribute("data-referrer-policy")),n.appendChild(t),e(t),n.removeChild(t)}}function $P(n,e){$M(n,t=>ha(t,e))}let dl=new Map,Hg=new Set;function Z4(){if(typeof window>"u")return;function n(i){return"propertyName"in i}let e=i=>{if(!n(i)||!i.target)return;let r=dl.get(i.target);r||(r=new Set,dl.set(i.target,r),i.target.addEventListener("transitioncancel",t,{once:!0})),r.add(i.propertyName)},t=i=>{if(!n(i)||!i.target)return;let r=dl.get(i.target);if(r&&(r.delete(i.propertyName),r.size===0&&(i.target.removeEventListener("transitioncancel",t),dl.delete(i.target)),dl.size===0)){for(let s of Hg)s();Hg.clear()}};document.body.addEventListener("transitionrun",e),document.body.addEventListener("transitionend",t)}typeof document<"u"&&(document.readyState!=="loading"?Z4():document.addEventListener("DOMContentLoaded",Z4));function GP(n){requestAnimationFrame(()=>{dl.size===0?n():Hg.add(n)})}function GM(){let n=H.useRef(new Map),e=H.useCallback((r,s,o,a)=>{let l=a!=null&&a.once?(...c)=>{n.current.delete(o),o(...c)}:o;n.current.set(o,{type:s,eventTarget:r,fn:l,options:a}),r.addEventListener(s,l,a)},[]),t=H.useCallback((r,s,o,a)=>{var l;let c=((l=n.current.get(o))===null||l===void 0?void 0:l.fn)||o;r.removeEventListener(s,c,a),n.current.delete(o)},[]),i=H.useCallback(()=>{n.current.forEach((r,s)=>{t(r.eventTarget,r.type,s,r.options)})},[t]);return H.useEffect(()=>i,[i]),{addGlobalListener:e,removeGlobalListener:t,removeAllGlobalListeners:i}}function WP(n,e){$y(()=>{if(n&&n.ref&&e)return n.ref.current=e.current,()=>{n.ref&&(n.ref.current=null)}})}function WM(n){return n.mozInputSource===0&&n.isTrusted?!0:HM()&&n.pointerType?n.type==="click"&&n.buttons===1:n.detail===0&&!n.pointerType}function jP(n){return!HM()&&n.width===0&&n.height===0||n.width===1&&n.height===1&&n.pressure===0&&n.detail===0&&n.pointerType==="mouse"}const jM=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable^="false"])'],XP=jM.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";jM.push('[tabindex]:not([tabindex="-1"]):not([disabled])');function qP(n){return n.matches(XP)}function Xy(n){let e=n;return e.nativeEvent=n,e.isDefaultPrevented=()=>e.defaultPrevented,e.isPropagationStopped=()=>e.cancelBubble,e.persist=()=>{},e}function XM(n,e){Object.defineProperty(n,"target",{value:e}),Object.defineProperty(n,"currentTarget",{value:e})}function qM(n){let e=H.useRef({isFocused:!1,observer:null});$y(()=>{const i=e.current;return()=>{i.observer&&(i.observer.disconnect(),i.observer=null)}},[]);let t=js(i=>{n==null||n(i)});return H.useCallback(i=>{if(i.target instanceof HTMLButtonElement||i.target instanceof HTMLInputElement||i.target instanceof HTMLTextAreaElement||i.target instanceof HTMLSelectElement){e.current.isFocused=!0;let r=i.target,s=o=>{if(e.current.isFocused=!1,r.disabled){let a=Xy(o);t(a)}e.current.observer&&(e.current.observer.disconnect(),e.current.observer=null)};r.addEventListener("focusout",s,{once:!0}),e.current.observer=new MutationObserver(()=>{if(e.current.isFocused&&r.disabled){var o;(o=e.current.observer)===null||o===void 0||o.disconnect();let a=r===document.activeElement?null:document.activeElement;r.dispatchEvent(new FocusEvent("blur",{relatedTarget:a})),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:a}))}}),e.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[t])}let xp=!1;function YP(n){for(;n&&!qP(n);)n=n.parentElement;let e=Qi(n),t=e.document.activeElement;if(!t||t===n)return;xp=!0;let i=!1,r=f=>{(f.target===t||i)&&f.stopImmediatePropagation()},s=f=>{(f.target===t||i)&&(f.stopImmediatePropagation(),!n&&!i&&(i=!0,yp(t),l()))},o=f=>{(f.target===n||i)&&f.stopImmediatePropagation()},a=f=>{(f.target===n||i)&&(f.stopImmediatePropagation(),i||(i=!0,yp(t),l()))};e.addEventListener("blur",r,!0),e.addEventListener("focusout",s,!0),e.addEventListener("focusin",a,!0),e.addEventListener("focus",o,!0);let l=()=>{cancelAnimationFrame(c),e.removeEventListener("blur",r,!0),e.removeEventListener("focusout",s,!0),e.removeEventListener("focusin",a,!0),e.removeEventListener("focus",o,!0),xp=!1,i=!1},c=requestAnimationFrame(l);return l}let ml="default",$g="",Jd=new WeakMap;function KP(n){if(zM()){if(ml==="default"){const e=tr(n);$g=e.documentElement.style.webkitUserSelect,e.documentElement.style.webkitUserSelect="none"}ml="disabled"}else if(n instanceof HTMLElement||n instanceof SVGElement){let e="userSelect"in n.style?"userSelect":"webkitUserSelect";Jd.set(n,n.style[e]),n.style[e]="none"}}function J4(n){if(zM()){if(ml!=="disabled")return;ml="restoring",setTimeout(()=>{GP(()=>{if(ml==="restoring"){const e=tr(n);e.documentElement.style.webkitUserSelect==="none"&&(e.documentElement.style.webkitUserSelect=$g||""),$g="",ml="default"}})},300)}else if((n instanceof HTMLElement||n instanceof SVGElement)&&n&&Jd.has(n)){let e=Jd.get(n),t="userSelect"in n.style?"userSelect":"webkitUserSelect";n.style[t]==="none"&&(n.style[t]=e),n.getAttribute("style")===""&&n.removeAttribute("style"),Jd.delete(n)}}const YM=Wt.createContext({register:()=>{}});YM.displayName="PressResponderContext";function ZP(n,e){return e.get?e.get.call(n):e.value}function KM(n,e,t){if(!e.has(n))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(n)}function JP(n,e){var t=KM(n,e,"get");return ZP(n,t)}function QP(n,e,t){if(e.set)e.set.call(n,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function Q4(n,e,t){var i=KM(n,e,"set");return QP(n,i,t),t}function eR(n){let e=H.useContext(YM);if(e){let{register:t,...i}=e;n=Wy(i,n),t()}return WP(e,n.ref),n}var $f=new WeakMap;class Gf{continuePropagation(){Q4(this,$f,!1)}get shouldStopPropagation(){return JP(this,$f)}constructor(e,t,i,r){CP(this,$f,{writable:!0,value:void 0}),Q4(this,$f,!0);var s;let o=(s=r==null?void 0:r.target)!==null&&s!==void 0?s:i.currentTarget;const a=o==null?void 0:o.getBoundingClientRect();let l,c=0,f,p=null;i.clientX!=null&&i.clientY!=null&&(f=i.clientX,p=i.clientY),a&&(f!=null&&p!=null?(l=f-a.left,c=p-a.top):(l=a.width/2,c=a.height/2)),this.type=e,this.pointerType=t,this.target=i.currentTarget,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.x=l,this.y=c}}const e_=Symbol("linkClicked");function tR(n){let{onPress:e,onPressChange:t,onPressStart:i,onPressEnd:r,onPressUp:s,onClick:o,isDisabled:a,isPressed:l,preventFocusOnPress:c,shouldCancelOnPointerExit:f,allowTextSelectionOnPress:p,ref:d,...m}=eR(n),[v,_]=H.useState(!1),x=H.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:y,removeAllGlobalListeners:b}=GM(),M=js((D,B)=>{let G=x.current;if(a||G.didFirePressStart)return!1;let z=!0;if(G.isTriggeringEvent=!0,i){let Z=new Gf("pressstart",B,D);i(Z),z=Z.shouldStopPropagation}return t&&t(!0),G.isTriggeringEvent=!1,G.didFirePressStart=!0,_(!0),z}),T=js((D,B,G=!0)=>{let z=x.current;if(!z.didFirePressStart)return!1;z.didFirePressStart=!1,z.isTriggeringEvent=!0;let Z=!0;if(r){let $=new Gf("pressend",B,D);r($),Z=$.shouldStopPropagation}if(t&&t(!1),_(!1),e&&G&&!a){let $=new Gf("press",B,D);e($),Z&&(Z=$.shouldStopPropagation)}return z.isTriggeringEvent=!1,Z}),P=js((D,B)=>{let G=x.current;if(a)return!1;if(s){G.isTriggeringEvent=!0;let z=new Gf("pressup",B,D);return s(z),G.isTriggeringEvent=!1,z.shouldStopPropagation}return!0}),E=js(D=>{let B=x.current;if(B.isPressed&&B.target){B.didFirePressStart&&B.pointerType!=null&&T(Ha(B.target,D),B.pointerType,!1),B.isPressed=!1,B.isOverTarget=!1,B.activePointerId=null,B.pointerType=null,b(),p||J4(B.target);for(let G of B.disposables)G();B.disposables=[]}}),L=js(D=>{f&&E(D)}),I=js(D=>{o==null||o(D)}),R=js((D,B)=>{if(o){let G=new MouseEvent("click",D);XM(G,B),o(Xy(G))}}),C=H.useMemo(()=>{let D=x.current,B={onKeyDown(z){if(e1(z.nativeEvent,z.currentTarget)&&cr(z.currentTarget,ii(z.nativeEvent))){var Z;t_(ii(z.nativeEvent),z.key)&&z.preventDefault();let $=!0;if(!D.isPressed&&!z.repeat){D.target=z.currentTarget,D.isPressed=!0,D.pointerType="keyboard",$=M(z,"keyboard");let q=z.currentTarget,k=Q=>{e1(Q,q)&&!Q.repeat&&cr(q,ii(Q))&&D.target&&P(Ha(D.target,Q),"keyboard")};y(tr(z.currentTarget),"keyup",OM(k,G),!0)}$&&z.stopPropagation(),z.metaKey&&wu()&&((Z=D.metaKeyEvents)===null||Z===void 0||Z.set(z.key,z.nativeEvent))}else z.key==="Meta"&&(D.metaKeyEvents=new Map)},onClick(z){if(!(z&&!cr(z.currentTarget,ii(z.nativeEvent)))&&z&&z.button===0&&!D.isTriggeringEvent&&!ha.isOpening){let Z=!0;if(a&&z.preventDefault(),!D.ignoreEmulatedMouseEvents&&!D.isPressed&&(D.pointerType==="virtual"||WM(z.nativeEvent))){let $=M(z,"virtual"),q=P(z,"virtual"),k=T(z,"virtual");I(z),Z=$&&q&&k}else if(D.isPressed&&D.pointerType!=="keyboard"){let $=D.pointerType||z.nativeEvent.pointerType||"virtual";Z=T(Ha(z.currentTarget,z),$,!0),D.isOverTarget=!1,I(z),E(z)}D.ignoreEmulatedMouseEvents=!1,Z&&z.stopPropagation()}}},G=z=>{var Z;if(D.isPressed&&D.target&&e1(z,D.target)){var $;t_(ii(z),z.key)&&z.preventDefault();let k=ii(z),Q=cr(D.target,ii(z));T(Ha(D.target,z),"keyboard",Q),Q&&R(z,D.target),b(),z.key!=="Enter"&&qy(D.target)&&cr(D.target,k)&&!z[e_]&&(z[e_]=!0,ha(D.target,z,!1)),D.isPressed=!1,($=D.metaKeyEvents)===null||$===void 0||$.delete(z.key)}else if(z.key==="Meta"&&(!((Z=D.metaKeyEvents)===null||Z===void 0)&&Z.size)){var q;let k=D.metaKeyEvents;D.metaKeyEvents=void 0;for(let Q of k.values())(q=D.target)===null||q===void 0||q.dispatchEvent(new KeyboardEvent("keyup",Q))}};if(typeof PointerEvent<"u"){B.onPointerDown=$=>{if($.button!==0||!cr($.currentTarget,ii($.nativeEvent)))return;if(jP($.nativeEvent)){D.pointerType="virtual";return}D.pointerType=$.pointerType;let q=!0;if(!D.isPressed){D.isPressed=!0,D.isOverTarget=!0,D.activePointerId=$.pointerId,D.target=$.currentTarget,p||KP(D.target),q=M($,D.pointerType);let k=ii($.nativeEvent);"releasePointerCapture"in k&&k.releasePointerCapture($.pointerId),y(tr($.currentTarget),"pointerup",z,!1),y(tr($.currentTarget),"pointercancel",Z,!1)}q&&$.stopPropagation()},B.onMouseDown=$=>{if(cr($.currentTarget,ii($.nativeEvent))&&$.button===0){if(c){let q=YP($.target);q&&D.disposables.push(q)}$.stopPropagation()}},B.onPointerUp=$=>{!cr($.currentTarget,ii($.nativeEvent))||D.pointerType==="virtual"||$.button===0&&P($,D.pointerType||$.pointerType)},B.onPointerEnter=$=>{$.pointerId===D.activePointerId&&D.target&&!D.isOverTarget&&D.pointerType!=null&&(D.isOverTarget=!0,M(Ha(D.target,$),D.pointerType))},B.onPointerLeave=$=>{$.pointerId===D.activePointerId&&D.target&&D.isOverTarget&&D.pointerType!=null&&(D.isOverTarget=!1,T(Ha(D.target,$),D.pointerType,!1),L($))};let z=$=>{if($.pointerId===D.activePointerId&&D.isPressed&&$.button===0&&D.target){if(cr(D.target,ii($))&&D.pointerType!=null){let q=!1,k=setTimeout(()=>{D.isPressed&&D.target instanceof HTMLElement&&(q?E($):(yp(D.target),D.target.click()))},80);y($.currentTarget,"click",()=>q=!0,!0),D.disposables.push(()=>clearTimeout(k))}else E($);D.isOverTarget=!1}},Z=$=>{E($)};B.onDragStart=$=>{cr($.currentTarget,ii($.nativeEvent))&&E($)}}return B},[y,a,c,b,p,E,L,T,M,P,I,R]);return H.useEffect(()=>{let D=d==null?void 0:d.current;D&&D instanceof Qi(D).Element&&Qi(D).getComputedStyle(D).touchAction==="auto"&&(D.style.touchAction="pan-x pan-y pinch-zoom")},[d]),H.useEffect(()=>{let D=x.current;return()=>{var B;p||J4((B=D.target)!==null&&B!==void 0?B:void 0);for(let G of D.disposables)G();D.disposables=[]}},[p]),{isPressed:l||v,pressProps:Wy(m,C)}}function qy(n){return n.tagName==="A"&&n.hasAttribute("href")}function e1(n,e){const{key:t,code:i}=n,r=e,s=r.getAttribute("role");return(t==="Enter"||t===" "||t==="Spacebar"||i==="Space")&&!(r instanceof Qi(r).HTMLInputElement&&!ZM(r,t)||r instanceof Qi(r).HTMLTextAreaElement||r.isContentEditable)&&!((s==="link"||!s&&qy(r))&&t!=="Enter")}function Ha(n,e){let t=e.clientX,i=e.clientY;return{currentTarget:n,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:t,clientY:i}}function nR(n){return n instanceof HTMLInputElement?!1:n instanceof HTMLButtonElement?n.type!=="submit"&&n.type!=="reset":!qy(n)}function t_(n,e){return n instanceof HTMLInputElement?!ZM(n,e):nR(n)}const iR=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ZM(n,e){return n.type==="checkbox"||n.type==="radio"?e===" ":iR.has(n.type)}let xh=null,Gg=new Set,ou=new Map,fa=!1,Wg=!1;const rR={Tab:!0,Escape:!0};function Yy(n,e){for(let t of Gg)t(n,e)}function sR(n){return!(n.metaKey||!wu()&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function _p(n){fa=!0,sR(n)&&(xh="keyboard",Yy("keyboard",n))}function Il(n){xh="pointer",(n.type==="mousedown"||n.type==="pointerdown")&&(fa=!0,Yy("pointer",n))}function JM(n){WM(n)&&(fa=!0,xh="virtual")}function QM(n){n.target===window||n.target===document||xp||!n.isTrusted||(!fa&&!Wg&&(xh="virtual",Yy("virtual",n)),fa=!1,Wg=!1)}function e6(){xp||(fa=!1,Wg=!0)}function jg(n){if(typeof window>"u"||ou.get(Qi(n)))return;const e=Qi(n),t=tr(n);let i=e.HTMLElement.prototype.focus;e.HTMLElement.prototype.focus=function(){fa=!0,i.apply(this,arguments)},t.addEventListener("keydown",_p,!0),t.addEventListener("keyup",_p,!0),t.addEventListener("click",JM,!0),e.addEventListener("focus",QM,!0),e.addEventListener("blur",e6,!1),typeof PointerEvent<"u"&&(t.addEventListener("pointerdown",Il,!0),t.addEventListener("pointermove",Il,!0),t.addEventListener("pointerup",Il,!0)),e.addEventListener("beforeunload",()=>{t6(n)},{once:!0}),ou.set(e,{focus:i})}const t6=(n,e)=>{const t=Qi(n),i=tr(n);e&&i.removeEventListener("DOMContentLoaded",e),ou.has(t)&&(t.HTMLElement.prototype.focus=ou.get(t).focus,i.removeEventListener("keydown",_p,!0),i.removeEventListener("keyup",_p,!0),i.removeEventListener("click",JM,!0),t.removeEventListener("focus",QM,!0),t.removeEventListener("blur",e6,!1),typeof PointerEvent<"u"&&(i.removeEventListener("pointerdown",Il,!0),i.removeEventListener("pointermove",Il,!0),i.removeEventListener("pointerup",Il,!0)),ou.delete(t))};function oR(n){const e=tr(n);let t;return e.readyState!=="loading"?jg(n):(t=()=>{jg(n)},e.addEventListener("DOMContentLoaded",t)),()=>t6(n,t)}typeof document<"u"&&oR();function n6(){return xh!=="pointer"}const aR=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function lR(n,e,t){let i=tr(t==null?void 0:t.target);const r=typeof window<"u"?Qi(t==null?void 0:t.target).HTMLInputElement:HTMLInputElement,s=typeof window<"u"?Qi(t==null?void 0:t.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Qi(t==null?void 0:t.target).HTMLElement:HTMLElement,a=typeof window<"u"?Qi(t==null?void 0:t.target).KeyboardEvent:KeyboardEvent;return n=n||i.activeElement instanceof r&&!aR.has(i.activeElement.type)||i.activeElement instanceof s||i.activeElement instanceof o&&i.activeElement.isContentEditable,!(n&&e==="keyboard"&&t instanceof a&&!rR[t.key])}function cR(n,e,t){jg(),H.useEffect(()=>{let i=(r,s)=>{lR(!!(t!=null&&t.isTextInput),r,s)&&n(n6())};return Gg.add(i),()=>{Gg.delete(i)}},e)}function uR(n){let{isDisabled:e,onFocus:t,onBlur:i,onFocusChange:r}=n;const s=H.useCallback(l=>{if(l.target===l.currentTarget)return i&&i(l),r&&r(!1),!0},[i,r]),o=qM(s),a=H.useCallback(l=>{const c=tr(l.target),f=c?zg(c):zg();l.target===l.currentTarget&&f===ii(l.nativeEvent)&&(t&&t(l),r&&r(!0),o(l))},[r,t,o]);return{focusProps:{onFocus:!e&&(t||r||i)?a:void 0,onBlur:!e&&(i||r)?s:void 0}}}function hR(n){let{isDisabled:e,onBlurWithin:t,onFocusWithin:i,onFocusWithinChange:r}=n,s=H.useRef({isFocusWithin:!1}),{addGlobalListener:o,removeAllGlobalListeners:a}=GM(),l=H.useCallback(p=>{p.currentTarget.contains(p.target)&&s.current.isFocusWithin&&!p.currentTarget.contains(p.relatedTarget)&&(s.current.isFocusWithin=!1,a(),t&&t(p),r&&r(!1))},[t,r,s,a]),c=qM(l),f=H.useCallback(p=>{if(!p.currentTarget.contains(p.target))return;const d=tr(p.target),m=zg(d);if(!s.current.isFocusWithin&&m===ii(p.nativeEvent)){i&&i(p),r&&r(!0),s.current.isFocusWithin=!0,c(p);let v=p.currentTarget;o(d,"focus",_=>{if(s.current.isFocusWithin&&!cr(v,_.target)){let x=new d.defaultView.FocusEvent("blur",{relatedTarget:_.target});XM(x,v);let y=Xy(x);l(y)}},{capture:!0})}},[i,r,c,o,l]);return e?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:f,onBlur:l}}}function fR(n={}){let{autoFocus:e=!1,isTextInput:t,within:i}=n,r=H.useRef({isFocused:!1,isFocusVisible:e||n6()}),[s,o]=H.useState(!1),[a,l]=H.useState(()=>r.current.isFocused&&r.current.isFocusVisible),c=H.useCallback(()=>l(r.current.isFocused&&r.current.isFocusVisible),[]),f=H.useCallback(m=>{r.current.isFocused=m,o(m),c()},[c]);cR(m=>{r.current.isFocusVisible=m,c()},[],{isTextInput:t});let{focusProps:p}=uR({isDisabled:i,onFocusChange:f}),{focusWithinProps:d}=hR({isDisabled:!i,onFocusWithinChange:f});return{isFocused:s,isFocusVisible:a,focusProps:i?d:p}}const Xg=Wt.createContext(null);function dR(n){let{children:e}=n,t=H.useContext(Xg),[i,r]=H.useState(0),s=H.useMemo(()=>({parent:t,modalCount:i,addModal(){r(o=>o+1),t&&t.addModal()},removeModal(){r(o=>o-1),t&&t.removeModal()}}),[t,i]);return Wt.createElement(Xg.Provider,{value:s},e)}function pR(){let n=H.useContext(Xg);return{modalProviderProps:{"aria-hidden":n&&n.modalCount>0?!0:void 0}}}function mR(n){let{modalProviderProps:e}=pR();return Wt.createElement("div",{"data-overlay-container":!0,...n,...e})}function gR(n){return Wt.createElement(dR,null,Wt.createElement(mR,n))}const Tu=H.createContext({});function _h(n){const e=H.useRef(null);return e.current===null&&(e.current=n()),e.current}const Jp=H.createContext(null),kl=H.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class vR extends H.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=t.offsetHeight||0,i.width=t.offsetWidth||0,i.top=t.offsetTop,i.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function yR({children:n,isPresent:e}){const t=H.useId(),i=H.useRef(null),r=H.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=H.useContext(kl);return H.useInsertionEffect(()=>{const{width:o,height:a,top:l,left:c}=r.current;if(e||!i.current||!o||!a)return;i.current.dataset.motionPopId=t;const f=document.createElement("style");return s&&(f.nonce=s),document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${a}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[e]),ee.jsx(vR,{isPresent:e,childRef:i,sizeRef:r,children:H.cloneElement(n,{ref:i})})}const xR=({children:n,initial:e,isPresent:t,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o})=>{const a=_h(_R),l=H.useId(),c=H.useCallback(p=>{a.set(p,!0);for(const d of a.values())if(!d)return;i&&i()},[a,i]),f=H.useMemo(()=>({id:l,initial:e,isPresent:t,custom:r,onExitComplete:c,register:p=>(a.set(p,!1),()=>a.delete(p))}),s?[Math.random(),c]:[t,c]);return H.useMemo(()=>{a.forEach((p,d)=>a.set(d,!1))},[t]),H.useEffect(()=>{!t&&!a.size&&i&&i()},[t]),o==="popLayout"&&(n=ee.jsx(yR,{isPresent:t,children:n})),ee.jsx(Jp.Provider,{value:f,children:n})};function _R(){return new Map}function i6(n=!0){const e=H.useContext(Jp);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=H.useId();H.useEffect(()=>{n&&r(s)},[n]);const o=H.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Wf=n=>n.key||"";function n_(n){const e=[];return H.Children.forEach(n,t=>{H.isValidElement(t)&&e.push(t)}),e}const Ky=typeof window<"u",Zy=Ky?H.useLayoutEffect:H.useEffect,SR=({children:n,custom:e,initial:t=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1})=>{const[a,l]=i6(o),c=H.useMemo(()=>n_(n),[n]),f=o&&!a?[]:c.map(Wf),p=H.useRef(!0),d=H.useRef(c),m=_h(()=>new Map),[v,_]=H.useState(c),[x,y]=H.useState(c);Zy(()=>{p.current=!1,d.current=c;for(let T=0;T<x.length;T++){const P=Wf(x[T]);f.includes(P)?m.delete(P):m.get(P)!==!0&&m.set(P,!1)}},[x,f.length,f.join("-")]);const b=[];if(c!==v){let T=[...c];for(let P=0;P<x.length;P++){const E=x[P],L=Wf(E);f.includes(L)||(T.splice(P,0,E),b.push(E))}s==="wait"&&b.length&&(T=b),y(n_(T)),_(c);return}const{forceRender:M}=H.useContext(Tu);return ee.jsx(ee.Fragment,{children:x.map(T=>{const P=Wf(T),E=o&&!a?!1:c===x||f.includes(P),L=()=>{if(m.has(P))m.set(P,!0);else return;let I=!0;m.forEach(R=>{R||(I=!1)}),I&&(M==null||M(),y(d.current),o&&(l==null||l()),i&&i())};return ee.jsx(xR,{isPresent:E,initial:!p.current||t?void 0:!1,custom:E?void 0:e,presenceAffectsLayout:r,mode:s,onExitComplete:E?void 0:L,children:T},P)})})},MR=H.createContext(null);function bR(){const n=H.useRef(!1);return Zy(()=>(n.current=!0,()=>{n.current=!1}),[]),n}const Di=n=>n;let qg=Di;function Jy(n){let e;return()=>(e===void 0&&(e=n()),e)}const da=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Ur=n=>n*1e3,Fr=n=>n/1e3,Qy={skipAnimations:!1,useManualTiming:!1};function wR(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,f=!1,p=!1)=>{const m=p&&i?e:t;return f&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const jf=["read","resolveKeyframes","update","preRender","render","postRender"],TR=40;function r6(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=jf.reduce((y,b)=>(y[b]=wR(s),y),{}),{read:a,resolveKeyframes:l,update:c,preRender:f,render:p,postRender:d}=o,m=()=>{const y=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(y-r.timestamp,TR),1),r.timestamp=y,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),f.process(r),p.process(r),d.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},v=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:jf.reduce((y,b)=>{const M=o[b];return y[b]=(T,P=!1,E=!1)=>(t||v(),M.schedule(T,P,E)),y},{}),cancel:y=>{for(let b=0;b<jf.length;b++)o[jf[b]].cancel(y)},state:r,steps:o}}const{schedule:$t,cancel:to,state:Fn,steps:t1}=r6(typeof requestAnimationFrame<"u"?requestAnimationFrame:Di,!0);function AR(){const n=bR(),[e,t]=H.useState(0),i=H.useCallback(()=>{n.current&&t(e+1)},[e]);return[H.useCallback(()=>$t.postRender(i),[i]),e]}const ER=n=>!n.isLayoutDirty&&n.willUpdate(!1);function i_(){const n=new Set,e=new WeakMap,t=()=>n.forEach(ER);return{add:i=>{n.add(i),e.set(i,i.addEventListener("willUpdate",t))},remove:i=>{n.delete(i);const r=e.get(i);r&&(r(),e.delete(i)),t()},dirty:t}}const s6=n=>n===!0,CR=n=>s6(n===!0)||n==="id",PR=({children:n,id:e,inherit:t=!0})=>{const i=H.useContext(Tu),r=H.useContext(MR),[s,o]=AR(),a=H.useRef(null),l=i.id||r;a.current===null&&(CR(t)&&l&&(e=e?l+"-"+e:l),a.current={id:e,group:s6(t)&&i.group||i_()});const c=H.useMemo(()=>({...a.current,forceRender:s}),[o]);return ee.jsx(Tu.Provider,{value:c,children:n})},o6=H.createContext({strict:!1}),r_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bl={};for(const n in r_)Bl[n]={isEnabled:e=>r_[n].some(t=>!!e[t])};function RR(n){for(const e in n)Bl[e]={...Bl[e],...n[e]}}const LR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Sp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||LR.has(n)}let a6=n=>!Sp(n);function l6(n){n&&(a6=e=>e.startsWith("on")?!Sp(e):n(e))}try{l6(require("@emotion/is-prop-valid").default)}catch{}function IR(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(a6(r)||t===!0&&Sp(r)||!e&&!Sp(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function DR({children:n,isValidProp:e,...t}){e&&l6(e),t={...H.useContext(kl),...t},t.isStatic=_h(()=>t.isStatic);const i=H.useMemo(()=>t,[JSON.stringify(t.transition),t.transformPagePoint,t.reducedMotion]);return ee.jsx(kl.Provider,{value:i,children:n})}function NR(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Qp=H.createContext({});function Au(n){return typeof n=="string"||Array.isArray(n)}function e0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const e2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],t2=["initial",...e2];function t0(n){return e0(n.animate)||t2.some(e=>Au(n[e]))}function c6(n){return!!(t0(n)||n.variants)}function UR(n,e){if(t0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Au(t)?t:void 0,animate:Au(i)?i:void 0}}return n.inherit!==!1?e:{}}function FR(n){const{initial:e,animate:t}=UR(n,H.useContext(Qp));return H.useMemo(()=>({initial:e,animate:t}),[s_(e),s_(t)])}function s_(n){return Array.isArray(n)?n.join(" "):n}const OR=Symbol.for("motionComponentSymbol");function gl(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function kR(n,e,t){return H.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):gl(t)&&(t.current=i))},[e])}const n2=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),BR="framerAppearId",u6="data-"+n2(BR),{schedule:i2,cancel:tne}=r6(queueMicrotask,!1),h6=H.createContext({});function VR(n,e,t,i,r){var s,o;const{visualElement:a}=H.useContext(Qp),l=H.useContext(o6),c=H.useContext(Jp),f=H.useContext(kl).reducedMotion,p=H.useRef(null);i=i||l.renderer,!p.current&&i&&(p.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:f}));const d=p.current,m=H.useContext(h6);d&&!d.projection&&r&&(d.type==="html"||d.type==="svg")&&zR(p.current,t,r,m);const v=H.useRef(!1);H.useInsertionEffect(()=>{d&&v.current&&d.update(t,c)});const _=t[u6],x=H.useRef(!!_&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,_))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,_)));return Zy(()=>{d&&(v.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),i2.render(d.render),x.current&&d.animationState&&d.animationState.animateChanges())}),H.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,_)}),x.current=!1))}),d}function zR(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:f6(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&gl(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function f6(n){if(n)return n.options.allowProjection!==!1?n.projection:f6(n.parent)}function HR({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&RR(n);function a(c,f){let p;const d={...H.useContext(kl),...c,layoutId:$R(c)},{isStatic:m}=d,v=FR(c),_=i(c,m);if(!m&&Ky){GR();const x=WR(d);p=x.MeasureLayout,v.visualElement=VR(r,_,d,e,x.ProjectionNode)}return ee.jsxs(Qp.Provider,{value:v,children:[p&&v.visualElement?ee.jsx(p,{visualElement:v.visualElement,...d}):null,t(r,c,kR(_,v.visualElement,f),_,m,v.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=H.forwardRef(a);return l[OR]=r,l}function $R({layoutId:n}){const e=H.useContext(Tu).id;return e&&n!==void 0?e+"-"+n:n}function GR(n,e){H.useContext(o6).strict}function WR(n){const{drag:e,layout:t}=Bl;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const jR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function r2(n){return typeof n!="string"||n.includes("-")?!1:!!(jR.indexOf(n)>-1||/[A-Z]/u.test(n))}function o_(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function s2(n,e,t,i){if(typeof e=="function"){const[r,s]=o_(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=o_(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const Yg=n=>Array.isArray(n),XR=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),qR=n=>Yg(n)?n[n.length-1]||0:n,Ln=n=>!!(n&&n.getVelocity);function Qd(n){const e=Ln(n)?n.get():n;return XR(e)?e.toValue():e}function YR({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:KR(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const d6=n=>(e,t)=>{const i=H.useContext(Qp),r=H.useContext(Jp),s=()=>YR(n,e,i,r);return t?s():_h(s)};function KR(n,e,t,i){const r={},s=i(n,{});for(const d in s)r[d]=Qd(s[d]);let{initial:o,animate:a}=n;const l=t0(n),c=c6(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const p=f?a:o;if(p&&typeof p!="boolean"&&!e0(p)){const d=Array.isArray(p)?p:[p];for(let m=0;m<d.length;m++){const v=s2(n,d[m]);if(v){const{transitionEnd:_,transition:x,...y}=v;for(const b in y){let M=y[b];if(Array.isArray(M)){const T=f?M.length-1:0;M=M[T]}M!==null&&(r[b]=M)}for(const b in _)r[b]=_[b]}}}return r}const Kl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ma=new Set(Kl),p6=n=>e=>typeof e=="string"&&e.startsWith(n),m6=p6("--"),ZR=p6("var(--"),o2=n=>ZR(n)?JR.test(n.split("/*")[0].trim()):!1,JR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,g6=(n,e)=>e&&typeof n=="number"?e.transform(n):n,gs=(n,e,t)=>t>e?e:t<n?n:t,Zl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Eu={...Zl,transform:n=>gs(0,1,n)},Xf={...Zl,default:1},Sh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Xs=Sh("deg"),Or=Sh("%"),tt=Sh("px"),QR=Sh("vh"),eL=Sh("vw"),a_={...Or,parse:n=>Or.parse(n)/100,transform:n=>Or.transform(n*100)},tL={borderWidth:tt,borderTopWidth:tt,borderRightWidth:tt,borderBottomWidth:tt,borderLeftWidth:tt,borderRadius:tt,radius:tt,borderTopLeftRadius:tt,borderTopRightRadius:tt,borderBottomRightRadius:tt,borderBottomLeftRadius:tt,width:tt,maxWidth:tt,height:tt,maxHeight:tt,top:tt,right:tt,bottom:tt,left:tt,padding:tt,paddingTop:tt,paddingRight:tt,paddingBottom:tt,paddingLeft:tt,margin:tt,marginTop:tt,marginRight:tt,marginBottom:tt,marginLeft:tt,backgroundPositionX:tt,backgroundPositionY:tt},nL={rotate:Xs,rotateX:Xs,rotateY:Xs,rotateZ:Xs,scale:Xf,scaleX:Xf,scaleY:Xf,scaleZ:Xf,skew:Xs,skewX:Xs,skewY:Xs,distance:tt,translateX:tt,translateY:tt,translateZ:tt,x:tt,y:tt,z:tt,perspective:tt,transformPerspective:tt,opacity:Eu,originX:a_,originY:a_,originZ:tt},l_={...Zl,transform:Math.round},a2={...tL,...nL,zIndex:l_,size:tt,fillOpacity:Eu,strokeOpacity:Eu,numOctaves:l_},iL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rL=Kl.length;function sL(n,e,t){let i="",r=!0;for(let s=0;s<rL;s++){const o=Kl[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=g6(a,a2[o]);if(!l){r=!1;const f=iL[o]||o;i+=`${f}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function l2(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ma.has(l)){o=!0;continue}else if(m6(l)){r[l]=c;continue}else{const f=g6(c,a2[l]);l.startsWith("origin")?(a=!0,s[l]=f):i[l]=f}}if(e.transform||(o||t?i.transform=sL(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;i.transformOrigin=`${l} ${c} ${f}`}}const oL={offset:"stroke-dashoffset",array:"stroke-dasharray"},aL={offset:"strokeDashoffset",array:"strokeDasharray"};function lL(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?oL:aL;n[s.offset]=tt.transform(-i);const o=tt.transform(e),a=tt.transform(t);n[s.array]=`${o} ${a}`}function c_(n,e,t){return typeof n=="string"?n:tt.transform(e+t*n)}function cL(n,e,t){const i=c_(e,n.x,n.width),r=c_(t,n.y,n.height);return`${i} ${r}`}function c2(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},f,p){if(l2(n,c,p),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:d,style:m,dimensions:v}=n;d.transform&&(v&&(m.transform=d.transform),delete d.transform),v&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=cL(v,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(d.x=e),t!==void 0&&(d.y=t),i!==void 0&&(d.scale=i),o!==void 0&&lL(d,o,a,l,!1)}const u2=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),v6=()=>({...u2(),attrs:{}}),h2=n=>typeof n=="string"&&n.toLowerCase()==="svg";function y6(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const x6=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _6(n,e,t,i){y6(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(x6.has(r)?r:n2(r),e.attrs[r])}const Mp={};function uL(n){Object.assign(Mp,n)}function S6(n,{layout:e,layoutId:t}){return Ma.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Mp[n]||n==="opacity")}function f2(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(Ln(r[o])||e.style&&Ln(e.style[o])||S6(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function M6(n,e,t){const i=f2(n,e,t);for(const r in n)if(Ln(n[r])||Ln(e[r])){const s=Kl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function hL(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const u_=["x","y","width","height","cx","cy","r"],fL={useVisualState:d6({scrapeMotionValuesFromProps:M6,createRenderState:v6,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(Ma.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<u_.length;a++){const l=u_[a];n[l]!==e[l]&&(o=!0)}o&&$t.read(()=>{hL(t,i),$t.render(()=>{c2(i,r,h2(t.tagName),n.transformTemplate),_6(t,i)})})}})},dL={useVisualState:d6({scrapeMotionValuesFromProps:f2,createRenderState:u2})};function b6(n,e,t){for(const i in e)!Ln(e[i])&&!S6(i,t)&&(n[i]=e[i])}function pL({transformTemplate:n},e){return H.useMemo(()=>{const t=u2();return l2(t,e,n),Object.assign({},t.vars,t.style)},[e])}function mL(n,e){const t=n.style||{},i={};return b6(i,t,n),Object.assign(i,pL(n,e)),i}function gL(n,e){const t={},i=mL(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function vL(n,e,t,i){const r=H.useMemo(()=>{const s=v6();return c2(s,e,h2(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};b6(s,n.style,n),r.style={...s,...r.style}}return r}function yL(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(r2(t)?vL:gL)(i,s,o,t),c=IR(i,typeof t=="string",n),f=t!==H.Fragment?{...c,...l,ref:r}:{},{children:p}=i,d=H.useMemo(()=>Ln(p)?p.get():p,[p]);return H.createElement(t,{...f,children:d})}}function xL(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...r2(i)?fL:dL,preloadedFeatures:n,useRender:yL(r),createVisualElement:e,Component:i};return HR(o)}}function w6(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function n0(n,e,t){const i=n.getProps();return s2(i,e,t!==void 0?t:i.custom,n)}const _L=Jy(()=>window.ScrollTimeline!==void 0);class SL{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(_L()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class T6 extends SL{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function d2(n,e){return n?n[e]||n.default||n:void 0}const bp=2e4;function p2(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<bp;)e+=t,i=n.next(e);return e>=bp?1/0:e}function ML(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(p2(i),bp);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Fr(r)}}function i0(n){return typeof n=="function"}function h_(n,e){n.timeline=e,n.onfinish=null}const m2=n=>Array.isArray(n)&&typeof n[0]=="number",bL={linearEasing:void 0};function wL(n,e){const t=Jy(n);return()=>{var i;return(i=bL[e])!==null&&i!==void 0?i:t()}}const wp=wL(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),A6=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(da(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function E6(n){return!!(typeof n=="function"&&wp()||!n||typeof n=="string"&&(n in Kg||wp())||m2(n)||Array.isArray(n)&&n.every(E6))}const Zc=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,Kg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zc([0,.65,.55,1]),circOut:Zc([.55,0,1,.45]),backIn:Zc([.31,.01,.66,-.59]),backOut:Zc([.33,1.53,.69,.99])};function C6(n,e){if(n)return typeof n=="function"&&wp()?A6(n,e):m2(n)?Zc(n):Array.isArray(n)?n.map(t=>C6(t,e)||Kg.easeOut):Kg[n]}const hr={x:!1,y:!1};function P6(){return hr.x||hr.y}function R6(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=t==null?void 0:t[n])!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function L6(n,e){const t=R6(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function f_(n){return e=>{e.pointerType==="touch"||P6()||n(e)}}function TL(n,e,t={}){const[i,r,s]=L6(n,t),o=f_(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const f=f_(p=>{c(p),l.removeEventListener("pointerleave",f)});l.addEventListener("pointerleave",f,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const I6=(n,e)=>e?n===e?!0:I6(n,e.parentElement):!1,g2=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,AL=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function EL(n){return AL.has(n.tagName)||n.tabIndex!==-1}const Jc=new WeakSet;function d_(n){return e=>{e.key==="Enter"&&n(e)}}function n1(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const CL=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=d_(()=>{if(Jc.has(t))return;n1(t,"down");const r=d_(()=>{n1(t,"up")}),s=()=>n1(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function p_(n){return g2(n)&&!P6()}function PL(n,e,t={}){const[i,r,s]=L6(n,t),o=a=>{const l=a.currentTarget;if(!p_(a)||Jc.has(l))return;Jc.add(l);const c=e(a),f=(m,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",d),!(!p_(m)||!Jc.has(l))&&(Jc.delete(l),typeof c=="function"&&c(m,{success:v}))},p=m=>{f(m,t.useGlobalTarget||I6(l,m.target))},d=m=>{f(m,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",d,r)};return i.forEach(a=>{!EL(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>CL(c,r),r)}),s}function RL(n){return n==="x"||n==="y"?hr[n]?null:(hr[n]=!0,()=>{hr[n]=!1}):hr.x||hr.y?null:(hr.x=hr.y=!0,()=>{hr.x=hr.y=!1})}const D6=new Set(["width","height","top","left","right","bottom",...Kl]);let ep;function LL(){ep=void 0}const kr={now:()=>(ep===void 0&&kr.set(Fn.isProcessing||Qy.useManualTiming?Fn.timestamp:performance.now()),ep),set:n=>{ep=n,queueMicrotask(LL)}};function v2(n,e){n.indexOf(e)===-1&&n.push(e)}function r0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let y2=class{constructor(){this.subscriptions=[]}add(e){return v2(this.subscriptions,e),()=>r0(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};function N6(n,e){return e?n*(1e3/e):0}const m_=30,IL=n=>!isNaN(parseFloat(n));let DL=class{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=kr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=kr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IL(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new y2);const i=this.events[e].add(t);return e==="change"?()=>{i(),$t.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=kr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>m_)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,m_);return N6(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}};function Vl(n,e){return new DL(n,e)}function NL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Vl(t))}function UL(n,e){const t=n0(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=qR(s[o]);NL(n,o,a)}}function FL(n){return!!(Ln(n)&&n.add)}function Zg(n,e){const t=n.getValue("willChange");if(FL(t))return t.add(e)}function U6(n){return n.props[u6]}const F6=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,OL=1e-7,kL=12;function BL(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=F6(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>OL&&++a<kL);return o}function Mh(n,e,t,i){if(n===e&&t===i)return Di;const r=s=>BL(s,0,1,n,t);return s=>s===0||s===1?s:F6(r(s),e,i)}const O6=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,k6=n=>e=>1-n(1-e),B6=Mh(.33,1.53,.69,.99),x2=k6(B6),V6=O6(x2),z6=n=>(n*=2)<1?.5*x2(n):.5*(2-Math.pow(2,-10*(n-1))),_2=n=>1-Math.sin(Math.acos(n)),H6=k6(_2),$6=O6(_2),G6=n=>/^0[^.\s]+$/u.test(n);function VL(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||G6(n):!0}const au=n=>Math.round(n*1e5)/1e5,S2=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function zL(n){return n==null}const HL=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,M2=(n,e)=>t=>!!(typeof t=="string"&&HL.test(t)&&t.startsWith(n)||e&&!zL(t)&&Object.prototype.hasOwnProperty.call(t,e)),W6=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(S2);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},$L=n=>gs(0,255,n),i1={...Zl,transform:n=>Math.round($L(n))},Xo={test:M2("rgb","red"),parse:W6("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+i1.transform(n)+", "+i1.transform(e)+", "+i1.transform(t)+", "+au(Eu.transform(i))+")"};function GL(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Jg={test:M2("#"),parse:GL,transform:Xo.transform},vl={test:M2("hsl","hue"),parse:W6("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Or.transform(au(e))+", "+Or.transform(au(t))+", "+au(Eu.transform(i))+")"},qn={test:n=>Xo.test(n)||Jg.test(n)||vl.test(n),parse:n=>Xo.test(n)?Xo.parse(n):vl.test(n)?vl.parse(n):Jg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Xo.transform(n):vl.transform(n)},WL=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jL(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(S2))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(WL))===null||t===void 0?void 0:t.length)||0)>0}const j6="number",X6="color",XL="var",qL="var(",g_="${}",YL=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cu(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(YL,l=>(qn.test(l)?(i.color.push(s),r.push(X6),t.push(qn.parse(l))):l.startsWith(qL)?(i.var.push(s),r.push(XL),t.push(l)):(i.number.push(s),r.push(j6),t.push(parseFloat(l))),++s,g_)).split(g_);return{values:t,split:a,indexes:i,types:r}}function q6(n){return Cu(n).values}function Y6(n){const{split:e,types:t}=Cu(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===j6?s+=au(r[o]):a===X6?s+=qn.transform(r[o]):s+=r[o]}return s}}const KL=n=>typeof n=="number"?0:n;function ZL(n){const e=q6(n);return Y6(n)(e.map(KL))}const no={test:jL,parse:q6,createTransformer:Y6,getAnimatableNone:ZL},JL=new Set(["brightness","contrast","saturate","opacity"]);function QL(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(S2)||[];if(!i)return n;const r=t.replace(i,"");let s=JL.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const eI=/\b([a-z-]*)\(.*?\)/gu,Qg={...no,getAnimatableNone:n=>{const e=n.match(eI);return e?e.map(QL).join(" "):n}},tI={...a2,color:qn,backgroundColor:qn,outlineColor:qn,fill:qn,stroke:qn,borderColor:qn,borderTopColor:qn,borderRightColor:qn,borderBottomColor:qn,borderLeftColor:qn,filter:Qg,WebkitFilter:Qg},b2=n=>tI[n];function K6(n,e){let t=b2(n);return t!==Qg&&(t=no),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const nI=new Set(["auto","none","0"]);function iI(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!nI.has(s)&&Cu(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=K6(t,r)}const v_=n=>n===Zl||n===tt,y_=(n,e)=>parseFloat(n.split(", ")[e]),x_=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return y_(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?y_(s[1],n):0}},rI=new Set(["x","y","z"]),sI=Kl.filter(n=>!rI.has(n));function oI(n){const e=[];return sI.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const zl={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:x_(4,13),y:x_(5,14)};zl.translateX=zl.x;zl.translateY=zl.y;const ta=new Set;let ev=!1,tv=!1;function Z6(){if(tv){const n=Array.from(ta).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=oI(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}tv=!1,ev=!1,ta.forEach(n=>n.complete()),ta.clear()}function J6(){ta.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(tv=!0)})}function aI(){J6(),Z6()}let w2=class{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ta.add(this),ev||(ev=!0,$t.read(J6),$t.resolveKeyframes(Z6))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ta.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ta.delete(this))}resume(){this.isComplete||this.scheduleResolve()}};const Q6=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),lI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function cI(n){const e=lI.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function eb(n,e,t=1){const[i,r]=cI(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return Q6(o)?parseFloat(o):o}return o2(r)?eb(r,e,t+1):r}const tb=n=>e=>e.test(n),uI={test:n=>n==="auto",parse:n=>n},nb=[Zl,tt,Or,Xs,eL,QR,uI],__=n=>nb.find(tb(n));let ib=class extends w2{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),o2(c))){const f=eb(c,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!D6.has(i)||e.length!==2)return;const[r,s]=e,o=__(r),a=__(s);if(o!==a)if(v_(o)&&v_(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)VL(e[r])&&i.push(r);i.length&&iI(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=zl[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=zl[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}};const S_=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(no.test(n)||n==="0")&&!n.startsWith("url("));function hI(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function fI(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=S_(r,e),a=S_(s,e);return!o||!a?!1:hI(n)||(t==="spring"||i0(t))&&i}const dI=n=>n!==null;function s0(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(dI),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const pI=40;class rb{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=kr.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>pI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&aI(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=kr.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!fI(e,i,r,s))if(o)this.options.duration=0;else{l&&l(s0(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const f=this.initPlayback(e,t);f!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...f},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Zt=(n,e,t)=>n+(e-n)*t;function r1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function mI({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=r1(l,a,n+1/3),s=r1(l,a,n),o=r1(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Tp(n,e){return t=>t>0?e:n}const s1=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},gI=[Jg,Xo,vl],vI=n=>gI.find(e=>e.test(n));function M_(n){const e=vI(n);if(!e)return!1;let t=e.parse(n);return e===vl&&(t=mI(t)),t}const b_=(n,e)=>{const t=M_(n),i=M_(e);if(!t||!i)return Tp(n,e);const r={...t};return s=>(r.red=s1(t.red,i.red,s),r.green=s1(t.green,i.green,s),r.blue=s1(t.blue,i.blue,s),r.alpha=Zt(t.alpha,i.alpha,s),Xo.transform(r))},yI=(n,e)=>t=>e(n(t)),bh=(...n)=>n.reduce(yI),nv=new Set(["none","hidden"]);function xI(n,e){return nv.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function _I(n,e){return t=>Zt(n,e,t)}function T2(n){return typeof n=="number"?_I:typeof n=="string"?o2(n)?Tp:qn.test(n)?b_:bI:Array.isArray(n)?sb:typeof n=="object"?qn.test(n)?b_:SI:Tp}function sb(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>T2(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function SI(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=T2(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function MI(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const bI=(n,e)=>{const t=no.createTransformer(e),i=Cu(n),r=Cu(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?nv.has(n)&&!r.values.length||nv.has(e)&&!i.values.length?xI(n,e):bh(sb(MI(i,r),r.values),t):Tp(n,e)};function ob(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Zt(n,e,t):T2(n)(n,e)}const wI=5;function ab(n,e,t){const i=Math.max(e-wI,0);return N6(t-n(i),e-i)}const cn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},o1=.001;function TI({duration:n=cn.duration,bounce:e=cn.bounce,velocity:t=cn.velocity,mass:i=cn.mass}){let r,s,o=1-e;o=gs(cn.minDamping,cn.maxDamping,o),n=gs(cn.minDuration,cn.maxDuration,Fr(n)),o<1?(r=c=>{const f=c*o,p=f*n,d=f-t,m=iv(c,o),v=Math.exp(-p);return o1-d/m*v},s=c=>{const p=c*o*n,d=p*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-p),_=iv(Math.pow(c,2),o);return(-r(c)+o1>0?-1:1)*((d-m)*v)/_}):(r=c=>{const f=Math.exp(-c*n),p=(c-t)*n+1;return-o1+f*p},s=c=>{const f=Math.exp(-c*n),p=(t-c)*(n*n);return f*p});const a=5/n,l=EI(r,s,a);if(n=Ur(n),isNaN(l))return{stiffness:cn.stiffness,damping:cn.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const AI=12;function EI(n,e,t){let i=t;for(let r=1;r<AI;r++)i=i-n(i)/e(i);return i}function iv(n,e){return n*Math.sqrt(1-e*e)}const CI=["duration","bounce"],PI=["stiffness","damping","mass"];function w_(n,e){return e.some(t=>n[t]!==void 0)}function RI(n){let e={velocity:cn.velocity,stiffness:cn.stiffness,damping:cn.damping,mass:cn.mass,isResolvedFromDuration:!1,...n};if(!w_(n,PI)&&w_(n,CI))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*gs(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:cn.mass,stiffness:r,damping:s}}else{const t=TI(n);e={...e,...t,mass:cn.mass},e.isResolvedFromDuration=!0}return e}function A2(n=cn.visualDuration,e=cn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:p,velocity:d,isResolvedFromDuration:m}=RI({...t,velocity:-Fr(t.velocity||0)}),v=d||0,_=c/(2*Math.sqrt(l*f)),x=o-s,y=Fr(Math.sqrt(l/f)),b=Math.abs(x)<5;i||(i=b?cn.restSpeed.granular:cn.restSpeed.default),r||(r=b?cn.restDelta.granular:cn.restDelta.default);let M;if(_<1){const P=iv(y,_);M=E=>{const L=Math.exp(-_*y*E);return o-L*((v+_*y*x)/P*Math.sin(P*E)+x*Math.cos(P*E))}}else if(_===1)M=P=>o-Math.exp(-y*P)*(x+(v+y*x)*P);else{const P=y*Math.sqrt(_*_-1);M=E=>{const L=Math.exp(-_*y*E),I=Math.min(P*E,300);return o-L*((v+_*y*x)*Math.sinh(I)+P*x*Math.cosh(I))/P}}const T={calculatedDuration:m&&p||null,next:P=>{const E=M(P);if(m)a.done=P>=p;else{let L=0;_<1&&(L=P===0?Ur(v):ab(M,P,E));const I=Math.abs(L)<=i,R=Math.abs(o-E)<=r;a.done=I&&R}return a.value=a.done?o:E,a},toString:()=>{const P=Math.min(p2(T),bp),E=A6(L=>T.next(P*L).value,P,30);return P+"ms "+E}};return T}function T_({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:f}){const p=n[0],d={done:!1,value:p},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let _=t*e;const x=p+_,y=o===void 0?x:o(x);y!==x&&(_=y-p);const b=I=>-_*Math.exp(-I/i),M=I=>y+b(I),T=I=>{const R=b(I),C=M(I);d.done=Math.abs(R)<=c,d.value=d.done?y:C};let P,E;const L=I=>{m(d.value)&&(P=I,E=A2({keyframes:[d.value,v(d.value)],velocity:ab(M,I,d.value),damping:r,stiffness:s,restDelta:c,restSpeed:f}))};return L(0),{calculatedDuration:null,next:I=>{let R=!1;return!E&&P===void 0&&(R=!0,T(I),L(I)),P!==void 0&&I>=P?E.next(I-P):(!R&&T(I),d)}}}const LI=Mh(.42,0,1,1),II=Mh(0,0,.58,1),lb=Mh(.42,0,.58,1),cb=n=>Array.isArray(n)&&typeof n[0]!="number",A_={linear:Di,easeIn:LI,easeInOut:lb,easeOut:II,circIn:_2,circInOut:$6,circOut:H6,backIn:x2,backInOut:V6,backOut:B6,anticipate:z6},E_=n=>{if(m2(n)){qg(n.length===4);const[e,t,i,r]=n;return Mh(e,t,i,r)}else if(typeof n=="string")return qg(A_[n]!==void 0),A_[n];return n};function DI(n,e,t){const i=[],r=t||ob,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Di:e;a=bh(l,a)}i.push(a)}return i}function NI(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(qg(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=DI(e,i,r),l=a.length,c=f=>{if(o&&f<n[0])return e[0];let p=0;if(l>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const d=da(n[p],n[p+1],f);return a[p](d)};return t?f=>c(gs(n[0],n[s-1],f)):c}function ub(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=da(0,e,i);n.push(Zt(t,1,r))}}function hb(n){const e=[0];return ub(e,n.length-1),e}function UI(n,e){return n.map(t=>t*e)}function FI(n,e){return n.map(()=>e||lb).splice(0,n.length-1)}function Ap({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=cb(i)?i.map(E_):E_(i),s={done:!1,value:e[0]},o=UI(t&&t.length===e.length?t:hb(e),n),a=NI(o,e,{ease:Array.isArray(r)?r:FI(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const OI=n=>{const e=({timestamp:t})=>n(t);return{start:()=>$t.update(e,!0),stop:()=>to(e),now:()=>Fn.isProcessing?Fn.timestamp:kr.now()}},kI={decay:T_,inertia:T_,tween:Ap,keyframes:Ap,spring:A2},BI=n=>n/100;class E2 extends rb{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||w2,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=i0(t)?t:kI[t]||Ap;let l,c;a!==Ap&&typeof e[0]!="number"&&(l=bh(BI,ob(e[0],e[1])),e=[0,100]);const f=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=p2(f));const{calculatedDuration:p}=f,d=p+r,m=d*(i+1)-r;return{generator:f,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:d,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:f,resolvedDuration:p}=i;if(this.startTime===null)return s.next(0);const{delay:d,repeat:m,repeatType:v,repeatDelay:_,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-f/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-d*(this.speed>=0?1:-1),b=this.speed>=0?y<0:y>f;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=f);let M=this.currentTime,T=s;if(m){const I=Math.min(this.currentTime,f)/p;let R=Math.floor(I),C=I%1;!C&&I>=1&&(C=1),C===1&&R--,R=Math.min(R,m+1),!!(R%2)&&(v==="reverse"?(C=1-C,_&&(C-=_/p)):v==="mirror"&&(T=o)),M=gs(0,1,C)*p}const P=b?{done:!1,value:l[0]}:T.next(M);a&&(P.value=a(P.value));let{done:E}=P;!b&&c!==null&&(E=this.speed>=0?this.currentTime>=f:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return L&&r!==void 0&&(P.value=s0(l,this.options,r)),x&&x(P.value),L&&this.finish(),P}get duration(){const{resolved:e}=this;return e?Fr(e.calculatedDuration):0}get time(){return Fr(this.currentTime)}set time(e){e=Ur(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Fr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=OI,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const VI=new Set(["opacity","clipPath","filter","transform"]);function zI(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const f=C6(a,r);return Array.isArray(f)&&(c.easing=f),n.animate(c,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const HI=Jy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Ep=10,$I=2e4;function GI(n){return i0(n.type)||n.type==="spring"||!E6(n.ease)}function WI(n,e){const t=new E2({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<$I;)i=t.sample(s),r.push(i.value),s+=Ep;return{times:void 0,keyframes:r,duration:s-Ep,ease:"linear"}}const fb={anticipate:z6,backInOut:V6,circInOut:$6};function jI(n){return n in fb}class C_ extends rb{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new ib(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&wp()&&jI(s)&&(s=fb[s]),GI(this.options)){const{onComplete:p,onUpdate:d,motionValue:m,element:v,..._}=this.options,x=WI(e,_);e=x.keyframes,e.length===1&&(e[1]=e[0]),i=x.duration,r=x.times,s=x.ease,o="keyframes"}const f=zI(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return f.startTime=c??this.calcStartTime(),this.pendingTimeline?(h_(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;a.set(s0(e,this.options,t)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Fr(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Fr(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Ur(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Di;const{animation:i}=t;h_(i,e)}return Di}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:f,onComplete:p,element:d,...m}=this.options,v=new E2({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),_=Ur(this.time);c.setWithVelocity(v.sample(_-Ep).value,v.sample(_).value,Ep)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return HI()&&i&&VI.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const XI={type:"spring",stiffness:500,damping:25,restSpeed:10},qI=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),YI={type:"keyframes",duration:.8},KI={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZI=(n,{keyframes:e})=>e.length>2?YI:Ma.has(n)?n.startsWith("scale")?qI(e[1]):XI:KI;function JI({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...f}){return!!Object.keys(f).length}const C2=(n,e,t,i={},r,s)=>o=>{const a=d2(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Ur(l);let f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};JI(a)||(f={...f,...ZI(n,f)}),f.duration&&(f.duration=Ur(f.duration)),f.repeatDelay&&(f.repeatDelay=Ur(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),Qy.skipAnimations&&(p=!0,f.duration=0,f.delay=0),p&&!s&&e.get()!==void 0){const d=s0(f.keyframes,a);if(d!==void 0)return $t.update(()=>{f.onUpdate(d),f.onComplete()}),new T6([])}return!s&&C_.supports(f)?new C_(f):new E2(f)};function QI({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function P2(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const p in l){const d=n.getValue(p,(s=n.latestValues[p])!==null&&s!==void 0?s:null),m=l[p];if(m===void 0||f&&QI(f,p))continue;const v={delay:t,...d2(o||{},p)};let _=!1;if(window.MotionHandoffAnimation){const y=U6(n);if(y){const b=window.MotionHandoffAnimation(y,p,$t);b!==null&&(v.startTime=b,_=!0)}}Zg(n,p),d.start(C2(p,d,m,n.shouldReduceMotion&&D6.has(p)?{type:!1}:v,n,_));const x=d.animation;x&&c.push(x)}return a&&Promise.all(c).then(()=>{$t.update(()=>{a&&UL(n,a)})}),c}function rv(n,e,t={}){var i;const r=n0(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(P2(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:d}=s;return eD(n,e,f+c,p,d,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,f]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>f())}else return Promise.all([o(),a(t.delay)])}function eD(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(tD).forEach((c,f)=>{c.notify("AnimationStart",e),o.push(rv(c,e,{...s,delay:t+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function tD(n,e){return n.sortNodePosition(e)}function nD(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>rv(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=rv(n,e,t);else{const r=typeof e=="function"?n0(n,e,t.custom):e;i=Promise.all(P2(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const iD=t2.length;function db(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?db(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<iD;t++){const i=t2[t],r=n.props[i];(Au(r)||r===!1)&&(e[i]=r)}return e}const rD=[...e2].reverse(),sD=e2.length;function oD(n){return e=>Promise.all(e.map(({animation:t,options:i})=>nD(n,t,i)))}function aD(n){let e=oD(n),t=P_(),i=!0;const r=l=>(c,f)=>{var p;const d=n0(n,f,l==="exit"?(p=n.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(d){const{transition:m,transitionEnd:v,..._}=d;c={...c,..._,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,f=db(n.parent)||{},p=[],d=new Set;let m={},v=1/0;for(let x=0;x<sD;x++){const y=rD[x],b=t[y],M=c[y]!==void 0?c[y]:f[y],T=Au(M),P=y===l?b.isActive:null;P===!1&&(v=x);let E=M===f[y]&&M!==c[y]&&T;if(E&&i&&n.manuallyAnimateOnMount&&(E=!1),b.protectedKeys={...m},!b.isActive&&P===null||!M&&!b.prevProp||e0(M)||typeof M=="boolean")continue;const L=lD(b.prevProp,M);let I=L||y===l&&b.isActive&&!E&&T||x>v&&T,R=!1;const C=Array.isArray(M)?M:[M];let D=C.reduce(r(y),{});P===!1&&(D={});const{prevResolvedValues:B={}}=b,G={...B,...D},z=q=>{I=!0,d.has(q)&&(R=!0,d.delete(q)),b.needsAnimating[q]=!0;const k=n.getValue(q);k&&(k.liveStyle=!1)};for(const q in G){const k=D[q],Q=B[q];if(m.hasOwnProperty(q))continue;let oe=!1;Yg(k)&&Yg(Q)?oe=!w6(k,Q):oe=k!==Q,oe?k!=null?z(q):d.add(q):k!==void 0&&d.has(q)?z(q):b.protectedKeys[q]=!0}b.prevProp=M,b.prevResolvedValues=D,b.isActive&&(m={...m,...D}),i&&n.blockInitialAnimation&&(I=!1),I&&(!(E&&L)||R)&&p.push(...C.map(q=>({animation:q,options:{type:y}})))}if(d.size){const x={};d.forEach(y=>{const b=n.getBaseTarget(y),M=n.getValue(y);M&&(M.liveStyle=!0),x[y]=b??null}),p.push({animation:x})}let _=!!p.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,c){var f;if(t[l].isActive===c)return Promise.resolve();(f=n.variantChildren)===null||f===void 0||f.forEach(d=>{var m;return(m=d.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const p=o(l);for(const d in t)t[d].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=P_(),i=!0}}}function lD(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!w6(e,n):!1}function Eo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P_(){return{animate:Eo(!0),whileInView:Eo(),whileHover:Eo(),whileTap:Eo(),whileDrag:Eo(),whileFocus:Eo(),exit:Eo()}}let co=class{constructor(e){this.isMounted=!1,this.node=e}update(){}},cD=class extends co{constructor(e){super(e),e.animationState||(e.animationState=aD(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();e0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}},uD=0,hD=class extends co{constructor(){super(...arguments),this.id=uD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}};const fD={animation:{Feature:cD},exit:{Feature:hD}};function Pu(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function wh(n){return{point:{x:n.pageX,y:n.pageY}}}const dD=n=>e=>g2(e)&&n(e,wh(e));function lu(n,e,t,i){return Pu(n,e,dD(t),i)}const R_=(n,e)=>Math.abs(n-e);function pD(n,e){const t=R_(n.x,e.x),i=R_(n.y,e.y);return Math.sqrt(t**2+i**2)}let pb=class{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=l1(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=pD(p.offset,{x:0,y:0})>=3;if(!d&&!m)return;const{point:v}=p,{timestamp:_}=Fn;this.history.push({...v,timestamp:_});const{onStart:x,onMove:y}=this.handlers;d||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,d)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=a1(d,this.transformPagePoint),$t.update(this.updatePoint,!0)},this.handlePointerUp=(p,d)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=l1(p.type==="pointercancel"?this.lastMoveEventInfo:a1(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(p,x),v&&v(p,x)},!g2(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=wh(e),a=a1(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Fn;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=t;f&&f(e,l1(a,this.history)),this.removeListeners=bh(lu(this.contextWindow,"pointermove",this.handlePointerMove),lu(this.contextWindow,"pointerup",this.handlePointerUp),lu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),to(this.updatePoint)}};function a1(n,e){return e?{point:e(n.point)}:n}function L_(n,e){return{x:n.x-e.x,y:n.y-e.y}}function l1({point:n},e){return{point:n,delta:L_(n,mb(e)),offset:L_(n,mD(e)),velocity:gD(e,.1)}}function mD(n){return n[0]}function mb(n){return n[n.length-1]}function gD(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=mb(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Ur(e)));)t--;if(!i)return{x:0,y:0};const s=Fr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const gb=1e-4,vD=1-gb,yD=1+gb,vb=.01,xD=0-vb,_D=0+vb;function Ui(n){return n.max-n.min}function SD(n,e,t){return Math.abs(n-e)<=t}function I_(n,e,t,i=.5){n.origin=i,n.originPoint=Zt(e.min,e.max,n.origin),n.scale=Ui(t)/Ui(e),n.translate=Zt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=vD&&n.scale<=yD||isNaN(n.scale))&&(n.scale=1),(n.translate>=xD&&n.translate<=_D||isNaN(n.translate))&&(n.translate=0)}function cu(n,e,t,i){I_(n.x,e.x,t.x,i?i.originX:void 0),I_(n.y,e.y,t.y,i?i.originY:void 0)}function D_(n,e,t){n.min=t.min+e.min,n.max=n.min+Ui(e)}function MD(n,e,t){D_(n.x,e.x,t.x),D_(n.y,e.y,t.y)}function N_(n,e,t){n.min=e.min-t.min,n.max=n.min+Ui(e)}function uu(n,e,t){N_(n.x,e.x,t.x),N_(n.y,e.y,t.y)}function bD(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?Zt(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?Zt(t,n,i.max):Math.min(n,t)),n}function U_(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function wD(n,{top:e,left:t,bottom:i,right:r}){return{x:U_(n.x,t,r),y:U_(n.y,e,i)}}function F_(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function TD(n,e){return{x:F_(n.x,e.x),y:F_(n.y,e.y)}}function AD(n,e){let t=.5;const i=Ui(n),r=Ui(e);return r>i?t=da(e.min,e.max-i,n.min):i>r&&(t=da(n.min,n.max-r,e.min)),gs(0,1,t)}function ED(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const sv=.35;function CD(n=sv){return n===!1?n=0:n===!0&&(n=sv),{x:O_(n,"left","right"),y:O_(n,"top","bottom")}}function O_(n,e,t){return{min:k_(n,e),max:k_(n,t)}}function k_(n,e){return typeof n=="number"?n:n[e]||0}const B_=()=>({translate:0,scale:1,origin:0,originPoint:0}),yl=()=>({x:B_(),y:B_()}),V_=()=>({min:0,max:0}),ln=()=>({x:V_(),y:V_()});function qi(n){return[n("x"),n("y")]}function yb({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function PD({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function RD(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function c1(n){return n===void 0||n===1}function ov({scale:n,scaleX:e,scaleY:t}){return!c1(n)||!c1(e)||!c1(t)}function zo(n){return ov(n)||xb(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function xb(n){return z_(n.x)||z_(n.y)}function z_(n){return n&&n!=="0%"}function Cp(n,e,t){const i=n-t,r=e*i;return t+r}function H_(n,e,t,i,r){return r!==void 0&&(n=Cp(n,r,i)),Cp(n,t,i)+e}function av(n,e=0,t=1,i,r){n.min=H_(n.min,e,t,i,r),n.max=H_(n.max,e,t,i,r)}function _b(n,{x:e,y:t}){av(n.x,e.translate,e.scale,e.originPoint),av(n.y,t.translate,t.scale,t.originPoint)}const $_=.999999999999,G_=1.0000000000001;function LD(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&_l(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_b(n,o)),i&&zo(s.latestValues)&&_l(n,s.latestValues))}e.x<G_&&e.x>$_&&(e.x=1),e.y<G_&&e.y>$_&&(e.y=1)}function xl(n,e){n.min=n.min+e,n.max=n.max+e}function W_(n,e,t,i,r=.5){const s=Zt(n.min,n.max,r);av(n,e,t,s,i)}function _l(n,e){W_(n.x,e.x,e.scaleX,e.scale,e.originX),W_(n.y,e.y,e.scaleY,e.scale,e.originY)}function Sb(n,e){return yb(RD(n.getBoundingClientRect(),e))}function ID(n,e,t){const i=Sb(n,t),{scroll:r}=e;return r&&(xl(i.x,r.offset.x),xl(i.y,r.offset.y)),i}const Mb=({current:n})=>n?n.ownerDocument.defaultView:null,DD=new WeakMap;let ND=class{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(wh(f).point)},s=(f,p)=>{const{drag:d,dragPropagation:m,onDragStart:v}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=RL(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qi(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Or.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const M=b.layout.layoutBox[x];M&&(y=Ui(M)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&$t.postRender(()=>v(f,p)),Zg(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(f,p)=>{const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:v,onDrag:_}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:x}=p;if(m&&this.currentDirection===null){this.currentDirection=UD(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,x),this.updateAxis("y",p.point,x),this.visualElement.render(),_&&_(f,p)},a=(f,p)=>this.stop(f,p),l=()=>qi(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new pb(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Mb(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&$t.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!qf(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=bD(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&gl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=wD(r.layoutBox,t):this.constraints=!1,this.elastic=CD(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&qi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ED(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!gl(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=ID(i,r.root,this.visualElement.getTransformPagePoint());let o=TD(r.layout.layoutBox,s);if(t){const a=t(PD(o));this.hasMutatedConstraints=!!a,a&&(o=yb(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=qi(f=>{if(!qf(f,t,this.currentDirection))return;let p=l&&l[f]||{};o&&(p={min:0,max:0});const d=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[f]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return Zg(this.visualElement,e),i.start(C2(e,i,0,t,this.visualElement,!1))}stopAnimation(){qi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){qi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){qi(t=>{const{drag:i}=this.getProps();if(!qf(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-Zt(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!gl(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};qi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=AD({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),qi(o=>{if(!qf(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Zt(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;DD.set(this.visualElement,this);const e=this.visualElement.current,t=lu(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();gl(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),$t.read(i);const o=Pu(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(qi(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=l[f].translate,p.set(p.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=sv,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}};function qf(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function UD(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}let FD=class extends co{constructor(e){super(e),this.removeGroupControls=Di,this.removeListeners=Di,this.controls=new ND(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Di}unmount(){this.removeGroupControls(),this.removeListeners()}};const j_=n=>(e,t)=>{n&&$t.postRender(()=>n(e,t))};let OD=class extends co{constructor(){super(...arguments),this.removePointerDownListener=Di}onPointerDown(e){this.session=new pb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Mb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:j_(e),onStart:j_(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&$t.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=lu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}};const tp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function X_(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Pc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(tt.test(n))n=parseFloat(n);else return n;const t=X_(n,e.target.x),i=X_(n,e.target.y);return`${t}% ${i}%`}},kD={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=no.parse(n);if(r.length>5)return i;const s=no.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Zt(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};let BD=class extends H.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;uL(VD),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),tp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||$t.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),i2.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}};function bb(n){const[e,t]=i6(),i=H.useContext(Tu);return ee.jsx(BD,{...n,layoutGroup:i,switchLayoutGroup:H.useContext(h6),isPresent:e,safeToRemove:t})}const VD={borderRadius:{...Pc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Pc,borderTopRightRadius:Pc,borderBottomLeftRadius:Pc,borderBottomRightRadius:Pc,boxShadow:kD};function wb(n,e,t){const i=Ln(n)?n:Vl(n);return i.start(C2("",i,e,t)),i.animation}function Tb(n){return n instanceof SVGElement&&n.tagName!=="svg"}const zD=(n,e)=>n.depth-e.depth;let HD=class{constructor(){this.children=[],this.isDirty=!1}add(e){v2(this.children,e),this.isDirty=!0}remove(e){r0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zD),this.isDirty=!1,this.children.forEach(e)}};function $D(n,e){const t=kr.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(to(i),n(s-e))};return $t.read(i,!0),()=>to(i)}const Ab=["TopLeft","TopRight","BottomLeft","BottomRight"],GD=Ab.length,q_=n=>typeof n=="string"?parseFloat(n):n,Y_=n=>typeof n=="number"||tt.test(n);function WD(n,e,t,i,r,s){r?(n.opacity=Zt(0,t.opacity!==void 0?t.opacity:1,jD(i)),n.opacityExit=Zt(e.opacity!==void 0?e.opacity:1,0,XD(i))):s&&(n.opacity=Zt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<GD;o++){const a=`border${Ab[o]}Radius`;let l=K_(e,a),c=K_(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Y_(l)===Y_(c)?(n[a]=Math.max(Zt(q_(l),q_(c),i),0),(Or.test(c)||Or.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=Zt(e.rotate||0,t.rotate||0,i))}function K_(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const jD=Eb(0,.5,H6),XD=Eb(.5,.95,Di);function Eb(n,e,t){return i=>i<n?0:i>e?1:t(da(n,e,i))}function Z_(n,e){n.min=e.min,n.max=e.max}function Wi(n,e){Z_(n.x,e.x),Z_(n.y,e.y)}function J_(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Q_(n,e,t,i,r){return n-=e,n=Cp(n,1/t,i),r!==void 0&&(n=Cp(n,1/r,i)),n}function qD(n,e=0,t=1,i=.5,r,s=n,o=n){if(Or.test(e)&&(e=parseFloat(e),e=Zt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Zt(s.min,s.max,i);n===s&&(a-=e),n.min=Q_(n.min,e,t,a,r),n.max=Q_(n.max,e,t,a,r)}function e5(n,e,[t,i,r],s,o){qD(n,e[t],e[i],e[r],e.scale,s,o)}const YD=["x","scaleX","originX"],KD=["y","scaleY","originY"];function t5(n,e,t,i){e5(n.x,e,YD,t?t.x:void 0,i?i.x:void 0),e5(n.y,e,KD,t?t.y:void 0,i?i.y:void 0)}function n5(n){return n.translate===0&&n.scale===1}function Cb(n){return n5(n.x)&&n5(n.y)}function i5(n,e){return n.min===e.min&&n.max===e.max}function ZD(n,e){return i5(n.x,e.x)&&i5(n.y,e.y)}function r5(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function Pb(n,e){return r5(n.x,e.x)&&r5(n.y,e.y)}function s5(n){return Ui(n.x)/Ui(n.y)}function o5(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}let JD=class{constructor(){this.members=[]}add(e){v2(this.members,e),e.scheduleRender()}remove(e){if(r0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}};function QD(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:f,rotateX:p,rotateY:d,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),f&&(i+=`rotate(${f}deg) `),p&&(i+=`rotateX(${p}deg) `),d&&(i+=`rotateY(${d}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Ho={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Qc=typeof window<"u"&&window.MotionDebug!==void 0,u1=["","X","Y","Z"],eN={visibility:"hidden"},a5=1e3;let tN=0;function h1(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function Rb(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=U6(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",$t,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&Rb(i)}function Lb({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=tN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Qc&&(Ho.totalNodes=Ho.resolvedTargetDeltas=Ho.recalculatedProjection=0),this.nodes.forEach(rN),this.nodes.forEach(cN),this.nodes.forEach(uN),this.nodes.forEach(sN),Qc&&window.MotionDebug.record(Ho)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new HD)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new y2),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Tb(o),this.instance=o;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let p;const d=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=$D(d,250),tp.hasAnimatedSinceResize&&(tp.hasAnimatedSinceResize=!1,this.nodes.forEach(c5))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:d,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||f.getDefaultTransition()||mN,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=f.getProps(),b=!this.targetLayout||!Pb(this.targetLayout,v)||m,M=!d&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||M||d&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,M);const T={...d2(_,"layout"),onPlay:x,onComplete:y};(f.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else d||c5(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,to(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hN),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Rb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(l5);return}this.isUpdating||this.nodes.forEach(aN),this.isUpdating=!1,this.nodes.forEach(lN),this.nodes.forEach(nN),this.nodes.forEach(iN),this.clearAllSnapshots();const a=kr.now();Fn.delta=gs(0,1e3/60,a-Fn.timestamp),Fn.timestamp=a,Fn.isProcessing=!0,t1.update.process(Fn),t1.preRender.process(Fn),t1.render.process(Fn),Fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,i2.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(oN),this.sharedNodes.forEach(fN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$t.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$t.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!Cb(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&(a||zo(this.latestValues)||f)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),gN(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return ln();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(vN))){const{scroll:f}=this.root;f&&(xl(l.x,f.offset.x),xl(l.y,f.offset.y))}return l}removeElementScroll(o){var a;const l=ln();if(Wi(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:p,options:d}=f;f!==this.root&&p&&d.layoutScroll&&(p.wasRoot&&Wi(l,o),xl(l.x,p.offset.x),xl(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=ln();Wi(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&_l(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),zo(f.latestValues)&&_l(l,f.latestValues)}return zo(this.latestValues)&&_l(l,this.latestValues),l}removeTransform(o){const a=ln();Wi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!zo(c.latestValues))continue;ov(c.latestValues)&&c.updateSnapshot();const f=ln(),p=c.measurePageBox();Wi(f,p),t5(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return zo(this.latestValues)&&t5(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:d}=this.options;if(!(!this.layout||!(p||d))){if(this.resolvedRelativeTargetAt=Fn.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),uu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),MD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Wi(this.target,this.layout.layoutBox),_b(this.target,this.targetDelta)):Wi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),uu(this.relativeTargetOrigin,this.target,m.target),Wi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Qc&&Ho.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ov(this.parent.latestValues)||xb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Fn.timestamp&&(c=!1),c)return;const{layout:f,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||p))return;Wi(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;LD(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ln());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J_(this.prevProjectionDelta.x,this.projectionDelta.x),J_(this.prevProjectionDelta.y,this.projectionDelta.y)),cu(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!o5(this.projectionDelta.x,this.prevProjectionDelta.x)||!o5(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),Qc&&Ho.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=yl(),this.projectionDelta=yl(),this.projectionDeltaWithTransform=yl()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},p=yl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=ln(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=m!==v,x=this.getStack(),y=!x||x.members.length<=1,b=!!(_&&!y&&this.options.crossfade===!0&&!this.path.some(pN));this.animationProgress=0;let M;this.mixTargetDelta=T=>{const P=T/1e3;u5(p.x,o.x,P),u5(p.y,o.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(uu(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dN(this.relativeTarget,this.relativeTargetOrigin,d,P),M&&ZD(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=ln()),Wi(M,this.relativeTarget)),_&&(this.animationValues=f,WD(f,c,this.latestValues,P,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(to(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$t.update(()=>{tp.hasAnimatedSinceResize=!0,this.currentAnimation=wb(0,a5,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(a5),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:f}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Ib(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||ln();const p=Ui(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const d=Ui(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Wi(a,l),_l(a,f),cu(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new JD),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&h1("z",o,c,this.animationValues);for(let f=0;f<u1.length;f++)h1(`rotate${u1[f]}`,o,c,this.animationValues),h1(`skew${u1[f]}`,o,c,this.animationValues);o.render();for(const f in c)o.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return eN;const c={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Qd(o==null?void 0:o.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const _={};return this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Qd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!zo(this.latestValues)&&(_.transform=f?f({},""):"none",this.hasProjected=!1),_}const d=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=QD(this.projectionDeltaWithTransform,this.treeScale,d),f&&(c.transform=f(d,c.transform));const{x:m,y:v}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=d.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:c.opacity=p===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const _ in Mp){if(d[_]===void 0)continue;const{correct:x,applyTo:y}=Mp[_],b=c.transform==="none"?d[_]:x(d[_],p);if(y){const M=y.length;for(let T=0;T<M;T++)c[y[T]]=b}else c[_]=b}return this.options.layoutId&&(c.pointerEvents=p===this?Qd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(l5),this.root.sharedNodes.clear()}}}function nN(n){n.updateLayout()}function iN(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?qi(p=>{const d=o?t.measuredBox[p]:t.layoutBox[p],m=Ui(d);d.min=i[p].min,d.max=d.min+m}):Ib(s,t.layoutBox,i)&&qi(p=>{const d=o?t.measuredBox[p]:t.layoutBox[p],m=Ui(i[p]);d.max=d.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+m)});const a=yl();cu(a,i,t.layoutBox);const l=yl();o?cu(l,n.applyTransform(r,!0),t.measuredBox):cu(l,i,t.layoutBox);const c=!Cb(a);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:d,layout:m}=p;if(d&&m){const v=ln();uu(v,t.layoutBox,d.layoutBox);const _=ln();uu(_,i,m.layoutBox),Pb(v,_)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=v,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function rN(n){Qc&&Ho.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function sN(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function oN(n){n.clearSnapshot()}function l5(n){n.clearMeasurements()}function aN(n){n.isLayoutDirty=!1}function lN(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function c5(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function cN(n){n.resolveTargetDelta()}function uN(n){n.calcProjection()}function hN(n){n.resetSkewAndRotation()}function fN(n){n.removeLeadSnapshot()}function u5(n,e,t){n.translate=Zt(e.translate,0,t),n.scale=Zt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function h5(n,e,t,i){n.min=Zt(e.min,t.min,i),n.max=Zt(e.max,t.max,i)}function dN(n,e,t,i){h5(n.x,e.x,t.x,i),h5(n.y,e.y,t.y,i)}function pN(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const mN={duration:.45,ease:[.4,0,.1,1]},f5=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),d5=f5("applewebkit/")&&!f5("chrome/")?Math.round:Di;function p5(n){n.min=d5(n.min),n.max=d5(n.max)}function gN(n){p5(n.x),p5(n.y)}function Ib(n,e,t){return n==="position"||n==="preserve-aspect"&&!SD(s5(e),s5(t),.2)}function vN(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const yN=Lb({attachResizeListener:(n,e)=>Pu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),f1={current:void 0},Db=Lb({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!f1.current){const n=new yN({});n.mount(window),n.setOptions({layoutScroll:!0}),f1.current=n}return f1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),xN={pan:{Feature:OD},drag:{Feature:FD,ProjectionNode:Db,MeasureLayout:bb}};function m5(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&$t.postRender(()=>s(e,wh(e)))}let _N=class extends co{mount(){const{current:e}=this.node;e&&(this.unmount=TL(e,t=>(m5(this.node,t,"Start"),i=>m5(this.node,i,"End"))))}unmount(){}},SN=class extends co{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=bh(Pu(this.node.current,"focus",()=>this.onFocus()),Pu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}};function g5(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&$t.postRender(()=>s(e,wh(e)))}let MN=class extends co{mount(){const{current:e}=this.node;e&&(this.unmount=PL(e,t=>(g5(this.node,t,"Start"),(i,{success:r})=>g5(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}};const lv=new WeakMap,d1=new WeakMap,bN=n=>{const e=lv.get(n.target);e&&e(n)},wN=n=>{n.forEach(bN)};function TN({root:n,...e}){const t=n||document;d1.has(t)||d1.set(t,{});const i=d1.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(wN,{root:n,...e})),i[r]}function AN(n,e,t){const i=TN(e);return lv.set(n,t),i.observe(n),()=>{lv.delete(n),i.unobserve(n)}}const EN={some:0,all:1};let CN=class extends co{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:EN[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),d=c?f:p;d&&d(l)};return AN(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(PN(e,t))&&this.startObserver()}unmount(){}};function PN({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const RN={inView:{Feature:CN},tap:{Feature:MN},focus:{Feature:SN},hover:{Feature:_N}},LN={layout:{ProjectionNode:Db,MeasureLayout:bb}},cv={current:null},Nb={current:!1};function IN(){if(Nb.current=!0,!!Ky)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>cv.current=n.matches;n.addListener(e),e()}else cv.current=!1}const DN=[...nb,qn,no],NN=n=>DN.find(tb(n)),Hl=new WeakMap;function UN(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Ln(r))n.addValue(i,r);else if(Ln(s))n.addValue(i,Vl(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Vl(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const v5=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ub=class{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=w2,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=kr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,$t.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:f}=o;this.onUpdate=f,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=t0(t),this.isVariantNode=c6(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in d){const v=d[m];l[m]!==void 0&&Ln(v)&&v.set(l[m],!1)}}mount(e){this.current=e,Hl.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),Nb.current||IN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cv.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Hl.delete(this.current),this.projection&&this.projection.unmount(),to(this.notifyUpdate),to(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Ma.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&$t.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Bl){const t=Bl[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<v5.length;i++){const r=v5[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=UN(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Vl(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Q6(r)||G6(r))?r=parseFloat(r):!NN(r)&&no.test(t)&&(r=K6(e,t)),this.setBaseTarget(e,Ln(r)?r.get():r)),Ln(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=s2(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ln(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new y2),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}},Fb=class extends Ub{constructor(){super(...arguments),this.KeyframeResolver=ib}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ln(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}};function FN(n){return window.getComputedStyle(n)}let Ob=class extends Fb{constructor(){super(...arguments),this.type="html",this.renderInstance=y6}readValueFromInstance(e,t){if(Ma.has(t)){const i=b2(t);return i&&i.default||0}else{const i=FN(e),r=(m6(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Sb(e,t)}build(e,t,i){l2(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return f2(e,t,i)}},kb=class extends Fb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ma.has(t)){const i=b2(t);return i&&i.default||0}return t=x6.has(t)?t:n2(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return M6(e,t,i)}build(e,t,i){c2(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){_6(e,t,i,r)}mount(e){this.isSVGTag=h2(e.tagName),super.mount(e)}};const ON=(n,e)=>r2(n)?new kb(e):new Ob(e,{allowProjection:n!==H.Fragment}),kN=xL({...fD,...RN,...xN,...LN},ON),Kt=NR(kN);function BN(n){const e=_h(()=>Vl(n)),{isStatic:t}=H.useContext(kl);if(t){const[,i]=H.useState(n);H.useEffect(()=>e.on("change",i),[])}return e}const Bb=(n,e,t)=>{const i=e-n;return((t-n)%i+i)%i+n};function Vb(n,e){return cb(n)?n[Bb(0,n.length,e)]:n}function R2(n){return typeof n=="object"&&!Array.isArray(n)}function zb(n,e,t,i){return typeof n=="string"&&R2(e)?R6(n,t,i):n instanceof NodeList?Array.from(n):Array.isArray(n)?n:[n]}function VN(n,e,t){return n*(e+1)}function y5(n,e,t,i){var r;return typeof e=="number"?e:e.startsWith("-")||e.startsWith("+")?Math.max(0,n+parseFloat(e)):e==="<"?t:(r=i.get(e))!==null&&r!==void 0?r:n}function zN(n,e,t){for(let i=0;i<n.length;i++){const r=n[i];r.at>e&&r.at<t&&(r0(n,r),i--)}}function HN(n,e,t,i,r,s){zN(n,r,s);for(let o=0;o<e.length;o++)n.push({value:e[o],at:Zt(r,s,i[o]),easing:Vb(t,o)})}function $N(n,e){for(let t=0;t<n.length;t++)n[t]=n[t]/(e+1)}function GN(n,e){return n.at===e.at?n.value===null?1:e.value===null?-1:0:n.at-e.at}const WN="easeInOut";function jN(n,{defaultTransition:e={},...t}={},i,r){const s=e.duration||.3,o=new Map,a=new Map,l={},c=new Map;let f=0,p=0,d=0;for(let m=0;m<n.length;m++){const v=n[m];if(typeof v=="string"){c.set(v,p);continue}else if(!Array.isArray(v)){c.set(v.name,y5(p,v.at,f,c));continue}let[_,x,y={}]=v;y.at!==void 0&&(p=y5(p,y.at,f,c));let b=0;const M=(T,P,E,L=0,I=0)=>{const R=XN(T),{delay:C=0,times:D=hb(R),type:B="keyframes",repeat:G,repeatType:z,repeatDelay:Z=0,...$}=P;let{ease:q=e.ease||"easeOut",duration:k}=P;const Q=typeof C=="function"?C(L,I):C,oe=R.length,he=i0(B)?B:r==null?void 0:r[B];if(oe<=2&&he){let ge=100;if(oe===2&&KN(R)){const et=R[1]-R[0];ge=Math.abs(et)}const Ee={...$};k!==void 0&&(Ee.duration=Ur(k));const xe=ML(Ee,ge,he);q=xe.ease,k=xe.duration}k??(k=s);const Pe=p+Q;D.length===1&&D[0]===0&&(D[1]=1);const st=D.length-R.length;if(st>0&&ub(D,st),R.length===1&&R.unshift(null),G){k=VN(k,G);const ge=[...R],Ee=[...D];q=Array.isArray(q)?[...q]:[q];const xe=[...q];for(let et=0;et<G;et++){R.push(...ge);for(let Je=0;Je<ge.length;Je++)D.push(Ee[Je]+(et+1)),q.push(Je===0?"linear":Vb(xe,Je-1))}$N(D,G)}const ae=Pe+k;HN(E,R,q,D,Pe,ae),b=Math.max(Q+k,b),d=Math.max(ae,d)};if(Ln(_)){const T=x5(_,a);M(x,y,_5("default",T))}else{const T=zb(_,x,i,l),P=T.length;for(let E=0;E<P;E++){x=x,y=y;const L=T[E],I=x5(L,a);for(const R in x)M(x[R],qN(y,R),_5(R,I),E,P)}}f=p,p+=b}return a.forEach((m,v)=>{for(const _ in m){const x=m[_];x.sort(GN);const y=[],b=[],M=[];for(let P=0;P<x.length;P++){const{at:E,value:L,easing:I}=x[P];y.push(L),b.push(da(0,d,E)),M.push(I||"easeOut")}b[0]!==0&&(b.unshift(0),y.unshift(y[0]),M.unshift(WN)),b[b.length-1]!==1&&(b.push(1),y.push(null)),o.has(v)||o.set(v,{keyframes:{},transition:{}});const T=o.get(v);T.keyframes[_]=y,T.transition[_]={...e,duration:d,ease:M,times:b,...t}}}),o}function x5(n,e){return!e.has(n)&&e.set(n,{}),e.get(n)}function _5(n,e){return e[n]||(e[n]=[]),e[n]}function XN(n){return Array.isArray(n)?n:[n]}function qN(n,e){return n&&n[e]?{...n,...n[e]}:{...n}}const YN=n=>typeof n=="number",KN=n=>n.every(YN);function ZN(n,e){return n in e}class JN extends Ub{constructor(){super(...arguments),this.type="object"}readValueFromInstance(e,t){if(ZN(t,e)){const i=e[t];if(typeof i=="string"||typeof i=="number")return i}}getBaseTargetFromProps(){}removeValueFromRenderState(e,t){delete t.output[e]}measureInstanceViewportBox(){return ln()}build(e,t){Object.assign(e.output,t)}renderInstance(e,{output:t}){Object.assign(e,t)}sortInstanceNodePosition(){return 0}}function QN(n){const e={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},t=Tb(n)?new kb(e):new Ob(e);t.mount(n),Hl.set(n,t)}function eU(n){const e={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},t=new JN(e);t.mount(n),Hl.set(n,t)}function tU(n,e){return Ln(n)||typeof n=="number"||typeof n=="string"&&!R2(e)}function Hb(n,e,t,i){const r=[];if(tU(n,e))r.push(wb(n,R2(e)&&e.default||e,t&&(t.default||t)));else{const s=zb(n,e,i),o=s.length;for(let a=0;a<o;a++){const l=s[a],c=l instanceof Element?QN:eU;Hl.has(l)||c(l);const f=Hl.get(l),p={...t};"delay"in p&&typeof p.delay=="function"&&(p.delay=p.delay(a,o)),r.push(...P2(f,{...e,transition:p},{}))}}return r}function nU(n,e,t){const i=[];return jN(n,e,t,{spring:A2}).forEach(({keyframes:s,transition:o},a)=>{i.push(...Hb(a,s,o))}),i}function iU(n){return Array.isArray(n)&&n.some(Array.isArray)}function rU(n){function e(t,i,r){let s=[];return iU(t)?s=nU(t,i,n):s=Hb(t,i,r,n),new T6(s)}return e}const sU=rU();function oU(...n){const e=H.useRef(0),[t,i]=H.useState(n[e.current]),r=H.useCallback(s=>{e.current=typeof s!="number"?Bb(0,n.length,e.current+1):s,i(n[e.current])},[n.length,...n]);return[t,r]}var aU=({children:n,navigate:e,disableAnimation:t,useHref:i,disableRipple:r=!1,skipFramerMotionAnimations:s=t,reducedMotion:o="never",validationBehavior:a,locale:l="en-US",labelPlacement:c,defaultDates:f,createCalendar:p,spinnerVariant:d,...m})=>{let v=n;e&&(v=ee.jsx(zP,{navigate:e,useHref:i,children:v}));const _=H.useMemo(()=>(t&&s&&(Qy.skipAnimations=!0),{createCalendar:p,defaultDates:f,disableAnimation:t,disableRipple:r,validationBehavior:a,labelPlacement:c,spinnerVariant:d}),[p,f==null?void 0:f.maxDate,f==null?void 0:f.minDate,t,r,a,c,d]);return ee.jsx(fP,{value:_,children:ee.jsx(AP,{locale:l,children:ee.jsx(DR,{reducedMotion:o,children:ee.jsx(gR,{...m,children:v})})})})};function $b(n){return H.forwardRef(n)}var Gb=(n,e,t=!0)=>{if(!e)return[n,{}];const i=e.reduce((r,s)=>s in n?{...r,[s]:n[s]}:r,{});return t?[Object.keys(n).filter(s=>!e.includes(s)).reduce((s,o)=>({...s,[o]:n[o]}),{}),i]:[n,i]},lU={default:"bg-default text-default-foreground",primary:"bg-primary text-primary-foreground",secondary:"bg-secondary text-secondary-foreground",success:"bg-success text-success-foreground",warning:"bg-warning text-warning-foreground",danger:"bg-danger text-danger-foreground",foreground:"bg-foreground text-background"},cU={default:"shadow-lg shadow-default/50 bg-default text-default-foreground",primary:"shadow-lg shadow-primary/40 bg-primary text-primary-foreground",secondary:"shadow-lg shadow-secondary/40 bg-secondary text-secondary-foreground",success:"shadow-lg shadow-success/40 bg-success text-success-foreground",warning:"shadow-lg shadow-warning/40 bg-warning text-warning-foreground",danger:"shadow-lg shadow-danger/40 bg-danger text-danger-foreground",foreground:"shadow-lg shadow-foreground/40 bg-foreground text-background"},uU={default:"bg-transparent border-default text-foreground",primary:"bg-transparent border-primary text-primary",secondary:"bg-transparent border-secondary text-secondary",success:"bg-transparent border-success text-success",warning:"bg-transparent border-warning text-warning",danger:"bg-transparent border-danger text-danger",foreground:"bg-transparent border-foreground text-foreground"},hU={default:"bg-default/40 text-default-700",primary:"bg-primary/20 text-primary-600",secondary:"bg-secondary/20 text-secondary-600",success:"bg-success/20 text-success-700 dark:text-success",warning:"bg-warning/20 text-warning-700 dark:text-warning",danger:"bg-danger/20 text-danger-600 dark:text-danger-500",foreground:"bg-foreground/10 text-foreground"},fU={default:"border-default bg-default-100 text-default-foreground",primary:"border-default bg-default-100 text-primary",secondary:"border-default bg-default-100 text-secondary",success:"border-default bg-default-100 text-success",warning:"border-default bg-default-100 text-warning",danger:"border-default bg-default-100 text-danger",foreground:"border-default bg-default-100 text-foreground"},dU={default:"bg-transparent text-default-foreground",primary:"bg-transparent text-primary",secondary:"bg-transparent text-secondary",success:"bg-transparent text-success",warning:"bg-transparent text-warning",danger:"bg-transparent text-danger",foreground:"bg-transparent text-foreground"},pU={default:"border-default text-default-foreground",primary:"border-primary text-primary",secondary:"border-secondary text-secondary",success:"border-success text-success",warning:"border-warning text-warning",danger:"border-danger text-danger",foreground:"border-foreground text-foreground hover:!bg-foreground"},Tt={solid:lU,shadow:cU,bordered:uU,flat:hU,faded:fU,light:dU,ghost:pU},Yf=["small","medium","large"],S5={theme:{opacity:["disabled"],spacing:["divider"],borderWidth:Yf,borderRadius:Yf},classGroups:{shadow:[{shadow:Yf}],"font-size":[{text:["tiny",...Yf]}],"bg-image":["bg-stripe-gradient-default","bg-stripe-gradient-primary","bg-stripe-gradient-secondary","bg-stripe-gradient-success","bg-stripe-gradient-warning","bg-stripe-gradient-danger"]}},M5=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,vi=n=>!n||typeof n!="object"||Object.keys(n).length===0,mU=(n,e)=>JSON.stringify(n)===JSON.stringify(e);function Wb(n,e){n.forEach(function(t){Array.isArray(t)?Wb(t,e):e.push(t)})}function jb(n){let e=[];return Wb(n,e),e}var Xb=(...n)=>jb(n).filter(Boolean),qb=(n,e)=>{let t={},i=Object.keys(n),r=Object.keys(e);for(let s of i)if(r.includes(s)){let o=n[s],a=e[s];Array.isArray(o)||Array.isArray(a)?t[s]=Xb(a,o):typeof o=="object"&&typeof a=="object"?t[s]=qb(o,a):t[s]=a+" "+o}else t[s]=n[s];for(let s of r)i.includes(s)||(t[s]=e[s]);return t},b5=n=>!n||typeof n!="string"?n:n.replace(/\s+/g," ").trim();const L2="-",gU=n=>{const e=yU(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:o=>{const a=o.split(L2);return a[0]===""&&a.length!==1&&a.shift(),Yb(a,e)||vU(o)},getConflictingClassGroupIds:(o,a)=>{const l=t[o]||[];return a&&i[o]?[...l,...i[o]]:l}}},Yb=(n,e)=>{var o;if(n.length===0)return e.classGroupId;const t=n[0],i=e.nextPart.get(t),r=i?Yb(n.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const s=n.join(L2);return(o=e.validators.find(({validator:a})=>a(s)))==null?void 0:o.classGroupId},w5=/^\[(.+)\]$/,vU=n=>{if(w5.test(n)){const e=w5.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},yU=n=>{const{theme:e,prefix:t}=n,i={nextPart:new Map,validators:[]};return _U(Object.entries(n.classGroups),t).forEach(([s,o])=>{uv(o,i,s,e)}),i},uv=(n,e,t,i)=>{n.forEach(r=>{if(typeof r=="string"){const s=r===""?e:T5(e,r);s.classGroupId=t;return}if(typeof r=="function"){if(xU(r)){uv(r(i),e,t,i);return}e.validators.push({validator:r,classGroupId:t});return}Object.entries(r).forEach(([s,o])=>{uv(o,T5(e,s),t,i)})})},T5=(n,e)=>{let t=n;return e.split(L2).forEach(i=>{t.nextPart.has(i)||t.nextPart.set(i,{nextPart:new Map,validators:[]}),t=t.nextPart.get(i)}),t},xU=n=>n.isThemeGetter,_U=(n,e)=>e?n.map(([t,i])=>{const r=i.map(s=>typeof s=="string"?e+s:typeof s=="object"?Object.fromEntries(Object.entries(s).map(([o,a])=>[e+o,a])):s);return[t,r]}):n,SU=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,i=new Map;const r=(s,o)=>{t.set(s,o),e++,e>n&&(e=0,i=t,t=new Map)};return{get(s){let o=t.get(s);if(o!==void 0)return o;if((o=i.get(s))!==void 0)return r(s,o),o},set(s,o){t.has(s)?t.set(s,o):r(s,o)}}},Kb="!",MU=n=>{const{separator:e,experimentalParseClassName:t}=n,i=e.length===1,r=e[0],s=e.length,o=a=>{const l=[];let c=0,f=0,p;for(let x=0;x<a.length;x++){let y=a[x];if(c===0){if(y===r&&(i||a.slice(x,x+s)===e)){l.push(a.slice(f,x)),f=x+s;continue}if(y==="/"){p=x;continue}}y==="["?c++:y==="]"&&c--}const d=l.length===0?a:a.substring(f),m=d.startsWith(Kb),v=m?d.substring(1):d,_=p&&p>f?p-f:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:_}};return t?a=>t({className:a,parseClassName:o}):o},bU=n=>{if(n.length<=1)return n;const e=[];let t=[];return n.forEach(i=>{i[0]==="["?(e.push(...t.sort(),i),t=[]):t.push(i)}),e.push(...t.sort()),e},wU=n=>({cache:SU(n.cacheSize),parseClassName:MU(n),...gU(n)}),TU=/\s+/,AU=(n,e)=>{const{parseClassName:t,getClassGroupId:i,getConflictingClassGroupIds:r}=e,s=[],o=n.trim().split(TU);let a="";for(let l=o.length-1;l>=0;l-=1){const c=o[l],{modifiers:f,hasImportantModifier:p,baseClassName:d,maybePostfixModifierPosition:m}=t(c);let v=!!m,_=i(v?d.substring(0,m):d);if(!_){if(!v){a=c+(a.length>0?" "+a:a);continue}if(_=i(d),!_){a=c+(a.length>0?" "+a:a);continue}v=!1}const x=bU(f).join(":"),y=p?x+Kb:x,b=y+_;if(s.includes(b))continue;s.push(b);const M=r(_,v);for(let T=0;T<M.length;++T){const P=M[T];s.push(y+P)}a=c+(a.length>0?" "+a:a)}return a};function EU(){let n=0,e,t,i="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Zb(e))&&(i&&(i+=" "),i+=t);return i}const Zb=n=>{if(typeof n=="string")return n;let e,t="";for(let i=0;i<n.length;i++)n[i]&&(e=Zb(n[i]))&&(t&&(t+=" "),t+=e);return t};function hv(n,...e){let t,i,r,s=o;function o(l){const c=e.reduce((f,p)=>p(f),n());return t=wU(c),i=t.cache.get,r=t.cache.set,s=a,a(l)}function a(l){const c=i(l);if(c)return c;const f=AU(l,t);return r(l,f),f}return function(){return s(EU.apply(null,arguments))}}const Gt=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},Jb=/^\[(?:([a-z-]+):)?(.+)\]$/i,CU=/^\d+\/\d+$/,PU=new Set(["px","full","screen"]),RU=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,LU=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,IU=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DU=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NU=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,es=n=>Dl(n)||PU.has(n)||CU.test(n),Ns=n=>Jl(n,"length",HU),Dl=n=>!!n&&!Number.isNaN(Number(n)),p1=n=>Jl(n,"number",Dl),Rc=n=>!!n&&Number.isInteger(Number(n)),UU=n=>n.endsWith("%")&&Dl(n.slice(0,-1)),gt=n=>Jb.test(n),Us=n=>RU.test(n),FU=new Set(["length","size","percentage"]),OU=n=>Jl(n,FU,Qb),kU=n=>Jl(n,"position",Qb),BU=new Set(["image","url"]),VU=n=>Jl(n,BU,GU),zU=n=>Jl(n,"",$U),Lc=()=>!0,Jl=(n,e,t)=>{const i=Jb.exec(n);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):t(i[2]):!1},HU=n=>LU.test(n)&&!IU.test(n),Qb=()=>!1,$U=n=>DU.test(n),GU=n=>NU.test(n),fv=()=>{const n=Gt("colors"),e=Gt("spacing"),t=Gt("blur"),i=Gt("brightness"),r=Gt("borderColor"),s=Gt("borderRadius"),o=Gt("borderSpacing"),a=Gt("borderWidth"),l=Gt("contrast"),c=Gt("grayscale"),f=Gt("hueRotate"),p=Gt("invert"),d=Gt("gap"),m=Gt("gradientColorStops"),v=Gt("gradientColorStopPositions"),_=Gt("inset"),x=Gt("margin"),y=Gt("opacity"),b=Gt("padding"),M=Gt("saturate"),T=Gt("scale"),P=Gt("sepia"),E=Gt("skew"),L=Gt("space"),I=Gt("translate"),R=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",gt,e],B=()=>[gt,e],G=()=>["",es,Ns],z=()=>["auto",Dl,gt],Z=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],$=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],k=()=>["start","end","center","between","around","evenly","stretch"],Q=()=>["","0",gt],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[Dl,gt];return{cacheSize:500,separator:":",theme:{colors:[Lc],spacing:[es,Ns],blur:["none","",Us,gt],brightness:he(),borderColor:[n],borderRadius:["none","","full",Us,gt],borderSpacing:B(),borderWidth:G(),contrast:he(),grayscale:Q(),hueRotate:he(),invert:Q(),gap:B(),gradientColorStops:[n],gradientColorStopPositions:[UU,Ns],inset:D(),margin:D(),opacity:he(),padding:B(),saturate:he(),scale:he(),sepia:Q(),skew:he(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",gt]}],container:["container"],columns:[{columns:[Us]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Z(),gt]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[_]}],"inset-x":[{"inset-x":[_]}],"inset-y":[{"inset-y":[_]}],start:[{start:[_]}],end:[{end:[_]}],top:[{top:[_]}],right:[{right:[_]}],bottom:[{bottom:[_]}],left:[{left:[_]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Rc,gt]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",gt]}],grow:[{grow:Q()}],shrink:[{shrink:Q()}],order:[{order:["first","last","none",Rc,gt]}],"grid-cols":[{"grid-cols":[Lc]}],"col-start-end":[{col:["auto",{span:["full",Rc,gt]},gt]}],"col-start":[{"col-start":z()}],"col-end":[{"col-end":z()}],"grid-rows":[{"grid-rows":[Lc]}],"row-start-end":[{row:["auto",{span:[Rc,gt]},gt]}],"row-start":[{"row-start":z()}],"row-end":[{"row-end":z()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",gt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",gt]}],gap:[{gap:[d]}],"gap-x":[{"gap-x":[d]}],"gap-y":[{"gap-y":[d]}],"justify-content":[{justify:["normal",...k()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...k(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...k(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[L]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[L]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",gt,e]}],"min-w":[{"min-w":[gt,e,"min","max","fit"]}],"max-w":[{"max-w":[gt,e,"none","full","min","max","fit","prose",{screen:[Us]},Us]}],h:[{h:[gt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[gt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[gt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[gt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Us,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",p1]}],"font-family":[{font:[Lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",gt]}],"line-clamp":[{"line-clamp":["none",Dl,p1]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",es,gt]}],"list-image":[{"list-image":["none",gt]}],"list-style-type":[{list:["none","disc","decimal",gt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",es,Ns]}],"underline-offset":[{"underline-offset":["auto",es,gt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Z(),kU]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",OU]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},VU]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...$(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:$()}],"border-color":[{border:[r]}],"border-color-x":[{"border-x":[r]}],"border-color-y":[{"border-y":[r]}],"border-color-s":[{"border-s":[r]}],"border-color-e":[{"border-e":[r]}],"border-color-t":[{"border-t":[r]}],"border-color-r":[{"border-r":[r]}],"border-color-b":[{"border-b":[r]}],"border-color-l":[{"border-l":[r]}],"divide-color":[{divide:[r]}],"outline-style":[{outline:["",...$()]}],"outline-offset":[{"outline-offset":[es,gt]}],"outline-w":[{outline:[es,Ns]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[es,Ns]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",Us,zU]}],"shadow-color":[{shadow:[Lc]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[i]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Us,gt]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[f]}],invert:[{invert:[p]}],saturate:[{saturate:[M]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[f]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[M]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",gt]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",gt]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",gt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[T]}],"scale-x":[{"scale-x":[T]}],"scale-y":[{"scale-y":[T]}],rotate:[{rotate:[Rc,gt]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",gt]}],accent:[{accent:["auto",n]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",gt]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",gt]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[es,Ns,p1]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},WU=(n,{cacheSize:e,prefix:t,separator:i,experimentalParseClassName:r,extend:s={},override:o={}})=>{eu(n,"cacheSize",e),eu(n,"prefix",t),eu(n,"separator",i),eu(n,"experimentalParseClassName",r);for(const a in o)jU(n[a],o[a]);for(const a in s)XU(n[a],s[a]);return n},eu=(n,e,t)=>{t!==void 0&&(n[e]=t)},jU=(n,e)=>{if(e)for(const t in e)eu(n,t,e[t])},XU=(n,e)=>{if(e)for(const t in e){const i=e[t];i!==void 0&&(n[t]=(n[t]||[]).concat(i))}},qU=(n,...e)=>typeof n=="function"?hv(fv,n,...e):hv(()=>WU(fv(),n),...e),ew=hv(fv);var YU={twMerge:!0,twMergeConfig:{},responsiveVariants:!1},tw=n=>n||void 0,Ru=(...n)=>tw(jb(n).filter(Boolean).join(" ")),m1=null,as={},dv=!1,Ic=(...n)=>e=>e.twMerge?((!m1||dv)&&(dv=!1,m1=vi(as)?ew:qU({...as,extend:{theme:as.theme,classGroups:as.classGroups,conflictingClassGroupModifiers:as.conflictingClassGroupModifiers,conflictingClassGroups:as.conflictingClassGroups,...as.extend}})),tw(m1(Ru(n)))):Ru(n),A5=(n,e)=>{for(let t in e)n.hasOwnProperty(t)?n[t]=Ru(n[t],e[t]):n[t]=e[t];return n},KU=(n,e)=>{let{extend:t=null,slots:i={},variants:r={},compoundVariants:s=[],compoundSlots:o=[],defaultVariants:a={}}=n,l={...YU,...e},c=t!=null&&t.base?Ru(t.base,n==null?void 0:n.base):n==null?void 0:n.base,f=t!=null&&t.variants&&!vi(t.variants)?qb(r,t.variants):r,p=t!=null&&t.defaultVariants&&!vi(t.defaultVariants)?{...t.defaultVariants,...a}:a;!vi(l.twMergeConfig)&&!mU(l.twMergeConfig,as)&&(dv=!0,as=l.twMergeConfig);let d=vi(t==null?void 0:t.slots),m=vi(i)?{}:{base:Ru(n==null?void 0:n.base,d&&(t==null?void 0:t.base)),...i},v=d?m:A5({...t==null?void 0:t.slots},vi(m)?{base:n==null?void 0:n.base}:m),_=vi(t==null?void 0:t.compoundVariants)?s:Xb(t==null?void 0:t.compoundVariants,s),x=b=>{if(vi(f)&&vi(i)&&d)return Ic(c,b==null?void 0:b.class,b==null?void 0:b.className)(l);if(_&&!Array.isArray(_))throw new TypeError(`The "compoundVariants" prop must be an array. Received: ${typeof _}`);if(o&&!Array.isArray(o))throw new TypeError(`The "compoundSlots" prop must be an array. Received: ${typeof o}`);let M=(B,G,z=[],Z)=>{let $=z;if(typeof G=="string")$=$.concat(b5(G).split(" ").map(q=>`${B}:${q}`));else if(Array.isArray(G))$=$.concat(G.reduce((q,k)=>q.concat(`${B}:${k}`),[]));else if(typeof G=="object"&&typeof Z=="string"){for(let q in G)if(G.hasOwnProperty(q)&&q===Z){let k=G[q];if(k&&typeof k=="string"){let Q=b5(k);$[Z]?$[Z]=$[Z].concat(Q.split(" ").map(oe=>`${B}:${oe}`)):$[Z]=Q.split(" ").map(oe=>`${B}:${oe}`)}else Array.isArray(k)&&k.length>0&&($[Z]=k.reduce((Q,oe)=>Q.concat(`${B}:${oe}`),[]))}}return $},T=(B,G=f,z=null,Z=null)=>{var $;let q=G[B];if(!q||vi(q))return null;let k=($=Z==null?void 0:Z[B])!=null?$:b==null?void 0:b[B];if(k===null)return null;let Q=M5(k),oe=Array.isArray(l.responsiveVariants)&&l.responsiveVariants.length>0||l.responsiveVariants===!0,he=p==null?void 0:p[B],Pe=[];if(typeof Q=="object"&&oe)for(let[ge,Ee]of Object.entries(Q)){let xe=q[Ee];if(ge==="initial"){he=Ee;continue}Array.isArray(l.responsiveVariants)&&!l.responsiveVariants.includes(ge)||(Pe=M(ge,xe,Pe,z))}let st=Q!=null&&typeof Q!="object"?Q:M5(he),ae=q[st||"false"];return typeof Pe=="object"&&typeof z=="string"&&Pe[z]?A5(Pe,ae):Pe.length>0?(Pe.push(ae),z==="base"?Pe.join(" "):Pe):ae},P=()=>f?Object.keys(f).map(B=>T(B,f)):null,E=(B,G)=>{if(!f||typeof f!="object")return null;let z=new Array;for(let Z in f){let $=T(Z,f,B,G),q=B==="base"&&typeof $=="string"?$:$&&$[B];q&&(z[z.length]=q)}return z},L={};for(let B in b)b[B]!==void 0&&(L[B]=b[B]);let I=(B,G)=>{var z;let Z=typeof(b==null?void 0:b[B])=="object"?{[B]:(z=b[B])==null?void 0:z.initial}:{};return{...p,...L,...Z,...G}},R=(B=[],G)=>{let z=[];for(let{class:Z,className:$,...q}of B){let k=!0;for(let[Q,oe]of Object.entries(q)){let he=I(Q,G)[Q];if(Array.isArray(oe)){if(!oe.includes(he)){k=!1;break}}else{let Pe=st=>st==null||st===!1;if(Pe(oe)&&Pe(he))continue;if(he!==oe){k=!1;break}}}k&&(Z&&z.push(Z),$&&z.push($))}return z},C=B=>{let G=R(_,B);if(!Array.isArray(G))return G;let z={};for(let Z of G)if(typeof Z=="string"&&(z.base=Ic(z.base,Z)(l)),typeof Z=="object")for(let[$,q]of Object.entries(Z))z[$]=Ic(z[$],q)(l);return z},D=B=>{if(o.length<1)return null;let G={};for(let{slots:z=[],class:Z,className:$,...q}of o){if(!vi(q)){let k=!0;for(let Q of Object.keys(q)){let oe=I(Q,B)[Q];if(oe===void 0||(Array.isArray(q[Q])?!q[Q].includes(oe):q[Q]!==oe)){k=!1;break}}if(!k)continue}for(let k of z)G[k]=G[k]||[],G[k].push([Z,$])}return G};if(!vi(i)||!d){let B={};if(typeof v=="object"&&!vi(v))for(let G of Object.keys(v))B[G]=z=>{var Z,$;return Ic(v[G],E(G,z),((Z=C(z))!=null?Z:[])[G],(($=D(z))!=null?$:[])[G],z==null?void 0:z.class,z==null?void 0:z.className)(l)};return B}return Ic(c,P(),R(_),b==null?void 0:b.class,b==null?void 0:b.className)(l)},y=()=>{if(!(!f||typeof f!="object"))return Object.keys(f)};return x.variantKeys=y(),x.extend=t,x.base=c,x.slots=v,x.variants=f,x.defaultVariants=p,x.compoundSlots=o,x.compoundVariants=_,x},nw=(n,e)=>{var t,i,r;return KU(n,{...e,twMerge:(t=void 0)!=null?t:!0,twMergeConfig:{theme:{...(i=void 0)==null?void 0:i.theme,...S5.theme},classGroups:{...(r=void 0)==null?void 0:r.classGroups,...S5.classGroups}}})},ZU=["outline-none","ring-2","ring-focus","ring-offset-2","ring-offset-background"],JU=["data-[top-scroll=true]:[mask-image:linear-gradient(0deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[bottom-scroll=true]:[mask-image:linear-gradient(180deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[top-bottom-scroll=true]:[mask-image:linear-gradient(#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],QU=["data-[left-scroll=true]:[mask-image:linear-gradient(270deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[right-scroll=true]:[mask-image:linear-gradient(90deg,#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]","data-[left-right-scroll=true]:[mask-image:linear-gradient(to_right,#000,#000,transparent_0,#000_var(--scroll-shadow-size),#000_calc(100%_-_var(--scroll-shadow-size)),transparent)]"],E5=nw({base:[],variants:{orientation:{vertical:["overflow-y-auto",...JU],horizontal:["overflow-x-auto",...QU]},hideScrollBar:{true:"scrollbar-hide",false:""}},defaultVariants:{orientation:"vertical",hideScrollBar:!1}}),C5=nw({slots:{base:["relative","max-w-fit","min-w-min","inline-flex","items-center","justify-between","box-border","whitespace-nowrap"],content:"flex-1 text-inherit font-normal",dot:["w-2","h-2","ml-1","rounded-full"],avatar:"flex-shrink-0",closeButton:["z-10","appearance-none","outline-none","select-none","transition-opacity","opacity-70","hover:opacity-100","cursor-pointer","active:opacity-disabled","tap-highlight-transparent"]},variants:{variant:{solid:{},bordered:{base:"border-medium bg-transparent"},light:{base:"bg-transparent"},flat:{},faded:{base:"border-medium"},shadow:{},dot:{base:"border-medium border-default text-foreground bg-transparent"}},color:{default:{dot:"bg-default-400"},primary:{dot:"bg-primary"},secondary:{dot:"bg-secondary"},success:{dot:"bg-success"},warning:{dot:"bg-warning"},danger:{dot:"bg-danger"}},size:{sm:{base:"px-1 h-6 text-tiny",content:"px-1",closeButton:"text-medium",avatar:"w-4 h-4"},md:{base:"px-1 h-7 text-small",content:"px-2",closeButton:"text-large",avatar:"w-5 h-5"},lg:{base:"px-2 h-8 text-medium",content:"px-2",closeButton:"text-xl",avatar:"w-6 h-6"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"},full:{base:"rounded-full"}},isOneChar:{true:{},false:{}},isCloseable:{true:{},false:{}},hasStartContent:{true:{}},hasEndContent:{true:{}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},isCloseButtonFocusVisible:{true:{closeButton:[...ZU,"ring-1","rounded-full"]}}},defaultVariants:{variant:"solid",color:"default",size:"md",radius:"full",isDisabled:!1},compoundVariants:[{variant:"solid",color:"default",class:{base:Tt.solid.default}},{variant:"solid",color:"primary",class:{base:Tt.solid.primary}},{variant:"solid",color:"secondary",class:{base:Tt.solid.secondary}},{variant:"solid",color:"success",class:{base:Tt.solid.success}},{variant:"solid",color:"warning",class:{base:Tt.solid.warning}},{variant:"solid",color:"danger",class:{base:Tt.solid.danger}},{variant:"shadow",color:"default",class:{base:Tt.shadow.default}},{variant:"shadow",color:"primary",class:{base:Tt.shadow.primary}},{variant:"shadow",color:"secondary",class:{base:Tt.shadow.secondary}},{variant:"shadow",color:"success",class:{base:Tt.shadow.success}},{variant:"shadow",color:"warning",class:{base:Tt.shadow.warning}},{variant:"shadow",color:"danger",class:{base:Tt.shadow.danger}},{variant:"bordered",color:"default",class:{base:Tt.bordered.default}},{variant:"bordered",color:"primary",class:{base:Tt.bordered.primary}},{variant:"bordered",color:"secondary",class:{base:Tt.bordered.secondary}},{variant:"bordered",color:"success",class:{base:Tt.bordered.success}},{variant:"bordered",color:"warning",class:{base:Tt.bordered.warning}},{variant:"bordered",color:"danger",class:{base:Tt.bordered.danger}},{variant:"flat",color:"default",class:{base:Tt.flat.default}},{variant:"flat",color:"primary",class:{base:Tt.flat.primary}},{variant:"flat",color:"secondary",class:{base:Tt.flat.secondary}},{variant:"flat",color:"success",class:{base:Tt.flat.success}},{variant:"flat",color:"warning",class:{base:Tt.flat.warning}},{variant:"flat",color:"danger",class:{base:Tt.flat.danger}},{variant:"faded",color:"default",class:{base:Tt.faded.default}},{variant:"faded",color:"primary",class:{base:Tt.faded.primary}},{variant:"faded",color:"secondary",class:{base:Tt.faded.secondary}},{variant:"faded",color:"success",class:{base:Tt.faded.success}},{variant:"faded",color:"warning",class:{base:Tt.faded.warning}},{variant:"faded",color:"danger",class:{base:Tt.faded.danger}},{variant:"light",color:"default",class:{base:Tt.light.default}},{variant:"light",color:"primary",class:{base:Tt.light.primary}},{variant:"light",color:"secondary",class:{base:Tt.light.secondary}},{variant:"light",color:"success",class:{base:Tt.light.success}},{variant:"light",color:"warning",class:{base:Tt.light.warning}},{variant:"light",color:"danger",class:{base:Tt.light.danger}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"sm",class:{base:"w-5 h-5 min-w-5 min-h-5"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"md",class:{base:"w-6 h-6 min-w-6 min-h-6"}},{isOneChar:!0,hasStartContent:!1,hasEndContent:!1,size:"lg",class:{base:"w-7 h-7 min-w-7 min-h-7"}},{isOneChar:!0,isCloseable:!1,hasStartContent:!1,hasEndContent:!1,class:{base:"px-0 justify-center",content:"px-0 flex-none"}},{isOneChar:!0,isCloseable:!0,hasStartContent:!1,hasEndContent:!1,class:{base:"w-auto"}},{isOneChar:!0,variant:"dot",class:{base:"w-auto h-7 px-1 items-center",content:"px-2"}},{hasStartContent:!0,size:"sm",class:{content:"pl-0.5"}},{hasStartContent:!0,size:["md","lg"],class:{content:"pl-1"}},{hasEndContent:!0,size:"sm",class:{content:"pr-0.5"}},{hasEndContent:!0,size:["md","lg"],class:{content:"pr-1"}}]}),eF=n=>ee.jsx("svg",{"aria-hidden":"true",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...n,children:ee.jsx("path",{d:"M12 2a10 10 0 1010 10A10.016 10.016 0 0012 2zm3.36 12.3a.754.754 0 010 1.06.748.748 0 01-1.06 0l-2.3-2.3-2.3 2.3a.748.748 0 01-1.06 0 .754.754 0 010-1.06l2.3-2.3-2.3-2.3A.75.75 0 019.7 8.64l2.3 2.3 2.3-2.3a.75.75 0 011.06 1.06l-2.3 2.3z",fill:"currentColor"})});function tF(n){const[e,t]=Gb(n,C5.variantKeys),{ref:i,as:r,children:s,avatar:o,startContent:a,endContent:l,onClose:c,classNames:f,className:p,...d}=e,m=r||"div",v=RM(i),_=Y4(f==null?void 0:f.base,p),x=!!c,y=n.variant==="dot",{focusProps:b,isFocusVisible:M}=fR(),T=H.useMemo(()=>typeof s=="string"&&(s==null?void 0:s.length)===1,[s]),P=H.useMemo(()=>!!o||!!a,[o,a]),E=H.useMemo(()=>!!l||x,[l,x]),L=H.useMemo(()=>C5({...t,hasStartContent:P,hasEndContent:E,isOneChar:T,isCloseable:x,isCloseButtonFocusVisible:M}),[IM(t),M,P,E,T,x]),{pressProps:I}=tR({isDisabled:!!(n!=null&&n.isDisabled),onPress:c}),R=()=>({ref:v,className:L.base({class:_}),...d}),C=()=>({role:"button",tabIndex:0,className:L.closeButton({class:f==null?void 0:f.closeButton}),"aria-label":"close chip",...Wy(I,b)}),D=G=>H.isValidElement(G)?H.cloneElement(G,{className:L.avatar({class:f==null?void 0:f.avatar})}):null,B=G=>H.isValidElement(G)?H.cloneElement(G,{className:Y4("max-h-[80%]",G.props.className)}):null;return{Component:m,children:s,slots:L,classNames:f,isDot:y,isCloseable:x,startContent:D(o)||B(a),endContent:B(l),getCloseButtonProps:C,getChipProps:R}}var iw=$b((n,e)=>{const{Component:t,children:i,slots:r,classNames:s,isDot:o,isCloseable:a,startContent:l,endContent:c,getCloseButtonProps:f,getChipProps:p}=tF({...n,ref:e}),d=H.useMemo(()=>o&&!l?ee.jsx("span",{className:r.dot({class:s==null?void 0:s.dot})}):l,[r,l,o]),m=H.useMemo(()=>a?ee.jsx("span",{...f(),children:c||ee.jsx(eF,{})}):c,[c,a,f]);return ee.jsxs(t,{...p(),children:[d,ee.jsx("span",{className:r.content({class:s==null?void 0:s.content}),children:i}),m]})});iw.displayName="HeroUI.Chip";var nF=iw;function iF(n={}){const{domRef:e,isEnabled:t=!0,overflowCheck:i="vertical",visibility:r="auto",offset:s=0,onVisibilityChange:o,updateDeps:a=[]}=n,l=H.useRef(r);H.useEffect(()=>{const c=e==null?void 0:e.current;if(!c||!t)return;const f=(m,v,_,x,y)=>{if(r==="auto"){const b=`${x}${hP(y)}Scroll`;v&&_?(c.dataset[b]="true",c.removeAttribute(`data-${x}-scroll`),c.removeAttribute(`data-${y}-scroll`)):(c.dataset[`${x}Scroll`]=v.toString(),c.dataset[`${y}Scroll`]=_.toString(),c.removeAttribute(`data-${x}-${y}-scroll`))}else{const b=v&&_?"both":v?x:_?y:"none";b!==l.current&&(o==null||o(b),l.current=b)}},p=()=>{var m,v;const _=[{type:"vertical",prefix:"top",suffix:"bottom"},{type:"horizontal",prefix:"left",suffix:"right"}],x=c.querySelector('ul[data-slot="list"]'),y=+((m=x==null?void 0:x.getAttribute("data-virtual-scroll-height"))!=null?m:c.scrollHeight),b=+((v=x==null?void 0:x.getAttribute("data-virtual-scroll-top"))!=null?v:c.scrollTop);for(const{type:M,prefix:T,suffix:P}of _)if(i===M||i==="both"){const E=M==="vertical"?b>s:c.scrollLeft>s,L=M==="vertical"?b+c.clientHeight+s<y:c.scrollLeft+c.clientWidth+s<c.scrollWidth;f(M,E,L,T,P)}},d=()=>{["top","bottom","top-bottom","left","right","left-right"].forEach(m=>{c.removeAttribute(`data-${m}-scroll`)})};return p(),c.addEventListener("scroll",p,!0),r!=="auto"&&(d(),r==="both"?(c.dataset.topBottomScroll=String(i==="vertical"),c.dataset.leftRightScroll=String(i==="horizontal")):(c.dataset.topBottomScroll="false",c.dataset.leftRightScroll="false",["top","bottom","left","right"].forEach(m=>{c.dataset[`${m}Scroll`]=String(r===m)}))),()=>{c.removeEventListener("scroll",p,!0),d()}},[...a,t,r,i,o,e])}function rF(n){var e;const[t,i]=Gb(n,E5.variantKeys),{ref:r,as:s,children:o,className:a,style:l,size:c=40,offset:f=0,visibility:p="auto",isEnabled:d=!0,onVisibilityChange:m,...v}=t,_=s||"div",x=RM(r);iF({domRef:x,offset:f,visibility:p,isEnabled:d,onVisibilityChange:m,updateDeps:[o],overflowCheck:(e=n.orientation)!=null?e:"vertical"});const y=H.useMemo(()=>E5({...i,className:a}),[IM(i),a]);return{Component:_,styles:y,domRef:x,children:o,getBaseProps:(M={})=>{var T;return{ref:x,className:y,"data-orientation":(T=n.orientation)!=null?T:"vertical",style:{"--scroll-shadow-size":`${c}px`,...l,...M.style},...v,...M}}}}var rw=$b((n,e)=>{const{Component:t,children:i,getBaseProps:r}=rF({...n,ref:e});return ee.jsx(t,{...r(),children:i})});rw.displayName="HeroUI.ScrollShadow";var sF=rw,sw={exports:{}},oF="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",aF=oF,lF=aF;function ow(){}function aw(){}aw.resetWarningCache=ow;var cF=function(){function n(i,r,s,o,a,l){if(l!==lF){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:aw,resetWarningCache:ow};return t.PropTypes=t,t};sw.exports=cF();var uF=sw.exports;function hF(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,pv(n,e)}function pv(n,e){return pv=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},pv(n,e)}var fF=H,gi=uF,dF=16,Dc=[],pF=function(e,t){var i=t.fillColor,r=t.text,s=t.textColor,o=t.canvasSize,a=o/5;e.font="bold "+(o-a*2)+"px arial";var l=Math.min(e.measureText(r).width,o-a)+a,c=o-l,f=o/2-a,p=a+o/2,d=Math.min(l/2,p/2);e.beginPath(),e.moveTo(c+d,f),e.arcTo(c+l,f,c+l,f+p,d),e.arcTo(c+l,f+p,c,f+p,d),e.arcTo(c,f+p,c,f,d),e.arcTo(c,f,c+l,f,d),e.closePath(),e.fillStyle=i,e.fill(),e.fillStyle=s,e.textBaseline="bottom",e.textAlign="right",e.fillText(r,o-a/2,o,o-a)};function mF(n){var e=n.alertCount,t=n.alertFillColor,i=n.alertTextColor,r=n.callback,s=n.renderOverlay,o=n.url,a=n.canvasSize,l=document.createElement("img");l.crossOrigin="Anonymous",l.onload=function(){var c=document.createElement("canvas");c.width=a,c.height=a;var f=c.getContext("2d");f.clearRect(0,0,l.width,l.height),f.drawImage(l,0,0,c.width,c.height),e&&pF(f,{fillColor:t,textColor:i,text:e,canvasSize:a}),s&&s(c,f),r(f.canvas.toDataURL())},l.src=o}var Th=function(n){hF(e,n);function e(){for(var i,r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=n.call.apply(n,[this].concat(s))||this,i.state={animationIndex:0,animationLoop:null,animationRunning:!1},i}e.getActiveInstance=function(){return e.mountedInstances[e.mountedInstances.length-1]},e.draw=function(){if(!(typeof document>"u")){var r=e.getActiveInstance();if(Dc.length===0){var s=document.getElementsByTagName("head")[0],o=document.createElement("link");o.type="image/x-icon",o.rel="icon";var a=document.createElement("link");a.rel="apple-touch-icon",Dc.push(o,a);for(var l=s.getElementsByTagName("link"),c=l.length;--c>=0;)/\bicon\b/i.test(l[c].getAttribute("rel"))&&!r.props.keepIconLink(l[c])&&s.removeChild(l[c]);Dc.forEach(function(p){return s.appendChild(p)})}var f;r.props.url instanceof Array?f=r.props.url[r.state.animationIndex]:f=r.props.url,r.props.alertCount||r.props.renderOverlay?mF({alertCount:r.props.alertCount,alertFillColor:r.props.alertFillColor,alertTextColor:r.props.alertTextColor,callback:function(d){Dc.forEach(function(m){return m.href=d})},renderOverlay:r.props.renderOverlay,url:f,canvasSize:r.props.iconSize}):Dc.forEach(function(p){return p.href=f})}},e.update=function(){if(!(typeof document>"u")){var r=e.getActiveInstance(),s=r.props.url instanceof Array&&r.props.animated,o=null;if(clearInterval(r.state.animationLoop),s){var a=function(){var c=(r.state.animationIndex+1)%r.props.url.length;e.draw(),r.setState({animationIndex:c})};o=setInterval(a,r.props.animationDelay),a()}else e.draw();r.setState({animationLoop:o})}};var t=e.prototype;return t.componentDidMount=function(){e.mountedInstances.push(this),e.update()},t.componentWillUnmount=function(){var r=e.getActiveInstance();clearInterval(r.state.animationLoop)},t.componentDidUpdate=function(r){r.url===this.props.url&&r.animated===this.props.animated&&r.alertCount===this.props.alertCount&&r.alertFillColor===this.props.alertFillColor&&r.alertTextColor===this.props.alertTextColor&&r.renderOverlay===this.props.renderOverlay&&r.keepIconLink===this.props.keepIconLink&&r.iconSize===this.props.iconSize||e.update()},t.render=function(){return null},e}(fF.Component);Th.displayName="Favicon";Th.mountedInstances=[];Th.defaultProps={iconSize:dF,alertCount:null,alertFillColor:"red",alertTextColor:"white",animated:!0,animationDelay:500,keepIconLink:function(){return!1},renderOverlay:null,url:null};Th.propTypes={iconSize:gi.number,alertCount:gi.oneOfType([gi.number,gi.string]),alertFillColor:gi.string,alertTextColor:gi.string,animated:gi.bool,animationDelay:gi.number,keepIconLink:gi.func,renderOverlay:gi.func,url:gi.oneOfType([gi.arrayOf(gi.string),gi.string]).isRequired};var gF=Th;const vF=Sa(gF),yF="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20xmlns:svgjs='http://svgjs.com/svgjs'%20width='500'%20height='500'%3e%3csvg%20viewBox='0%200%20800%20800'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20transform=''%20d='M%20287.762%20688.897%20A%2045.5%2045.5%200%200%201%20242.262%20734.397%20A%2045.5%2045.5%200%200%201%20196.762%20688.897%20A%2045.5%2045.5%200%200%201%20242.262%20643.397%20A%2045.5%2045.5%200%200%201%20287.762%20688.897%20Z'%20fill-opacity='1'%20stroke-opacity='1'%20style='stroke-width:%203;%20fill:%20%23ceff00;%20stroke:%20%23ceff00;'%20stroke-dashoffset='0px'%20stroke-dasharray='285.92547607421875px%20285.92547607421875px'%3e%3c/path%3e%3cpath%20transform=''%20d='M%20551.238%2063.278%20A%2045.5%2045.5%200%200%201%20505.738%20108.778%20A%2045.5%2045.5%200%200%201%20460.238%2063.278%20A%2045.5%2045.5%200%200%201%20505.738%2017.778%20A%2045.5%2045.5%200%200%201%20551.238%2063.278%20Z'%20fill-opacity='1'%20stroke-opacity='1'%20style='stroke-width:%203;%20fill:%20%23ceff00;%20stroke:%20%23ceff00;'%20stroke-dashoffset='0px'%20stroke-dasharray='285.925537109375px%20285.925537109375px'%3e%3c/path%3e%3cpath%20transform='matrix(0,%20-1,%201,%200,%20-27.226006,%20892.569031)'%20d='M%20156.545%20337.231%20L%20248.461%20337.231%20L%20248.461%20569.272%20C%20248.461%20598.86%20246.32%20619.811%20242.04%20632.126%20C%20237.76%20644.442%20229.838%20654.43%20218.273%20662.089%20C%20206.708%20669.748%20190.188%20673.578%20168.712%20673.578%20C%20150.989%20673.578%20128.987%20670.95%20102.704%20665.694%20L%20116.446%20599.009%20C%20123.805%20600.512%20129.211%20601.263%20132.667%20601.263%20C%20140.476%20601.263%20146.408%20598.597%20150.463%20593.265%20C%20154.519%20587.933%20156.545%20577.307%20156.545%20561.387%20L%20156.545%20337.231%20Z%20M%20506.114%20246.217%20L%20506.114%20576.481%20L%20420.28%20576.481%20L%20420.28%20541.112%20C%20408.266%20556.13%20397.303%20566.269%20387.39%20571.526%20C%20374.173%20578.434%20359.455%20581.888%20343.234%20581.888%20C%20310.643%20581.888%20285.749%20569.498%20268.553%20544.716%20C%20251.356%20519.935%20242.758%20489.822%20242.758%20454.379%20C%20242.758%20414.729%20252.257%20384.39%20271.257%20363.364%20C%20290.255%20342.338%20314.399%20331.824%20343.684%20331.824%20C%20357.952%20331.824%20370.907%20334.227%20382.546%20339.034%20C%20394.186%20343.839%20404.511%20351.048%20413.522%20360.66%20L%20413.522%20246.217%20L%20506.114%20246.217%20Z%20M%20414.198%20456.181%20C%20414.198%20437.407%20410.219%20423.402%20402.258%20414.164%20C%20394.298%20404.929%20384.235%20400.31%20372.07%20400.31%20C%20361.407%20400.31%20352.472%20404.741%20345.262%20413.602%20C%20338.053%20422.463%20334.448%20437.332%20334.448%20458.207%20C%20334.448%20477.732%20338.166%20492.038%20345.599%20501.125%20C%20353.034%20510.21%20362.232%20514.754%20373.197%20514.754%20C%20384.912%20514.754%20394.675%20510.173%20402.484%20501.012%20C%20410.294%20491.85%20414.198%20476.906%20414.198%20456.181%20Z%20M%20509.648%20337.231%20L%20595.03%20337.231%20L%20595.03%20376.204%20C%20607.795%20360.286%20620.711%20348.907%20633.779%20342.074%20C%20646.845%20335.241%20662.765%20331.824%20681.537%20331.824%20C%20706.921%20331.824%20726.782%20339.371%20741.126%20354.465%20C%20755.468%20369.559%20762.639%20392.877%20762.639%20424.416%20L%20762.639%20576.481%20L%20670.499%20576.481%20L%20670.499%20444.915%20C%20670.499%20429.898%20667.721%20419.272%20662.163%20413.039%20C%20656.607%20406.806%20648.798%20403.689%20638.734%20403.689%20C%20627.621%20403.689%20618.609%20407.894%20611.701%20416.305%20C%20604.792%20424.715%20601.337%20439.809%20601.337%20461.588%20L%20601.337%20576.481%20L%20509.648%20576.481%20L%20509.648%20337.231%20Z'%20fill-opacity='1'%20stroke-opacity='1'%20style='stroke-width:%203;%20fill:%20rgb(240,%20240,%20210);%20stroke:%20rgb(240,%20240,%20210);'%20stroke-dashoffset='0px'%20stroke-dasharray='3735.368896484375px%203735.368896484375px'%3e%3c/path%3e%3c/svg%3e%3cstyle%3e@media%20(prefers-color-scheme:%20light)%20{%20:root%20{%20filter:%20none;%20}%20}%20@media%20(prefers-color-scheme:%20dark)%20{%20:root%20{%20filter:%20contrast(0.3846153846153846)%20brightness(4.5);%20}%20}%20%3c/style%3e%3c/svg%3e";/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const o0="165",xF={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},_F={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},lw=0,mv=1,cw=2,SF=3,MF=0,I2=1,uw=2,Lr=3,vs=0,ci=1,Ir=2,fs=0,na=1,gv=2,vv=3,yv=4,hw=5,Ks=100,fw=101,dw=102,pw=103,mw=104,gw=200,vw=201,yw=202,xw=203,Pp=204,Rp=205,_w=206,Sw=207,Mw=208,bw=209,ww=210,Tw=211,Aw=212,Ew=213,Cw=214,Pw=0,Rw=1,Lw=2,Lu=3,Iw=4,Dw=5,Nw=6,Uw=7,Ah=0,Fw=1,Ow=2,ds=0,kw=1,Bw=2,Vw=3,zw=4,Hw=5,$w=6,Gw=7,xv="attached",Ww="detached",a0=300,ys=301,io=302,Iu=303,Du=304,Ql=306,Nu=1e3,er=1001,Uu=1002,In=1003,D2=1004,bF=1004,Sl=1005,wF=1005,Sn=1006,hu=1007,TF=1007,Dr=1008,AF=1008,Wr=1009,jw=1010,Xw=1011,Fu=1012,N2=1013,pa=1014,Ii=1015,Eh=1016,U2=1017,F2=1018,ma=1020,qw=35902,Yw=1021,Kw=1022,ai=1023,Zw=1024,Jw=1025,ia=1026,ga=1027,O2=1028,k2=1029,Qw=1030,B2=1031,V2=1033,np=33776,ip=33777,rp=33778,sp=33779,_v=35840,Sv=35841,Mv=35842,bv=35843,wv=36196,Tv=37492,Av=37496,Ev=37808,Cv=37809,Pv=37810,Rv=37811,Lv=37812,Iv=37813,Dv=37814,Nv=37815,Uv=37816,Fv=37817,Ov=37818,kv=37819,Bv=37820,Vv=37821,op=36492,zv=36494,Hv=36495,e7=36283,$v=36284,Gv=36285,Wv=36286,t7=2200,n7=2201,i7=2202,Ou=2300,Lp=2301,ap=2302,qo=2400,Yo=2401,ku=2402,l0=2500,z2=2501,EF=0,CF=1,PF=2,r7=3200,s7=3201,uo=0,o7=1,ls="",Ki="srgb",Ms="srgb-linear",c0="display-p3",Ch="display-p3-linear",Bu="linear",Ht="srgb",Vu="rec709",zu="p3",RF=0,$o=7680,LF=7681,IF=7682,DF=7683,NF=34055,UF=34056,FF=5386,OF=512,kF=513,BF=514,VF=515,zF=516,HF=517,$F=518,jv=519,a7=512,l7=513,c7=514,H2=515,u7=516,h7=517,f7=518,d7=519,Hu=35044,GF=35048,WF=35040,jF=35045,XF=35049,qF=35041,YF=35046,KF=35050,ZF=35042,JF="100",Xv="300 es",Nr=2e3,$u=2001;class bs{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Wn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let P5=1234567;const ra=Math.PI/180,$l=180/Math.PI;function Ni(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Wn[n&255]+Wn[n>>8&255]+Wn[n>>16&255]+Wn[n>>24&255]+"-"+Wn[e&255]+Wn[e>>8&255]+"-"+Wn[e>>16&15|64]+Wn[e>>24&255]+"-"+Wn[t&63|128]+Wn[t>>8&255]+"-"+Wn[t>>16&255]+Wn[t>>24&255]+Wn[i&255]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255]).toLowerCase()}function hn(n,e,t){return Math.max(e,Math.min(t,n))}function $2(n,e){return(n%e+e)%e}function QF(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function eO(n,e,t){return n!==e?(t-n)/(e-n):0}function fu(n,e,t){return(1-t)*n+t*e}function tO(n,e,t,i){return fu(n,e,1-Math.exp(-t*i))}function nO(n,e=1){return e-Math.abs($2(n,e*2)-e)}function iO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function rO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function sO(n,e){return n+Math.floor(Math.random()*(e-n+1))}function oO(n,e){return n+Math.random()*(e-n)}function aO(n){return n*(.5-Math.random())}function lO(n){n!==void 0&&(P5=n);let e=P5+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function cO(n){return n*ra}function uO(n){return n*$l}function hO(n){return(n&n-1)===0&&n!==0}function fO(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function dO(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pO(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),f=o((e+i)/2),p=s((e-i)/2),d=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*p,l*d,a*c);break;case"YZY":n.set(l*d,a*f,l*p,a*c);break;case"ZXZ":n.set(l*p,l*d,a*f,a*c);break;case"XZX":n.set(a*f,l*v,l*m,a*c);break;case"YXY":n.set(l*m,a*f,l*v,a*c);break;case"ZYZ":n.set(l*v,l*m,a*f,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function oi(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function pt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const mO={DEG2RAD:ra,RAD2DEG:$l,generateUUID:Ni,clamp:hn,euclideanModulo:$2,mapLinear:QF,inverseLerp:eO,lerp:fu,damp:tO,pingpong:nO,smoothstep:iO,smootherstep:rO,randInt:sO,randFloat:oO,randFloatSpread:aO,seededRandom:lO,degToRad:cO,radToDeg:uO,isPowerOfTwo:hO,ceilPowerOfTwo:fO,floorPowerOfTwo:dO,setQuaternionFromProperEuler:pO,normalize:pt,denormalize:oi};class pe{constructor(e=0,t=0){pe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dt{constructor(e,t,i,r,s,o,a,l,c){dt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],f=i[4],p=i[7],d=i[2],m=i[5],v=i[8],_=r[0],x=r[3],y=r[6],b=r[1],M=r[4],T=r[7],P=r[2],E=r[5],L=r[8];return s[0]=o*_+a*b+l*P,s[3]=o*x+a*M+l*E,s[6]=o*y+a*T+l*L,s[1]=c*_+f*b+p*P,s[4]=c*x+f*M+p*E,s[7]=c*y+f*T+p*L,s[2]=d*_+m*b+v*P,s[5]=d*x+m*M+v*E,s[8]=d*y+m*T+v*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8];return t*o*f-t*a*c-i*s*f+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],p=f*o-a*c,d=a*l-f*s,m=c*s-o*l,v=t*p+i*d+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=p*_,e[1]=(r*c-f*i)*_,e[2]=(a*i-r*o)*_,e[3]=d*_,e[4]=(f*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=m*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(g1.makeScale(e,t)),this}rotate(e){return this.premultiply(g1.makeRotation(-e)),this}translate(e,t){return this.premultiply(g1.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const g1=new dt;function p7(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const gO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ml(n,e){return new gO[n](e)}function Gu(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function m7(){const n=Gu("canvas");return n.style.display="block",n}const R5={};function G2(n){n in R5||(R5[n]=!0,console.warn(n))}function vO(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const L5=new dt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),I5=new dt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Kf={[Ms]:{transfer:Bu,primaries:Vu,toReference:n=>n,fromReference:n=>n},[Ki]:{transfer:Ht,primaries:Vu,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Ch]:{transfer:Bu,primaries:zu,toReference:n=>n.applyMatrix3(I5),fromReference:n=>n.applyMatrix3(L5)},[c0]:{transfer:Ht,primaries:zu,toReference:n=>n.convertSRGBToLinear().applyMatrix3(I5),fromReference:n=>n.applyMatrix3(L5).convertLinearToSRGB()}},yO=new Set([Ms,Ch]),Ft={enabled:!0,_workingColorSpace:Ms,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!yO.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Kf[e].toReference,r=Kf[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Kf[n].primaries},getTransfer:function(n){return n===ls?Bu:Kf[n].transfer}};function Nl(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function v1(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let $a;class g7{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{$a===void 0&&($a=Gu("canvas")),$a.width=e.width,$a.height=e.height;const i=$a.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=$a}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Gu("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Nl(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Nl(t[i]/255)*255):t[i]=Nl(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let xO=0;class Ko{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:xO++}),this.uuid=Ni(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(y1(r[o].image)):s.push(y1(r[o]))}else s=y1(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function y1(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?g7.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _O=0;class rn extends bs{constructor(e=rn.DEFAULT_IMAGE,t=rn.DEFAULT_MAPPING,i=er,r=er,s=Sn,o=Dr,a=ai,l=Wr,c=rn.DEFAULT_ANISOTROPY,f=ls){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_O++}),this.uuid=Ni(),this.name="",this.source=new Ko(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new pe(0,0),this.repeat=new pe(1,1),this.center=new pe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==a0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nu:e.x=e.x-Math.floor(e.x);break;case er:e.x=e.x<0?0:1;break;case Uu:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nu:e.y=e.y-Math.floor(e.y);break;case er:e.y=e.y<0?0:1;break;case Uu:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}rn.DEFAULT_IMAGE=null;rn.DEFAULT_MAPPING=a0;rn.DEFAULT_ANISOTROPY=1;class Ot{constructor(e=0,t=0,i=0,r=1){Ot.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],f=l[4],p=l[8],d=l[1],m=l[5],v=l[9],_=l[2],x=l[6],y=l[10];if(Math.abs(f-d)<.01&&Math.abs(p-_)<.01&&Math.abs(v-x)<.01){if(Math.abs(f+d)<.1&&Math.abs(p+_)<.1&&Math.abs(v+x)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const M=(c+1)/2,T=(m+1)/2,P=(y+1)/2,E=(f+d)/4,L=(p+_)/4,I=(v+x)/4;return M>T&&M>P?M<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(M),r=E/i,s=L/i):T>P?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=E/r,s=I/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=L/s,r=I/s),this.set(i,r,s,t),this}let b=Math.sqrt((x-v)*(x-v)+(p-_)*(p-_)+(d-f)*(d-f));return Math.abs(b)<.001&&(b=1),this.x=(x-v)/b,this.y=(p-_)/b,this.z=(d-f)/b,this.w=Math.acos((c+m+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class v7 extends bs{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ot(0,0,e,t),this.scissorTest=!1,this.viewport=new Ot(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Sn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new rn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Ko(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class vr extends v7{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class u0 extends rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=In,this.minFilter=In,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class SO extends vr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new u0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class W2 extends rn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=In,this.minFilter=In,this.wrapR=er,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class MO extends vr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new W2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class _i{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],f=i[r+2],p=i[r+3];const d=s[o+0],m=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=v,e[t+3]=_;return}if(p!==_||l!==d||c!==m||f!==v){let x=1-a;const y=l*d+c*m+f*v+p*_,b=y>=0?1:-1,M=1-y*y;if(M>Number.EPSILON){const P=Math.sqrt(M),E=Math.atan2(P,y*b);x=Math.sin(x*E)/P,a=Math.sin(a*E)/P}const T=a*b;if(l=l*x+d*T,c=c*x+m*T,f=f*x+v*T,p=p*x+_*T,x===1-a){const P=1/Math.sqrt(l*l+c*c+f*f+p*p);l*=P,c*=P,f*=P,p*=P}}e[t]=l,e[t+1]=c,e[t+2]=f,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],f=i[r+3],p=s[o],d=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+f*p+l*m-c*d,e[t+1]=l*v+f*d+c*p-a*m,e[t+2]=c*v+f*m+a*d-l*p,e[t+3]=f*v-a*p-l*d-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),f=a(r/2),p=a(s/2),d=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=d*f*p+c*m*v,this._y=c*m*p-d*f*v,this._z=c*f*v+d*m*p,this._w=c*f*p-d*m*v;break;case"YXZ":this._x=d*f*p+c*m*v,this._y=c*m*p-d*f*v,this._z=c*f*v-d*m*p,this._w=c*f*p+d*m*v;break;case"ZXY":this._x=d*f*p-c*m*v,this._y=c*m*p+d*f*v,this._z=c*f*v+d*m*p,this._w=c*f*p-d*m*v;break;case"ZYX":this._x=d*f*p-c*m*v,this._y=c*m*p+d*f*v,this._z=c*f*v-d*m*p,this._w=c*f*p+d*m*v;break;case"YZX":this._x=d*f*p+c*m*v,this._y=c*m*p+d*f*v,this._z=c*f*v-d*m*p,this._w=c*f*p-d*m*v;break;case"XZY":this._x=d*f*p-c*m*v,this._y=c*m*p-d*f*v,this._z=c*f*v+d*m*p,this._w=c*f*p+d*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],f=t[6],p=t[10],d=i+a+p;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(f-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>p){const m=2*Math.sqrt(1+i-a-p);this._w=(f-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>p){const m=2*Math.sqrt(1+a-i-p);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+p-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(hn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,f=t._w;return this._x=i*f+o*a+r*c-s*l,this._y=r*f+o*l+s*a-i*c,this._z=s*f+o*c+i*l-r*a,this._w=o*f-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),f=Math.atan2(c,a),p=Math.sin((1-t)*f)/c,d=Math.sin(t*f)/c;return this._w=o*p+this._w*d,this._x=i*p+this._x*d,this._y=r*p+this._y*d,this._z=s*p+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(D5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(D5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),f=2*(a*t-s*r),p=2*(s*i-o*t);return this.x=t+l*c+o*p-a*f,this.y=i+l*f+a*c-s*p,this.z=r+l*p+s*f-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return x1.copy(this).projectOnVector(e),this.sub(x1)}reflect(e){return this.sub(x1.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(hn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const x1=new F,D5=new _i;class ui{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(sr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(sr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=sr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,sr):sr.fromBufferAttribute(s,o),sr.applyMatrix4(e.matrixWorld),this.expandByPoint(sr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Zf.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Zf.copy(i.boundingBox)),Zf.applyMatrix4(e.matrixWorld),this.union(Zf)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,sr),sr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Nc),Jf.subVectors(this.max,Nc),Ga.subVectors(e.a,Nc),Wa.subVectors(e.b,Nc),ja.subVectors(e.c,Nc),Fs.subVectors(Wa,Ga),Os.subVectors(ja,Wa),Co.subVectors(Ga,ja);let t=[0,-Fs.z,Fs.y,0,-Os.z,Os.y,0,-Co.z,Co.y,Fs.z,0,-Fs.x,Os.z,0,-Os.x,Co.z,0,-Co.x,-Fs.y,Fs.x,0,-Os.y,Os.x,0,-Co.y,Co.x,0];return!_1(t,Ga,Wa,ja,Jf)||(t=[1,0,0,0,1,0,0,0,1],!_1(t,Ga,Wa,ja,Jf))?!1:(Qf.crossVectors(Fs,Os),t=[Qf.x,Qf.y,Qf.z],_1(t,Ga,Wa,ja,Jf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,sr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(sr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ts[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ts[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ts[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ts[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ts[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ts[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ts[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ts[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ts),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ts=[new F,new F,new F,new F,new F,new F,new F,new F],sr=new F,Zf=new ui,Ga=new F,Wa=new F,ja=new F,Fs=new F,Os=new F,Co=new F,Nc=new F,Jf=new F,Qf=new F,Po=new F;function _1(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Po.fromArray(n,s);const a=r.x*Math.abs(Po.x)+r.y*Math.abs(Po.y)+r.z*Math.abs(Po.z),l=e.dot(Po),c=t.dot(Po),f=i.dot(Po);if(Math.max(-Math.max(l,c,f),Math.min(l,c,f))>a)return!1}return!0}const bO=new ui,Uc=new F,S1=new F;class Zn{constructor(e=new F,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):bO.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Uc.subVectors(e,this.center);const t=Uc.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Uc,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(S1.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Uc.copy(e.center).add(S1)),this.expandByPoint(Uc.copy(e.center).sub(S1))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ns=new F,M1=new F,ed=new F,ks=new F,b1=new F,td=new F,w1=new F;class ec{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ns)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ns.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ns.copy(this.origin).addScaledVector(this.direction,t),ns.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){M1.copy(e).add(t).multiplyScalar(.5),ed.copy(t).sub(e).normalize(),ks.copy(this.origin).sub(M1);const s=e.distanceTo(t)*.5,o=-this.direction.dot(ed),a=ks.dot(this.direction),l=-ks.dot(ed),c=ks.lengthSq(),f=Math.abs(1-o*o);let p,d,m,v;if(f>0)if(p=o*l-a,d=o*a-l,v=s*f,p>=0)if(d>=-v)if(d<=v){const _=1/f;p*=_,d*=_,m=p*(p+o*d+2*a)+d*(o*p+d+2*l)+c}else d=s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*l)+c;else d=-s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*l)+c;else d<=-v?(p=Math.max(0,-(-o*s+a)),d=p>0?-s:Math.min(Math.max(-s,-l),s),m=-p*p+d*(d+2*l)+c):d<=v?(p=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+c):(p=Math.max(0,-(o*s+a)),d=p>0?s:Math.min(Math.max(-s,-l),s),m=-p*p+d*(d+2*l)+c);else d=o>0?-s:s,p=Math.max(0,-(o*d+a)),m=-p*p+d*(d+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(M1).addScaledVector(ed,d),m}intersectSphere(e,t){ns.subVectors(e.center,this.origin);const i=ns.dot(this.direction),r=ns.dot(ns)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,f=1/this.direction.y,p=1/this.direction.z,d=this.origin;return c>=0?(i=(e.min.x-d.x)*c,r=(e.max.x-d.x)*c):(i=(e.max.x-d.x)*c,r=(e.min.x-d.x)*c),f>=0?(s=(e.min.y-d.y)*f,o=(e.max.y-d.y)*f):(s=(e.max.y-d.y)*f,o=(e.min.y-d.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-d.z)*p,l=(e.max.z-d.z)*p):(a=(e.max.z-d.z)*p,l=(e.min.z-d.z)*p),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ns)!==null}intersectTriangle(e,t,i,r,s){b1.subVectors(t,e),td.subVectors(i,e),w1.crossVectors(b1,td);let o=this.direction.dot(w1),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;ks.subVectors(this.origin,e);const l=a*this.direction.dot(td.crossVectors(ks,td));if(l<0)return null;const c=a*this.direction.dot(b1.cross(ks));if(c<0||l+c>o)return null;const f=-a*ks.dot(w1);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class nt{constructor(e,t,i,r,s,o,a,l,c,f,p,d,m,v,_,x){nt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,f,p,d,m,v,_,x)}set(e,t,i,r,s,o,a,l,c,f,p,d,m,v,_,x){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=f,y[10]=p,y[14]=d,y[3]=m,y[7]=v,y[11]=_,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new nt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Xa.setFromMatrixColumn(e,0).length(),s=1/Xa.setFromMatrixColumn(e,1).length(),o=1/Xa.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),f=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const d=o*f,m=o*p,v=a*f,_=a*p;t[0]=l*f,t[4]=-l*p,t[8]=c,t[1]=m+v*c,t[5]=d-_*c,t[9]=-a*l,t[2]=_-d*c,t[6]=v+m*c,t[10]=o*l}else if(e.order==="YXZ"){const d=l*f,m=l*p,v=c*f,_=c*p;t[0]=d+_*a,t[4]=v*a-m,t[8]=o*c,t[1]=o*p,t[5]=o*f,t[9]=-a,t[2]=m*a-v,t[6]=_+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*f,m=l*p,v=c*f,_=c*p;t[0]=d-_*a,t[4]=-o*p,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*f,t[9]=_-d*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*f,m=o*p,v=a*f,_=a*p;t[0]=l*f,t[4]=v*c-m,t[8]=d*c+_,t[1]=l*p,t[5]=_*c+d,t[9]=m*c-v,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*f,t[4]=_-d*p,t[8]=v*p+m,t[1]=p,t[5]=o*f,t[9]=-a*f,t[2]=-c*f,t[6]=m*p+v,t[10]=d-_*p}else if(e.order==="XZY"){const d=o*l,m=o*c,v=a*l,_=a*c;t[0]=l*f,t[4]=-p,t[8]=c*f,t[1]=d*p+_,t[5]=o*f,t[9]=m*p-v,t[2]=v*p-m,t[6]=a*f,t[10]=_*p+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(wO,e,TO)}lookAt(e,t,i){const r=this.elements;return Pi.subVectors(e,t),Pi.lengthSq()===0&&(Pi.z=1),Pi.normalize(),Bs.crossVectors(i,Pi),Bs.lengthSq()===0&&(Math.abs(i.z)===1?Pi.x+=1e-4:Pi.z+=1e-4,Pi.normalize(),Bs.crossVectors(i,Pi)),Bs.normalize(),nd.crossVectors(Pi,Bs),r[0]=Bs.x,r[4]=nd.x,r[8]=Pi.x,r[1]=Bs.y,r[5]=nd.y,r[9]=Pi.y,r[2]=Bs.z,r[6]=nd.z,r[10]=Pi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],f=i[1],p=i[5],d=i[9],m=i[13],v=i[2],_=i[6],x=i[10],y=i[14],b=i[3],M=i[7],T=i[11],P=i[15],E=r[0],L=r[4],I=r[8],R=r[12],C=r[1],D=r[5],B=r[9],G=r[13],z=r[2],Z=r[6],$=r[10],q=r[14],k=r[3],Q=r[7],oe=r[11],he=r[15];return s[0]=o*E+a*C+l*z+c*k,s[4]=o*L+a*D+l*Z+c*Q,s[8]=o*I+a*B+l*$+c*oe,s[12]=o*R+a*G+l*q+c*he,s[1]=f*E+p*C+d*z+m*k,s[5]=f*L+p*D+d*Z+m*Q,s[9]=f*I+p*B+d*$+m*oe,s[13]=f*R+p*G+d*q+m*he,s[2]=v*E+_*C+x*z+y*k,s[6]=v*L+_*D+x*Z+y*Q,s[10]=v*I+_*B+x*$+y*oe,s[14]=v*R+_*G+x*q+y*he,s[3]=b*E+M*C+T*z+P*k,s[7]=b*L+M*D+T*Z+P*Q,s[11]=b*I+M*B+T*$+P*oe,s[15]=b*R+M*G+T*q+P*he,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],f=e[2],p=e[6],d=e[10],m=e[14],v=e[3],_=e[7],x=e[11],y=e[15];return v*(+s*l*p-r*c*p-s*a*d+i*c*d+r*a*m-i*l*m)+_*(+t*l*m-t*c*d+s*o*d-r*o*m+r*c*f-s*l*f)+x*(+t*c*p-t*a*m-s*o*p+i*o*m+s*a*f-i*c*f)+y*(-r*a*f-t*l*p+t*a*d+r*o*p-i*o*d+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],f=e[8],p=e[9],d=e[10],m=e[11],v=e[12],_=e[13],x=e[14],y=e[15],b=p*x*c-_*d*c+_*l*m-a*x*m-p*l*y+a*d*y,M=v*d*c-f*x*c-v*l*m+o*x*m+f*l*y-o*d*y,T=f*_*c-v*p*c+v*a*m-o*_*m-f*a*y+o*p*y,P=v*p*l-f*_*l-v*a*d+o*_*d+f*a*x-o*p*x,E=t*b+i*M+r*T+s*P;if(E===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/E;return e[0]=b*L,e[1]=(_*d*s-p*x*s-_*r*m+i*x*m+p*r*y-i*d*y)*L,e[2]=(a*x*s-_*l*s+_*r*c-i*x*c-a*r*y+i*l*y)*L,e[3]=(p*l*s-a*d*s-p*r*c+i*d*c+a*r*m-i*l*m)*L,e[4]=M*L,e[5]=(f*x*s-v*d*s+v*r*m-t*x*m-f*r*y+t*d*y)*L,e[6]=(v*l*s-o*x*s-v*r*c+t*x*c+o*r*y-t*l*y)*L,e[7]=(o*d*s-f*l*s+f*r*c-t*d*c-o*r*m+t*l*m)*L,e[8]=T*L,e[9]=(v*p*s-f*_*s-v*i*m+t*_*m+f*i*y-t*p*y)*L,e[10]=(o*_*s-v*a*s+v*i*c-t*_*c-o*i*y+t*a*y)*L,e[11]=(f*a*s-o*p*s-f*i*c+t*p*c+o*i*m-t*a*m)*L,e[12]=P*L,e[13]=(f*_*r-v*p*r+v*i*d-t*_*d-f*i*x+t*p*x)*L,e[14]=(v*a*r-o*_*r-v*i*l+t*_*l+o*i*x-t*a*x)*L,e[15]=(o*p*r-f*a*r+f*i*l-t*p*l-o*i*d+t*a*d)*L,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,f=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,f*a+i,f*l-r*o,0,c*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,f=o+o,p=a+a,d=s*c,m=s*f,v=s*p,_=o*f,x=o*p,y=a*p,b=l*c,M=l*f,T=l*p,P=i.x,E=i.y,L=i.z;return r[0]=(1-(_+y))*P,r[1]=(m+T)*P,r[2]=(v-M)*P,r[3]=0,r[4]=(m-T)*E,r[5]=(1-(d+y))*E,r[6]=(x+b)*E,r[7]=0,r[8]=(v+M)*L,r[9]=(x-b)*L,r[10]=(1-(d+_))*L,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Xa.set(r[0],r[1],r[2]).length();const o=Xa.set(r[4],r[5],r[6]).length(),a=Xa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],or.copy(this);const c=1/s,f=1/o,p=1/a;return or.elements[0]*=c,or.elements[1]*=c,or.elements[2]*=c,or.elements[4]*=f,or.elements[5]*=f,or.elements[6]*=f,or.elements[8]*=p,or.elements[9]*=p,or.elements[10]*=p,t.setFromRotationMatrix(or),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Nr){const l=this.elements,c=2*s/(t-e),f=2*s/(i-r),p=(t+e)/(t-e),d=(i+r)/(i-r);let m,v;if(a===Nr)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===$u)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=f,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Nr){const l=this.elements,c=1/(t-e),f=1/(i-r),p=1/(o-s),d=(t+e)*c,m=(i+r)*f;let v,_;if(a===Nr)v=(o+s)*p,_=-2*p;else if(a===$u)v=s*p,_=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Xa=new F,or=new nt,wO=new F(0,0,0),TO=new F(1,1,1),Bs=new F,nd=new F,Pi=new F,N5=new nt,U5=new _i;class Fi{constructor(e=0,t=0,i=0,r=Fi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],f=r[9],p=r[2],d=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(hn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-hn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(hn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-p,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-hn(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(hn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-hn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return N5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(N5,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return U5.setFromEuler(this),this.setFromQuaternion(U5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fi.DEFAULT_ORDER="XYZ";class sa{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let AO=0;const F5=new F,qa=new _i,is=new nt,id=new F,Fc=new F,EO=new F,CO=new _i,O5=new F(1,0,0),k5=new F(0,1,0),B5=new F(0,0,1),V5={type:"added"},PO={type:"removed"},Ya={type:"childadded",child:null},T1={type:"childremoved",child:null};class Nt extends bs{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:AO++}),this.uuid=Ni(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nt.DEFAULT_UP.clone();const e=new F,t=new Fi,i=new _i,r=new F(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new nt},normalMatrix:{value:new dt}}),this.matrix=new nt,this.matrixWorld=new nt,this.matrixAutoUpdate=Nt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new sa,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return qa.setFromAxisAngle(e,t),this.quaternion.multiply(qa),this}rotateOnWorldAxis(e,t){return qa.setFromAxisAngle(e,t),this.quaternion.premultiply(qa),this}rotateX(e){return this.rotateOnAxis(O5,e)}rotateY(e){return this.rotateOnAxis(k5,e)}rotateZ(e){return this.rotateOnAxis(B5,e)}translateOnAxis(e,t){return F5.copy(e).applyQuaternion(this.quaternion),this.position.add(F5.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(O5,e)}translateY(e){return this.translateOnAxis(k5,e)}translateZ(e){return this.translateOnAxis(B5,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(is.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?id.copy(e):id.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Fc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?is.lookAt(Fc,id,this.up):is.lookAt(id,Fc,this.up),this.quaternion.setFromRotationMatrix(is),r&&(is.extractRotation(r.matrixWorld),qa.setFromRotationMatrix(is),this.quaternion.premultiply(qa.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(V5),Ya.child=e,this.dispatchEvent(Ya),Ya.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(PO),T1.child=e,this.dispatchEvent(T1),T1.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),is.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),is.multiply(e.parent.matrixWorld)),e.applyMatrix4(is),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(V5),Ya.child=e,this.dispatchEvent(Ya),Ya.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fc,e,EO),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Fc,CO,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,f=l.length;c<f;c++){const p=l[c];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),f=o(e.images),p=o(e.shapes),d=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),f.length>0&&(i.images=f),p.length>0&&(i.shapes=p),d.length>0&&(i.skeletons=d),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const c in a){const f=a[c];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Nt.DEFAULT_UP=new F(0,1,0);Nt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Nt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ar=new F,rs=new F,A1=new F,ss=new F,Ka=new F,Za=new F,z5=new F,E1=new F,C1=new F,P1=new F;class Li{constructor(e=new F,t=new F,i=new F){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ar.subVectors(e,t),r.cross(ar);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ar.subVectors(r,t),rs.subVectors(i,t),A1.subVectors(e,t);const o=ar.dot(ar),a=ar.dot(rs),l=ar.dot(A1),c=rs.dot(rs),f=rs.dot(A1),p=o*c-a*a;if(p===0)return s.set(0,0,0),null;const d=1/p,m=(c*l-a*f)*d,v=(o*f-a*l)*d;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ss)===null?!1:ss.x>=0&&ss.y>=0&&ss.x+ss.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ss)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ss.x),l.addScaledVector(o,ss.y),l.addScaledVector(a,ss.z),l)}static isFrontFacing(e,t,i,r){return ar.subVectors(i,t),rs.subVectors(e,t),ar.cross(rs).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ar.subVectors(this.c,this.b),rs.subVectors(this.a,this.b),ar.cross(rs).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Li.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Li.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Li.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Li.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Li.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Ka.subVectors(r,i),Za.subVectors(s,i),E1.subVectors(e,i);const l=Ka.dot(E1),c=Za.dot(E1);if(l<=0&&c<=0)return t.copy(i);C1.subVectors(e,r);const f=Ka.dot(C1),p=Za.dot(C1);if(f>=0&&p<=f)return t.copy(r);const d=l*p-f*c;if(d<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(Ka,o);P1.subVectors(e,s);const m=Ka.dot(P1),v=Za.dot(P1);if(v>=0&&m<=v)return t.copy(s);const _=m*c-l*v;if(_<=0&&c>=0&&v<=0)return a=c/(c-v),t.copy(i).addScaledVector(Za,a);const x=f*v-m*p;if(x<=0&&p-f>=0&&m-v>=0)return z5.subVectors(s,r),a=(p-f)/(p-f+(m-v)),t.copy(r).addScaledVector(z5,a);const y=1/(x+_+d);return o=_*y,a=d*y,t.copy(i).addScaledVector(Ka,o).addScaledVector(Za,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const y7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Vs={h:0,s:0,l:0},rd={h:0,s:0,l:0};function R1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}let Ve=class{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ki){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ft.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ft.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ft.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ft.workingColorSpace){if(e=$2(e,1),t=hn(t,0,1),i=hn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=R1(o,s,e+1/3),this.g=R1(o,s,e),this.b=R1(o,s,e-1/3)}return Ft.toWorkingColorSpace(this,r),this}setStyle(e,t=Ki){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ki){const i=y7[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nl(e.r),this.g=Nl(e.g),this.b=Nl(e.b),this}copyLinearToSRGB(e){return this.r=v1(e.r),this.g=v1(e.g),this.b=v1(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ki){return Ft.fromWorkingColorSpace(jn.copy(this),e),Math.round(hn(jn.r*255,0,255))*65536+Math.round(hn(jn.g*255,0,255))*256+Math.round(hn(jn.b*255,0,255))}getHexString(e=Ki){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ft.workingColorSpace){Ft.fromWorkingColorSpace(jn.copy(this),t);const i=jn.r,r=jn.g,s=jn.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const f=(a+o)/2;if(a===o)l=0,c=0;else{const p=o-a;switch(c=f<=.5?p/(o+a):p/(2-o-a),o){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=f,e}getRGB(e,t=Ft.workingColorSpace){return Ft.fromWorkingColorSpace(jn.copy(this),t),e.r=jn.r,e.g=jn.g,e.b=jn.b,e}getStyle(e=Ki){Ft.fromWorkingColorSpace(jn.copy(this),e);const t=jn.r,i=jn.g,r=jn.b;return e!==Ki?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Vs),this.setHSL(Vs.h+e,Vs.s+t,Vs.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Vs),e.getHSL(rd);const i=fu(Vs.h,rd.h,t),r=fu(Vs.s,rd.s,t),s=fu(Vs.l,rd.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const jn=new Ve;Ve.NAMES=y7;let RO=0;class Bn extends bs{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:RO++}),this.uuid=Ni(),this.name="",this.type="Material",this.blending=na,this.side=vs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Pp,this.blendDst=Rp,this.blendEquation=Ks,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ve(0,0,0),this.blendAlpha=0,this.depthFunc=Lu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=jv,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$o,this.stencilZFail=$o,this.stencilZPass=$o,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==na&&(i.blending=this.blending),this.side!==vs&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Pp&&(i.blendSrc=this.blendSrc),this.blendDst!==Rp&&(i.blendDst=this.blendDst),this.blendEquation!==Ks&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Lu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==jv&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$o&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$o&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$o&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ho extends Bn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const cs=LO();function LO(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,f=0;for(;!(c&8388608);)c<<=1,f-=8388608;c&=-8388609,f+=947912704,s[l]=c|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function yi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=hn(n,-65504,65504),cs.floatView[0]=n;const e=cs.uint32View[0],t=e>>23&511;return cs.baseTable[t]+((e&8388607)>>cs.shiftTable[t])}function tu(n){const e=n>>10;return cs.uint32View[0]=cs.mantissaTable[cs.offsetTable[e]+(n&1023)]+cs.exponentTable[e],cs.floatView[0]}const IO={toHalfFloat:yi,fromHalfFloat:tu},_n=new F,sd=new pe;class kt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Hu,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Ii,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return G2("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)sd.fromBufferAttribute(this,t),sd.applyMatrix3(e),this.setXY(t,sd.x,sd.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)_n.fromBufferAttribute(this,t),_n.applyMatrix3(e),this.setXYZ(t,_n.x,_n.y,_n.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)_n.fromBufferAttribute(this,t),_n.applyMatrix4(e),this.setXYZ(t,_n.x,_n.y,_n.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)_n.fromBufferAttribute(this,t),_n.applyNormalMatrix(e),this.setXYZ(t,_n.x,_n.y,_n.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)_n.fromBufferAttribute(this,t),_n.transformDirection(e),this.setXYZ(t,_n.x,_n.y,_n.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=oi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=pt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=oi(t,this.array)),t}setX(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=oi(t,this.array)),t}setY(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=oi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=oi(t,this.array)),t}setW(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array),s=pt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Hu&&(e.usage=this.usage),e}}class DO extends kt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class NO extends kt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class UO extends kt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class FO extends kt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class j2 extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class OO extends kt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class X2 extends kt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class kO extends kt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=tu(this.array[e*this.itemSize]);return this.normalized&&(t=oi(t,this.array)),t}setX(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize]=yi(t),this}getY(e){let t=tu(this.array[e*this.itemSize+1]);return this.normalized&&(t=oi(t,this.array)),t}setY(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+1]=yi(t),this}getZ(e){let t=tu(this.array[e*this.itemSize+2]);return this.normalized&&(t=oi(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+2]=yi(t),this}getW(e){let t=tu(this.array[e*this.itemSize+3]);return this.normalized&&(t=oi(t,this.array)),t}setW(e,t){return this.normalized&&(t=pt(t,this.array)),this.array[e*this.itemSize+3]=yi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array)),this.array[e+0]=yi(t),this.array[e+1]=yi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array)),this.array[e+0]=yi(t),this.array[e+1]=yi(i),this.array[e+2]=yi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array),s=pt(s,this.array)),this.array[e+0]=yi(t),this.array[e+1]=yi(i),this.array[e+2]=yi(r),this.array[e+3]=yi(s),this}}class Ge extends kt{constructor(e,t,i){super(new Float32Array(e),t,i)}}let BO=0;const ji=new nt,L1=new Nt,Ja=new F,Ri=new ui,Oc=new ui,Rn=new F;class yt extends bs{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:BO++}),this.uuid=Ni(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(p7(e)?X2:j2)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new dt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ji.makeRotationFromQuaternion(e),this.applyMatrix4(ji),this}rotateX(e){return ji.makeRotationX(e),this.applyMatrix4(ji),this}rotateY(e){return ji.makeRotationY(e),this.applyMatrix4(ji),this}rotateZ(e){return ji.makeRotationZ(e),this.applyMatrix4(ji),this}translate(e,t,i){return ji.makeTranslation(e,t,i),this.applyMatrix4(ji),this}scale(e,t,i){return ji.makeScale(e,t,i),this.applyMatrix4(ji),this}lookAt(e){return L1.lookAt(e),L1.updateMatrix(),this.applyMatrix4(L1.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ja).negate(),this.translate(Ja.x,Ja.y,Ja.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ge(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ri.setFromBufferAttribute(s),this.morphTargetsRelative?(Rn.addVectors(this.boundingBox.min,Ri.min),this.boundingBox.expandByPoint(Rn),Rn.addVectors(this.boundingBox.max,Ri.max),this.boundingBox.expandByPoint(Rn)):(this.boundingBox.expandByPoint(Ri.min),this.boundingBox.expandByPoint(Ri.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(Ri.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Oc.setFromBufferAttribute(a),this.morphTargetsRelative?(Rn.addVectors(Ri.min,Oc.min),Ri.expandByPoint(Rn),Rn.addVectors(Ri.max,Oc.max),Ri.expandByPoint(Rn)):(Ri.expandByPoint(Oc.min),Ri.expandByPoint(Oc.max))}Ri.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Rn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Rn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,f=a.count;c<f;c++)Rn.fromBufferAttribute(a,c),l&&(Ja.fromBufferAttribute(e,c),Rn.add(Ja)),r=Math.max(r,i.distanceToSquared(Rn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new kt(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new F,l[I]=new F;const c=new F,f=new F,p=new F,d=new pe,m=new pe,v=new pe,_=new F,x=new F;function y(I,R,C){c.fromBufferAttribute(i,I),f.fromBufferAttribute(i,R),p.fromBufferAttribute(i,C),d.fromBufferAttribute(s,I),m.fromBufferAttribute(s,R),v.fromBufferAttribute(s,C),f.sub(c),p.sub(c),m.sub(d),v.sub(d);const D=1/(m.x*v.y-v.x*m.y);isFinite(D)&&(_.copy(f).multiplyScalar(v.y).addScaledVector(p,-m.y).multiplyScalar(D),x.copy(p).multiplyScalar(m.x).addScaledVector(f,-v.x).multiplyScalar(D),a[I].add(_),a[R].add(_),a[C].add(_),l[I].add(x),l[R].add(x),l[C].add(x))}let b=this.groups;b.length===0&&(b=[{start:0,count:e.count}]);for(let I=0,R=b.length;I<R;++I){const C=b[I],D=C.start,B=C.count;for(let G=D,z=D+B;G<z;G+=3)y(e.getX(G+0),e.getX(G+1),e.getX(G+2))}const M=new F,T=new F,P=new F,E=new F;function L(I){P.fromBufferAttribute(r,I),E.copy(P);const R=a[I];M.copy(R),M.sub(P.multiplyScalar(P.dot(R))).normalize(),T.crossVectors(E,R);const D=T.dot(l[I])<0?-1:1;o.setXYZW(I,M.x,M.y,M.z,D)}for(let I=0,R=b.length;I<R;++I){const C=b[I],D=C.start,B=C.count;for(let G=D,z=D+B;G<z;G+=3)L(e.getX(G+0)),L(e.getX(G+1)),L(e.getX(G+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new kt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,m=i.count;d<m;d++)i.setXYZ(d,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,f=new F,p=new F;if(e)for(let d=0,m=e.count;d<m;d+=3){const v=e.getX(d+0),_=e.getX(d+1),x=e.getX(d+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,x),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,x),a.add(f),l.add(f),c.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(x,c.x,c.y,c.z)}else for(let d=0,m=t.count;d<m;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),f.subVectors(o,s),p.subVectors(r,s),f.cross(p),i.setXYZ(d+0,f.x,f.y,f.z),i.setXYZ(d+1,f.x,f.y,f.z),i.setXYZ(d+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Rn.fromBufferAttribute(e,t),Rn.normalize(),e.setXYZ(t,Rn.x,Rn.y,Rn.z)}toNonIndexed(){function e(a,l){const c=a.array,f=a.itemSize,p=a.normalized,d=new c.constructor(l.length*f);let m=0,v=0;for(let _=0,x=l.length;_<x;_++){a.isInterleavedBufferAttribute?m=l[_]*a.data.stride+a.offset:m=l[_]*f;for(let y=0;y<f;y++)d[v++]=c[m++]}return new kt(d,f,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new yt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let f=0,p=c.length;f<p;f++){const d=c[f],m=e(d,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],f=[];for(let p=0,d=c.length;p<d;p++){const m=c[p];f.push(m.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const f=r[c];this.setAttribute(c,f.clone(t))}const s=e.morphAttributes;for(const c in s){const f=[],p=s[c];for(let d=0,m=p.length;d<m;d++)f.push(p[d].clone(t));this.morphAttributes[c]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,f=o.length;c<f;c++){const p=o[c];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const H5=new nt,Ro=new ec,od=new Zn,$5=new F,Qa=new F,el=new F,tl=new F,I1=new F,ad=new F,ld=new pe,cd=new pe,ud=new pe,G5=new F,W5=new F,j5=new F,hd=new F,fd=new F;class Mn extends Nt{constructor(e=new yt,t=new ho){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){ad.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const f=a[l],p=s[l];f!==0&&(I1.fromBufferAttribute(p,e),o?ad.addScaledVector(I1,f):ad.addScaledVector(I1.sub(t),f))}t.add(ad)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),od.copy(i.boundingSphere),od.applyMatrix4(s),Ro.copy(e.ray).recast(e.near),!(od.containsPoint(Ro.origin)===!1&&(Ro.intersectSphere(od,$5)===null||Ro.origin.distanceToSquared($5)>(e.far-e.near)**2))&&(H5.copy(s).invert(),Ro.copy(e.ray).applyMatrix4(H5),!(i.boundingBox!==null&&Ro.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Ro)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,f=s.attributes.uv1,p=s.attributes.normal,d=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,_=d.length;v<_;v++){const x=d[v],y=o[x.materialIndex],b=Math.max(x.start,m.start),M=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let T=b,P=M;T<P;T+=3){const E=a.getX(T),L=a.getX(T+1),I=a.getX(T+2);r=dd(this,y,e,i,c,f,p,E,L,I),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let x=v,y=_;x<y;x+=3){const b=a.getX(x),M=a.getX(x+1),T=a.getX(x+2);r=dd(this,o,e,i,c,f,p,b,M,T),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,_=d.length;v<_;v++){const x=d[v],y=o[x.materialIndex],b=Math.max(x.start,m.start),M=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let T=b,P=M;T<P;T+=3){const E=T,L=T+1,I=T+2;r=dd(this,y,e,i,c,f,p,E,L,I),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),_=Math.min(l.count,m.start+m.count);for(let x=v,y=_;x<y;x+=3){const b=x,M=x+1,T=x+2;r=dd(this,o,e,i,c,f,p,b,M,T),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function VO(n,e,t,i,r,s,o,a){let l;if(e.side===ci?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===vs,a),l===null)return null;fd.copy(a),fd.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(fd);return c<t.near||c>t.far?null:{distance:c,point:fd.clone(),object:n}}function dd(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Qa),n.getVertexPosition(l,el),n.getVertexPosition(c,tl);const f=VO(n,e,t,i,Qa,el,tl,hd);if(f){r&&(ld.fromBufferAttribute(r,a),cd.fromBufferAttribute(r,l),ud.fromBufferAttribute(r,c),f.uv=Li.getInterpolation(hd,Qa,el,tl,ld,cd,ud,new pe)),s&&(ld.fromBufferAttribute(s,a),cd.fromBufferAttribute(s,l),ud.fromBufferAttribute(s,c),f.uv1=Li.getInterpolation(hd,Qa,el,tl,ld,cd,ud,new pe)),o&&(G5.fromBufferAttribute(o,a),W5.fromBufferAttribute(o,l),j5.fromBufferAttribute(o,c),f.normal=Li.getInterpolation(hd,Qa,el,tl,G5,W5,j5,new F),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const p={a,b:l,c,normal:new F,materialIndex:0};Li.getNormal(Qa,el,tl,p.normal),f.face=p}return f}class ba extends yt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],f=[],p=[];let d=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ge(c,3)),this.setAttribute("normal",new Ge(f,3)),this.setAttribute("uv",new Ge(p,2));function v(_,x,y,b,M,T,P,E,L,I,R){const C=T/L,D=P/I,B=T/2,G=P/2,z=E/2,Z=L+1,$=I+1;let q=0,k=0;const Q=new F;for(let oe=0;oe<$;oe++){const he=oe*D-G;for(let Pe=0;Pe<Z;Pe++){const st=Pe*C-B;Q[_]=st*b,Q[x]=he*M,Q[y]=z,c.push(Q.x,Q.y,Q.z),Q[_]=0,Q[x]=0,Q[y]=E>0?1:-1,f.push(Q.x,Q.y,Q.z),p.push(Pe/L),p.push(1-oe/I),q+=1}}for(let oe=0;oe<I;oe++)for(let he=0;he<L;he++){const Pe=d+he+Z*oe,st=d+he+Z*(oe+1),ae=d+(he+1)+Z*(oe+1),ge=d+(he+1)+Z*oe;l.push(Pe,st,ge),l.push(st,ae,ge),k+=6}a.addGroup(m,k,R),m+=k,d+=q}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ba(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Gl(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ri(n){const e={};for(let t=0;t<n.length;t++){const i=Gl(n[t]);for(const r in i)e[r]=i[r]}return e}function zO(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function x7(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Ft.workingColorSpace}const _7={clone:Gl,merge:ri};var HO=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$O=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yr extends Bn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HO,this.fragmentShader=$O,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Gl(e.uniforms),this.uniformsGroups=zO(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class h0 extends Nt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new nt,this.projectionMatrix=new nt,this.projectionMatrixInverse=new nt,this.coordinateSystem=Nr}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const zs=new F,X5=new pe,q5=new pe;class kn extends h0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=$l*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ra*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return $l*2*Math.atan(Math.tan(ra*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){zs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zs.x,zs.y).multiplyScalar(-e/zs.z),zs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(zs.x,zs.y).multiplyScalar(-e/zs.z)}getViewSize(e,t){return this.getViewBounds(e,X5,q5),t.subVectors(q5,X5)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ra*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const nl=-90,il=1;class S7 extends Nt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new kn(nl,il,e,t);r.layers=this.layers,this.add(r);const s=new kn(nl,il,e,t);s.layers=this.layers,this.add(s);const o=new kn(nl,il,e,t);o.layers=this.layers,this.add(o);const a=new kn(nl,il,e,t);a.layers=this.layers,this.add(a);const l=new kn(nl,il,e,t);l.layers=this.layers,this.add(l);const c=new kn(nl,il,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Nr)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===$u)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,f]=this.children,p=e.getRenderTarget(),d=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(p,d,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class Ph extends rn{constructor(e,t,i,r,s,o,a,l,c,f){e=e!==void 0?e:[],t=t!==void 0?t:ys,super(e,t,i,r,s,o,a,l,c,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class M7 extends vr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Ph(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Sn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ba(5,5,5),s=new yr({name:"CubemapFromEquirect",uniforms:Gl(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ci,blending:fs});s.uniforms.tEquirect.value=t;const o=new Mn(r,s),a=t.minFilter;return t.minFilter===Dr&&(t.minFilter=Sn),new S7(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const D1=new F,GO=new F,WO=new dt;class Ys{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=D1.subVectors(i,t).cross(GO.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(D1),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WO.getNormalMatrix(e),r=this.coplanarPoint(D1).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Lo=new Zn,pd=new F;class Rh{constructor(e=new Ys,t=new Ys,i=new Ys,r=new Ys,s=new Ys,o=new Ys){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Nr){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],f=r[5],p=r[6],d=r[7],m=r[8],v=r[9],_=r[10],x=r[11],y=r[12],b=r[13],M=r[14],T=r[15];if(i[0].setComponents(l-s,d-c,x-m,T-y).normalize(),i[1].setComponents(l+s,d+c,x+m,T+y).normalize(),i[2].setComponents(l+o,d+f,x+v,T+b).normalize(),i[3].setComponents(l-o,d-f,x-v,T-b).normalize(),i[4].setComponents(l-a,d-p,x-_,T-M).normalize(),t===Nr)i[5].setComponents(l+a,d+p,x+_,T+M).normalize();else if(t===$u)i[5].setComponents(a,p,_,M).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Lo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Lo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Lo)}intersectsSprite(e){return Lo.center.set(0,0,0),Lo.radius=.7071067811865476,Lo.applyMatrix4(e.matrixWorld),this.intersectsSphere(Lo)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(pd.x=r.normal.x>0?e.max.x:e.min.x,pd.y=r.normal.y>0?e.max.y:e.min.y,pd.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(pd)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function b7(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function jO(n){const e=new WeakMap;function t(a,l){const c=a.array,f=a.usage,p=c.byteLength,d=n.createBuffer();n.bindBuffer(l,d),n.bufferData(l,c,f),a.onUploadCallback();let m;if(c instanceof Float32Array)m=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=n.SHORT;else if(c instanceof Uint32Array)m=n.UNSIGNED_INT;else if(c instanceof Int32Array)m=n.INT;else if(c instanceof Int8Array)m=n.BYTE;else if(c instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:d,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:p}}function i(a,l,c){const f=l.array,p=l._updateRange,d=l.updateRanges;if(n.bindBuffer(c,a),p.count===-1&&d.length===0&&n.bufferSubData(c,0,f),d.length!==0){for(let m=0,v=d.length;m<v;m++){const _=d[m];n.bufferSubData(c,_.start*f.BYTES_PER_ELEMENT,f,_.start,_.count)}l.clearUpdateRanges()}p.count!==-1&&(n.bufferSubData(c,p.offset*f.BYTES_PER_ELEMENT,f,p.offset,p.count),p.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const f=e.get(a);(!f||f.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class tc extends yt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,f=l+1,p=e/a,d=t/l,m=[],v=[],_=[],x=[];for(let y=0;y<f;y++){const b=y*d-o;for(let M=0;M<c;M++){const T=M*p-s;v.push(T,-b,0),_.push(0,0,1),x.push(M/a),x.push(1-y/l)}}for(let y=0;y<l;y++)for(let b=0;b<a;b++){const M=b+c*y,T=b+c*(y+1),P=b+1+c*(y+1),E=b+1+c*y;m.push(M,T,E),m.push(T,P,E)}this.setIndex(m),this.setAttribute("position",new Ge(v,3)),this.setAttribute("normal",new Ge(_,3)),this.setAttribute("uv",new Ge(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tc(e.width,e.height,e.widthSegments,e.heightSegments)}}var XO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,qO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,YO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,KO=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ZO=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,JO=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,QO=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ek=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,tk=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,nk=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,ik=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,rk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,sk=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ok=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ak=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,lk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,ck=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,uk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,hk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,fk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,pk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,mk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( batchId );
	vColor.xyz *= batchingColor.xyz;
#endif`,gk=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,vk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,yk=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,xk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,_k=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Sk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bk="gl_FragColor = linearToOutputTexel( gl_FragColor );",wk=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Tk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Ak=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Ek=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Ck=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Pk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Rk=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Lk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Ik=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Dk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Nk=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Uk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Fk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Ok=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,kk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Bk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Vk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,zk=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Hk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$k=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Gk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Wk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,jk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Xk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,qk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Yk=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Kk=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Zk=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Jk=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Qk=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,eB=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,tB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nB=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,iB=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,rB=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,sB=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,oB=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,aB=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,lB=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,cB=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,uB=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,hB=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,fB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,dB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,pB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,mB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,gB=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,vB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,yB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,xB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,_B=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,SB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,MB=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,bB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,wB=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,TB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,AB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,EB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,CB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,PB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,RB=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,LB=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,IB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,DB=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,NB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,UB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,FB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,OB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,kB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,BB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,VB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,zB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,HB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$B=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,GB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,WB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const jB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,XB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,qB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,YB=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,KB=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZB=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,JB=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,QB=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,eV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,tV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,nV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,iV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,oV=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,aV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,lV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,hV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,dV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,pV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,vV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_V=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,SV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,MV=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,bV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,TV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vt={alphahash_fragment:XO,alphahash_pars_fragment:qO,alphamap_fragment:YO,alphamap_pars_fragment:KO,alphatest_fragment:ZO,alphatest_pars_fragment:JO,aomap_fragment:QO,aomap_pars_fragment:ek,batching_pars_vertex:tk,batching_vertex:nk,begin_vertex:ik,beginnormal_vertex:rk,bsdfs:sk,iridescence_fragment:ok,bumpmap_pars_fragment:ak,clipping_planes_fragment:lk,clipping_planes_pars_fragment:ck,clipping_planes_pars_vertex:uk,clipping_planes_vertex:hk,color_fragment:fk,color_pars_fragment:dk,color_pars_vertex:pk,color_vertex:mk,common:gk,cube_uv_reflection_fragment:vk,defaultnormal_vertex:yk,displacementmap_pars_vertex:xk,displacementmap_vertex:_k,emissivemap_fragment:Sk,emissivemap_pars_fragment:Mk,colorspace_fragment:bk,colorspace_pars_fragment:wk,envmap_fragment:Tk,envmap_common_pars_fragment:Ak,envmap_pars_fragment:Ek,envmap_pars_vertex:Ck,envmap_physical_pars_fragment:Bk,envmap_vertex:Pk,fog_vertex:Rk,fog_pars_vertex:Lk,fog_fragment:Ik,fog_pars_fragment:Dk,gradientmap_pars_fragment:Nk,lightmap_pars_fragment:Uk,lights_lambert_fragment:Fk,lights_lambert_pars_fragment:Ok,lights_pars_begin:kk,lights_toon_fragment:Vk,lights_toon_pars_fragment:zk,lights_phong_fragment:Hk,lights_phong_pars_fragment:$k,lights_physical_fragment:Gk,lights_physical_pars_fragment:Wk,lights_fragment_begin:jk,lights_fragment_maps:Xk,lights_fragment_end:qk,logdepthbuf_fragment:Yk,logdepthbuf_pars_fragment:Kk,logdepthbuf_pars_vertex:Zk,logdepthbuf_vertex:Jk,map_fragment:Qk,map_pars_fragment:eB,map_particle_fragment:tB,map_particle_pars_fragment:nB,metalnessmap_fragment:iB,metalnessmap_pars_fragment:rB,morphinstance_vertex:sB,morphcolor_vertex:oB,morphnormal_vertex:aB,morphtarget_pars_vertex:lB,morphtarget_vertex:cB,normal_fragment_begin:uB,normal_fragment_maps:hB,normal_pars_fragment:fB,normal_pars_vertex:dB,normal_vertex:pB,normalmap_pars_fragment:mB,clearcoat_normal_fragment_begin:gB,clearcoat_normal_fragment_maps:vB,clearcoat_pars_fragment:yB,iridescence_pars_fragment:xB,opaque_fragment:_B,packing:SB,premultiplied_alpha_fragment:MB,project_vertex:bB,dithering_fragment:wB,dithering_pars_fragment:TB,roughnessmap_fragment:AB,roughnessmap_pars_fragment:EB,shadowmap_pars_fragment:CB,shadowmap_pars_vertex:PB,shadowmap_vertex:RB,shadowmask_pars_fragment:LB,skinbase_vertex:IB,skinning_pars_vertex:DB,skinning_vertex:NB,skinnormal_vertex:UB,specularmap_fragment:FB,specularmap_pars_fragment:OB,tonemapping_fragment:kB,tonemapping_pars_fragment:BB,transmission_fragment:VB,transmission_pars_fragment:zB,uv_pars_fragment:HB,uv_pars_vertex:$B,uv_vertex:GB,worldpos_vertex:WB,background_vert:jB,background_frag:XB,backgroundCube_vert:qB,backgroundCube_frag:YB,cube_vert:KB,cube_frag:ZB,depth_vert:JB,depth_frag:QB,distanceRGBA_vert:eV,distanceRGBA_frag:tV,equirect_vert:nV,equirect_frag:iV,linedashed_vert:rV,linedashed_frag:sV,meshbasic_vert:oV,meshbasic_frag:aV,meshlambert_vert:lV,meshlambert_frag:cV,meshmatcap_vert:uV,meshmatcap_frag:hV,meshnormal_vert:fV,meshnormal_frag:dV,meshphong_vert:pV,meshphong_frag:mV,meshphysical_vert:gV,meshphysical_frag:vV,meshtoon_vert:yV,meshtoon_frag:xV,points_vert:_V,points_frag:SV,shadow_vert:MV,shadow_frag:bV,sprite_vert:wV,sprite_frag:TV},Ie={common:{diffuse:{value:new Ve(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dt}},envmap:{envMap:{value:null},envMapRotation:{value:new dt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dt},normalScale:{value:new pe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ve(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ve(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0},uvTransform:{value:new dt}},sprite:{diffuse:{value:new Ve(16777215)},opacity:{value:1},center:{value:new pe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dt},alphaMap:{value:null},alphaMapTransform:{value:new dt},alphaTest:{value:0}}},pr={basic:{uniforms:ri([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.fog]),vertexShader:vt.meshbasic_vert,fragmentShader:vt.meshbasic_frag},lambert:{uniforms:ri([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new Ve(0)}}]),vertexShader:vt.meshlambert_vert,fragmentShader:vt.meshlambert_frag},phong:{uniforms:ri([Ie.common,Ie.specularmap,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,Ie.lights,{emissive:{value:new Ve(0)},specular:{value:new Ve(1118481)},shininess:{value:30}}]),vertexShader:vt.meshphong_vert,fragmentShader:vt.meshphong_frag},standard:{uniforms:ri([Ie.common,Ie.envmap,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.roughnessmap,Ie.metalnessmap,Ie.fog,Ie.lights,{emissive:{value:new Ve(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vt.meshphysical_vert,fragmentShader:vt.meshphysical_frag},toon:{uniforms:ri([Ie.common,Ie.aomap,Ie.lightmap,Ie.emissivemap,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.gradientmap,Ie.fog,Ie.lights,{emissive:{value:new Ve(0)}}]),vertexShader:vt.meshtoon_vert,fragmentShader:vt.meshtoon_frag},matcap:{uniforms:ri([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,Ie.fog,{matcap:{value:null}}]),vertexShader:vt.meshmatcap_vert,fragmentShader:vt.meshmatcap_frag},points:{uniforms:ri([Ie.points,Ie.fog]),vertexShader:vt.points_vert,fragmentShader:vt.points_frag},dashed:{uniforms:ri([Ie.common,Ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vt.linedashed_vert,fragmentShader:vt.linedashed_frag},depth:{uniforms:ri([Ie.common,Ie.displacementmap]),vertexShader:vt.depth_vert,fragmentShader:vt.depth_frag},normal:{uniforms:ri([Ie.common,Ie.bumpmap,Ie.normalmap,Ie.displacementmap,{opacity:{value:1}}]),vertexShader:vt.meshnormal_vert,fragmentShader:vt.meshnormal_frag},sprite:{uniforms:ri([Ie.sprite,Ie.fog]),vertexShader:vt.sprite_vert,fragmentShader:vt.sprite_frag},background:{uniforms:{uvTransform:{value:new dt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:vt.background_vert,fragmentShader:vt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new dt}},vertexShader:vt.backgroundCube_vert,fragmentShader:vt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vt.cube_vert,fragmentShader:vt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vt.equirect_vert,fragmentShader:vt.equirect_frag},distanceRGBA:{uniforms:ri([Ie.common,Ie.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vt.distanceRGBA_vert,fragmentShader:vt.distanceRGBA_frag},shadow:{uniforms:ri([Ie.lights,Ie.fog,{color:{value:new Ve(0)},opacity:{value:1}}]),vertexShader:vt.shadow_vert,fragmentShader:vt.shadow_frag}};pr.physical={uniforms:ri([pr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dt},clearcoatNormalScale:{value:new pe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dt},sheen:{value:0},sheenColor:{value:new Ve(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dt},transmissionSamplerSize:{value:new pe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dt},attenuationDistance:{value:0},attenuationColor:{value:new Ve(0)},specularColor:{value:new Ve(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dt},anisotropyVector:{value:new pe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dt}}]),vertexShader:vt.meshphysical_vert,fragmentShader:vt.meshphysical_frag};const md={r:0,b:0,g:0},Io=new Fi,AV=new nt;function EV(n,e,t,i,r,s,o){const a=new Ve(0);let l=s===!0?0:1,c,f,p=null,d=0,m=null;function v(b){let M=b.isScene===!0?b.background:null;return M&&M.isTexture&&(M=(b.backgroundBlurriness>0?t:e).get(M)),M}function _(b){let M=!1;const T=v(b);T===null?y(a,l):T&&T.isColor&&(y(T,1),M=!0);const P=n.xr.getEnvironmentBlendMode();P==="additive"?i.buffers.color.setClear(0,0,0,1,o):P==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(b,M){const T=v(M);T&&(T.isCubeTexture||T.mapping===Ql)?(f===void 0&&(f=new Mn(new ba(1,1,1),new yr({name:"BackgroundCubeMaterial",uniforms:Gl(pr.backgroundCube.uniforms),vertexShader:pr.backgroundCube.vertexShader,fragmentShader:pr.backgroundCube.fragmentShader,side:ci,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(P,E,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),Io.copy(M.backgroundRotation),Io.x*=-1,Io.y*=-1,Io.z*=-1,T.isCubeTexture&&T.isRenderTargetTexture===!1&&(Io.y*=-1,Io.z*=-1),f.material.uniforms.envMap.value=T,f.material.uniforms.flipEnvMap.value=T.isCubeTexture&&T.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.uniforms.backgroundRotation.value.setFromMatrix4(AV.makeRotationFromEuler(Io)),f.material.toneMapped=Ft.getTransfer(T.colorSpace)!==Ht,(p!==T||d!==T.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,p=T,d=T.version,m=n.toneMapping),f.layers.enableAll(),b.unshift(f,f.geometry,f.material,0,0,null)):T&&T.isTexture&&(c===void 0&&(c=new Mn(new tc(2,2),new yr({name:"BackgroundMaterial",uniforms:Gl(pr.background.uniforms),vertexShader:pr.background.vertexShader,fragmentShader:pr.background.fragmentShader,side:vs,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=T,c.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,c.material.toneMapped=Ft.getTransfer(T.colorSpace)!==Ht,T.matrixAutoUpdate===!0&&T.updateMatrix(),c.material.uniforms.uvTransform.value.copy(T.matrix),(p!==T||d!==T.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,p=T,d=T.version,m=n.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}function y(b,M){b.getRGB(md,x7(n)),i.buffers.color.setClear(md.r,md.g,md.b,M,o)}return{getClearColor:function(){return a},setClearColor:function(b,M=1){a.set(b),l=M,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,y(a,l)},render:_,addToRenderList:x}}function CV(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=d(null);let s=r,o=!1;function a(C,D,B,G,z){let Z=!1;const $=p(G,B,D);s!==$&&(s=$,c(s.object)),Z=m(C,G,B,z),Z&&v(C,G,B,z),z!==null&&e.update(z,n.ELEMENT_ARRAY_BUFFER),(Z||o)&&(o=!1,T(C,D,B,G),z!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(z).buffer))}function l(){return n.createVertexArray()}function c(C){return n.bindVertexArray(C)}function f(C){return n.deleteVertexArray(C)}function p(C,D,B){const G=B.wireframe===!0;let z=i[C.id];z===void 0&&(z={},i[C.id]=z);let Z=z[D.id];Z===void 0&&(Z={},z[D.id]=Z);let $=Z[G];return $===void 0&&($=d(l()),Z[G]=$),$}function d(C){const D=[],B=[],G=[];for(let z=0;z<t;z++)D[z]=0,B[z]=0,G[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:B,attributeDivisors:G,object:C,attributes:{},index:null}}function m(C,D,B,G){const z=s.attributes,Z=D.attributes;let $=0;const q=B.getAttributes();for(const k in q)if(q[k].location>=0){const oe=z[k];let he=Z[k];if(he===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(he=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(he=C.instanceColor)),oe===void 0||oe.attribute!==he||he&&oe.data!==he.data)return!0;$++}return s.attributesNum!==$||s.index!==G}function v(C,D,B,G){const z={},Z=D.attributes;let $=0;const q=B.getAttributes();for(const k in q)if(q[k].location>=0){let oe=Z[k];oe===void 0&&(k==="instanceMatrix"&&C.instanceMatrix&&(oe=C.instanceMatrix),k==="instanceColor"&&C.instanceColor&&(oe=C.instanceColor));const he={};he.attribute=oe,oe&&oe.data&&(he.data=oe.data),z[k]=he,$++}s.attributes=z,s.attributesNum=$,s.index=G}function _(){const C=s.newAttributes;for(let D=0,B=C.length;D<B;D++)C[D]=0}function x(C){y(C,0)}function y(C,D){const B=s.newAttributes,G=s.enabledAttributes,z=s.attributeDivisors;B[C]=1,G[C]===0&&(n.enableVertexAttribArray(C),G[C]=1),z[C]!==D&&(n.vertexAttribDivisor(C,D),z[C]=D)}function b(){const C=s.newAttributes,D=s.enabledAttributes;for(let B=0,G=D.length;B<G;B++)D[B]!==C[B]&&(n.disableVertexAttribArray(B),D[B]=0)}function M(C,D,B,G,z,Z,$){$===!0?n.vertexAttribIPointer(C,D,B,z,Z):n.vertexAttribPointer(C,D,B,G,z,Z)}function T(C,D,B,G){_();const z=G.attributes,Z=B.getAttributes(),$=D.defaultAttributeValues;for(const q in Z){const k=Z[q];if(k.location>=0){let Q=z[q];if(Q===void 0&&(q==="instanceMatrix"&&C.instanceMatrix&&(Q=C.instanceMatrix),q==="instanceColor"&&C.instanceColor&&(Q=C.instanceColor)),Q!==void 0){const oe=Q.normalized,he=Q.itemSize,Pe=e.get(Q);if(Pe===void 0)continue;const st=Pe.buffer,ae=Pe.type,ge=Pe.bytesPerElement,Ee=ae===n.INT||ae===n.UNSIGNED_INT||Q.gpuType===N2;if(Q.isInterleavedBufferAttribute){const xe=Q.data,et=xe.stride,Je=Q.offset;if(xe.isInstancedInterleavedBuffer){for(let it=0;it<k.locationSize;it++)y(k.location+it,xe.meshPerAttribute);C.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let it=0;it<k.locationSize;it++)x(k.location+it);n.bindBuffer(n.ARRAY_BUFFER,st);for(let it=0;it<k.locationSize;it++)M(k.location+it,he/k.locationSize,ae,oe,et*ge,(Je+he/k.locationSize*it)*ge,Ee)}else{if(Q.isInstancedBufferAttribute){for(let xe=0;xe<k.locationSize;xe++)y(k.location+xe,Q.meshPerAttribute);C.isInstancedMesh!==!0&&G._maxInstanceCount===void 0&&(G._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let xe=0;xe<k.locationSize;xe++)x(k.location+xe);n.bindBuffer(n.ARRAY_BUFFER,st);for(let xe=0;xe<k.locationSize;xe++)M(k.location+xe,he/k.locationSize,ae,oe,he*ge,he/k.locationSize*xe*ge,Ee)}}else if($!==void 0){const oe=$[q];if(oe!==void 0)switch(oe.length){case 2:n.vertexAttrib2fv(k.location,oe);break;case 3:n.vertexAttrib3fv(k.location,oe);break;case 4:n.vertexAttrib4fv(k.location,oe);break;default:n.vertexAttrib1fv(k.location,oe)}}}}b()}function P(){I();for(const C in i){const D=i[C];for(const B in D){const G=D[B];for(const z in G)f(G[z].object),delete G[z];delete D[B]}delete i[C]}}function E(C){if(i[C.id]===void 0)return;const D=i[C.id];for(const B in D){const G=D[B];for(const z in G)f(G[z].object),delete G[z];delete D[B]}delete i[C.id]}function L(C){for(const D in i){const B=i[D];if(B[C.id]===void 0)continue;const G=B[C.id];for(const z in G)f(G[z].object),delete G[z];delete B[C.id]}}function I(){R(),o=!0,s!==r&&(s=r,c(s.object))}function R(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:R,dispose:P,releaseStatesOfGeometry:E,releaseStatesOfProgram:L,initAttributes:_,enableAttribute:x,disableUnusedAttributes:b}}function PV(n,e,t){let i;function r(c){i=c}function s(c,f){n.drawArrays(i,c,f),t.update(f,i,1)}function o(c,f,p){p!==0&&(n.drawArraysInstanced(i,c,f,p),t.update(f,i,p))}function a(c,f,p){if(p===0)return;const d=e.get("WEBGL_multi_draw");if(d===null)for(let m=0;m<p;m++)this.render(c[m],f[m]);else{d.multiDrawArraysWEBGL(i,c,0,f,0,p);let m=0;for(let v=0;v<p;v++)m+=f[v];t.update(m,i,1)}}function l(c,f,p,d){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<c.length;v++)o(c[v],f[v],d[v]);else{m.multiDrawArraysInstancedWEBGL(i,c,0,f,0,d,0,p);let v=0;for(let _=0;_<p;_++)v+=f[_];for(let _=0;_<d.length;_++)t.update(v,i,d[_])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function RV(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const E=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(E){return!(E!==ai&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(E){const L=E===Eh&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(E!==Wr&&i.convert(E)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&E!==Ii&&!L)}function l(E){if(E==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";E="mediump"}return E==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const f=l(c);f!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",f,"instead."),c=f);const p=t.logarithmicDepthBuffer===!0,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),_=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),b=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),T=m>0,P=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:p,maxTextures:d,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:_,maxAttributes:x,maxVertexUniforms:y,maxVaryings:b,maxFragmentUniforms:M,vertexTextures:T,maxSamples:P}}function LV(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Ys,a=new dt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,d){const m=p.length!==0||d||i!==0||r;return r=d,i=p.length,m},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,d){t=f(p,d,0)},this.setState=function(p,d,m){const v=p.clippingPlanes,_=p.clipIntersection,x=p.clipShadows,y=n.get(p);if(!r||v===null||v.length===0||s&&!x)s?f(null):c();else{const b=s?0:i,M=b*4;let T=y.clippingState||null;l.value=T,T=f(v,d,M,m);for(let P=0;P!==M;++P)T[P]=t[P];y.clippingState=T,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(p,d,m,v){const _=p!==null?p.length:0;let x=null;if(_!==0){if(x=l.value,v!==!0||x===null){const y=m+_*4,b=d.matrixWorldInverse;a.getNormalMatrix(b),(x===null||x.length<y)&&(x=new Float32Array(y));for(let M=0,T=m;M!==_;++M,T+=4)o.copy(p[M]).applyMatrix4(b,a),o.normal.toArray(x,T),x[T+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,x}}function IV(n){let e=new WeakMap;function t(o,a){return a===Iu?o.mapping=ys:a===Du&&(o.mapping=io),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Iu||a===Du)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new M7(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class f0 extends h0{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const bl=4,Y5=[.125,.215,.35,.446,.526,.582],jo=20,N1=new f0,K5=new Ve;let U1=null,F1=0,O1=0,k1=!1;const Go=(1+Math.sqrt(5))/2,rl=1/Go,Z5=[new F(-Go,rl,0),new F(Go,rl,0),new F(-rl,0,Go),new F(rl,0,Go),new F(0,Go,-rl),new F(0,Go,rl),new F(-1,1,-1),new F(1,1,-1),new F(-1,1,1),new F(1,1,1)];class qv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){U1=this._renderer.getRenderTarget(),F1=this._renderer.getActiveCubeFace(),O1=this._renderer.getActiveMipmapLevel(),k1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=e8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Q5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(U1,F1,O1),this._renderer.xr.enabled=k1,e.scissorTest=!1,gd(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ys||e.mapping===io?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),U1=this._renderer.getRenderTarget(),F1=this._renderer.getActiveCubeFace(),O1=this._renderer.getActiveMipmapLevel(),k1=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Sn,minFilter:Sn,generateMipmaps:!1,type:Eh,format:ai,colorSpace:Ms,depthBuffer:!1},r=J5(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=J5(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=DV(s)),this._blurMaterial=NV(s,e,t)}return r}_compileMaterial(e){const t=new Mn(this._lodPlanes[0],e);this._renderer.compile(t,N1)}_sceneToCubeUV(e,t,i,r){const a=new kn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],f=this._renderer,p=f.autoClear,d=f.toneMapping;f.getClearColor(K5),f.toneMapping=ds,f.autoClear=!1;const m=new ho({name:"PMREM.Background",side:ci,depthWrite:!1,depthTest:!1}),v=new Mn(new ba,m);let _=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,_=!0):(m.color.copy(K5),_=!0);for(let y=0;y<6;y++){const b=y%3;b===0?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):b===1?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const M=this._cubeSize;gd(r,b*M,y>2?M:0,M,M),f.setRenderTarget(r),_&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=d,f.autoClear=p,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ys||e.mapping===io;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=e8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Q5());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Mn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;gd(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,N1)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=Z5[(r-s-1)%Z5.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,p=new Mn(this._lodPlanes[r],c),d=c.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*jo-1),_=s/v,x=isFinite(s)?1+Math.floor(f*_):jo;x>jo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${jo}`);const y=[];let b=0;for(let L=0;L<jo;++L){const I=L/_,R=Math.exp(-I*I/2);y.push(R),L===0?b+=R:L<x&&(b+=2*R)}for(let L=0;L<y.length;L++)y[L]=y[L]/b;d.envMap.value=e.texture,d.samples.value=x,d.weights.value=y,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:M}=this;d.dTheta.value=v,d.mipInt.value=M-i;const T=this._sizeLods[r],P=3*T*(r>M-bl?r-M+bl:0),E=4*(this._cubeSize-T);gd(t,P,E,3*T,2*T),l.setRenderTarget(t),l.render(p,N1)}}function DV(n){const e=[],t=[],i=[];let r=n;const s=n-bl+1+Y5.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-bl?l=Y5[o-n+bl-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),f=-c,p=1+c,d=[f,f,p,f,p,p,f,f,p,p,f,p],m=6,v=6,_=3,x=2,y=1,b=new Float32Array(_*v*m),M=new Float32Array(x*v*m),T=new Float32Array(y*v*m);for(let E=0;E<m;E++){const L=E%3*2/3-1,I=E>2?0:-1,R=[L,I,0,L+2/3,I,0,L+2/3,I+1,0,L,I,0,L+2/3,I+1,0,L,I+1,0];b.set(R,_*v*E),M.set(d,x*v*E);const C=[E,E,E,E,E,E];T.set(C,y*v*E)}const P=new yt;P.setAttribute("position",new kt(b,_)),P.setAttribute("uv",new kt(M,x)),P.setAttribute("faceIndex",new kt(T,y)),e.push(P),r>bl&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function J5(n,e,t){const i=new vr(n,e,t);return i.texture.mapping=Ql,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function gd(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function NV(n,e,t){const i=new Float32Array(jo),r=new F(0,1,0);return new yr({name:"SphericalGaussianBlur",defines:{n:jo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:q2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function Q5(){return new yr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:q2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function e8(){return new yr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:q2(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:fs,depthTest:!1,depthWrite:!1})}function q2(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function UV(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Iu||l===Du,f=l===ys||l===io;if(c||f){let p=e.get(a);const d=p!==void 0?p.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==d)return t===null&&(t=new qv(n)),p=c?t.fromEquirectangular(a,p):t.fromCubemap(a,p),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),p.texture;if(p!==void 0)return p.texture;{const m=a.image;return c&&m&&m.height>0||f&&m&&r(m)?(t===null&&(t=new qv(n)),p=c?t.fromEquirectangular(a):t.fromCubemap(a),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),a.addEventListener("dispose",s),p.texture):null}}}return a}function r(a){let l=0;const c=6;for(let f=0;f<c;f++)a[f]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function FV(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&G2("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function OV(n,e,t,i){const r={},s=new WeakMap;function o(p){const d=p.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);for(const v in d.morphAttributes){const _=d.morphAttributes[v];for(let x=0,y=_.length;x<y;x++)e.remove(_[x])}d.removeEventListener("dispose",o),delete r[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(p,d){return r[d.id]===!0||(d.addEventListener("dispose",o),r[d.id]=!0,t.memory.geometries++),d}function l(p){const d=p.attributes;for(const v in d)e.update(d[v],n.ARRAY_BUFFER);const m=p.morphAttributes;for(const v in m){const _=m[v];for(let x=0,y=_.length;x<y;x++)e.update(_[x],n.ARRAY_BUFFER)}}function c(p){const d=[],m=p.index,v=p.attributes.position;let _=0;if(m!==null){const b=m.array;_=m.version;for(let M=0,T=b.length;M<T;M+=3){const P=b[M+0],E=b[M+1],L=b[M+2];d.push(P,E,E,L,L,P)}}else if(v!==void 0){const b=v.array;_=v.version;for(let M=0,T=b.length/3-1;M<T;M+=3){const P=M+0,E=M+1,L=M+2;d.push(P,E,E,L,L,P)}}else return;const x=new(p7(d)?X2:j2)(d,1);x.version=_;const y=s.get(p);y&&e.remove(y),s.set(p,x)}function f(p){const d=s.get(p);if(d){const m=p.index;m!==null&&d.version<m.version&&c(p)}else c(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:f}}function kV(n,e,t){let i;function r(d){i=d}let s,o;function a(d){s=d.type,o=d.bytesPerElement}function l(d,m){n.drawElements(i,m,s,d*o),t.update(m,i,1)}function c(d,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,d*o,v),t.update(m,i,v))}function f(d,m,v){if(v===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let x=0;x<v;x++)this.render(d[x]/o,m[x]);else{_.multiDrawElementsWEBGL(i,m,0,s,d,0,v);let x=0;for(let y=0;y<v;y++)x+=m[y];t.update(x,i,1)}}function p(d,m,v,_){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<d.length;y++)c(d[y]/o,m[y],_[y]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,d,0,_,0,v);let y=0;for(let b=0;b<v;b++)y+=m[b];for(let b=0;b<_.length;b++)t.update(y,i,_[b])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=f,this.renderMultiDrawInstances=p}function BV(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function VV(n,e,t){const i=new WeakMap,r=new Ot;function s(o,a,l){const c=o.morphTargetInfluences,f=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,p=f!==void 0?f.length:0;let d=i.get(a);if(d===void 0||d.count!==p){let R=function(){L.dispose(),i.delete(a),a.removeEventListener("dispose",R)};d!==void 0&&d.texture.dispose();const m=a.morphAttributes.position!==void 0,v=a.morphAttributes.normal!==void 0,_=a.morphAttributes.color!==void 0,x=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let M=0;m===!0&&(M=1),v===!0&&(M=2),_===!0&&(M=3);let T=a.attributes.position.count*M,P=1;T>e.maxTextureSize&&(P=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const E=new Float32Array(T*P*4*p),L=new u0(E,T,P,p);L.type=Ii,L.needsUpdate=!0;const I=M*4;for(let C=0;C<p;C++){const D=x[C],B=y[C],G=b[C],z=T*P*4*C;for(let Z=0;Z<D.count;Z++){const $=Z*I;m===!0&&(r.fromBufferAttribute(D,Z),E[z+$+0]=r.x,E[z+$+1]=r.y,E[z+$+2]=r.z,E[z+$+3]=0),v===!0&&(r.fromBufferAttribute(B,Z),E[z+$+4]=r.x,E[z+$+5]=r.y,E[z+$+6]=r.z,E[z+$+7]=0),_===!0&&(r.fromBufferAttribute(G,Z),E[z+$+8]=r.x,E[z+$+9]=r.y,E[z+$+10]=r.z,E[z+$+11]=G.itemSize===4?r.w:1)}}d={count:p,texture:L,size:new pe(T,P)},i.set(a,d),a.addEventListener("dispose",R)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let m=0;for(let _=0;_<c.length;_++)m+=c[_];const v=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(n,"morphTargetBaseInfluence",v),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",d.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",d.size)}return{update:s}}function zV(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,f=l.geometry,p=e.get(l,f);if(r.get(p)!==c&&(e.update(p),r.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const d=l.skeleton;r.get(d)!==c&&(d.update(),r.set(d,c))}return p}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class Y2 extends rn{constructor(e,t,i,r,s,o,a,l,c,f=ia){if(f!==ia&&f!==ga)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===ia&&(i=pa),i===void 0&&f===ga&&(i=ma),super(null,r,s,o,a,l,f,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:In,this.minFilter=l!==void 0?l:In,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const w7=new rn,T7=new Y2(1,1);T7.compareFunction=H2;const A7=new u0,E7=new W2,C7=new Ph,t8=[],n8=[],i8=new Float32Array(16),r8=new Float32Array(9),s8=new Float32Array(4);function nc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=t8[r];if(s===void 0&&(s=new Float32Array(r),t8[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Tn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function An(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function d0(n,e){let t=n8[e];t===void 0&&(t=new Int32Array(e),n8[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function HV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function $V(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tn(t,e))return;n.uniform2fv(this.addr,e),An(t,e)}}function GV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Tn(t,e))return;n.uniform3fv(this.addr,e),An(t,e)}}function WV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tn(t,e))return;n.uniform4fv(this.addr,e),An(t,e)}}function jV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),An(t,e)}else{if(Tn(t,i))return;s8.set(i),n.uniformMatrix2fv(this.addr,!1,s8),An(t,i)}}function XV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),An(t,e)}else{if(Tn(t,i))return;r8.set(i),n.uniformMatrix3fv(this.addr,!1,r8),An(t,i)}}function qV(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Tn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),An(t,e)}else{if(Tn(t,i))return;i8.set(i),n.uniformMatrix4fv(this.addr,!1,i8),An(t,i)}}function YV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function KV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tn(t,e))return;n.uniform2iv(this.addr,e),An(t,e)}}function ZV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tn(t,e))return;n.uniform3iv(this.addr,e),An(t,e)}}function JV(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tn(t,e))return;n.uniform4iv(this.addr,e),An(t,e)}}function QV(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function ez(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Tn(t,e))return;n.uniform2uiv(this.addr,e),An(t,e)}}function tz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Tn(t,e))return;n.uniform3uiv(this.addr,e),An(t,e)}}function nz(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Tn(t,e))return;n.uniform4uiv(this.addr,e),An(t,e)}}function iz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?T7:w7;t.setTexture2D(e||s,r)}function rz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||E7,r)}function sz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||C7,r)}function oz(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||A7,r)}function az(n){switch(n){case 5126:return HV;case 35664:return $V;case 35665:return GV;case 35666:return WV;case 35674:return jV;case 35675:return XV;case 35676:return qV;case 5124:case 35670:return YV;case 35667:case 35671:return KV;case 35668:case 35672:return ZV;case 35669:case 35673:return JV;case 5125:return QV;case 36294:return ez;case 36295:return tz;case 36296:return nz;case 35678:case 36198:case 36298:case 36306:case 35682:return iz;case 35679:case 36299:case 36307:return rz;case 35680:case 36300:case 36308:case 36293:return sz;case 36289:case 36303:case 36311:case 36292:return oz}}function lz(n,e){n.uniform1fv(this.addr,e)}function cz(n,e){const t=nc(e,this.size,2);n.uniform2fv(this.addr,t)}function uz(n,e){const t=nc(e,this.size,3);n.uniform3fv(this.addr,t)}function hz(n,e){const t=nc(e,this.size,4);n.uniform4fv(this.addr,t)}function fz(n,e){const t=nc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function dz(n,e){const t=nc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function pz(n,e){const t=nc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function mz(n,e){n.uniform1iv(this.addr,e)}function gz(n,e){n.uniform2iv(this.addr,e)}function vz(n,e){n.uniform3iv(this.addr,e)}function yz(n,e){n.uniform4iv(this.addr,e)}function xz(n,e){n.uniform1uiv(this.addr,e)}function _z(n,e){n.uniform2uiv(this.addr,e)}function Sz(n,e){n.uniform3uiv(this.addr,e)}function Mz(n,e){n.uniform4uiv(this.addr,e)}function bz(n,e,t){const i=this.cache,r=e.length,s=d0(t,r);Tn(i,s)||(n.uniform1iv(this.addr,s),An(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||w7,s[o])}function wz(n,e,t){const i=this.cache,r=e.length,s=d0(t,r);Tn(i,s)||(n.uniform1iv(this.addr,s),An(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||E7,s[o])}function Tz(n,e,t){const i=this.cache,r=e.length,s=d0(t,r);Tn(i,s)||(n.uniform1iv(this.addr,s),An(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||C7,s[o])}function Az(n,e,t){const i=this.cache,r=e.length,s=d0(t,r);Tn(i,s)||(n.uniform1iv(this.addr,s),An(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||A7,s[o])}function Ez(n){switch(n){case 5126:return lz;case 35664:return cz;case 35665:return uz;case 35666:return hz;case 35674:return fz;case 35675:return dz;case 35676:return pz;case 5124:case 35670:return mz;case 35667:case 35671:return gz;case 35668:case 35672:return vz;case 35669:case 35673:return yz;case 5125:return xz;case 36294:return _z;case 36295:return Sz;case 36296:return Mz;case 35678:case 36198:case 36298:case 36306:case 35682:return bz;case 35679:case 36299:case 36307:return wz;case 35680:case 36300:case 36308:case 36293:return Tz;case 36289:case 36303:case 36311:case 36292:return Az}}class Cz{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=az(t.type)}}class Pz{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=Ez(t.type)}}class Rz{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const B1=/(\w+)(\])?(\[|\.)?/g;function o8(n,e){n.seq.push(e),n.map[e.id]=e}function Lz(n,e,t){const i=n.name,r=i.length;for(B1.lastIndex=0;;){const s=B1.exec(i),o=B1.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){o8(t,c===void 0?new Cz(a,n,e):new Pz(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new Rz(a),o8(t,p)),t=p}}}class lp{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);Lz(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function a8(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const Iz=37297;let Dz=0;function Nz(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function Uz(n){const e=Ft.getPrimaries(Ft.workingColorSpace),t=Ft.getPrimaries(n);let i;switch(e===t?i="":e===zu&&t===Vu?i="LinearDisplayP3ToLinearSRGB":e===Vu&&t===zu&&(i="LinearSRGBToLinearDisplayP3"),n){case Ms:case Ch:return[i,"LinearTransferOETF"];case Ki:case c0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function l8(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+Nz(n.getShaderSource(e),o)}else return r}function Fz(n,e){const t=Uz(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function Oz(n,e){let t;switch(e){case kw:t="Linear";break;case Bw:t="Reinhard";break;case Vw:t="OptimizedCineon";break;case zw:t="ACESFilmic";break;case $w:t="AgX";break;case Gw:t="Neutral";break;case Hw:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function kz(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nu).join(`
`)}function Bz(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Vz(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function nu(n){return n!==""}function c8(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function u8(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const zz=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yv(n){return n.replace(zz,$z)}const Hz=new Map;function $z(n,e){let t=vt[e];if(t===void 0){const i=Hz.get(e);if(i!==void 0)t=vt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Yv(t)}const Gz=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function h8(n){return n.replace(Gz,Wz)}function Wz(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function f8(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function jz(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===I2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===uw?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Lr&&(e="SHADOWMAP_TYPE_VSM"),e}function Xz(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ys:case io:e="ENVMAP_TYPE_CUBE";break;case Ql:e="ENVMAP_TYPE_CUBE_UV";break}return e}function qz(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case io:e="ENVMAP_MODE_REFRACTION";break}return e}function Yz(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ah:e="ENVMAP_BLENDING_MULTIPLY";break;case Fw:e="ENVMAP_BLENDING_MIX";break;case Ow:e="ENVMAP_BLENDING_ADD";break}return e}function Kz(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function Zz(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=jz(t),c=Xz(t),f=qz(t),p=Yz(t),d=Kz(t),m=kz(t),v=Bz(s),_=r.createProgram();let x,y,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(nu).join(`
`),x.length>0&&(x+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(nu).join(`
`),y.length>0&&(y+=`
`)):(x=[f8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(nu).join(`
`),y=[f8(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ds?"#define TONE_MAPPING":"",t.toneMapping!==ds?vt.tonemapping_pars_fragment:"",t.toneMapping!==ds?Oz("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",vt.colorspace_pars_fragment,Fz("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(nu).join(`
`)),o=Yv(o),o=c8(o,t),o=u8(o,t),a=Yv(a),a=c8(a,t),a=u8(a,t),o=h8(o),a=h8(a),t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,y=["#define varying in",t.glslVersion===Xv?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Xv?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const M=b+x+o,T=b+y+a,P=a8(r,r.VERTEX_SHADER,M),E=a8(r,r.FRAGMENT_SHADER,T);r.attachShader(_,P),r.attachShader(_,E),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function L(D){if(n.debug.checkShaderErrors){const B=r.getProgramInfoLog(_).trim(),G=r.getShaderInfoLog(P).trim(),z=r.getShaderInfoLog(E).trim();let Z=!0,$=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(Z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,P,E);else{const q=l8(r,P,"vertex"),k=l8(r,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+B+`
`+q+`
`+k)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(G===""||z==="")&&($=!1);$&&(D.diagnostics={runnable:Z,programLog:B,vertexShader:{log:G,prefix:x},fragmentShader:{log:z,prefix:y}})}r.deleteShader(P),r.deleteShader(E),I=new lp(r,_),R=Vz(r,_)}let I;this.getUniforms=function(){return I===void 0&&L(this),I};let R;this.getAttributes=function(){return R===void 0&&L(this),R};let C=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return C===!1&&(C=r.getProgramParameter(_,Iz)),C},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=Dz++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=E,this}let Jz=0;class Qz{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new eH(e),t.set(e,i)),i}}class eH{constructor(e){this.id=Jz++,this.code=e,this.usedTimes=0}}function tH(n,e,t,i,r,s,o){const a=new sa,l=new Qz,c=new Set,f=[],p=r.logarithmicDepthBuffer,d=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(R){return c.add(R),R===0?"uv":`uv${R}`}function x(R,C,D,B,G){const z=B.fog,Z=G.geometry,$=R.isMeshStandardMaterial?B.environment:null,q=(R.isMeshStandardMaterial?t:e).get(R.envMap||$),k=q&&q.mapping===Ql?q.image.height:null,Q=v[R.type];R.precision!==null&&(m=r.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const oe=Z.morphAttributes.position||Z.morphAttributes.normal||Z.morphAttributes.color,he=oe!==void 0?oe.length:0;let Pe=0;Z.morphAttributes.position!==void 0&&(Pe=1),Z.morphAttributes.normal!==void 0&&(Pe=2),Z.morphAttributes.color!==void 0&&(Pe=3);let st,ae,ge,Ee;if(Q){const Ut=pr[Q];st=Ut.vertexShader,ae=Ut.fragmentShader}else st=R.vertexShader,ae=R.fragmentShader,l.update(R),ge=l.getVertexShaderID(R),Ee=l.getFragmentShaderID(R);const xe=n.getRenderTarget(),et=G.isInstancedMesh===!0,Je=G.isBatchedMesh===!0,it=!!R.map,W=!!R.matcap,fe=!!q,ue=!!R.aoMap,Me=!!R.lightMap,_e=!!R.bumpMap,Se=!!R.normalMap,Oe=!!R.displacementMap,Ne=!!R.emissiveMap,lt=!!R.metalnessMap,V=!!R.roughnessMap,N=R.anisotropy>0,re=R.clearcoat>0,ve=R.dispersion>0,de=R.iridescence>0,ye=R.sheen>0,qe=R.transmission>0,Re=N&&!!R.anisotropyMap,Le=re&&!!R.clearcoatMap,ct=re&&!!R.clearcoatNormalMap,be=re&&!!R.clearcoatRoughnessMap,$e=de&&!!R.iridescenceMap,St=de&&!!R.iridescenceThicknessMap,ot=ye&&!!R.sheenColorMap,Ue=ye&&!!R.sheenRoughnessMap,mt=!!R.specularMap,bt=!!R.specularColorMap,jt=!!R.specularIntensityMap,j=qe&&!!R.transmissionMap,ke=qe&&!!R.thicknessMap,ce=!!R.gradientMap,me=!!R.alphaMap,Ae=R.alphaTest>0,at=!!R.alphaHash,At=!!R.extensions;let Xt=ds;R.toneMapped&&(xe===null||xe.isXRRenderTarget===!0)&&(Xt=n.toneMapping);const gn={shaderID:Q,shaderType:R.type,shaderName:R.name,vertexShader:st,fragmentShader:ae,defines:R.defines,customVertexShaderID:ge,customFragmentShaderID:Ee,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,batching:Je,batchingColor:Je&&G._colorsTexture!==null,instancing:et,instancingColor:et&&G.instanceColor!==null,instancingMorph:et&&G.morphTexture!==null,supportsVertexTextures:d,outputColorSpace:xe===null?n.outputColorSpace:xe.isXRRenderTarget===!0?xe.texture.colorSpace:Ms,alphaToCoverage:!!R.alphaToCoverage,map:it,matcap:W,envMap:fe,envMapMode:fe&&q.mapping,envMapCubeUVHeight:k,aoMap:ue,lightMap:Me,bumpMap:_e,normalMap:Se,displacementMap:d&&Oe,emissiveMap:Ne,normalMapObjectSpace:Se&&R.normalMapType===o7,normalMapTangentSpace:Se&&R.normalMapType===uo,metalnessMap:lt,roughnessMap:V,anisotropy:N,anisotropyMap:Re,clearcoat:re,clearcoatMap:Le,clearcoatNormalMap:ct,clearcoatRoughnessMap:be,dispersion:ve,iridescence:de,iridescenceMap:$e,iridescenceThicknessMap:St,sheen:ye,sheenColorMap:ot,sheenRoughnessMap:Ue,specularMap:mt,specularColorMap:bt,specularIntensityMap:jt,transmission:qe,transmissionMap:j,thicknessMap:ke,gradientMap:ce,opaque:R.transparent===!1&&R.blending===na&&R.alphaToCoverage===!1,alphaMap:me,alphaTest:Ae,alphaHash:at,combine:R.combine,mapUv:it&&_(R.map.channel),aoMapUv:ue&&_(R.aoMap.channel),lightMapUv:Me&&_(R.lightMap.channel),bumpMapUv:_e&&_(R.bumpMap.channel),normalMapUv:Se&&_(R.normalMap.channel),displacementMapUv:Oe&&_(R.displacementMap.channel),emissiveMapUv:Ne&&_(R.emissiveMap.channel),metalnessMapUv:lt&&_(R.metalnessMap.channel),roughnessMapUv:V&&_(R.roughnessMap.channel),anisotropyMapUv:Re&&_(R.anisotropyMap.channel),clearcoatMapUv:Le&&_(R.clearcoatMap.channel),clearcoatNormalMapUv:ct&&_(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:be&&_(R.clearcoatRoughnessMap.channel),iridescenceMapUv:$e&&_(R.iridescenceMap.channel),iridescenceThicknessMapUv:St&&_(R.iridescenceThicknessMap.channel),sheenColorMapUv:ot&&_(R.sheenColorMap.channel),sheenRoughnessMapUv:Ue&&_(R.sheenRoughnessMap.channel),specularMapUv:mt&&_(R.specularMap.channel),specularColorMapUv:bt&&_(R.specularColorMap.channel),specularIntensityMapUv:jt&&_(R.specularIntensityMap.channel),transmissionMapUv:j&&_(R.transmissionMap.channel),thicknessMapUv:ke&&_(R.thicknessMap.channel),alphaMapUv:me&&_(R.alphaMap.channel),vertexTangents:!!Z.attributes.tangent&&(Se||N),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!Z.attributes.color&&Z.attributes.color.itemSize===4,pointsUvs:G.isPoints===!0&&!!Z.attributes.uv&&(it||me),fog:!!z,useFog:R.fog===!0,fogExp2:!!z&&z.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:G.isSkinnedMesh===!0,morphTargets:Z.morphAttributes.position!==void 0,morphNormals:Z.morphAttributes.normal!==void 0,morphColors:Z.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:Pe,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:Xt,decodeVideoTexture:it&&R.map.isVideoTexture===!0&&Ft.getTransfer(R.map.colorSpace)===Ht,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===Ir,flipSided:R.side===ci,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionClipCullDistance:At&&R.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:At&&R.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:R.customProgramCacheKey()};return gn.vertexUv1s=c.has(1),gn.vertexUv2s=c.has(2),gn.vertexUv3s=c.has(3),c.clear(),gn}function y(R){const C=[];if(R.shaderID?C.push(R.shaderID):(C.push(R.customVertexShaderID),C.push(R.customFragmentShaderID)),R.defines!==void 0)for(const D in R.defines)C.push(D),C.push(R.defines[D]);return R.isRawShaderMaterial===!1&&(b(C,R),M(C,R),C.push(n.outputColorSpace)),C.push(R.customProgramCacheKey),C.join()}function b(R,C){R.push(C.precision),R.push(C.outputColorSpace),R.push(C.envMapMode),R.push(C.envMapCubeUVHeight),R.push(C.mapUv),R.push(C.alphaMapUv),R.push(C.lightMapUv),R.push(C.aoMapUv),R.push(C.bumpMapUv),R.push(C.normalMapUv),R.push(C.displacementMapUv),R.push(C.emissiveMapUv),R.push(C.metalnessMapUv),R.push(C.roughnessMapUv),R.push(C.anisotropyMapUv),R.push(C.clearcoatMapUv),R.push(C.clearcoatNormalMapUv),R.push(C.clearcoatRoughnessMapUv),R.push(C.iridescenceMapUv),R.push(C.iridescenceThicknessMapUv),R.push(C.sheenColorMapUv),R.push(C.sheenRoughnessMapUv),R.push(C.specularMapUv),R.push(C.specularColorMapUv),R.push(C.specularIntensityMapUv),R.push(C.transmissionMapUv),R.push(C.thicknessMapUv),R.push(C.combine),R.push(C.fogExp2),R.push(C.sizeAttenuation),R.push(C.morphTargetsCount),R.push(C.morphAttributeCount),R.push(C.numDirLights),R.push(C.numPointLights),R.push(C.numSpotLights),R.push(C.numSpotLightMaps),R.push(C.numHemiLights),R.push(C.numRectAreaLights),R.push(C.numDirLightShadows),R.push(C.numPointLightShadows),R.push(C.numSpotLightShadows),R.push(C.numSpotLightShadowsWithMaps),R.push(C.numLightProbes),R.push(C.shadowMapType),R.push(C.toneMapping),R.push(C.numClippingPlanes),R.push(C.numClipIntersection),R.push(C.depthPacking)}function M(R,C){a.disableAll(),C.supportsVertexTextures&&a.enable(0),C.instancing&&a.enable(1),C.instancingColor&&a.enable(2),C.instancingMorph&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),C.alphaHash&&a.enable(18),C.batching&&a.enable(19),C.dispersion&&a.enable(20),C.batchingColor&&a.enable(21),R.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.doubleSided&&a.enable(10),C.flipSided&&a.enable(11),C.useDepthPacking&&a.enable(12),C.dithering&&a.enable(13),C.transmission&&a.enable(14),C.sheen&&a.enable(15),C.opaque&&a.enable(16),C.pointsUvs&&a.enable(17),C.decodeVideoTexture&&a.enable(18),C.alphaToCoverage&&a.enable(19),R.push(a.mask)}function T(R){const C=v[R.type];let D;if(C){const B=pr[C];D=_7.clone(B.uniforms)}else D=R.uniforms;return D}function P(R,C){let D;for(let B=0,G=f.length;B<G;B++){const z=f[B];if(z.cacheKey===C){D=z,++D.usedTimes;break}}return D===void 0&&(D=new Zz(n,C,R,s),f.push(D)),D}function E(R){if(--R.usedTimes===0){const C=f.indexOf(R);f[C]=f[f.length-1],f.pop(),R.destroy()}}function L(R){l.remove(R)}function I(){l.dispose()}return{getParameters:x,getProgramCacheKey:y,getUniforms:T,acquireProgram:P,releaseProgram:E,releaseShaderCache:L,programs:f,dispose:I}}function nH(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function iH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function d8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function p8(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,d,m,v,_,x){let y=n[e];return y===void 0?(y={id:p.id,object:p,geometry:d,material:m,groupOrder:v,renderOrder:p.renderOrder,z:_,group:x},n[e]=y):(y.id=p.id,y.object=p,y.geometry=d,y.material=m,y.groupOrder=v,y.renderOrder=p.renderOrder,y.z=_,y.group=x),e++,y}function a(p,d,m,v,_,x){const y=o(p,d,m,v,_,x);m.transmission>0?i.push(y):m.transparent===!0?r.push(y):t.push(y)}function l(p,d,m,v,_,x){const y=o(p,d,m,v,_,x);m.transmission>0?i.unshift(y):m.transparent===!0?r.unshift(y):t.unshift(y)}function c(p,d){t.length>1&&t.sort(p||iH),i.length>1&&i.sort(d||d8),r.length>1&&r.sort(d||d8)}function f(){for(let p=e,d=n.length;p<d;p++){const m=n[p];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:c}}function rH(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new p8,n.set(i,[o])):r>=s.length?(o=new p8,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function sH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new Ve};break;case"SpotLight":t={position:new F,direction:new F,color:new Ve,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new Ve,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new Ve,groundColor:new Ve};break;case"RectAreaLight":t={color:new Ve,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function oH(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let aH=0;function lH(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function cH(n){const e=new sH,t=oH(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new F);const r=new F,s=new nt,o=new nt;function a(c){let f=0,p=0,d=0;for(let R=0;R<9;R++)i.probe[R].set(0,0,0);let m=0,v=0,_=0,x=0,y=0,b=0,M=0,T=0,P=0,E=0,L=0;c.sort(lH);for(let R=0,C=c.length;R<C;R++){const D=c[R],B=D.color,G=D.intensity,z=D.distance,Z=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)f+=B.r*G,p+=B.g*G,d+=B.b*G;else if(D.isLightProbe){for(let $=0;$<9;$++)i.probe[$].addScaledVector(D.sh.coefficients[$],G);L++}else if(D.isDirectionalLight){const $=e.get(D);if($.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const q=D.shadow,k=t.get(D);k.shadowBias=q.bias,k.shadowNormalBias=q.normalBias,k.shadowRadius=q.radius,k.shadowMapSize=q.mapSize,i.directionalShadow[m]=k,i.directionalShadowMap[m]=Z,i.directionalShadowMatrix[m]=D.shadow.matrix,b++}i.directional[m]=$,m++}else if(D.isSpotLight){const $=e.get(D);$.position.setFromMatrixPosition(D.matrixWorld),$.color.copy(B).multiplyScalar(G),$.distance=z,$.coneCos=Math.cos(D.angle),$.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),$.decay=D.decay,i.spot[_]=$;const q=D.shadow;if(D.map&&(i.spotLightMap[P]=D.map,P++,q.updateMatrices(D),D.castShadow&&E++),i.spotLightMatrix[_]=q.matrix,D.castShadow){const k=t.get(D);k.shadowBias=q.bias,k.shadowNormalBias=q.normalBias,k.shadowRadius=q.radius,k.shadowMapSize=q.mapSize,i.spotShadow[_]=k,i.spotShadowMap[_]=Z,T++}_++}else if(D.isRectAreaLight){const $=e.get(D);$.color.copy(B).multiplyScalar(G),$.halfWidth.set(D.width*.5,0,0),$.halfHeight.set(0,D.height*.5,0),i.rectArea[x]=$,x++}else if(D.isPointLight){const $=e.get(D);if($.color.copy(D.color).multiplyScalar(D.intensity),$.distance=D.distance,$.decay=D.decay,D.castShadow){const q=D.shadow,k=t.get(D);k.shadowBias=q.bias,k.shadowNormalBias=q.normalBias,k.shadowRadius=q.radius,k.shadowMapSize=q.mapSize,k.shadowCameraNear=q.camera.near,k.shadowCameraFar=q.camera.far,i.pointShadow[v]=k,i.pointShadowMap[v]=Z,i.pointShadowMatrix[v]=D.shadow.matrix,M++}i.point[v]=$,v++}else if(D.isHemisphereLight){const $=e.get(D);$.skyColor.copy(D.color).multiplyScalar(G),$.groundColor.copy(D.groundColor).multiplyScalar(G),i.hemi[y]=$,y++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ie.LTC_FLOAT_1,i.rectAreaLTC2=Ie.LTC_FLOAT_2):(i.rectAreaLTC1=Ie.LTC_HALF_1,i.rectAreaLTC2=Ie.LTC_HALF_2)),i.ambient[0]=f,i.ambient[1]=p,i.ambient[2]=d;const I=i.hash;(I.directionalLength!==m||I.pointLength!==v||I.spotLength!==_||I.rectAreaLength!==x||I.hemiLength!==y||I.numDirectionalShadows!==b||I.numPointShadows!==M||I.numSpotShadows!==T||I.numSpotMaps!==P||I.numLightProbes!==L)&&(i.directional.length=m,i.spot.length=_,i.rectArea.length=x,i.point.length=v,i.hemi.length=y,i.directionalShadow.length=b,i.directionalShadowMap.length=b,i.pointShadow.length=M,i.pointShadowMap.length=M,i.spotShadow.length=T,i.spotShadowMap.length=T,i.directionalShadowMatrix.length=b,i.pointShadowMatrix.length=M,i.spotLightMatrix.length=T+P-E,i.spotLightMap.length=P,i.numSpotLightShadowsWithMaps=E,i.numLightProbes=L,I.directionalLength=m,I.pointLength=v,I.spotLength=_,I.rectAreaLength=x,I.hemiLength=y,I.numDirectionalShadows=b,I.numPointShadows=M,I.numSpotShadows=T,I.numSpotMaps=P,I.numLightProbes=L,i.version=aH++)}function l(c,f){let p=0,d=0,m=0,v=0,_=0;const x=f.matrixWorldInverse;for(let y=0,b=c.length;y<b;y++){const M=c[y];if(M.isDirectionalLight){const T=i.directional[p];T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(x),p++}else if(M.isSpotLight){const T=i.spot[m];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),T.direction.setFromMatrixPosition(M.matrixWorld),r.setFromMatrixPosition(M.target.matrixWorld),T.direction.sub(r),T.direction.transformDirection(x),m++}else if(M.isRectAreaLight){const T=i.rectArea[v];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),o.identity(),s.copy(M.matrixWorld),s.premultiply(x),o.extractRotation(s),T.halfWidth.set(M.width*.5,0,0),T.halfHeight.set(0,M.height*.5,0),T.halfWidth.applyMatrix4(o),T.halfHeight.applyMatrix4(o),v++}else if(M.isPointLight){const T=i.point[d];T.position.setFromMatrixPosition(M.matrixWorld),T.position.applyMatrix4(x),d++}else if(M.isHemisphereLight){const T=i.hemi[_];T.direction.setFromMatrixPosition(M.matrixWorld),T.direction.transformDirection(x),_++}}}return{setup:a,setupView:l,state:i}}function m8(n){const e=new cH(n),t=[],i=[];function r(f){c.camera=f,t.length=0,i.length=0}function s(f){t.push(f)}function o(f){i.push(f)}function a(){e.setup(t)}function l(f){e.setupView(t,f)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function uH(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new m8(n),e.set(r,[a])):s>=o.length?(a=new m8(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class K2 extends Bn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=r7,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Z2 extends Bn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const hH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function dH(n,e,t){let i=new Rh;const r=new pe,s=new pe,o=new Ot,a=new K2({depthPacking:s7}),l=new Z2,c={},f=t.maxTextureSize,p={[vs]:ci,[ci]:vs,[Ir]:Ir},d=new yr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pe},radius:{value:4}},vertexShader:hH,fragmentShader:fH}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const v=new yt;v.setAttribute("position",new kt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Mn(v,d),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=I2;let y=this.type;this.render=function(E,L,I){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||E.length===0)return;const R=n.getRenderTarget(),C=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),B=n.state;B.setBlending(fs),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const G=y!==Lr&&this.type===Lr,z=y===Lr&&this.type!==Lr;for(let Z=0,$=E.length;Z<$;Z++){const q=E[Z],k=q.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",q,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;r.copy(k.mapSize);const Q=k.getFrameExtents();if(r.multiply(Q),s.copy(k.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/Q.x),r.x=s.x*Q.x,k.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/Q.y),r.y=s.y*Q.y,k.mapSize.y=s.y)),k.map===null||G===!0||z===!0){const he=this.type!==Lr?{minFilter:In,magFilter:In}:{};k.map!==null&&k.map.dispose(),k.map=new vr(r.x,r.y,he),k.map.texture.name=q.name+".shadowMap",k.camera.updateProjectionMatrix()}n.setRenderTarget(k.map),n.clear();const oe=k.getViewportCount();for(let he=0;he<oe;he++){const Pe=k.getViewport(he);o.set(s.x*Pe.x,s.y*Pe.y,s.x*Pe.z,s.y*Pe.w),B.viewport(o),k.updateMatrices(q,he),i=k.getFrustum(),T(L,I,k.camera,q,this.type)}k.isPointLightShadow!==!0&&this.type===Lr&&b(k,I),k.needsUpdate=!1}y=this.type,x.needsUpdate=!1,n.setRenderTarget(R,C,D)};function b(E,L){const I=e.update(_);d.defines.VSM_SAMPLES!==E.blurSamples&&(d.defines.VSM_SAMPLES=E.blurSamples,m.defines.VSM_SAMPLES=E.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),E.mapPass===null&&(E.mapPass=new vr(r.x,r.y)),d.uniforms.shadow_pass.value=E.map.texture,d.uniforms.resolution.value=E.mapSize,d.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(L,null,I,d,_,null),m.uniforms.shadow_pass.value=E.mapPass.texture,m.uniforms.resolution.value=E.mapSize,m.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(L,null,I,m,_,null)}function M(E,L,I,R){let C=null;const D=I.isPointLight===!0?E.customDistanceMaterial:E.customDepthMaterial;if(D!==void 0)C=D;else if(C=I.isPointLight===!0?l:a,n.localClippingEnabled&&L.clipShadows===!0&&Array.isArray(L.clippingPlanes)&&L.clippingPlanes.length!==0||L.displacementMap&&L.displacementScale!==0||L.alphaMap&&L.alphaTest>0||L.map&&L.alphaTest>0){const B=C.uuid,G=L.uuid;let z=c[B];z===void 0&&(z={},c[B]=z);let Z=z[G];Z===void 0&&(Z=C.clone(),z[G]=Z,L.addEventListener("dispose",P)),C=Z}if(C.visible=L.visible,C.wireframe=L.wireframe,R===Lr?C.side=L.shadowSide!==null?L.shadowSide:L.side:C.side=L.shadowSide!==null?L.shadowSide:p[L.side],C.alphaMap=L.alphaMap,C.alphaTest=L.alphaTest,C.map=L.map,C.clipShadows=L.clipShadows,C.clippingPlanes=L.clippingPlanes,C.clipIntersection=L.clipIntersection,C.displacementMap=L.displacementMap,C.displacementScale=L.displacementScale,C.displacementBias=L.displacementBias,C.wireframeLinewidth=L.wireframeLinewidth,C.linewidth=L.linewidth,I.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const B=n.properties.get(C);B.light=I}return C}function T(E,L,I,R,C){if(E.visible===!1)return;if(E.layers.test(L.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&C===Lr)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,E.matrixWorld);const G=e.update(E),z=E.material;if(Array.isArray(z)){const Z=G.groups;for(let $=0,q=Z.length;$<q;$++){const k=Z[$],Q=z[k.materialIndex];if(Q&&Q.visible){const oe=M(E,Q,R,C);E.onBeforeShadow(n,E,L,I,G,oe,k),n.renderBufferDirect(I,null,G,oe,E,k),E.onAfterShadow(n,E,L,I,G,oe,k)}}}else if(z.visible){const Z=M(E,z,R,C);E.onBeforeShadow(n,E,L,I,G,Z,null),n.renderBufferDirect(I,null,G,Z,E,null),E.onAfterShadow(n,E,L,I,G,Z,null)}}const B=E.children;for(let G=0,z=B.length;G<z;G++)T(B[G],L,I,R,C)}function P(E){E.target.removeEventListener("dispose",P);for(const I in c){const R=c[I],C=E.target.uuid;C in R&&(R[C].dispose(),delete R[C])}}}function pH(n){function e(){let j=!1;const ke=new Ot;let ce=null;const me=new Ot(0,0,0,0);return{setMask:function(Ae){ce!==Ae&&!j&&(n.colorMask(Ae,Ae,Ae,Ae),ce=Ae)},setLocked:function(Ae){j=Ae},setClear:function(Ae,at,At,Xt,gn){gn===!0&&(Ae*=Xt,at*=Xt,At*=Xt),ke.set(Ae,at,At,Xt),me.equals(ke)===!1&&(n.clearColor(Ae,at,At,Xt),me.copy(ke))},reset:function(){j=!1,ce=null,me.set(-1,0,0,0)}}}function t(){let j=!1,ke=null,ce=null,me=null;return{setTest:function(Ae){Ae?Ee(n.DEPTH_TEST):xe(n.DEPTH_TEST)},setMask:function(Ae){ke!==Ae&&!j&&(n.depthMask(Ae),ke=Ae)},setFunc:function(Ae){if(ce!==Ae){switch(Ae){case Pw:n.depthFunc(n.NEVER);break;case Rw:n.depthFunc(n.ALWAYS);break;case Lw:n.depthFunc(n.LESS);break;case Lu:n.depthFunc(n.LEQUAL);break;case Iw:n.depthFunc(n.EQUAL);break;case Dw:n.depthFunc(n.GEQUAL);break;case Nw:n.depthFunc(n.GREATER);break;case Uw:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}ce=Ae}},setLocked:function(Ae){j=Ae},setClear:function(Ae){me!==Ae&&(n.clearDepth(Ae),me=Ae)},reset:function(){j=!1,ke=null,ce=null,me=null}}}function i(){let j=!1,ke=null,ce=null,me=null,Ae=null,at=null,At=null,Xt=null,gn=null;return{setTest:function(Ut){j||(Ut?Ee(n.STENCIL_TEST):xe(n.STENCIL_TEST))},setMask:function(Ut){ke!==Ut&&!j&&(n.stencilMask(Ut),ke=Ut)},setFunc:function(Ut,Mi,bi){(ce!==Ut||me!==Mi||Ae!==bi)&&(n.stencilFunc(Ut,Mi,bi),ce=Ut,me=Mi,Ae=bi)},setOp:function(Ut,Mi,bi){(at!==Ut||At!==Mi||Xt!==bi)&&(n.stencilOp(Ut,Mi,bi),at=Ut,At=Mi,Xt=bi)},setLocked:function(Ut){j=Ut},setClear:function(Ut){gn!==Ut&&(n.clearStencil(Ut),gn=Ut)},reset:function(){j=!1,ke=null,ce=null,me=null,Ae=null,at=null,At=null,Xt=null,gn=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let c={},f={},p=new WeakMap,d=[],m=null,v=!1,_=null,x=null,y=null,b=null,M=null,T=null,P=null,E=new Ve(0,0,0),L=0,I=!1,R=null,C=null,D=null,B=null,G=null;const z=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Z=!1,$=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?($=parseFloat(/^WebGL (\d)/.exec(q)[1]),Z=$>=1):q.indexOf("OpenGL ES")!==-1&&($=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),Z=$>=2);let k=null,Q={};const oe=n.getParameter(n.SCISSOR_BOX),he=n.getParameter(n.VIEWPORT),Pe=new Ot().fromArray(oe),st=new Ot().fromArray(he);function ae(j,ke,ce,me){const Ae=new Uint8Array(4),at=n.createTexture();n.bindTexture(j,at),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let At=0;At<ce;At++)j===n.TEXTURE_3D||j===n.TEXTURE_2D_ARRAY?n.texImage3D(ke,0,n.RGBA,1,1,me,0,n.RGBA,n.UNSIGNED_BYTE,Ae):n.texImage2D(ke+At,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ae);return at}const ge={};ge[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),ge[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),ge[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ee(n.DEPTH_TEST),s.setFunc(Lu),_e(!1),Se(mv),Ee(n.CULL_FACE),ue(fs);function Ee(j){c[j]!==!0&&(n.enable(j),c[j]=!0)}function xe(j){c[j]!==!1&&(n.disable(j),c[j]=!1)}function et(j,ke){return f[j]!==ke?(n.bindFramebuffer(j,ke),f[j]=ke,j===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=ke),j===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=ke),!0):!1}function Je(j,ke){let ce=d,me=!1;if(j){ce=p.get(ke),ce===void 0&&(ce=[],p.set(ke,ce));const Ae=j.textures;if(ce.length!==Ae.length||ce[0]!==n.COLOR_ATTACHMENT0){for(let at=0,At=Ae.length;at<At;at++)ce[at]=n.COLOR_ATTACHMENT0+at;ce.length=Ae.length,me=!0}}else ce[0]!==n.BACK&&(ce[0]=n.BACK,me=!0);me&&n.drawBuffers(ce)}function it(j){return m!==j?(n.useProgram(j),m=j,!0):!1}const W={[Ks]:n.FUNC_ADD,[fw]:n.FUNC_SUBTRACT,[dw]:n.FUNC_REVERSE_SUBTRACT};W[pw]=n.MIN,W[mw]=n.MAX;const fe={[gw]:n.ZERO,[vw]:n.ONE,[yw]:n.SRC_COLOR,[Pp]:n.SRC_ALPHA,[ww]:n.SRC_ALPHA_SATURATE,[Mw]:n.DST_COLOR,[_w]:n.DST_ALPHA,[xw]:n.ONE_MINUS_SRC_COLOR,[Rp]:n.ONE_MINUS_SRC_ALPHA,[bw]:n.ONE_MINUS_DST_COLOR,[Sw]:n.ONE_MINUS_DST_ALPHA,[Tw]:n.CONSTANT_COLOR,[Aw]:n.ONE_MINUS_CONSTANT_COLOR,[Ew]:n.CONSTANT_ALPHA,[Cw]:n.ONE_MINUS_CONSTANT_ALPHA};function ue(j,ke,ce,me,Ae,at,At,Xt,gn,Ut){if(j===fs){v===!0&&(xe(n.BLEND),v=!1);return}if(v===!1&&(Ee(n.BLEND),v=!0),j!==hw){if(j!==_||Ut!==I){if((x!==Ks||M!==Ks)&&(n.blendEquation(n.FUNC_ADD),x=Ks,M=Ks),Ut)switch(j){case na:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gv:n.blendFunc(n.ONE,n.ONE);break;case vv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yv:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}else switch(j){case na:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case gv:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case vv:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case yv:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j);break}y=null,b=null,T=null,P=null,E.set(0,0,0),L=0,_=j,I=Ut}return}Ae=Ae||ke,at=at||ce,At=At||me,(ke!==x||Ae!==M)&&(n.blendEquationSeparate(W[ke],W[Ae]),x=ke,M=Ae),(ce!==y||me!==b||at!==T||At!==P)&&(n.blendFuncSeparate(fe[ce],fe[me],fe[at],fe[At]),y=ce,b=me,T=at,P=At),(Xt.equals(E)===!1||gn!==L)&&(n.blendColor(Xt.r,Xt.g,Xt.b,gn),E.copy(Xt),L=gn),_=j,I=!1}function Me(j,ke){j.side===Ir?xe(n.CULL_FACE):Ee(n.CULL_FACE);let ce=j.side===ci;ke&&(ce=!ce),_e(ce),j.blending===na&&j.transparent===!1?ue(fs):ue(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),s.setFunc(j.depthFunc),s.setTest(j.depthTest),s.setMask(j.depthWrite),r.setMask(j.colorWrite);const me=j.stencilWrite;o.setTest(me),me&&(o.setMask(j.stencilWriteMask),o.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),o.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Ne(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),j.alphaToCoverage===!0?Ee(n.SAMPLE_ALPHA_TO_COVERAGE):xe(n.SAMPLE_ALPHA_TO_COVERAGE)}function _e(j){R!==j&&(j?n.frontFace(n.CW):n.frontFace(n.CCW),R=j)}function Se(j){j!==lw?(Ee(n.CULL_FACE),j!==C&&(j===mv?n.cullFace(n.BACK):j===cw?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):xe(n.CULL_FACE),C=j}function Oe(j){j!==D&&(Z&&n.lineWidth(j),D=j)}function Ne(j,ke,ce){j?(Ee(n.POLYGON_OFFSET_FILL),(B!==ke||G!==ce)&&(n.polygonOffset(ke,ce),B=ke,G=ce)):xe(n.POLYGON_OFFSET_FILL)}function lt(j){j?Ee(n.SCISSOR_TEST):xe(n.SCISSOR_TEST)}function V(j){j===void 0&&(j=n.TEXTURE0+z-1),k!==j&&(n.activeTexture(j),k=j)}function N(j,ke,ce){ce===void 0&&(k===null?ce=n.TEXTURE0+z-1:ce=k);let me=Q[ce];me===void 0&&(me={type:void 0,texture:void 0},Q[ce]=me),(me.type!==j||me.texture!==ke)&&(k!==ce&&(n.activeTexture(ce),k=ce),n.bindTexture(j,ke||ge[j]),me.type=j,me.texture=ke)}function re(){const j=Q[k];j!==void 0&&j.type!==void 0&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)}function ve(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function de(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ye(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function qe(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function Le(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ct(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function be(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function $e(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function St(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}}function ot(j){Pe.equals(j)===!1&&(n.scissor(j.x,j.y,j.z,j.w),Pe.copy(j))}function Ue(j){st.equals(j)===!1&&(n.viewport(j.x,j.y,j.z,j.w),st.copy(j))}function mt(j,ke){let ce=l.get(ke);ce===void 0&&(ce=new WeakMap,l.set(ke,ce));let me=ce.get(j);me===void 0&&(me=n.getUniformBlockIndex(ke,j.name),ce.set(j,me))}function bt(j,ke){const me=l.get(ke).get(j);a.get(ke)!==me&&(n.uniformBlockBinding(ke,me,j.__bindingPointIndex),a.set(ke,me))}function jt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),c={},k=null,Q={},f={},p=new WeakMap,d=[],m=null,v=!1,_=null,x=null,y=null,b=null,M=null,T=null,P=null,E=new Ve(0,0,0),L=0,I=!1,R=null,C=null,D=null,B=null,G=null,Pe.set(0,0,n.canvas.width,n.canvas.height),st.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:Ee,disable:xe,bindFramebuffer:et,drawBuffers:Je,useProgram:it,setBlending:ue,setMaterial:Me,setFlipSided:_e,setCullFace:Se,setLineWidth:Oe,setPolygonOffset:Ne,setScissorTest:lt,activeTexture:V,bindTexture:N,unbindTexture:re,compressedTexImage2D:ve,compressedTexImage3D:de,texImage2D:$e,texImage3D:St,updateUBOMapping:mt,uniformBlockBinding:bt,texStorage2D:ct,texStorage3D:be,texSubImage2D:ye,texSubImage3D:qe,compressedTexSubImage2D:Re,compressedTexSubImage3D:Le,scissor:ot,viewport:Ue,reset:jt}}function mH(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new pe,f=new WeakMap;let p;const d=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(V,N){return m?new OffscreenCanvas(V,N):Gu("canvas")}function _(V,N,re){let ve=1;const de=lt(V);if((de.width>re||de.height>re)&&(ve=re/Math.max(de.width,de.height)),ve<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){const ye=Math.floor(ve*de.width),qe=Math.floor(ve*de.height);p===void 0&&(p=v(ye,qe));const Re=N?v(ye,qe):p;return Re.width=ye,Re.height=qe,Re.getContext("2d").drawImage(V,0,0,ye,qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+ye+"x"+qe+")."),Re}else return"data"in V&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),V;return V}function x(V){return V.generateMipmaps&&V.minFilter!==In&&V.minFilter!==Sn}function y(V){n.generateMipmap(V)}function b(V,N,re,ve,de=!1){if(V!==null){if(n[V]!==void 0)return n[V];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let ye=N;if(N===n.RED&&(re===n.FLOAT&&(ye=n.R32F),re===n.HALF_FLOAT&&(ye=n.R16F),re===n.UNSIGNED_BYTE&&(ye=n.R8)),N===n.RED_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.R8UI),re===n.UNSIGNED_SHORT&&(ye=n.R16UI),re===n.UNSIGNED_INT&&(ye=n.R32UI),re===n.BYTE&&(ye=n.R8I),re===n.SHORT&&(ye=n.R16I),re===n.INT&&(ye=n.R32I)),N===n.RG&&(re===n.FLOAT&&(ye=n.RG32F),re===n.HALF_FLOAT&&(ye=n.RG16F),re===n.UNSIGNED_BYTE&&(ye=n.RG8)),N===n.RG_INTEGER&&(re===n.UNSIGNED_BYTE&&(ye=n.RG8UI),re===n.UNSIGNED_SHORT&&(ye=n.RG16UI),re===n.UNSIGNED_INT&&(ye=n.RG32UI),re===n.BYTE&&(ye=n.RG8I),re===n.SHORT&&(ye=n.RG16I),re===n.INT&&(ye=n.RG32I)),N===n.RGB&&re===n.UNSIGNED_INT_5_9_9_9_REV&&(ye=n.RGB9_E5),N===n.RGBA){const qe=de?Bu:Ft.getTransfer(ve);re===n.FLOAT&&(ye=n.RGBA32F),re===n.HALF_FLOAT&&(ye=n.RGBA16F),re===n.UNSIGNED_BYTE&&(ye=qe===Ht?n.SRGB8_ALPHA8:n.RGBA8),re===n.UNSIGNED_SHORT_4_4_4_4&&(ye=n.RGBA4),re===n.UNSIGNED_SHORT_5_5_5_1&&(ye=n.RGB5_A1)}return(ye===n.R16F||ye===n.R32F||ye===n.RG16F||ye===n.RG32F||ye===n.RGBA16F||ye===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ye}function M(V,N){let re;return V?N===null||N===pa||N===ma?re=n.DEPTH24_STENCIL8:N===Ii?re=n.DEPTH32F_STENCIL8:N===Fu&&(re=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):N===null||N===pa||N===ma?re=n.DEPTH_COMPONENT24:N===Ii?re=n.DEPTH_COMPONENT32F:N===Fu&&(re=n.DEPTH_COMPONENT16),re}function T(V,N){return x(V)===!0||V.isFramebufferTexture&&V.minFilter!==In&&V.minFilter!==Sn?Math.log2(Math.max(N.width,N.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?N.mipmaps.length:1}function P(V){const N=V.target;N.removeEventListener("dispose",P),L(N),N.isVideoTexture&&f.delete(N)}function E(V){const N=V.target;N.removeEventListener("dispose",E),R(N)}function L(V){const N=i.get(V);if(N.__webglInit===void 0)return;const re=V.source,ve=d.get(re);if(ve){const de=ve[N.__cacheKey];de.usedTimes--,de.usedTimes===0&&I(V),Object.keys(ve).length===0&&d.delete(re)}i.remove(V)}function I(V){const N=i.get(V);n.deleteTexture(N.__webglTexture);const re=V.source,ve=d.get(re);delete ve[N.__cacheKey],o.memory.textures--}function R(V){const N=i.get(V);if(V.depthTexture&&V.depthTexture.dispose(),V.isWebGLCubeRenderTarget)for(let ve=0;ve<6;ve++){if(Array.isArray(N.__webglFramebuffer[ve]))for(let de=0;de<N.__webglFramebuffer[ve].length;de++)n.deleteFramebuffer(N.__webglFramebuffer[ve][de]);else n.deleteFramebuffer(N.__webglFramebuffer[ve]);N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer[ve])}else{if(Array.isArray(N.__webglFramebuffer))for(let ve=0;ve<N.__webglFramebuffer.length;ve++)n.deleteFramebuffer(N.__webglFramebuffer[ve]);else n.deleteFramebuffer(N.__webglFramebuffer);if(N.__webglDepthbuffer&&n.deleteRenderbuffer(N.__webglDepthbuffer),N.__webglMultisampledFramebuffer&&n.deleteFramebuffer(N.__webglMultisampledFramebuffer),N.__webglColorRenderbuffer)for(let ve=0;ve<N.__webglColorRenderbuffer.length;ve++)N.__webglColorRenderbuffer[ve]&&n.deleteRenderbuffer(N.__webglColorRenderbuffer[ve]);N.__webglDepthRenderbuffer&&n.deleteRenderbuffer(N.__webglDepthRenderbuffer)}const re=V.textures;for(let ve=0,de=re.length;ve<de;ve++){const ye=i.get(re[ve]);ye.__webglTexture&&(n.deleteTexture(ye.__webglTexture),o.memory.textures--),i.remove(re[ve])}i.remove(V)}let C=0;function D(){C=0}function B(){const V=C;return V>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+r.maxTextures),C+=1,V}function G(V){const N=[];return N.push(V.wrapS),N.push(V.wrapT),N.push(V.wrapR||0),N.push(V.magFilter),N.push(V.minFilter),N.push(V.anisotropy),N.push(V.internalFormat),N.push(V.format),N.push(V.type),N.push(V.generateMipmaps),N.push(V.premultiplyAlpha),N.push(V.flipY),N.push(V.unpackAlignment),N.push(V.colorSpace),N.join()}function z(V,N){const re=i.get(V);if(V.isVideoTexture&&Oe(V),V.isRenderTargetTexture===!1&&V.version>0&&re.__version!==V.version){const ve=V.image;if(ve===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ve.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{st(re,V,N);return}}t.bindTexture(n.TEXTURE_2D,re.__webglTexture,n.TEXTURE0+N)}function Z(V,N){const re=i.get(V);if(V.version>0&&re.__version!==V.version){st(re,V,N);return}t.bindTexture(n.TEXTURE_2D_ARRAY,re.__webglTexture,n.TEXTURE0+N)}function $(V,N){const re=i.get(V);if(V.version>0&&re.__version!==V.version){st(re,V,N);return}t.bindTexture(n.TEXTURE_3D,re.__webglTexture,n.TEXTURE0+N)}function q(V,N){const re=i.get(V);if(V.version>0&&re.__version!==V.version){ae(re,V,N);return}t.bindTexture(n.TEXTURE_CUBE_MAP,re.__webglTexture,n.TEXTURE0+N)}const k={[Nu]:n.REPEAT,[er]:n.CLAMP_TO_EDGE,[Uu]:n.MIRRORED_REPEAT},Q={[In]:n.NEAREST,[D2]:n.NEAREST_MIPMAP_NEAREST,[Sl]:n.NEAREST_MIPMAP_LINEAR,[Sn]:n.LINEAR,[hu]:n.LINEAR_MIPMAP_NEAREST,[Dr]:n.LINEAR_MIPMAP_LINEAR},oe={[a7]:n.NEVER,[d7]:n.ALWAYS,[l7]:n.LESS,[H2]:n.LEQUAL,[c7]:n.EQUAL,[f7]:n.GEQUAL,[u7]:n.GREATER,[h7]:n.NOTEQUAL};function he(V,N){if(N.type===Ii&&e.has("OES_texture_float_linear")===!1&&(N.magFilter===Sn||N.magFilter===hu||N.magFilter===Sl||N.magFilter===Dr||N.minFilter===Sn||N.minFilter===hu||N.minFilter===Sl||N.minFilter===Dr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(V,n.TEXTURE_WRAP_S,k[N.wrapS]),n.texParameteri(V,n.TEXTURE_WRAP_T,k[N.wrapT]),(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)&&n.texParameteri(V,n.TEXTURE_WRAP_R,k[N.wrapR]),n.texParameteri(V,n.TEXTURE_MAG_FILTER,Q[N.magFilter]),n.texParameteri(V,n.TEXTURE_MIN_FILTER,Q[N.minFilter]),N.compareFunction&&(n.texParameteri(V,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(V,n.TEXTURE_COMPARE_FUNC,oe[N.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(N.magFilter===In||N.minFilter!==Sl&&N.minFilter!==Dr||N.type===Ii&&e.has("OES_texture_float_linear")===!1)return;if(N.anisotropy>1||i.get(N).__currentAnisotropy){const re=e.get("EXT_texture_filter_anisotropic");n.texParameterf(V,re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(N.anisotropy,r.getMaxAnisotropy())),i.get(N).__currentAnisotropy=N.anisotropy}}}function Pe(V,N){let re=!1;V.__webglInit===void 0&&(V.__webglInit=!0,N.addEventListener("dispose",P));const ve=N.source;let de=d.get(ve);de===void 0&&(de={},d.set(ve,de));const ye=G(N);if(ye!==V.__cacheKey){de[ye]===void 0&&(de[ye]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,re=!0),de[ye].usedTimes++;const qe=de[V.__cacheKey];qe!==void 0&&(de[V.__cacheKey].usedTimes--,qe.usedTimes===0&&I(N)),V.__cacheKey=ye,V.__webglTexture=de[ye].texture}return re}function st(V,N,re){let ve=n.TEXTURE_2D;(N.isDataArrayTexture||N.isCompressedArrayTexture)&&(ve=n.TEXTURE_2D_ARRAY),N.isData3DTexture&&(ve=n.TEXTURE_3D);const de=Pe(V,N),ye=N.source;t.bindTexture(ve,V.__webglTexture,n.TEXTURE0+re);const qe=i.get(ye);if(ye.version!==qe.__version||de===!0){t.activeTexture(n.TEXTURE0+re);const Re=Ft.getPrimaries(Ft.workingColorSpace),Le=N.colorSpace===ls?null:Ft.getPrimaries(N.colorSpace),ct=N.colorSpace===ls||Re===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);let be=_(N.image,!1,r.maxTextureSize);be=Ne(N,be);const $e=s.convert(N.format,N.colorSpace),St=s.convert(N.type);let ot=b(N.internalFormat,$e,St,N.colorSpace,N.isVideoTexture);he(ve,N);let Ue;const mt=N.mipmaps,bt=N.isVideoTexture!==!0,jt=qe.__version===void 0||de===!0,j=ye.dataReady,ke=T(N,be);if(N.isDepthTexture)ot=M(N.format===ga,N.type),jt&&(bt?t.texStorage2D(n.TEXTURE_2D,1,ot,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,ot,be.width,be.height,0,$e,St,null));else if(N.isDataTexture)if(mt.length>0){bt&&jt&&t.texStorage2D(n.TEXTURE_2D,ke,ot,mt[0].width,mt[0].height);for(let ce=0,me=mt.length;ce<me;ce++)Ue=mt[ce],bt?j&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Ue.width,Ue.height,$e,St,Ue.data):t.texImage2D(n.TEXTURE_2D,ce,ot,Ue.width,Ue.height,0,$e,St,Ue.data);N.generateMipmaps=!1}else bt?(jt&&t.texStorage2D(n.TEXTURE_2D,ke,ot,be.width,be.height),j&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,be.width,be.height,$e,St,be.data)):t.texImage2D(n.TEXTURE_2D,0,ot,be.width,be.height,0,$e,St,be.data);else if(N.isCompressedTexture)if(N.isCompressedArrayTexture){bt&&jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,ot,mt[0].width,mt[0].height,be.depth);for(let ce=0,me=mt.length;ce<me;ce++)if(Ue=mt[ce],N.format!==ai)if($e!==null)if(bt){if(j)if(N.layerUpdates.size>0){for(const Ae of N.layerUpdates){const at=Ue.width*Ue.height;t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,Ae,Ue.width,Ue.height,1,$e,Ue.data.slice(at*Ae,at*(Ae+1)),0,0)}N.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Ue.width,Ue.height,be.depth,$e,Ue.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,ce,ot,Ue.width,Ue.height,be.depth,0,Ue.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else bt?j&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,ce,0,0,0,Ue.width,Ue.height,be.depth,$e,St,Ue.data):t.texImage3D(n.TEXTURE_2D_ARRAY,ce,ot,Ue.width,Ue.height,be.depth,0,$e,St,Ue.data)}else{bt&&jt&&t.texStorage2D(n.TEXTURE_2D,ke,ot,mt[0].width,mt[0].height);for(let ce=0,me=mt.length;ce<me;ce++)Ue=mt[ce],N.format!==ai?$e!==null?bt?j&&t.compressedTexSubImage2D(n.TEXTURE_2D,ce,0,0,Ue.width,Ue.height,$e,Ue.data):t.compressedTexImage2D(n.TEXTURE_2D,ce,ot,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):bt?j&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,Ue.width,Ue.height,$e,St,Ue.data):t.texImage2D(n.TEXTURE_2D,ce,ot,Ue.width,Ue.height,0,$e,St,Ue.data)}else if(N.isDataArrayTexture)if(bt){if(jt&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ke,ot,be.width,be.height,be.depth),j)if(N.layerUpdates.size>0){let ce;switch(St){case n.UNSIGNED_BYTE:switch($e){case n.ALPHA:ce=1;break;case n.LUMINANCE:ce=1;break;case n.LUMINANCE_ALPHA:ce=2;break;case n.RGB:ce=3;break;case n.RGBA:ce=4;break;default:throw new Error(`Unknown texel size for format ${$e}.`)}break;case n.UNSIGNED_SHORT_4_4_4_4:case n.UNSIGNED_SHORT_5_5_5_1:case n.UNSIGNED_SHORT_5_6_5:ce=1;break;default:throw new Error(`Unknown texel size for type ${St}.`)}const me=be.width*be.height*ce;for(const Ae of N.layerUpdates)t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ae,be.width,be.height,1,$e,St,be.data.slice(me*Ae,me*(Ae+1)));N.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,$e,St,be.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,ot,be.width,be.height,be.depth,0,$e,St,be.data);else if(N.isData3DTexture)bt?(jt&&t.texStorage3D(n.TEXTURE_3D,ke,ot,be.width,be.height,be.depth),j&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,$e,St,be.data)):t.texImage3D(n.TEXTURE_3D,0,ot,be.width,be.height,be.depth,0,$e,St,be.data);else if(N.isFramebufferTexture){if(jt)if(bt)t.texStorage2D(n.TEXTURE_2D,ke,ot,be.width,be.height);else{let ce=be.width,me=be.height;for(let Ae=0;Ae<ke;Ae++)t.texImage2D(n.TEXTURE_2D,Ae,ot,ce,me,0,$e,St,null),ce>>=1,me>>=1}}else if(mt.length>0){if(bt&&jt){const ce=lt(mt[0]);t.texStorage2D(n.TEXTURE_2D,ke,ot,ce.width,ce.height)}for(let ce=0,me=mt.length;ce<me;ce++)Ue=mt[ce],bt?j&&t.texSubImage2D(n.TEXTURE_2D,ce,0,0,$e,St,Ue):t.texImage2D(n.TEXTURE_2D,ce,ot,$e,St,Ue);N.generateMipmaps=!1}else if(bt){if(jt){const ce=lt(be);t.texStorage2D(n.TEXTURE_2D,ke,ot,ce.width,ce.height)}j&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,$e,St,be)}else t.texImage2D(n.TEXTURE_2D,0,ot,$e,St,be);x(N)&&y(ve),qe.__version=ye.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function ae(V,N,re){if(N.image.length!==6)return;const ve=Pe(V,N),de=N.source;t.bindTexture(n.TEXTURE_CUBE_MAP,V.__webglTexture,n.TEXTURE0+re);const ye=i.get(de);if(de.version!==ye.__version||ve===!0){t.activeTexture(n.TEXTURE0+re);const qe=Ft.getPrimaries(Ft.workingColorSpace),Re=N.colorSpace===ls?null:Ft.getPrimaries(N.colorSpace),Le=N.colorSpace===ls||qe===Re?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,N.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,N.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,N.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Le);const ct=N.isCompressedTexture||N.image[0].isCompressedTexture,be=N.image[0]&&N.image[0].isDataTexture,$e=[];for(let me=0;me<6;me++)!ct&&!be?$e[me]=_(N.image[me],!0,r.maxCubemapSize):$e[me]=be?N.image[me].image:N.image[me],$e[me]=Ne(N,$e[me]);const St=$e[0],ot=s.convert(N.format,N.colorSpace),Ue=s.convert(N.type),mt=b(N.internalFormat,ot,Ue,N.colorSpace),bt=N.isVideoTexture!==!0,jt=ye.__version===void 0||ve===!0,j=de.dataReady;let ke=T(N,St);he(n.TEXTURE_CUBE_MAP,N);let ce;if(ct){bt&&jt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,mt,St.width,St.height);for(let me=0;me<6;me++){ce=$e[me].mipmaps;for(let Ae=0;Ae<ce.length;Ae++){const at=ce[Ae];N.format!==ai?ot!==null?bt?j&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,0,0,at.width,at.height,ot,at.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,mt,at.width,at.height,0,at.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):bt?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,0,0,at.width,at.height,ot,Ue,at.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae,mt,at.width,at.height,0,ot,Ue,at.data)}}}else{if(ce=N.mipmaps,bt&&jt){ce.length>0&&ke++;const me=lt($e[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,ke,mt,me.width,me.height)}for(let me=0;me<6;me++)if(be){bt?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,$e[me].width,$e[me].height,ot,Ue,$e[me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,mt,$e[me].width,$e[me].height,0,ot,Ue,$e[me].data);for(let Ae=0;Ae<ce.length;Ae++){const At=ce[Ae].image[me].image;bt?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,0,0,At.width,At.height,ot,Ue,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,mt,At.width,At.height,0,ot,Ue,At.data)}}else{bt?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,0,0,ot,Ue,$e[me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,mt,ot,Ue,$e[me]);for(let Ae=0;Ae<ce.length;Ae++){const at=ce[Ae];bt?j&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,0,0,ot,Ue,at.image[me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+me,Ae+1,mt,ot,Ue,at.image[me])}}}x(N)&&y(n.TEXTURE_CUBE_MAP),ye.__version=de.version,N.onUpdate&&N.onUpdate(N)}V.__version=N.version}function ge(V,N,re,ve,de,ye){const qe=s.convert(re.format,re.colorSpace),Re=s.convert(re.type),Le=b(re.internalFormat,qe,Re,re.colorSpace);if(!i.get(N).__hasExternalTextures){const be=Math.max(1,N.width>>ye),$e=Math.max(1,N.height>>ye);de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY?t.texImage3D(de,ye,Le,be,$e,N.depth,0,qe,Re,null):t.texImage2D(de,ye,Le,be,$e,0,qe,Re,null)}t.bindFramebuffer(n.FRAMEBUFFER,V),Se(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ve,de,i.get(re).__webglTexture,0,_e(N)):(de===n.TEXTURE_2D||de>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&de<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ve,de,i.get(re).__webglTexture,ye),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ee(V,N,re){if(n.bindRenderbuffer(n.RENDERBUFFER,V),N.depthBuffer){const ve=N.depthTexture,de=ve&&ve.isDepthTexture?ve.type:null,ye=M(N.stencilBuffer,de),qe=N.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=_e(N);Se(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,ye,N.width,N.height):re?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,ye,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,ye,N.width,N.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,qe,n.RENDERBUFFER,V)}else{const ve=N.textures;for(let de=0;de<ve.length;de++){const ye=ve[de],qe=s.convert(ye.format,ye.colorSpace),Re=s.convert(ye.type),Le=b(ye.internalFormat,qe,Re,ye.colorSpace),ct=_e(N);re&&Se(N)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,Le,N.width,N.height):Se(N)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,Le,N.width,N.height):n.renderbufferStorage(n.RENDERBUFFER,Le,N.width,N.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xe(V,N){if(N&&N.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,V),!(N.depthTexture&&N.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(N.depthTexture).__webglTexture||N.depthTexture.image.width!==N.width||N.depthTexture.image.height!==N.height)&&(N.depthTexture.image.width=N.width,N.depthTexture.image.height=N.height,N.depthTexture.needsUpdate=!0),z(N.depthTexture,0);const ve=i.get(N.depthTexture).__webglTexture,de=_e(N);if(N.depthTexture.format===ia)Se(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ve,0);else if(N.depthTexture.format===ga)Se(N)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0,de):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ve,0);else throw new Error("Unknown depthTexture format")}function et(V){const N=i.get(V),re=V.isWebGLCubeRenderTarget===!0;if(V.depthTexture&&!N.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");xe(N.__webglFramebuffer,V)}else if(re){N.__webglDepthbuffer=[];for(let ve=0;ve<6;ve++)t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer[ve]),N.__webglDepthbuffer[ve]=n.createRenderbuffer(),Ee(N.__webglDepthbuffer[ve],V,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,N.__webglFramebuffer),N.__webglDepthbuffer=n.createRenderbuffer(),Ee(N.__webglDepthbuffer,V,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Je(V,N,re){const ve=i.get(V);N!==void 0&&ge(ve.__webglFramebuffer,V,V.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),re!==void 0&&et(V)}function it(V){const N=V.texture,re=i.get(V),ve=i.get(N);V.addEventListener("dispose",E);const de=V.textures,ye=V.isWebGLCubeRenderTarget===!0,qe=de.length>1;if(qe||(ve.__webglTexture===void 0&&(ve.__webglTexture=n.createTexture()),ve.__version=N.version,o.memory.textures++),ye){re.__webglFramebuffer=[];for(let Re=0;Re<6;Re++)if(N.mipmaps&&N.mipmaps.length>0){re.__webglFramebuffer[Re]=[];for(let Le=0;Le<N.mipmaps.length;Le++)re.__webglFramebuffer[Re][Le]=n.createFramebuffer()}else re.__webglFramebuffer[Re]=n.createFramebuffer()}else{if(N.mipmaps&&N.mipmaps.length>0){re.__webglFramebuffer=[];for(let Re=0;Re<N.mipmaps.length;Re++)re.__webglFramebuffer[Re]=n.createFramebuffer()}else re.__webglFramebuffer=n.createFramebuffer();if(qe)for(let Re=0,Le=de.length;Re<Le;Re++){const ct=i.get(de[Re]);ct.__webglTexture===void 0&&(ct.__webglTexture=n.createTexture(),o.memory.textures++)}if(V.samples>0&&Se(V)===!1){re.__webglMultisampledFramebuffer=n.createFramebuffer(),re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Re=0;Re<de.length;Re++){const Le=de[Re];re.__webglColorRenderbuffer[Re]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,re.__webglColorRenderbuffer[Re]);const ct=s.convert(Le.format,Le.colorSpace),be=s.convert(Le.type),$e=b(Le.internalFormat,ct,be,Le.colorSpace,V.isXRRenderTarget===!0),St=_e(V);n.renderbufferStorageMultisample(n.RENDERBUFFER,St,$e,V.width,V.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Re,n.RENDERBUFFER,re.__webglColorRenderbuffer[Re])}n.bindRenderbuffer(n.RENDERBUFFER,null),V.depthBuffer&&(re.__webglDepthRenderbuffer=n.createRenderbuffer(),Ee(re.__webglDepthRenderbuffer,V,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){t.bindTexture(n.TEXTURE_CUBE_MAP,ve.__webglTexture),he(n.TEXTURE_CUBE_MAP,N);for(let Re=0;Re<6;Re++)if(N.mipmaps&&N.mipmaps.length>0)for(let Le=0;Le<N.mipmaps.length;Le++)ge(re.__webglFramebuffer[Re][Le],V,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,Le);else ge(re.__webglFramebuffer[Re],V,N,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Re,0);x(N)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(qe){for(let Re=0,Le=de.length;Re<Le;Re++){const ct=de[Re],be=i.get(ct);t.bindTexture(n.TEXTURE_2D,be.__webglTexture),he(n.TEXTURE_2D,ct),ge(re.__webglFramebuffer,V,ct,n.COLOR_ATTACHMENT0+Re,n.TEXTURE_2D,0),x(ct)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let Re=n.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Re=V.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Re,ve.__webglTexture),he(Re,N),N.mipmaps&&N.mipmaps.length>0)for(let Le=0;Le<N.mipmaps.length;Le++)ge(re.__webglFramebuffer[Le],V,N,n.COLOR_ATTACHMENT0,Re,Le);else ge(re.__webglFramebuffer,V,N,n.COLOR_ATTACHMENT0,Re,0);x(N)&&y(Re),t.unbindTexture()}V.depthBuffer&&et(V)}function W(V){const N=V.textures;for(let re=0,ve=N.length;re<ve;re++){const de=N[re];if(x(de)){const ye=V.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,qe=i.get(de).__webglTexture;t.bindTexture(ye,qe),y(ye),t.unbindTexture()}}}const fe=[],ue=[];function Me(V){if(V.samples>0){if(Se(V)===!1){const N=V.textures,re=V.width,ve=V.height;let de=n.COLOR_BUFFER_BIT;const ye=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,qe=i.get(V),Re=N.length>1;if(Re)for(let Le=0;Le<N.length;Le++)t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,qe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglFramebuffer);for(let Le=0;Le<N.length;Le++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(de|=n.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(de|=n.STENCIL_BUFFER_BIT)),Re){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Le]);const ct=i.get(N[Le]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,ct,0)}n.blitFramebuffer(0,0,re,ve,0,0,re,ve,de,n.NEAREST),l===!0&&(fe.length=0,ue.length=0,fe.push(n.COLOR_ATTACHMENT0+Le),V.depthBuffer&&V.resolveDepthBuffer===!1&&(fe.push(ye),ue.push(ye),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,ue)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,fe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Re)for(let Le=0;Le<N.length;Le++){t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,qe.__webglColorRenderbuffer[Le]);const ct=i.get(N[Le]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,qe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,ct,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,qe.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&l){const N=V.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[N])}}}function _e(V){return Math.min(r.maxSamples,V.samples)}function Se(V){const N=i.get(V);return V.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&N.__useRenderToTexture!==!1}function Oe(V){const N=o.render.frame;f.get(V)!==N&&(f.set(V,N),V.update())}function Ne(V,N){const re=V.colorSpace,ve=V.format,de=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||re!==Ms&&re!==ls&&(Ft.getTransfer(re)===Ht?(ve!==ai||de!==Wr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),N}function lt(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(c.width=V.naturalWidth||V.width,c.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(c.width=V.displayWidth,c.height=V.displayHeight):(c.width=V.width,c.height=V.height),c}this.allocateTextureUnit=B,this.resetTextureUnits=D,this.setTexture2D=z,this.setTexture2DArray=Z,this.setTexture3D=$,this.setTextureCube=q,this.rebindTextures=Je,this.setupRenderTarget=it,this.updateRenderTargetMipmap=W,this.updateMultisampleRenderTarget=Me,this.setupDepthRenderbuffer=et,this.setupFrameBufferTexture=ge,this.useMultisampledRTT=Se}function P7(n,e){function t(i,r=ls){let s;const o=Ft.getTransfer(r);if(i===Wr)return n.UNSIGNED_BYTE;if(i===U2)return n.UNSIGNED_SHORT_4_4_4_4;if(i===F2)return n.UNSIGNED_SHORT_5_5_5_1;if(i===qw)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===jw)return n.BYTE;if(i===Xw)return n.SHORT;if(i===Fu)return n.UNSIGNED_SHORT;if(i===N2)return n.INT;if(i===pa)return n.UNSIGNED_INT;if(i===Ii)return n.FLOAT;if(i===Eh)return n.HALF_FLOAT;if(i===Yw)return n.ALPHA;if(i===Kw)return n.RGB;if(i===ai)return n.RGBA;if(i===Zw)return n.LUMINANCE;if(i===Jw)return n.LUMINANCE_ALPHA;if(i===ia)return n.DEPTH_COMPONENT;if(i===ga)return n.DEPTH_STENCIL;if(i===O2)return n.RED;if(i===k2)return n.RED_INTEGER;if(i===Qw)return n.RG;if(i===B2)return n.RG_INTEGER;if(i===V2)return n.RGBA_INTEGER;if(i===np||i===ip||i===rp||i===sp)if(o===Ht)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===np)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ip)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===rp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===sp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===np)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ip)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===rp)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===sp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===_v||i===Sv||i===Mv||i===bv)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===_v)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Sv)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Mv)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===bv)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===wv||i===Tv||i===Av)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===wv||i===Tv)return o===Ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===Av)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Ev||i===Cv||i===Pv||i===Rv||i===Lv||i===Iv||i===Dv||i===Nv||i===Uv||i===Fv||i===Ov||i===kv||i===Bv||i===Vv)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Ev)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Cv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Pv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Rv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Lv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Iv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Dv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Nv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Uv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Fv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Ov)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===kv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Bv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Vv)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===op||i===zv||i===Hv)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===op)return o===Ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===zv)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Hv)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===e7||i===$v||i===Gv||i===Wv)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===op)return s.COMPRESSED_RED_RGTC1_EXT;if(i===$v)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===Gv)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===Wv)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===ma?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class R7 extends kn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wl extends Nt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gH={type:"move"};class V1{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new wl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new wl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new wl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const x=t.getJointPose(_,i),y=this._getHandJoint(c,_);x!==null&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=x!==null}const f=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],d=f.position.distanceTo(p.position),m=.02,v=.005;c.inputState.pinching&&d>m+v?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&d<=m-v&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(gH)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new wl;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const vH=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yH=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class xH{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new rn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new yr({vertexShader:vH,fragmentShader:yH,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Mn(new tc(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class _H extends bs{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,f=null,p=null,d=null,m=null,v=null;const _=new xH,x=t.getContextAttributes();let y=null,b=null;const M=[],T=[],P=new pe;let E=null;const L=new kn;L.layers.enable(1),L.viewport=new Ot;const I=new kn;I.layers.enable(2),I.viewport=new Ot;const R=[L,I],C=new R7;C.layers.enable(1),C.layers.enable(2);let D=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ae){let ge=M[ae];return ge===void 0&&(ge=new V1,M[ae]=ge),ge.getTargetRaySpace()},this.getControllerGrip=function(ae){let ge=M[ae];return ge===void 0&&(ge=new V1,M[ae]=ge),ge.getGripSpace()},this.getHand=function(ae){let ge=M[ae];return ge===void 0&&(ge=new V1,M[ae]=ge),ge.getHandSpace()};function G(ae){const ge=T.indexOf(ae.inputSource);if(ge===-1)return;const Ee=M[ge];Ee!==void 0&&(Ee.update(ae.inputSource,ae.frame,c||o),Ee.dispatchEvent({type:ae.type,data:ae.inputSource}))}function z(){r.removeEventListener("select",G),r.removeEventListener("selectstart",G),r.removeEventListener("selectend",G),r.removeEventListener("squeeze",G),r.removeEventListener("squeezestart",G),r.removeEventListener("squeezeend",G),r.removeEventListener("end",z),r.removeEventListener("inputsourceschange",Z);for(let ae=0;ae<M.length;ae++){const ge=T[ae];ge!==null&&(T[ae]=null,M[ae].disconnect(ge))}D=null,B=null,_.reset(),e.setRenderTarget(y),m=null,d=null,p=null,r=null,b=null,st.stop(),i.isPresenting=!1,e.setPixelRatio(E),e.setSize(P.width,P.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ae){s=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ae){a=ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ae){c=ae},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return p},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(ae){if(r=ae,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",G),r.addEventListener("selectstart",G),r.addEventListener("selectend",G),r.addEventListener("squeeze",G),r.addEventListener("squeezestart",G),r.addEventListener("squeezeend",G),r.addEventListener("end",z),r.addEventListener("inputsourceschange",Z),x.xrCompatible!==!0&&await t.makeXRCompatible(),E=e.getPixelRatio(),e.getSize(P),r.renderState.layers===void 0){const ge={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,ge),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),b=new vr(m.framebufferWidth,m.framebufferHeight,{format:ai,type:Wr,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let ge=null,Ee=null,xe=null;x.depth&&(xe=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,ge=x.stencil?ga:ia,Ee=x.stencil?ma:pa);const et={colorFormat:t.RGBA8,depthFormat:xe,scaleFactor:s};p=new XRWebGLBinding(r,t),d=p.createProjectionLayer(et),r.updateRenderState({layers:[d]}),e.setPixelRatio(1),e.setSize(d.textureWidth,d.textureHeight,!1),b=new vr(d.textureWidth,d.textureHeight,{format:ai,type:Wr,depthTexture:new Y2(d.textureWidth,d.textureHeight,Ee,void 0,void 0,void 0,void 0,void 0,void 0,ge),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:d.ignoreDepthValues===!1})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),st.setContext(r),st.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Z(ae){for(let ge=0;ge<ae.removed.length;ge++){const Ee=ae.removed[ge],xe=T.indexOf(Ee);xe>=0&&(T[xe]=null,M[xe].disconnect(Ee))}for(let ge=0;ge<ae.added.length;ge++){const Ee=ae.added[ge];let xe=T.indexOf(Ee);if(xe===-1){for(let Je=0;Je<M.length;Je++)if(Je>=T.length){T.push(Ee),xe=Je;break}else if(T[Je]===null){T[Je]=Ee,xe=Je;break}if(xe===-1)break}const et=M[xe];et&&et.connect(Ee)}}const $=new F,q=new F;function k(ae,ge,Ee){$.setFromMatrixPosition(ge.matrixWorld),q.setFromMatrixPosition(Ee.matrixWorld);const xe=$.distanceTo(q),et=ge.projectionMatrix.elements,Je=Ee.projectionMatrix.elements,it=et[14]/(et[10]-1),W=et[14]/(et[10]+1),fe=(et[9]+1)/et[5],ue=(et[9]-1)/et[5],Me=(et[8]-1)/et[0],_e=(Je[8]+1)/Je[0],Se=it*Me,Oe=it*_e,Ne=xe/(-Me+_e),lt=Ne*-Me;ge.matrixWorld.decompose(ae.position,ae.quaternion,ae.scale),ae.translateX(lt),ae.translateZ(Ne),ae.matrixWorld.compose(ae.position,ae.quaternion,ae.scale),ae.matrixWorldInverse.copy(ae.matrixWorld).invert();const V=it+Ne,N=W+Ne,re=Se-lt,ve=Oe+(xe-lt),de=fe*W/N*V,ye=ue*W/N*V;ae.projectionMatrix.makePerspective(re,ve,de,ye,V,N),ae.projectionMatrixInverse.copy(ae.projectionMatrix).invert()}function Q(ae,ge){ge===null?ae.matrixWorld.copy(ae.matrix):ae.matrixWorld.multiplyMatrices(ge.matrixWorld,ae.matrix),ae.matrixWorldInverse.copy(ae.matrixWorld).invert()}this.updateCamera=function(ae){if(r===null)return;_.texture!==null&&(ae.near=_.depthNear,ae.far=_.depthFar),C.near=I.near=L.near=ae.near,C.far=I.far=L.far=ae.far,(D!==C.near||B!==C.far)&&(r.updateRenderState({depthNear:C.near,depthFar:C.far}),D=C.near,B=C.far,L.near=D,L.far=B,I.near=D,I.far=B,L.updateProjectionMatrix(),I.updateProjectionMatrix(),ae.updateProjectionMatrix());const ge=ae.parent,Ee=C.cameras;Q(C,ge);for(let xe=0;xe<Ee.length;xe++)Q(Ee[xe],ge);Ee.length===2?k(C,L,I):C.projectionMatrix.copy(L.projectionMatrix),oe(ae,C,ge)};function oe(ae,ge,Ee){Ee===null?ae.matrix.copy(ge.matrixWorld):(ae.matrix.copy(Ee.matrixWorld),ae.matrix.invert(),ae.matrix.multiply(ge.matrixWorld)),ae.matrix.decompose(ae.position,ae.quaternion,ae.scale),ae.updateMatrixWorld(!0),ae.projectionMatrix.copy(ge.projectionMatrix),ae.projectionMatrixInverse.copy(ge.projectionMatrixInverse),ae.isPerspectiveCamera&&(ae.fov=$l*2*Math.atan(1/ae.projectionMatrix.elements[5]),ae.zoom=1)}this.getCamera=function(){return C},this.getFoveation=function(){if(!(d===null&&m===null))return l},this.setFoveation=function(ae){l=ae,d!==null&&(d.fixedFoveation=ae),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=ae)},this.hasDepthSensing=function(){return _.texture!==null},this.getDepthSensingMesh=function(){return _.getMesh(C)};let he=null;function Pe(ae,ge){if(f=ge.getViewerPose(c||o),v=ge,f!==null){const Ee=f.views;m!==null&&(e.setRenderTargetFramebuffer(b,m.framebuffer),e.setRenderTarget(b));let xe=!1;Ee.length!==C.cameras.length&&(C.cameras.length=0,xe=!0);for(let Je=0;Je<Ee.length;Je++){const it=Ee[Je];let W=null;if(m!==null)W=m.getViewport(it);else{const ue=p.getViewSubImage(d,it);W=ue.viewport,Je===0&&(e.setRenderTargetTextures(b,ue.colorTexture,d.ignoreDepthValues?void 0:ue.depthStencilTexture),e.setRenderTarget(b))}let fe=R[Je];fe===void 0&&(fe=new kn,fe.layers.enable(Je),fe.viewport=new Ot,R[Je]=fe),fe.matrix.fromArray(it.transform.matrix),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.projectionMatrix.fromArray(it.projectionMatrix),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert(),fe.viewport.set(W.x,W.y,W.width,W.height),Je===0&&(C.matrix.copy(fe.matrix),C.matrix.decompose(C.position,C.quaternion,C.scale)),xe===!0&&C.cameras.push(fe)}const et=r.enabledFeatures;if(et&&et.includes("depth-sensing")){const Je=p.getDepthInformation(Ee[0]);Je&&Je.isValid&&Je.texture&&_.init(e,Je,r.renderState)}}for(let Ee=0;Ee<M.length;Ee++){const xe=T[Ee],et=M[Ee];xe!==null&&et!==void 0&&et.update(xe,ge,c||o)}he&&he(ae,ge),ge.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ge}),v=null}const st=new b7;st.setAnimationLoop(Pe),this.setAnimationLoop=function(ae){he=ae},this.dispose=function(){}}}const Do=new Fi,SH=new nt;function MH(n,e){function t(x,y){x.matrixAutoUpdate===!0&&x.updateMatrix(),y.value.copy(x.matrix)}function i(x,y){y.color.getRGB(x.fogColor.value,x7(n)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function r(x,y,b,M,T){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(x,y):y.isMeshToonMaterial?(s(x,y),p(x,y)):y.isMeshPhongMaterial?(s(x,y),f(x,y)):y.isMeshStandardMaterial?(s(x,y),d(x,y),y.isMeshPhysicalMaterial&&m(x,y,T)):y.isMeshMatcapMaterial?(s(x,y),v(x,y)):y.isMeshDepthMaterial?s(x,y):y.isMeshDistanceMaterial?(s(x,y),_(x,y)):y.isMeshNormalMaterial?s(x,y):y.isLineBasicMaterial?(o(x,y),y.isLineDashedMaterial&&a(x,y)):y.isPointsMaterial?l(x,y,b,M):y.isSpriteMaterial?c(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,t(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,y.side===ci&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,t(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),y.side===ci&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,t(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,t(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const b=e.get(y),M=b.envMap,T=b.envMapRotation;M&&(x.envMap.value=M,Do.copy(T),Do.x*=-1,Do.y*=-1,Do.z*=-1,M.isCubeTexture&&M.isRenderTargetTexture===!1&&(Do.y*=-1,Do.z*=-1),x.envMapRotation.value.setFromMatrix4(SH.makeRotationFromEuler(Do)),x.flipEnvMap.value=M.isCubeTexture&&M.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap&&(x.lightMap.value=y.lightMap,x.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,x.lightMapTransform)),y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,x.aoMapTransform))}function o(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform))}function a(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function l(x,y,b,M){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*b,x.scale.value=M*.5,y.map&&(x.map.value=y.map,t(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function c(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function f(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function p(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function d(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,x.roughnessMapTransform)),y.envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function m(x,y,b){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===ci&&x.clearcoatNormalScale.value.negate())),y.dispersion>0&&(x.dispersion.value=y.dispersion),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=b.texture,x.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,y){y.matcap&&(x.matcap.value=y.matcap)}function _(x,y){const b=e.get(y).light;x.referencePosition.value.setFromMatrixPosition(b.matrixWorld),x.nearDistance.value=b.shadow.camera.near,x.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function bH(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(b,M){const T=M.program;i.uniformBlockBinding(b,T)}function c(b,M){let T=r[b.id];T===void 0&&(v(b),T=f(b),r[b.id]=T,b.addEventListener("dispose",x));const P=M.program;i.updateUBOMapping(b,P);const E=e.render.frame;s[b.id]!==E&&(d(b),s[b.id]=E)}function f(b){const M=p();b.__bindingPointIndex=M;const T=n.createBuffer(),P=b.__size,E=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,P,E),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,M,T),T}function p(){for(let b=0;b<a;b++)if(o.indexOf(b)===-1)return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(b){const M=r[b.id],T=b.uniforms,P=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,M);for(let E=0,L=T.length;E<L;E++){const I=Array.isArray(T[E])?T[E]:[T[E]];for(let R=0,C=I.length;R<C;R++){const D=I[R];if(m(D,E,R,P)===!0){const B=D.__offset,G=Array.isArray(D.value)?D.value:[D.value];let z=0;for(let Z=0;Z<G.length;Z++){const $=G[Z],q=_($);typeof $=="number"||typeof $=="boolean"?(D.__data[0]=$,n.bufferSubData(n.UNIFORM_BUFFER,B+z,D.__data)):$.isMatrix3?(D.__data[0]=$.elements[0],D.__data[1]=$.elements[1],D.__data[2]=$.elements[2],D.__data[3]=0,D.__data[4]=$.elements[3],D.__data[5]=$.elements[4],D.__data[6]=$.elements[5],D.__data[7]=0,D.__data[8]=$.elements[6],D.__data[9]=$.elements[7],D.__data[10]=$.elements[8],D.__data[11]=0):($.toArray(D.__data,z),z+=q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(b,M,T,P){const E=b.value,L=M+"_"+T;if(P[L]===void 0)return typeof E=="number"||typeof E=="boolean"?P[L]=E:P[L]=E.clone(),!0;{const I=P[L];if(typeof E=="number"||typeof E=="boolean"){if(I!==E)return P[L]=E,!0}else if(I.equals(E)===!1)return I.copy(E),!0}return!1}function v(b){const M=b.uniforms;let T=0;const P=16;for(let L=0,I=M.length;L<I;L++){const R=Array.isArray(M[L])?M[L]:[M[L]];for(let C=0,D=R.length;C<D;C++){const B=R[C],G=Array.isArray(B.value)?B.value:[B.value];for(let z=0,Z=G.length;z<Z;z++){const $=G[z],q=_($),k=T%P;k!==0&&P-k<q.boundary&&(T+=P-k),B.__data=new Float32Array(q.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=T,T+=q.storage}}}const E=T%P;return E>0&&(T+=P-E),b.__size=T,b.__cache={},this}function _(b){const M={boundary:0,storage:0};return typeof b=="number"||typeof b=="boolean"?(M.boundary=4,M.storage=4):b.isVector2?(M.boundary=8,M.storage=8):b.isVector3||b.isColor?(M.boundary=16,M.storage=12):b.isVector4?(M.boundary=16,M.storage=16):b.isMatrix3?(M.boundary=48,M.storage=48):b.isMatrix4?(M.boundary=64,M.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),M}function x(b){const M=b.target;M.removeEventListener("dispose",x);const T=o.indexOf(M.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[M.id]),delete r[M.id],delete s[M.id]}function y(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}return{bind:l,update:c,dispose:y}}class wH{constructor(e={}){const{canvas:t=m7(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:p=!1}=e;this.isWebGLRenderer=!0;let d;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=i.getContextAttributes().alpha}else d=o;const m=new Uint32Array(4),v=new Int32Array(4);let _=null,x=null;const y=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ki,this.toneMapping=ds,this.toneMappingExposure=1;const M=this;let T=!1,P=0,E=0,L=null,I=-1,R=null;const C=new Ot,D=new Ot;let B=null;const G=new Ve(0);let z=0,Z=t.width,$=t.height,q=1,k=null,Q=null;const oe=new Ot(0,0,Z,$),he=new Ot(0,0,Z,$);let Pe=!1;const st=new Rh;let ae=!1,ge=!1;const Ee=new nt,xe=new F,et={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Je=!1;function it(){return L===null?q:1}let W=i;function fe(U,Y){return t.getContext(U,Y)}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:f,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${o0}`),t.addEventListener("webglcontextlost",ke,!1),t.addEventListener("webglcontextrestored",ce,!1),t.addEventListener("webglcontextcreationerror",me,!1),W===null){const Y="webgl2";if(W=fe(Y,U),W===null)throw fe(Y)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let ue,Me,_e,Se,Oe,Ne,lt,V,N,re,ve,de,ye,qe,Re,Le,ct,be,$e,St,ot,Ue,mt,bt;function jt(){ue=new FV(W),ue.init(),Ue=new P7(W,ue),Me=new RV(W,ue,e,Ue),_e=new pH(W),Se=new BV(W),Oe=new nH,Ne=new mH(W,ue,_e,Oe,Me,Ue,Se),lt=new IV(M),V=new UV(M),N=new jO(W),mt=new CV(W,N),re=new OV(W,N,Se,mt),ve=new zV(W,re,N,Se),$e=new VV(W,Me,Ne),Le=new LV(Oe),de=new tH(M,lt,V,ue,Me,mt,Le),ye=new MH(M,Oe),qe=new rH,Re=new uH(ue),be=new EV(M,lt,V,_e,ve,d,l),ct=new dH(M,ve,Me),bt=new bH(W,Se,Me,_e),St=new PV(W,ue,Se),ot=new kV(W,ue,Se),Se.programs=de.programs,M.capabilities=Me,M.extensions=ue,M.properties=Oe,M.renderLists=qe,M.shadowMap=ct,M.state=_e,M.info=Se}jt();const j=new _H(M,W);this.xr=j,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const U=ue.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=ue.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(U){U!==void 0&&(q=U,this.setSize(Z,$,!1))},this.getSize=function(U){return U.set(Z,$)},this.setSize=function(U,Y,ne=!0){if(j.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Z=U,$=Y,t.width=Math.floor(U*q),t.height=Math.floor(Y*q),ne===!0&&(t.style.width=U+"px",t.style.height=Y+"px"),this.setViewport(0,0,U,Y)},this.getDrawingBufferSize=function(U){return U.set(Z*q,$*q).floor()},this.setDrawingBufferSize=function(U,Y,ne){Z=U,$=Y,q=ne,t.width=Math.floor(U*ne),t.height=Math.floor(Y*ne),this.setViewport(0,0,U,Y)},this.getCurrentViewport=function(U){return U.copy(C)},this.getViewport=function(U){return U.copy(oe)},this.setViewport=function(U,Y,ne,ie){U.isVector4?oe.set(U.x,U.y,U.z,U.w):oe.set(U,Y,ne,ie),_e.viewport(C.copy(oe).multiplyScalar(q).round())},this.getScissor=function(U){return U.copy(he)},this.setScissor=function(U,Y,ne,ie){U.isVector4?he.set(U.x,U.y,U.z,U.w):he.set(U,Y,ne,ie),_e.scissor(D.copy(he).multiplyScalar(q).round())},this.getScissorTest=function(){return Pe},this.setScissorTest=function(U){_e.setScissorTest(Pe=U)},this.setOpaqueSort=function(U){k=U},this.setTransparentSort=function(U){Q=U},this.getClearColor=function(U){return U.copy(be.getClearColor())},this.setClearColor=function(){be.setClearColor.apply(be,arguments)},this.getClearAlpha=function(){return be.getClearAlpha()},this.setClearAlpha=function(){be.setClearAlpha.apply(be,arguments)},this.clear=function(U=!0,Y=!0,ne=!0){let ie=0;if(U){let J=!1;if(L!==null){const Te=L.texture.format;J=Te===V2||Te===B2||Te===k2}if(J){const Te=L.texture.type,Be=Te===Wr||Te===pa||Te===Fu||Te===ma||Te===U2||Te===F2,He=be.getClearColor(),We=be.getClearAlpha(),Qe=He.r,Ke=He.g,Ye=He.b;Be?(m[0]=Qe,m[1]=Ke,m[2]=Ye,m[3]=We,W.clearBufferuiv(W.COLOR,0,m)):(v[0]=Qe,v[1]=Ke,v[2]=Ye,v[3]=We,W.clearBufferiv(W.COLOR,0,v))}else ie|=W.COLOR_BUFFER_BIT}Y&&(ie|=W.DEPTH_BUFFER_BIT),ne&&(ie|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(ie)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ke,!1),t.removeEventListener("webglcontextrestored",ce,!1),t.removeEventListener("webglcontextcreationerror",me,!1),qe.dispose(),Re.dispose(),Oe.dispose(),lt.dispose(),V.dispose(),ve.dispose(),mt.dispose(),bt.dispose(),de.dispose(),j.dispose(),j.removeEventListener("sessionstart",Mi),j.removeEventListener("sessionend",bi),Xr.stop()};function ke(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function ce(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=Se.autoReset,Y=ct.enabled,ne=ct.autoUpdate,ie=ct.needsUpdate,J=ct.type;jt(),Se.autoReset=U,ct.enabled=Y,ct.autoUpdate=ne,ct.needsUpdate=ie,ct.type=J}function me(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Ae(U){const Y=U.target;Y.removeEventListener("dispose",Ae),at(Y)}function at(U){At(U),Oe.remove(U)}function At(U){const Y=Oe.get(U).programs;Y!==void 0&&(Y.forEach(function(ne){de.releaseProgram(ne)}),U.isShaderMaterial&&de.releaseShaderCache(U))}this.renderBufferDirect=function(U,Y,ne,ie,J,Te){Y===null&&(Y=et);const Be=J.isMesh&&J.matrixWorld.determinant()<0,He=j0(U,Y,ne,ie,J);_e.setMaterial(ie,Be);let We=ne.index,Qe=1;if(ie.wireframe===!0){if(We=re.getWireframeAttribute(ne),We===void 0)return;Qe=2}const Ke=ne.drawRange,Ye=ne.attributes.position;let Et=Ke.start*Qe,qt=(Ke.start+Ke.count)*Qe;Te!==null&&(Et=Math.max(Et,Te.start*Qe),qt=Math.min(qt,(Te.start+Te.count)*Qe)),We!==null?(Et=Math.max(Et,0),qt=Math.min(qt,We.count)):Ye!=null&&(Et=Math.max(Et,0),qt=Math.min(qt,Ye.count));const Vt=qt-Et;if(Vt<0||Vt===1/0)return;mt.setup(J,ie,He,ne,We);let vn,Mt=St;if(We!==null&&(vn=N.get(We),Mt=ot,Mt.setIndex(vn)),J.isMesh)ie.wireframe===!0?(_e.setLineWidth(ie.wireframeLinewidth*it()),Mt.setMode(W.LINES)):Mt.setMode(W.TRIANGLES);else if(J.isLine){let Ce=ie.linewidth;Ce===void 0&&(Ce=1),_e.setLineWidth(Ce*it()),J.isLineSegments?Mt.setMode(W.LINES):J.isLineLoop?Mt.setMode(W.LINE_LOOP):Mt.setMode(W.LINE_STRIP)}else J.isPoints?Mt.setMode(W.POINTS):J.isSprite&&Mt.setMode(W.TRIANGLES);if(J.isBatchedMesh)J._multiDrawInstances!==null?Mt.renderMultiDrawInstances(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount,J._multiDrawInstances):Mt.renderMultiDraw(J._multiDrawStarts,J._multiDrawCounts,J._multiDrawCount);else if(J.isInstancedMesh)Mt.renderInstances(Et,Vt,J.count);else if(ne.isInstancedBufferGeometry){const Ce=ne._maxInstanceCount!==void 0?ne._maxInstanceCount:1/0,ft=Math.min(ne.instanceCount,Ce);Mt.renderInstances(Et,Vt,ft)}else Mt.render(Et,Vt)};function Xt(U,Y,ne){U.transparent===!0&&U.side===Ir&&U.forceSinglePass===!1?(U.side=ci,U.needsUpdate=!0,Mr(U,Y,ne),U.side=vs,U.needsUpdate=!0,Mr(U,Y,ne),U.side=Ir):Mr(U,Y,ne)}this.compile=function(U,Y,ne=null){ne===null&&(ne=U),x=Re.get(ne),x.init(Y),b.push(x),ne.traverseVisible(function(J){J.isLight&&J.layers.test(Y.layers)&&(x.pushLight(J),J.castShadow&&x.pushShadow(J))}),U!==ne&&U.traverseVisible(function(J){J.isLight&&J.layers.test(Y.layers)&&(x.pushLight(J),J.castShadow&&x.pushShadow(J))}),x.setupLights();const ie=new Set;return U.traverse(function(J){const Te=J.material;if(Te)if(Array.isArray(Te))for(let Be=0;Be<Te.length;Be++){const He=Te[Be];Xt(He,ne,J),ie.add(He)}else Xt(Te,ne,J),ie.add(Te)}),b.pop(),x=null,ie},this.compileAsync=function(U,Y,ne=null){const ie=this.compile(U,Y,ne);return new Promise(J=>{function Te(){if(ie.forEach(function(Be){Oe.get(Be).currentProgram.isReady()&&ie.delete(Be)}),ie.size===0){J(U);return}setTimeout(Te,10)}ue.get("KHR_parallel_shader_compile")!==null?Te():setTimeout(Te,10)})};let gn=null;function Ut(U){gn&&gn(U)}function Mi(){Xr.stop()}function bi(){Xr.start()}const Xr=new b7;Xr.setAnimationLoop(Ut),typeof self<"u"&&Xr.setContext(self),this.setAnimationLoop=function(U){gn=U,j.setAnimationLoop(U),U===null?Xr.stop():Xr.start()},j.addEventListener("sessionstart",Mi),j.addEventListener("sessionend",bi),this.render=function(U,Y){if(Y!==void 0&&Y.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;if(U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),Y.parent===null&&Y.matrixWorldAutoUpdate===!0&&Y.updateMatrixWorld(),j.enabled===!0&&j.isPresenting===!0&&(j.cameraAutoUpdate===!0&&j.updateCamera(Y),Y=j.getCamera()),U.isScene===!0&&U.onBeforeRender(M,U,Y,L),x=Re.get(U,b.length),x.init(Y),b.push(x),Ee.multiplyMatrices(Y.projectionMatrix,Y.matrixWorldInverse),st.setFromProjectionMatrix(Ee),ge=this.localClippingEnabled,ae=Le.init(this.clippingPlanes,ge),_=qe.get(U,y.length),_.init(),y.push(_),j.enabled===!0&&j.isPresenting===!0){const Te=M.xr.getDepthSensingMesh();Te!==null&&lc(Te,Y,-1/0,M.sortObjects)}lc(U,Y,0,M.sortObjects),_.finish(),M.sortObjects===!0&&_.sort(k,Q),Je=j.enabled===!1||j.isPresenting===!1||j.hasDepthSensing()===!1,Je&&be.addToRenderList(_,U),this.info.render.frame++,ae===!0&&Le.beginShadows();const ne=x.state.shadowsArray;ct.render(ne,U,Y),ae===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const ie=_.opaque,J=_.transmissive;if(x.setupLights(),Y.isArrayCamera){const Te=Y.cameras;if(J.length>0)for(let Be=0,He=Te.length;Be<He;Be++){const We=Te[Be];cc(ie,J,U,We)}Je&&be.render(U);for(let Be=0,He=Te.length;Be<He;Be++){const We=Te[Be];Gh(_,U,We,We.viewport)}}else J.length>0&&cc(ie,J,U,Y),Je&&be.render(U),Gh(_,U,Y);L!==null&&(Ne.updateMultisampleRenderTarget(L),Ne.updateRenderTargetMipmap(L)),U.isScene===!0&&U.onAfterRender(M,U,Y),mt.resetDefaultState(),I=-1,R=null,b.pop(),b.length>0?(x=b[b.length-1],ae===!0&&Le.setGlobalState(M.clippingPlanes,x.state.camera)):x=null,y.pop(),y.length>0?_=y[y.length-1]:_=null};function lc(U,Y,ne,ie){if(U.visible===!1)return;if(U.layers.test(Y.layers)){if(U.isGroup)ne=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(Y);else if(U.isLight)x.pushLight(U),U.castShadow&&x.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||st.intersectsSprite(U)){ie&&xe.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Ee);const Be=ve.update(U),He=U.material;He.visible&&_.push(U,Be,He,ne,xe.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||st.intersectsObject(U))){const Be=ve.update(U),He=U.material;if(ie&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),xe.copy(U.boundingSphere.center)):(Be.boundingSphere===null&&Be.computeBoundingSphere(),xe.copy(Be.boundingSphere.center)),xe.applyMatrix4(U.matrixWorld).applyMatrix4(Ee)),Array.isArray(He)){const We=Be.groups;for(let Qe=0,Ke=We.length;Qe<Ke;Qe++){const Ye=We[Qe],Et=He[Ye.materialIndex];Et&&Et.visible&&_.push(U,Be,Et,ne,xe.z,Ye)}}else He.visible&&_.push(U,Be,He,ne,xe.z,null)}}const Te=U.children;for(let Be=0,He=Te.length;Be<He;Be++)lc(Te[Be],Y,ne,ie)}function Gh(U,Y,ne,ie){const J=U.opaque,Te=U.transmissive,Be=U.transparent;x.setupLightsView(ne),ae===!0&&Le.setGlobalState(M.clippingPlanes,ne),ie&&_e.viewport(C.copy(ie)),J.length>0&&ws(J,Y,ne),Te.length>0&&ws(Te,Y,ne),Be.length>0&&ws(Be,Y,ne),_e.buffers.depth.setTest(!0),_e.buffers.depth.setMask(!0),_e.buffers.color.setMask(!0),_e.setPolygonOffset(!1)}function cc(U,Y,ne,ie){if((ne.isScene===!0?ne.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[ie.id]===void 0&&(x.state.transmissionRenderTarget[ie.id]=new vr(1,1,{generateMipmaps:!0,type:ue.has("EXT_color_buffer_half_float")||ue.has("EXT_color_buffer_float")?Eh:Wr,minFilter:Dr,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Ft.workingColorSpace}));const Te=x.state.transmissionRenderTarget[ie.id],Be=ie.viewport||C;Te.setSize(Be.z,Be.w);const He=M.getRenderTarget();M.setRenderTarget(Te),M.getClearColor(G),z=M.getClearAlpha(),z<1&&M.setClearColor(16777215,.5),Je?be.render(ne):M.clear();const We=M.toneMapping;M.toneMapping=ds;const Qe=ie.viewport;if(ie.viewport!==void 0&&(ie.viewport=void 0),x.setupLightsView(ie),ae===!0&&Le.setGlobalState(M.clippingPlanes,ie),ws(U,ne,ie),Ne.updateMultisampleRenderTarget(Te),Ne.updateRenderTargetMipmap(Te),ue.has("WEBGL_multisampled_render_to_texture")===!1){let Ke=!1;for(let Ye=0,Et=Y.length;Ye<Et;Ye++){const qt=Y[Ye],Vt=qt.object,vn=qt.geometry,Mt=qt.material,Ce=qt.group;if(Mt.side===Ir&&Vt.layers.test(ie.layers)){const ft=Mt.side;Mt.side=ci,Mt.needsUpdate=!0,Wh(Vt,ne,ie,vn,Mt,Ce),Mt.side=ft,Mt.needsUpdate=!0,Ke=!0}}Ke===!0&&(Ne.updateMultisampleRenderTarget(Te),Ne.updateRenderTargetMipmap(Te))}M.setRenderTarget(He),M.setClearColor(G,z),Qe!==void 0&&(ie.viewport=Qe),M.toneMapping=We}function ws(U,Y,ne){const ie=Y.isScene===!0?Y.overrideMaterial:null;for(let J=0,Te=U.length;J<Te;J++){const Be=U[J],He=Be.object,We=Be.geometry,Qe=ie===null?Be.material:ie,Ke=Be.group;He.layers.test(ne.layers)&&Wh(He,Y,ne,We,Qe,Ke)}}function Wh(U,Y,ne,ie,J,Te){U.onBeforeRender(M,Y,ne,ie,J,Te),U.modelViewMatrix.multiplyMatrices(ne.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),J.onBeforeRender(M,Y,ne,ie,U,Te),J.transparent===!0&&J.side===Ir&&J.forceSinglePass===!1?(J.side=ci,J.needsUpdate=!0,M.renderBufferDirect(ne,Y,ie,J,U,Te),J.side=vs,J.needsUpdate=!0,M.renderBufferDirect(ne,Y,ie,J,U,Te),J.side=Ir):M.renderBufferDirect(ne,Y,ie,J,U,Te),U.onAfterRender(M,Y,ne,ie,J,Te)}function Mr(U,Y,ne){Y.isScene!==!0&&(Y=et);const ie=Oe.get(U),J=x.state.lights,Te=x.state.shadowsArray,Be=J.state.version,He=de.getParameters(U,J.state,Te,Y,ne),We=de.getProgramCacheKey(He);let Qe=ie.programs;ie.environment=U.isMeshStandardMaterial?Y.environment:null,ie.fog=Y.fog,ie.envMap=(U.isMeshStandardMaterial?V:lt).get(U.envMap||ie.environment),ie.envMapRotation=ie.environment!==null&&U.envMap===null?Y.environmentRotation:U.envMapRotation,Qe===void 0&&(U.addEventListener("dispose",Ae),Qe=new Map,ie.programs=Qe);let Ke=Qe.get(We);if(Ke!==void 0){if(ie.currentProgram===Ke&&ie.lightsStateVersion===Be)return Xh(U,He),Ke}else He.uniforms=de.getUniforms(U),U.onBuild(ne,He,M),U.onBeforeCompile(He,M),Ke=de.acquireProgram(He,We),Qe.set(We,Ke),ie.uniforms=He.uniforms;const Ye=ie.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Ye.clippingPlanes=Le.uniform),Xh(U,He),ie.needsLights=q0(U),ie.lightsStateVersion=Be,ie.needsLights&&(Ye.ambientLightColor.value=J.state.ambient,Ye.lightProbe.value=J.state.probe,Ye.directionalLights.value=J.state.directional,Ye.directionalLightShadows.value=J.state.directionalShadow,Ye.spotLights.value=J.state.spot,Ye.spotLightShadows.value=J.state.spotShadow,Ye.rectAreaLights.value=J.state.rectArea,Ye.ltc_1.value=J.state.rectAreaLTC1,Ye.ltc_2.value=J.state.rectAreaLTC2,Ye.pointLights.value=J.state.point,Ye.pointLightShadows.value=J.state.pointShadow,Ye.hemisphereLights.value=J.state.hemi,Ye.directionalShadowMap.value=J.state.directionalShadowMap,Ye.directionalShadowMatrix.value=J.state.directionalShadowMatrix,Ye.spotShadowMap.value=J.state.spotShadowMap,Ye.spotLightMatrix.value=J.state.spotLightMatrix,Ye.spotLightMap.value=J.state.spotLightMap,Ye.pointShadowMap.value=J.state.pointShadowMap,Ye.pointShadowMatrix.value=J.state.pointShadowMatrix),ie.currentProgram=Ke,ie.uniformsList=null,Ke}function jh(U){if(U.uniformsList===null){const Y=U.currentProgram.getUniforms();U.uniformsList=lp.seqWithValue(Y.seq,U.uniforms)}return U.uniformsList}function Xh(U,Y){const ne=Oe.get(U);ne.outputColorSpace=Y.outputColorSpace,ne.batching=Y.batching,ne.batchingColor=Y.batchingColor,ne.instancing=Y.instancing,ne.instancingColor=Y.instancingColor,ne.instancingMorph=Y.instancingMorph,ne.skinning=Y.skinning,ne.morphTargets=Y.morphTargets,ne.morphNormals=Y.morphNormals,ne.morphColors=Y.morphColors,ne.morphTargetsCount=Y.morphTargetsCount,ne.numClippingPlanes=Y.numClippingPlanes,ne.numIntersection=Y.numClipIntersection,ne.vertexAlphas=Y.vertexAlphas,ne.vertexTangents=Y.vertexTangents,ne.toneMapping=Y.toneMapping}function j0(U,Y,ne,ie,J){Y.isScene!==!0&&(Y=et),Ne.resetTextureUnits();const Te=Y.fog,Be=ie.isMeshStandardMaterial?Y.environment:null,He=L===null?M.outputColorSpace:L.isXRRenderTarget===!0?L.texture.colorSpace:Ms,We=(ie.isMeshStandardMaterial?V:lt).get(ie.envMap||Be),Qe=ie.vertexColors===!0&&!!ne.attributes.color&&ne.attributes.color.itemSize===4,Ke=!!ne.attributes.tangent&&(!!ie.normalMap||ie.anisotropy>0),Ye=!!ne.morphAttributes.position,Et=!!ne.morphAttributes.normal,qt=!!ne.morphAttributes.color;let Vt=ds;ie.toneMapped&&(L===null||L.isXRRenderTarget===!0)&&(Vt=M.toneMapping);const vn=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,Mt=vn!==void 0?vn.length:0,Ce=Oe.get(ie),ft=x.state.lights;if(ae===!0&&(ge===!0||U!==R)){const Qn=U===R&&ie.id===I;Le.setState(ie,U,Qn)}let wt=!1;ie.version===Ce.__version?(Ce.needsLights&&Ce.lightsStateVersion!==ft.state.version||Ce.outputColorSpace!==He||J.isBatchedMesh&&Ce.batching===!1||!J.isBatchedMesh&&Ce.batching===!0||J.isBatchedMesh&&Ce.batchingColor===!0&&J.colorTexture===null||J.isBatchedMesh&&Ce.batchingColor===!1&&J.colorTexture!==null||J.isInstancedMesh&&Ce.instancing===!1||!J.isInstancedMesh&&Ce.instancing===!0||J.isSkinnedMesh&&Ce.skinning===!1||!J.isSkinnedMesh&&Ce.skinning===!0||J.isInstancedMesh&&Ce.instancingColor===!0&&J.instanceColor===null||J.isInstancedMesh&&Ce.instancingColor===!1&&J.instanceColor!==null||J.isInstancedMesh&&Ce.instancingMorph===!0&&J.morphTexture===null||J.isInstancedMesh&&Ce.instancingMorph===!1&&J.morphTexture!==null||Ce.envMap!==We||ie.fog===!0&&Ce.fog!==Te||Ce.numClippingPlanes!==void 0&&(Ce.numClippingPlanes!==Le.numPlanes||Ce.numIntersection!==Le.numIntersection)||Ce.vertexAlphas!==Qe||Ce.vertexTangents!==Ke||Ce.morphTargets!==Ye||Ce.morphNormals!==Et||Ce.morphColors!==qt||Ce.toneMapping!==Vt||Ce.morphTargetsCount!==Mt)&&(wt=!0):(wt=!0,Ce.__version=ie.version);let zt=Ce.currentProgram;wt===!0&&(zt=Mr(ie,Y,J));let bn=!1,Jn=!1,br=!1;const Pt=zt.getUniforms(),wi=Ce.uniforms;if(_e.useProgram(zt.program)&&(bn=!0,Jn=!0,br=!0),ie.id!==I&&(I=ie.id,Jn=!0),bn||R!==U){Pt.setValue(W,"projectionMatrix",U.projectionMatrix),Pt.setValue(W,"viewMatrix",U.matrixWorldInverse);const Qn=Pt.map.cameraPosition;Qn!==void 0&&Qn.setValue(W,xe.setFromMatrixPosition(U.matrixWorld)),Me.logarithmicDepthBuffer&&Pt.setValue(W,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ie.isMeshPhongMaterial||ie.isMeshToonMaterial||ie.isMeshLambertMaterial||ie.isMeshBasicMaterial||ie.isMeshStandardMaterial||ie.isShaderMaterial)&&Pt.setValue(W,"isOrthographic",U.isOrthographicCamera===!0),R!==U&&(R=U,Jn=!0,br=!0)}if(J.isSkinnedMesh){Pt.setOptional(W,J,"bindMatrix"),Pt.setOptional(W,J,"bindMatrixInverse");const Qn=J.skeleton;Qn&&(Qn.boneTexture===null&&Qn.computeBoneTexture(),Pt.setValue(W,"boneTexture",Qn.boneTexture,Ne))}J.isBatchedMesh&&(Pt.setOptional(W,J,"batchingTexture"),Pt.setValue(W,"batchingTexture",J._matricesTexture,Ne),Pt.setOptional(W,J,"batchingColorTexture"),J._colorsTexture!==null&&Pt.setValue(W,"batchingColorTexture",J._colorsTexture,Ne));const Pa=ne.morphAttributes;if((Pa.position!==void 0||Pa.normal!==void 0||Pa.color!==void 0)&&$e.update(J,ne,zt),(Jn||Ce.receiveShadow!==J.receiveShadow)&&(Ce.receiveShadow=J.receiveShadow,Pt.setValue(W,"receiveShadow",J.receiveShadow)),ie.isMeshGouraudMaterial&&ie.envMap!==null&&(wi.envMap.value=We,wi.flipEnvMap.value=We.isCubeTexture&&We.isRenderTargetTexture===!1?-1:1),ie.isMeshStandardMaterial&&ie.envMap===null&&Y.environment!==null&&(wi.envMapIntensity.value=Y.environmentIntensity),Jn&&(Pt.setValue(W,"toneMappingExposure",M.toneMappingExposure),Ce.needsLights&&X0(wi,br),Te&&ie.fog===!0&&ye.refreshFogUniforms(wi,Te),ye.refreshMaterialUniforms(wi,ie,q,$,x.state.transmissionRenderTarget[U.id]),lp.upload(W,jh(Ce),wi,Ne)),ie.isShaderMaterial&&ie.uniformsNeedUpdate===!0&&(lp.upload(W,jh(Ce),wi,Ne),ie.uniformsNeedUpdate=!1),ie.isSpriteMaterial&&Pt.setValue(W,"center",J.center),Pt.setValue(W,"modelViewMatrix",J.modelViewMatrix),Pt.setValue(W,"normalMatrix",J.normalMatrix),Pt.setValue(W,"modelMatrix",J.matrixWorld),ie.isShaderMaterial||ie.isRawShaderMaterial){const Qn=ie.uniformsGroups;for(let Ts=0,qh=Qn.length;Ts<qh;Ts++){const fi=Qn[Ts];bt.update(fi,zt),bt.bind(fi,zt)}}return zt}function X0(U,Y){U.ambientLightColor.needsUpdate=Y,U.lightProbe.needsUpdate=Y,U.directionalLights.needsUpdate=Y,U.directionalLightShadows.needsUpdate=Y,U.pointLights.needsUpdate=Y,U.pointLightShadows.needsUpdate=Y,U.spotLights.needsUpdate=Y,U.spotLightShadows.needsUpdate=Y,U.rectAreaLights.needsUpdate=Y,U.hemisphereLights.needsUpdate=Y}function q0(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return E},this.getRenderTarget=function(){return L},this.setRenderTargetTextures=function(U,Y,ne){Oe.get(U.texture).__webglTexture=Y,Oe.get(U.depthTexture).__webglTexture=ne;const ie=Oe.get(U);ie.__hasExternalTextures=!0,ie.__autoAllocateDepthBuffer=ne===void 0,ie.__autoAllocateDepthBuffer||ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ie.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(U,Y){const ne=Oe.get(U);ne.__webglFramebuffer=Y,ne.__useDefaultFramebuffer=Y===void 0},this.setRenderTarget=function(U,Y=0,ne=0){L=U,P=Y,E=ne;let ie=!0,J=null,Te=!1,Be=!1;if(U){const We=Oe.get(U);We.__useDefaultFramebuffer!==void 0?(_e.bindFramebuffer(W.FRAMEBUFFER,null),ie=!1):We.__webglFramebuffer===void 0?Ne.setupRenderTarget(U):We.__hasExternalTextures&&Ne.rebindTextures(U,Oe.get(U.texture).__webglTexture,Oe.get(U.depthTexture).__webglTexture);const Qe=U.texture;(Qe.isData3DTexture||Qe.isDataArrayTexture||Qe.isCompressedArrayTexture)&&(Be=!0);const Ke=Oe.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(Ke[Y])?J=Ke[Y][ne]:J=Ke[Y],Te=!0):U.samples>0&&Ne.useMultisampledRTT(U)===!1?J=Oe.get(U).__webglMultisampledFramebuffer:Array.isArray(Ke)?J=Ke[ne]:J=Ke,C.copy(U.viewport),D.copy(U.scissor),B=U.scissorTest}else C.copy(oe).multiplyScalar(q).floor(),D.copy(he).multiplyScalar(q).floor(),B=Pe;if(_e.bindFramebuffer(W.FRAMEBUFFER,J)&&ie&&_e.drawBuffers(U,J),_e.viewport(C),_e.scissor(D),_e.setScissorTest(B),Te){const We=Oe.get(U.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+Y,We.__webglTexture,ne)}else if(Be){const We=Oe.get(U.texture),Qe=Y||0;W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,We.__webglTexture,ne||0,Qe)}I=-1},this.readRenderTargetPixels=function(U,Y,ne,ie,J,Te,Be){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let He=Oe.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Be!==void 0&&(He=He[Be]),He){_e.bindFramebuffer(W.FRAMEBUFFER,He);try{const We=U.texture,Qe=We.format,Ke=We.type;if(!Me.textureFormatReadable(Qe)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Me.textureTypeReadable(Ke)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y>=0&&Y<=U.width-ie&&ne>=0&&ne<=U.height-J&&W.readPixels(Y,ne,ie,J,Ue.convert(Qe),Ue.convert(Ke),Te)}finally{const We=L!==null?Oe.get(L).__webglFramebuffer:null;_e.bindFramebuffer(W.FRAMEBUFFER,We)}}},this.readRenderTargetPixelsAsync=async function(U,Y,ne,ie,J,Te,Be){if(!(U&&U.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let He=Oe.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Be!==void 0&&(He=He[Be]),He){_e.bindFramebuffer(W.FRAMEBUFFER,He);try{const We=U.texture,Qe=We.format,Ke=We.type;if(!Me.textureFormatReadable(Qe))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Me.textureTypeReadable(Ke))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(Y>=0&&Y<=U.width-ie&&ne>=0&&ne<=U.height-J){const Ye=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,Ye),W.bufferData(W.PIXEL_PACK_BUFFER,Te.byteLength,W.STREAM_READ),W.readPixels(Y,ne,ie,J,Ue.convert(Qe),Ue.convert(Ke),0),W.flush();const Et=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);await vO(W,Et,4);try{W.bindBuffer(W.PIXEL_PACK_BUFFER,Ye),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,Te)}finally{W.deleteBuffer(Ye),W.deleteSync(Et)}return Te}}finally{const We=L!==null?Oe.get(L).__webglFramebuffer:null;_e.bindFramebuffer(W.FRAMEBUFFER,We)}}},this.copyFramebufferToTexture=function(U,Y=null,ne=0){U.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),Y=arguments[0]||null,U=arguments[1]);const ie=Math.pow(2,-ne),J=Math.floor(U.image.width*ie),Te=Math.floor(U.image.height*ie),Be=Y!==null?Y.x:0,He=Y!==null?Y.y:0;Ne.setTexture2D(U,0),W.copyTexSubImage2D(W.TEXTURE_2D,ne,0,0,Be,He,J,Te),_e.unbindTexture()},this.copyTextureToTexture=function(U,Y,ne=null,ie=null,J=0){U.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),ie=arguments[0]||null,U=arguments[1],Y=arguments[2],J=arguments[3]||0,ne=null);let Te,Be,He,We,Qe,Ke;ne!==null?(Te=ne.max.x-ne.min.x,Be=ne.max.y-ne.min.y,He=ne.min.x,We=ne.min.y):(Te=U.image.width,Be=U.image.height,He=0,We=0),ie!==null?(Qe=ie.x,Ke=ie.y):(Qe=0,Ke=0);const Ye=Ue.convert(Y.format),Et=Ue.convert(Y.type);Ne.setTexture2D(Y,0),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Y.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Y.unpackAlignment);const qt=W.getParameter(W.UNPACK_ROW_LENGTH),Vt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),vn=W.getParameter(W.UNPACK_SKIP_PIXELS),Mt=W.getParameter(W.UNPACK_SKIP_ROWS),Ce=W.getParameter(W.UNPACK_SKIP_IMAGES),ft=U.isCompressedTexture?U.mipmaps[J]:U.image;W.pixelStorei(W.UNPACK_ROW_LENGTH,ft.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,ft.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,He),W.pixelStorei(W.UNPACK_SKIP_ROWS,We),U.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,J,Qe,Ke,Te,Be,Ye,Et,ft.data):U.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,J,Qe,Ke,ft.width,ft.height,Ye,ft.data):W.texSubImage2D(W.TEXTURE_2D,J,Qe,Ke,Ye,Et,ft),W.pixelStorei(W.UNPACK_ROW_LENGTH,qt),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Vt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,vn),W.pixelStorei(W.UNPACK_SKIP_ROWS,Mt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Ce),J===0&&Y.generateMipmaps&&W.generateMipmap(W.TEXTURE_2D),_e.unbindTexture()},this.copyTextureToTexture3D=function(U,Y,ne=null,ie=null,J=0){U.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ne=arguments[0]||null,ie=arguments[1]||null,U=arguments[2],Y=arguments[3],J=arguments[4]||0);let Te,Be,He,We,Qe,Ke,Ye,Et,qt;const Vt=U.isCompressedTexture?U.mipmaps[J]:U.image;ne!==null?(Te=ne.max.x-ne.min.x,Be=ne.max.y-ne.min.y,He=ne.max.z-ne.min.z,We=ne.min.x,Qe=ne.min.y,Ke=ne.min.z):(Te=Vt.width,Be=Vt.height,He=Vt.depth,We=0,Qe=0,Ke=0),ie!==null?(Ye=ie.x,Et=ie.y,qt=ie.z):(Ye=0,Et=0,qt=0);const vn=Ue.convert(Y.format),Mt=Ue.convert(Y.type);let Ce;if(Y.isData3DTexture)Ne.setTexture3D(Y,0),Ce=W.TEXTURE_3D;else if(Y.isDataArrayTexture||Y.isCompressedArrayTexture)Ne.setTexture2DArray(Y,0),Ce=W.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,Y.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Y.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,Y.unpackAlignment);const ft=W.getParameter(W.UNPACK_ROW_LENGTH),wt=W.getParameter(W.UNPACK_IMAGE_HEIGHT),zt=W.getParameter(W.UNPACK_SKIP_PIXELS),bn=W.getParameter(W.UNPACK_SKIP_ROWS),Jn=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,Vt.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Vt.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,We),W.pixelStorei(W.UNPACK_SKIP_ROWS,Qe),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Ke),U.isDataTexture||U.isData3DTexture?W.texSubImage3D(Ce,J,Ye,Et,qt,Te,Be,He,vn,Mt,Vt.data):Y.isCompressedArrayTexture?W.compressedTexSubImage3D(Ce,J,Ye,Et,qt,Te,Be,He,vn,Vt.data):W.texSubImage3D(Ce,J,Ye,Et,qt,Te,Be,He,vn,Mt,Vt),W.pixelStorei(W.UNPACK_ROW_LENGTH,ft),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,wt),W.pixelStorei(W.UNPACK_SKIP_PIXELS,zt),W.pixelStorei(W.UNPACK_SKIP_ROWS,bn),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Jn),J===0&&Y.generateMipmaps&&W.generateMipmap(Ce),_e.unbindTexture()},this.initRenderTarget=function(U){Oe.get(U).__webglFramebuffer===void 0&&Ne.setupRenderTarget(U)},this.initTexture=function(U){U.isCubeTexture?Ne.setTextureCube(U,0):U.isData3DTexture?Ne.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ne.setTexture2DArray(U,0):Ne.setTexture2D(U,0),_e.unbindTexture()},this.resetState=function(){P=0,E=0,L=null,_e.reset(),mt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Nr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===c0?"display-p3":"srgb",t.unpackColorSpace=Ft.workingColorSpace===Ch?"display-p3":"srgb"}}class p0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ve(e),this.density=t}clone(){return new p0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class m0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ve(e),this.near=t,this.far=i}clone(){return new m0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class L7 extends Nt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fi,this.environmentIntensity=1,this.environmentRotation=new Fi,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class g0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Hu,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ni()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return G2("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Ni()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ni=new F;class va{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)ni.fromBufferAttribute(this,t),ni.applyMatrix4(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ni.fromBufferAttribute(this,t),ni.applyNormalMatrix(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ni.fromBufferAttribute(this,t),ni.transformDirection(e),this.setXYZ(t,ni.x,ni.y,ni.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=oi(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=pt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=pt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=pt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=oi(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=oi(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=oi(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=oi(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=pt(t,this.array),i=pt(i,this.array),r=pt(r,this.array),s=pt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new kt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new va(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class J2 extends Bn{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let sl;const kc=new F,ol=new F,al=new F,ll=new pe,Bc=new pe,I7=new nt,vd=new F,Vc=new F,yd=new F,g8=new pe,z1=new pe,v8=new pe;class D7 extends Nt{constructor(e=new J2){if(super(),this.isSprite=!0,this.type="Sprite",sl===void 0){sl=new yt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new g0(t,5);sl.setIndex([0,1,2,0,2,3]),sl.setAttribute("position",new va(i,3,0,!1)),sl.setAttribute("uv",new va(i,2,3,!1))}this.geometry=sl,this.material=e,this.center=new pe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ol.setFromMatrixScale(this.matrixWorld),I7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),al.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ol.multiplyScalar(-al.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;xd(vd.set(-.5,-.5,0),al,o,ol,r,s),xd(Vc.set(.5,-.5,0),al,o,ol,r,s),xd(yd.set(.5,.5,0),al,o,ol,r,s),g8.set(0,0),z1.set(1,0),v8.set(1,1);let a=e.ray.intersectTriangle(vd,Vc,yd,!1,kc);if(a===null&&(xd(Vc.set(-.5,.5,0),al,o,ol,r,s),z1.set(0,1),a=e.ray.intersectTriangle(vd,yd,Vc,!1,kc),a===null))return;const l=e.ray.origin.distanceTo(kc);l<e.near||l>e.far||t.push({distance:l,point:kc.clone(),uv:Li.getInterpolation(kc,vd,Vc,yd,g8,z1,v8,new pe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xd(n,e,t,i,r,s){ll.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Bc.x=s*ll.x-r*ll.y,Bc.y=r*ll.x+s*ll.y):Bc.copy(ll),n.copy(e),n.x+=Bc.x,n.y+=Bc.y,n.applyMatrix4(I7)}const _d=new F,y8=new F;class N7 extends Nt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){_d.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(_d);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){_d.setFromMatrixPosition(e.matrixWorld),y8.setFromMatrixPosition(this.matrixWorld);const i=_d.distanceTo(y8)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const x8=new F,_8=new Ot,S8=new Ot,TH=new F,M8=new nt,Sd=new F,H1=new Zn,b8=new nt,$1=new ec;class U7 extends Mn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=xv,this.bindMatrix=new nt,this.bindMatrixInverse=new nt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ui),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Sd),this.boundingBox.expandByPoint(Sd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Sd),this.boundingSphere.expandByPoint(Sd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),H1.copy(this.boundingSphere),H1.applyMatrix4(r),e.ray.intersectsSphere(H1)!==!1&&(b8.copy(r).invert(),$1.copy(e.ray).applyMatrix4(b8),!(this.boundingBox!==null&&$1.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,$1)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ot,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===xv?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ww?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;_8.fromBufferAttribute(r.attributes.skinIndex,e),S8.fromBufferAttribute(r.attributes.skinWeight,e),x8.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=S8.getComponent(s);if(o!==0){const a=_8.getComponent(s);M8.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(TH.copy(x8).applyMatrix4(M8),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Q2 extends Nt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ps extends rn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=In,f=In,p,d){super(null,o,a,l,c,f,r,s,p,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const w8=new nt,AH=new nt;class v0{constructor(e=[],t=[]){this.uuid=Ni(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new nt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new nt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:AH;w8.multiplyMatrices(a,t[s]),w8.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new v0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ps(t,e,e,ai,Ii);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Q2),this.bones.push(o),this.boneInverses.push(new nt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Wl extends kt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const cl=new nt,T8=new nt,Md=[],A8=new ui,EH=new nt,zc=new Mn,Hc=new Zn;class F7 extends Mn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Wl(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,EH)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ui),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cl),A8.copy(e.boundingBox).applyMatrix4(cl),this.boundingBox.union(A8)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,cl),Hc.copy(e.boundingSphere).applyMatrix4(cl),this.boundingSphere.union(Hc)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(zc.geometry=this.geometry,zc.material=this.material,zc.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hc.copy(this.boundingSphere),Hc.applyMatrix4(i),e.ray.intersectsSphere(Hc)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,cl),T8.multiplyMatrices(i,cl),zc.matrixWorld=T8,zc.raycast(e,Md);for(let o=0,a=Md.length;o<a;o++){const l=Md[o];l.instanceId=s,l.object=this,t.push(l)}Md.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Wl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new ps(new Float32Array(r*this.count),r,this.count,O2,Ii));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function CH(n,e){return n.z-e.z}function PH(n,e){return e.z-n.z}class RH{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const ul="batchId",Hs=new nt,G1=new nt,LH=new nt,IH=new Ve(1,1,1),E8=new nt,W1=new Rh,bd=new ui,No=new Zn,$c=new F,C8=new F,DH=new F,j1=new RH,Xn=new Mn,wd=[];function NH(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class O7 extends Mn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new yt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ps(t,e,e,ai,Ii);this._matricesTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new ps(t,e,e,ai,Ii);i.colorSpace=Ft.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:f,normalized:p}=l,d=new c.constructor(i*f),m=new kt(d,f,p);t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new kt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(ul,new kt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(ul))throw new Error(`BatchedMesh: Geometry cannot use attribute "${ul}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===ul)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ui);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Hs),this.getBoundingBoxAt(r,bd).applyMatrix4(Hs),t.union(bd))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zn);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Hs),this.getBoundingSphereAt(r,No).applyMatrix4(Hs),t.union(No))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),f=c!==null;if(f&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const p=this._visibility,d=this._active,m=this._matricesTexture,v=this._matricesTexture.image.data,_=this._colorsTexture;p.push(!0),d.push(!0);const x=this._geometryCount;this._geometryCount++,LH.toArray(v,x*16),m.needsUpdate=!0,_!==null&&(IH.toArray(_.image.data,x*4),_.needsUpdate=!0),o.push(r),a.push({start:f?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new ui,sphereInitialized:!1,sphere:new Zn});const y=this.geometry.getAttribute(ul);for(let b=0;b<r.vertexCount;b++)y.setX(r.vertexStart+b,x);return y.needsUpdate=!0,this.setGeometryAt(x,e),x}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===ul)continue;const v=t.getAttribute(m),_=i.getAttribute(m);NH(v,_,l);const x=v.itemSize;for(let y=v.count,b=c;y<b;y++){const M=l+y;for(let T=0;T<x;T++)_.setComponent(M,T,0)}_.needsUpdate=!0,_.addUpdateRange(l*x,c*x)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,_=a.indexCount;v<_;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const f=this._bounds[e];t.boundingBox!==null?(f.box.copy(t.boundingBox),f.boxInitialized=!0):f.boxInitialized=!1,t.boundingSphere!==null?(f.sphere.copy(t.boundingSphere),f.sphereInitialized=!0):f.sphereInitialized=!1;const p=this._drawRanges[e],d=t.getAttribute("position");return p.count=r?o.count:d.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(e){return this._multiDrawInstances===null?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let f=c.start,p=c.start+c.count;f<p;f++){let d=f;a&&(d=a.getX(d)),s.expandByPoint($c.fromBufferAttribute(l,d))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,bd),bd.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let f=0;for(let p=c.start,d=c.start+c.count;p<d;p++){let m=p;a&&(m=a.getX(m)),$c.fromBufferAttribute(l,m),f=Math.max(f,s.center.distanceToSquared($c))}s.radius=Math.sqrt(f),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._active,r=this._colorsTexture,s=this._colorsTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*4),r.needsUpdate=!0,this)}getColorAt(e,t){const i=this._active,r=this._colorsTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*4)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;Xn.material=this.material,Xn.geometry.index=l.index,Xn.geometry.attributes=l.attributes,Xn.geometry.boundingBox===null&&(Xn.geometry.boundingBox=new ui),Xn.geometry.boundingSphere===null&&(Xn.geometry.boundingSphere=new Zn);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const f=s[c];Xn.geometry.setDrawRange(f.start,f.count),this.getMatrixAt(c,Xn.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,Xn.geometry.boundingBox),this.getBoundingSphereAt(c,Xn.geometry.boundingSphere),Xn.raycast(e,wd);for(let p=0,d=wd.length;p<d;p++){const m=wd[p];m.object=this,m.batchId=c,t.push(m)}wd.length=0}Xn.material=null,Xn.geometry.index=null,Xn.geometry.attributes={},Xn.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,f=this._multiDrawStarts,p=this._multiDrawCounts,d=this._drawRanges,m=this.perObjectFrustumCulled;m&&(E8.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),W1.setFromProjectionMatrix(E8,e.coordinateSystem));let v=0;if(this.sortObjects){G1.copy(this.matrixWorld).invert(),$c.setFromMatrixPosition(i.matrixWorld).applyMatrix4(G1),C8.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(G1);for(let y=0,b=c.length;y<b;y++)if(c[y]&&l[y]){this.getMatrixAt(y,Hs),this.getBoundingSphereAt(y,No).applyMatrix4(Hs);let M=!1;if(m&&(M=!W1.intersectsSphere(No)),!M){const T=DH.subVectors(No.center,$c).dot(C8);j1.push(d[y],T)}}const _=j1.list,x=this.customSort;x===null?_.sort(s.transparent?PH:CH):x.call(this,_,i);for(let y=0,b=_.length;y<b;y++){const M=_[y];f[v]=M.start*a,p[v]=M.count,v++}j1.reset()}else for(let _=0,x=c.length;_<x;_++)if(c[_]&&l[_]){let y=!1;if(m&&(this.getMatrixAt(_,Hs),this.getBoundingSphereAt(_,No).applyMatrix4(Hs),y=!W1.intersectsSphere(No)),!y){const b=d[_];f[v]=b.start*a,p[v]=b.count,v++}}this._multiDrawCount=v,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class hi extends Bn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ve(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Ip=new F,Dp=new F,P8=new nt,Gc=new ec,Td=new Zn,X1=new F,R8=new F;class ro extends Nt{constructor(e=new yt,t=new hi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Ip.fromBufferAttribute(t,r-1),Dp.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Ip.distanceTo(Dp);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Td.copy(i.boundingSphere),Td.applyMatrix4(r),Td.radius+=s,e.ray.intersectsSphere(Td)===!1)return;P8.copy(r).invert(),Gc.copy(e.ray).applyMatrix4(P8);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,f=i.index,d=i.attributes.position;if(f!==null){const m=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let _=m,x=v-1;_<x;_+=c){const y=f.getX(_),b=f.getX(_+1),M=Ad(this,e,Gc,l,y,b);M&&t.push(M)}if(this.isLineLoop){const _=f.getX(v-1),x=f.getX(m),y=Ad(this,e,Gc,l,_,x);y&&t.push(y)}}else{const m=Math.max(0,o.start),v=Math.min(d.count,o.start+o.count);for(let _=m,x=v-1;_<x;_+=c){const y=Ad(this,e,Gc,l,_,_+1);y&&t.push(y)}if(this.isLineLoop){const _=Ad(this,e,Gc,l,v-1,m);_&&t.push(_)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ad(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(Ip.fromBufferAttribute(o,r),Dp.fromBufferAttribute(o,s),t.distanceSqToSegment(Ip,Dp,X1,R8)>i)return;X1.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(X1);if(!(l<e.near||l>e.far))return{distance:l,point:R8.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const L8=new F,I8=new F;class jr extends ro{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)L8.fromBufferAttribute(t,r),I8.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+L8.distanceTo(I8);e.setAttribute("lineDistance",new Ge(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class k7 extends ro{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class ex extends Bn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ve(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const D8=new nt,Kv=new ec,Ed=new Zn,Cd=new F;class B7 extends Nt{constructor(e=new yt,t=new ex){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ed.copy(i.boundingSphere),Ed.applyMatrix4(r),Ed.radius+=s,e.ray.intersectsSphere(Ed)===!1)return;D8.copy(r).invert(),Kv.copy(e.ray).applyMatrix4(D8);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,p=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let v=d,_=m;v<_;v++){const x=c.getX(v);Cd.fromBufferAttribute(p,x),N8(Cd,x,l,r,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(p.count,o.start+o.count);for(let v=d,_=m;v<_;v++)Cd.fromBufferAttribute(p,v),N8(Cd,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function N8(n,e,t,i,r,s,o){const a=Kv.distanceSqToPoint(n);if(a<t){const l=new F;Kv.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class UH extends rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Sn,this.magFilter=s!==void 0?s:Sn,this.generateMipmaps=!1;const f=this;function p(){f.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class FH extends rn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=In,this.minFilter=In,this.generateMipmaps=!1,this.needsUpdate=!0}}class y0 extends rn{constructor(e,t,i,r,s,o,a,l,c,f,p,d){super(null,o,a,l,c,f,r,s,p,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class OH extends y0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=er,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class kH extends y0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ys),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class BH extends rn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class _r{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],d=i[r+1]-f,m=(o-f)/d;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new pe:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new F,r=[],s=[],o=[],a=new F,l=new nt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const f=Math.abs(r[0].x),p=Math.abs(r[0].y),d=Math.abs(r[0].z);f<=c&&(c=f,i.set(1,0,0)),p<=c&&(c=p,i.set(0,1,0)),d<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(hn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(hn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class x0 extends _r{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new pe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),p=Math.sin(this.aRotation),d=l-this.aX,m=c-this.aY;l=d*f-m*p+this.aX,c=d*p+m*f+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class V7 extends x0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function tx(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,f,p){let d=(o-s)/c-(a-s)/(c+f)+(a-o)/f,m=(a-o)/f-(l-o)/(f+p)+(l-a)/p;d*=f,m*=f,r(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Pd=new F,q1=new tx,Y1=new tx,K1=new tx;class z7 extends _r{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new F){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,f;this.closed||a>0?c=r[(a-1)%s]:(Pd.subVectors(r[0],r[1]).add(r[0]),c=Pd);const p=r[a%s],d=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(Pd.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=Pd),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(c.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(f),m);_<1e-4&&(_=1),v<1e-4&&(v=_),x<1e-4&&(x=_),q1.initNonuniformCatmullRom(c.x,p.x,d.x,f.x,v,_,x),Y1.initNonuniformCatmullRom(c.y,p.y,d.y,f.y,v,_,x),K1.initNonuniformCatmullRom(c.z,p.z,d.z,f.z,v,_,x)}else this.curveType==="catmullrom"&&(q1.initCatmullRom(c.x,p.x,d.x,f.x,this.tension),Y1.initCatmullRom(c.y,p.y,d.y,f.y,this.tension),K1.initCatmullRom(c.z,p.z,d.z,f.z,this.tension));return i.set(q1.calc(l),Y1.calc(l),K1.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function U8(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function VH(n,e){const t=1-n;return t*t*e}function zH(n,e){return 2*(1-n)*n*e}function HH(n,e){return n*n*e}function du(n,e,t,i){return VH(n,e)+zH(n,t)+HH(n,i)}function $H(n,e){const t=1-n;return t*t*t*e}function GH(n,e){const t=1-n;return 3*t*t*n*e}function WH(n,e){return 3*(1-n)*n*n*e}function jH(n,e){return n*n*n*e}function pu(n,e,t,i,r){return $H(n,e)+GH(n,t)+WH(n,i)+jH(n,r)}class nx extends _r{constructor(e=new pe,t=new pe,i=new pe,r=new pe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pu(e,r.x,s.x,o.x,a.x),pu(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class H7 extends _r{constructor(e=new F,t=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pu(e,r.x,s.x,o.x,a.x),pu(e,r.y,s.y,o.y,a.y),pu(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ix extends _r{constructor(e=new pe,t=new pe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new pe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $7 extends _r{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rx extends _r{constructor(e=new pe,t=new pe,i=new pe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(du(e,r.x,s.x,o.x),du(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sx extends _r{constructor(e=new F,t=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(du(e,r.x,s.x,o.x),du(e,r.y,s.y,o.y),du(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ox extends _r{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],f=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(U8(a,l.x,c.x,f.x,p.x),U8(a,l.y,c.y,f.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new pe().fromArray(r))}return this}}var Np=Object.freeze({__proto__:null,ArcCurve:V7,CatmullRomCurve3:z7,CubicBezierCurve:nx,CubicBezierCurve3:H7,EllipseCurve:x0,LineCurve:ix,LineCurve3:$7,QuadraticBezierCurve:rx,QuadraticBezierCurve3:sx,SplineCurve:ox});class G7 extends _r{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Np[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const f=l[c];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Np[r.type]().fromJSON(r))}return this}}let Wu=class extends G7{constructor(e){super(),this.type="Path",this.currentPoint=new pe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ix(this.currentPoint.clone(),new pe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new rx(this.currentPoint.clone(),new pe(e,t),new pe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new nx(this.currentPoint.clone(),new pe(e,t),new pe(i,r),new pe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new ox(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+c,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new x0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const f=c.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class Lh extends yt{constructor(e=[new pe(0,-.5),new pe(.5,0),new pe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=hn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],f=1/t,p=new F,d=new pe,m=new F,v=new F,_=new F;let x=0,y=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:x=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,m.x=y*1,m.y=-x,m.z=y*0,_.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:x=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,m.x=y*1,m.y=-x,m.z=y*0,v.copy(m),m.x+=_.x,m.y+=_.y,m.z+=_.z,m.normalize(),l.push(m.x,m.y,m.z),_.copy(v)}for(let b=0;b<=t;b++){const M=i+b*f*r,T=Math.sin(M),P=Math.cos(M);for(let E=0;E<=e.length-1;E++){p.x=e[E].x*T,p.y=e[E].y,p.z=e[E].x*P,o.push(p.x,p.y,p.z),d.x=b/t,d.y=E/(e.length-1),a.push(d.x,d.y);const L=l[3*E+0]*T,I=l[3*E+1],R=l[3*E+0]*P;c.push(L,I,R)}}for(let b=0;b<t;b++)for(let M=0;M<e.length-1;M++){const T=M+b*e.length,P=T,E=T+e.length,L=T+e.length+1,I=T+1;s.push(P,E,I),s.push(L,I,E)}this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("uv",new Ge(a,2)),this.setAttribute("normal",new Ge(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lh(e.points,e.segments,e.phiStart,e.phiLength)}}class _0 extends Lh{constructor(e=1,t=1,i=4,r=8){const s=new Wu;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new _0(e.radius,e.length,e.capSegments,e.radialSegments)}}class S0 extends yt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new F,f=new pe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,d=3;p<=t;p++,d+=3){const m=i+p/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),f.x=(o[d]/e+1)/2,f.y=(o[d+1]/e+1)/2,l.push(f.x,f.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new Ge(o,3)),this.setAttribute("normal",new Ge(a,3)),this.setAttribute("uv",new Ge(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ic extends yt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const f=[],p=[],d=[],m=[];let v=0;const _=[],x=i/2;let y=0;b(),o===!1&&(e>0&&M(!0),t>0&&M(!1)),this.setIndex(f),this.setAttribute("position",new Ge(p,3)),this.setAttribute("normal",new Ge(d,3)),this.setAttribute("uv",new Ge(m,2));function b(){const T=new F,P=new F;let E=0;const L=(t-e)/i;for(let I=0;I<=s;I++){const R=[],C=I/s,D=C*(t-e)+e;for(let B=0;B<=r;B++){const G=B/r,z=G*l+a,Z=Math.sin(z),$=Math.cos(z);P.x=D*Z,P.y=-C*i+x,P.z=D*$,p.push(P.x,P.y,P.z),T.set(Z,L,$).normalize(),d.push(T.x,T.y,T.z),m.push(G,1-C),R.push(v++)}_.push(R)}for(let I=0;I<r;I++)for(let R=0;R<s;R++){const C=_[R][I],D=_[R+1][I],B=_[R+1][I+1],G=_[R][I+1];f.push(C,D,G),f.push(D,B,G),E+=6}c.addGroup(y,E,0),y+=E}function M(T){const P=v,E=new pe,L=new F;let I=0;const R=T===!0?e:t,C=T===!0?1:-1;for(let B=1;B<=r;B++)p.push(0,x*C,0),d.push(0,C,0),m.push(.5,.5),v++;const D=v;for(let B=0;B<=r;B++){const z=B/r*l+a,Z=Math.cos(z),$=Math.sin(z);L.x=R*$,L.y=x*C,L.z=R*Z,p.push(L.x,L.y,L.z),d.push(0,C,0),E.x=Z*.5+.5,E.y=$*.5*C+.5,m.push(E.x,E.y),v++}for(let B=0;B<r;B++){const G=P+B,z=D+B;T===!0?f.push(z,z+1,G):f.push(z+1,z,G),I+=3}c.addGroup(y,I,T===!0?1:2),y+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ic(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class M0 extends ic{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new M0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class fo extends yt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),f(),this.setAttribute("position",new Ge(s,3)),this.setAttribute("normal",new Ge(s.slice(),3)),this.setAttribute("uv",new Ge(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const M=new F,T=new F,P=new F;for(let E=0;E<t.length;E+=3)m(t[E+0],M),m(t[E+1],T),m(t[E+2],P),l(M,T,P,b)}function l(b,M,T,P){const E=P+1,L=[];for(let I=0;I<=E;I++){L[I]=[];const R=b.clone().lerp(T,I/E),C=M.clone().lerp(T,I/E),D=E-I;for(let B=0;B<=D;B++)B===0&&I===E?L[I][B]=R:L[I][B]=R.clone().lerp(C,B/D)}for(let I=0;I<E;I++)for(let R=0;R<2*(E-I)-1;R++){const C=Math.floor(R/2);R%2===0?(d(L[I][C+1]),d(L[I+1][C]),d(L[I][C])):(d(L[I][C+1]),d(L[I+1][C+1]),d(L[I+1][C]))}}function c(b){const M=new F;for(let T=0;T<s.length;T+=3)M.x=s[T+0],M.y=s[T+1],M.z=s[T+2],M.normalize().multiplyScalar(b),s[T+0]=M.x,s[T+1]=M.y,s[T+2]=M.z}function f(){const b=new F;for(let M=0;M<s.length;M+=3){b.x=s[M+0],b.y=s[M+1],b.z=s[M+2];const T=x(b)/2/Math.PI+.5,P=y(b)/Math.PI+.5;o.push(T,1-P)}v(),p()}function p(){for(let b=0;b<o.length;b+=6){const M=o[b+0],T=o[b+2],P=o[b+4],E=Math.max(M,T,P),L=Math.min(M,T,P);E>.9&&L<.1&&(M<.2&&(o[b+0]+=1),T<.2&&(o[b+2]+=1),P<.2&&(o[b+4]+=1))}}function d(b){s.push(b.x,b.y,b.z)}function m(b,M){const T=b*3;M.x=e[T+0],M.y=e[T+1],M.z=e[T+2]}function v(){const b=new F,M=new F,T=new F,P=new F,E=new pe,L=new pe,I=new pe;for(let R=0,C=0;R<s.length;R+=9,C+=6){b.set(s[R+0],s[R+1],s[R+2]),M.set(s[R+3],s[R+4],s[R+5]),T.set(s[R+6],s[R+7],s[R+8]),E.set(o[C+0],o[C+1]),L.set(o[C+2],o[C+3]),I.set(o[C+4],o[C+5]),P.copy(b).add(M).add(T).divideScalar(3);const D=x(P);_(E,C+0,b,D),_(L,C+2,M,D),_(I,C+4,T,D)}}function _(b,M,T,P){P<0&&b.x===1&&(o[M]=b.x-1),T.x===0&&T.z===0&&(o[M]=P/2/Math.PI+.5)}function x(b){return Math.atan2(b.z,-b.x)}function y(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fo(e.vertices,e.indices,e.radius,e.details)}}class b0 extends fo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b0(e.radius,e.detail)}}const Rd=new F,Ld=new F,Z1=new F,Id=new Li;class W7 extends yt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(ra*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],f=["a","b","c"],p=new Array(3),d={},m=[];for(let v=0;v<l;v+=3){o?(c[0]=o.getX(v),c[1]=o.getX(v+1),c[2]=o.getX(v+2)):(c[0]=v,c[1]=v+1,c[2]=v+2);const{a:_,b:x,c:y}=Id;if(_.fromBufferAttribute(a,c[0]),x.fromBufferAttribute(a,c[1]),y.fromBufferAttribute(a,c[2]),Id.getNormal(Z1),p[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,p[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,p[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let b=0;b<3;b++){const M=(b+1)%3,T=p[b],P=p[M],E=Id[f[b]],L=Id[f[M]],I=`${T}_${P}`,R=`${P}_${T}`;R in d&&d[R]?(Z1.dot(d[R].normal)<=s&&(m.push(E.x,E.y,E.z),m.push(L.x,L.y,L.z)),d[R]=null):I in d||(d[I]={index0:c[b],index1:c[M],normal:Z1.clone()})}}for(const v in d)if(d[v]){const{index0:_,index1:x}=d[v];Rd.fromBufferAttribute(a,_),Ld.fromBufferAttribute(a,x),m.push(Rd.x,Rd.y,Rd.z),m.push(Ld.x,Ld.y,Ld.z)}this.setAttribute("position",new Ge(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class oa extends Wu{constructor(e){super(e),this.uuid=Ni(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Wu().fromJSON(r))}return this}}const XH={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=j7(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,f,p,d,m;if(i&&(s=JH(n,e,s,t)),n.length>80*t){a=c=n[0],l=f=n[1];for(let v=t;v<r;v+=t)p=n[v],d=n[v+1],p<a&&(a=p),d<l&&(l=d),p>c&&(c=p),d>f&&(f=d);m=Math.max(c-a,f-l),m=m!==0?32767/m:0}return ju(s,o,t,a,l,m,0),o}};function j7(n,e,t,i,r){let s,o;if(r===c$(n,e,t,i)>0)for(s=e;s<t;s+=i)o=F8(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=F8(s,n[s],n[s+1],o);return o&&w0(o,o.next)&&(qu(o),o=o.next),o}function ya(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(w0(t,t.next)||Qt(t.prev,t,t.next)===0)){if(qu(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function ju(n,e,t,i,r,s,o){if(!n)return;!o&&s&&i$(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?YH(n,i,r,s):qH(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),qu(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=KH(ya(n),e,t),ju(n,e,t,i,r,s,2)):o===2&&ZH(n,e,t,i,r,s):ju(ya(n),e,t,i,r,s,1);break}}}function qH(n){const e=n.prev,t=n,i=n.next;if(Qt(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,f=r<s?r<o?r:o:s<o?s:o,p=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=d&&v.y>=p&&v.y<=m&&Tl(r,a,s,l,o,c,v.x,v.y)&&Qt(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function YH(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Qt(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,f=r.y,p=s.y,d=o.y,m=a<l?a<c?a:c:l<c?l:c,v=f<p?f<d?f:d:p<d?p:d,_=a>l?a>c?a:c:l>c?l:c,x=f>p?f>d?f:d:p>d?p:d,y=Zv(m,v,e,t,i),b=Zv(_,x,e,t,i);let M=n.prevZ,T=n.nextZ;for(;M&&M.z>=y&&T&&T.z<=b;){if(M.x>=m&&M.x<=_&&M.y>=v&&M.y<=x&&M!==r&&M!==o&&Tl(a,f,l,p,c,d,M.x,M.y)&&Qt(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=m&&T.x<=_&&T.y>=v&&T.y<=x&&T!==r&&T!==o&&Tl(a,f,l,p,c,d,T.x,T.y)&&Qt(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=y;){if(M.x>=m&&M.x<=_&&M.y>=v&&M.y<=x&&M!==r&&M!==o&&Tl(a,f,l,p,c,d,M.x,M.y)&&Qt(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=b;){if(T.x>=m&&T.x<=_&&T.y>=v&&T.y<=x&&T!==r&&T!==o&&Tl(a,f,l,p,c,d,T.x,T.y)&&Qt(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function KH(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!w0(r,s)&&X7(r,i,i.next,s)&&Xu(r,s)&&Xu(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),qu(i),qu(i.next),i=n=s),i=i.next}while(i!==n);return ya(i)}function ZH(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&o$(o,a)){let l=q7(o,a);o=ya(o,o.next),l=ya(l,l.next),ju(o,e,t,i,r,s,0),ju(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function JH(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=j7(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(s$(c));for(r.sort(QH),s=0;s<r.length;s++)t=e$(r[s],t);return t}function QH(n,e){return n.x-e.x}function e$(n,e){const t=t$(n,e);if(!t)return e;const i=q7(t,n);return ya(i,i.next),ya(t,t.next)}function t$(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>i&&(i=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let f=1/0,p;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Tl(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),Xu(t,n)&&(p<f||p===f&&(t.x>r.x||t.x===r.x&&n$(r,t)))&&(r=t,f=p)),t=t.next;while(t!==a);return r}function n$(n,e){return Qt(n.prev,n,e.prev)<0&&Qt(e.next,n,n.next)<0}function i$(n,e,t,i){let r=n;do r.z===0&&(r.z=Zv(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,r$(r)}function r$(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function Zv(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function s$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tl(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function o$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!a$(n,e)&&(Xu(n,e)&&Xu(e,n)&&l$(n,e)&&(Qt(n.prev,n,e.prev)||Qt(n,e.prev,e))||w0(n,e)&&Qt(n.prev,n,n.next)>0&&Qt(e.prev,e,e.next)>0)}function Qt(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function w0(n,e){return n.x===e.x&&n.y===e.y}function X7(n,e,t,i){const r=Nd(Qt(n,e,t)),s=Nd(Qt(n,e,i)),o=Nd(Qt(t,i,n)),a=Nd(Qt(t,i,e));return!!(r!==s&&o!==a||r===0&&Dd(n,t,e)||s===0&&Dd(n,i,e)||o===0&&Dd(t,n,i)||a===0&&Dd(t,e,i))}function Dd(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Nd(n){return n>0?1:n<0?-1:0}function a$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&X7(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xu(n,e){return Qt(n.prev,n,n.next)<0?Qt(n,e,n.next)>=0&&Qt(n,n.prev,e)>=0:Qt(n,e,n.prev)<0||Qt(n,n.next,e)<0}function l$(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function q7(n,e){const t=new Jv(n.i,n.x,n.y),i=new Jv(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function F8(n,e,t,i){const r=new Jv(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function qu(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function Jv(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function c$(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Br{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Br.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];O8(e),k8(i,e);let o=e.length;t.forEach(O8);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,k8(i,t[l]);const a=XH.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function O8(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function k8(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class T0 extends yt{constructor(e=new oa([new pe(.5,.5),new pe(-.5,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ge(r,3)),this.setAttribute("uv",new Ge(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,_=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:u$;let M,T=!1,P,E,L,I;y&&(M=y.getSpacedPoints(f),T=!0,d=!1,P=y.computeFrenetFrames(f,!1),E=new F,L=new F,I=new F),d||(x=0,m=0,v=0,_=0);const R=a.extractPoints(c);let C=R.shape;const D=R.holes;if(!Br.isClockWise(C)){C=C.reverse();for(let fe=0,ue=D.length;fe<ue;fe++){const Me=D[fe];Br.isClockWise(Me)&&(D[fe]=Me.reverse())}}const G=Br.triangulateShape(C,D),z=C;for(let fe=0,ue=D.length;fe<ue;fe++){const Me=D[fe];C=C.concat(Me)}function Z(fe,ue,Me){return ue||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(ue,Me)}const $=C.length,q=G.length;function k(fe,ue,Me){let _e,Se,Oe;const Ne=fe.x-ue.x,lt=fe.y-ue.y,V=Me.x-fe.x,N=Me.y-fe.y,re=Ne*Ne+lt*lt,ve=Ne*N-lt*V;if(Math.abs(ve)>Number.EPSILON){const de=Math.sqrt(re),ye=Math.sqrt(V*V+N*N),qe=ue.x-lt/de,Re=ue.y+Ne/de,Le=Me.x-N/ye,ct=Me.y+V/ye,be=((Le-qe)*N-(ct-Re)*V)/(Ne*N-lt*V);_e=qe+Ne*be-fe.x,Se=Re+lt*be-fe.y;const $e=_e*_e+Se*Se;if($e<=2)return new pe(_e,Se);Oe=Math.sqrt($e/2)}else{let de=!1;Ne>Number.EPSILON?V>Number.EPSILON&&(de=!0):Ne<-Number.EPSILON?V<-Number.EPSILON&&(de=!0):Math.sign(lt)===Math.sign(N)&&(de=!0),de?(_e=-lt,Se=Ne,Oe=Math.sqrt(re)):(_e=Ne,Se=lt,Oe=Math.sqrt(re/2))}return new pe(_e/Oe,Se/Oe)}const Q=[];for(let fe=0,ue=z.length,Me=ue-1,_e=fe+1;fe<ue;fe++,Me++,_e++)Me===ue&&(Me=0),_e===ue&&(_e=0),Q[fe]=k(z[fe],z[Me],z[_e]);const oe=[];let he,Pe=Q.concat();for(let fe=0,ue=D.length;fe<ue;fe++){const Me=D[fe];he=[];for(let _e=0,Se=Me.length,Oe=Se-1,Ne=_e+1;_e<Se;_e++,Oe++,Ne++)Oe===Se&&(Oe=0),Ne===Se&&(Ne=0),he[_e]=k(Me[_e],Me[Oe],Me[Ne]);oe.push(he),Pe=Pe.concat(he)}for(let fe=0;fe<x;fe++){const ue=fe/x,Me=m*Math.cos(ue*Math.PI/2),_e=v*Math.sin(ue*Math.PI/2)+_;for(let Se=0,Oe=z.length;Se<Oe;Se++){const Ne=Z(z[Se],Q[Se],_e);xe(Ne.x,Ne.y,-Me)}for(let Se=0,Oe=D.length;Se<Oe;Se++){const Ne=D[Se];he=oe[Se];for(let lt=0,V=Ne.length;lt<V;lt++){const N=Z(Ne[lt],he[lt],_e);xe(N.x,N.y,-Me)}}}const st=v+_;for(let fe=0;fe<$;fe++){const ue=d?Z(C[fe],Pe[fe],st):C[fe];T?(L.copy(P.normals[0]).multiplyScalar(ue.x),E.copy(P.binormals[0]).multiplyScalar(ue.y),I.copy(M[0]).add(L).add(E),xe(I.x,I.y,I.z)):xe(ue.x,ue.y,0)}for(let fe=1;fe<=f;fe++)for(let ue=0;ue<$;ue++){const Me=d?Z(C[ue],Pe[ue],st):C[ue];T?(L.copy(P.normals[fe]).multiplyScalar(Me.x),E.copy(P.binormals[fe]).multiplyScalar(Me.y),I.copy(M[fe]).add(L).add(E),xe(I.x,I.y,I.z)):xe(Me.x,Me.y,p/f*fe)}for(let fe=x-1;fe>=0;fe--){const ue=fe/x,Me=m*Math.cos(ue*Math.PI/2),_e=v*Math.sin(ue*Math.PI/2)+_;for(let Se=0,Oe=z.length;Se<Oe;Se++){const Ne=Z(z[Se],Q[Se],_e);xe(Ne.x,Ne.y,p+Me)}for(let Se=0,Oe=D.length;Se<Oe;Se++){const Ne=D[Se];he=oe[Se];for(let lt=0,V=Ne.length;lt<V;lt++){const N=Z(Ne[lt],he[lt],_e);T?xe(N.x,N.y+M[f-1].y,M[f-1].x+Me):xe(N.x,N.y,p+Me)}}}ae(),ge();function ae(){const fe=r.length/3;if(d){let ue=0,Me=$*ue;for(let _e=0;_e<q;_e++){const Se=G[_e];et(Se[2]+Me,Se[1]+Me,Se[0]+Me)}ue=f+x*2,Me=$*ue;for(let _e=0;_e<q;_e++){const Se=G[_e];et(Se[0]+Me,Se[1]+Me,Se[2]+Me)}}else{for(let ue=0;ue<q;ue++){const Me=G[ue];et(Me[2],Me[1],Me[0])}for(let ue=0;ue<q;ue++){const Me=G[ue];et(Me[0]+$*f,Me[1]+$*f,Me[2]+$*f)}}i.addGroup(fe,r.length/3-fe,0)}function ge(){const fe=r.length/3;let ue=0;Ee(z,ue),ue+=z.length;for(let Me=0,_e=D.length;Me<_e;Me++){const Se=D[Me];Ee(Se,ue),ue+=Se.length}i.addGroup(fe,r.length/3-fe,1)}function Ee(fe,ue){let Me=fe.length;for(;--Me>=0;){const _e=Me;let Se=Me-1;Se<0&&(Se=fe.length-1);for(let Oe=0,Ne=f+x*2;Oe<Ne;Oe++){const lt=$*Oe,V=$*(Oe+1),N=ue+_e+lt,re=ue+Se+lt,ve=ue+Se+V,de=ue+_e+V;Je(N,re,ve,de)}}}function xe(fe,ue,Me){l.push(fe),l.push(ue),l.push(Me)}function et(fe,ue,Me){it(fe),it(ue),it(Me);const _e=r.length/3,Se=b.generateTopUV(i,r,_e-3,_e-2,_e-1);W(Se[0]),W(Se[1]),W(Se[2])}function Je(fe,ue,Me,_e){it(fe),it(ue),it(_e),it(ue),it(Me),it(_e);const Se=r.length/3,Oe=b.generateSideWallUV(i,r,Se-6,Se-3,Se-2,Se-1);W(Oe[0]),W(Oe[1]),W(Oe[3]),W(Oe[1]),W(Oe[2]),W(Oe[3])}function it(fe){r.push(l[fe*3+0]),r.push(l[fe*3+1]),r.push(l[fe*3+2])}function W(fe){s.push(fe.x),s.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return h$(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Np[r.type]().fromJSON(r)),new T0(i,e.options)}}const u$={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],f=e[r*3+1];return[new pe(s,o),new pe(a,l),new pe(c,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],f=e[i*3+1],p=e[i*3+2],d=e[r*3],m=e[r*3+1],v=e[r*3+2],_=e[s*3],x=e[s*3+1],y=e[s*3+2];return Math.abs(a-f)<Math.abs(o-c)?[new pe(o,1-l),new pe(c,1-p),new pe(d,1-v),new pe(_,1-y)]:[new pe(a,1-l),new pe(f,1-p),new pe(m,1-v),new pe(x,1-y)]}};function h$(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class A0 extends fo{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new A0(e.radius,e.detail)}}class Ih extends fo{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ih(e.radius,e.detail)}}class E0 extends yt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],f=[];let p=e;const d=(t-e)/r,m=new F,v=new pe;for(let _=0;_<=r;_++){for(let x=0;x<=i;x++){const y=s+x/i*o;m.x=p*Math.cos(y),m.y=p*Math.sin(y),l.push(m.x,m.y,m.z),c.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y)}p+=d}for(let _=0;_<r;_++){const x=_*(i+1);for(let y=0;y<i;y++){const b=y+x,M=b,T=b+i+1,P=b+i+2,E=b+1;a.push(M,T,E),a.push(T,P,E)}}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(c,3)),this.setAttribute("uv",new Ge(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class C0 extends yt{constructor(e=new oa([new pe(0,.5),new pe(-.5,-.5),new pe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let f=0;f<e.length;f++)c(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ge(r,3)),this.setAttribute("normal",new Ge(s,3)),this.setAttribute("uv",new Ge(o,2));function c(f){const p=r.length/3,d=f.extractPoints(t);let m=d.shape;const v=d.holes;Br.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,y=v.length;x<y;x++){const b=v[x];Br.isClockWise(b)===!0&&(v[x]=b.reverse())}const _=Br.triangulateShape(m,v);for(let x=0,y=v.length;x<y;x++){const b=v[x];m=m.concat(b)}for(let x=0,y=m.length;x<y;x++){const b=m[x];r.push(b.x,b.y,0),s.push(0,0,1),o.push(b.x,b.y)}for(let x=0,y=_.length;x<y;x++){const b=_[x],M=b[0]+p,T=b[1]+p,P=b[2]+p;i.push(M,T,P),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return f$(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new C0(i,e.curveSegments)}}function f$(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Dh extends yt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const f=[],p=new F,d=new F,m=[],v=[],_=[],x=[];for(let y=0;y<=i;y++){const b=[],M=y/i;let T=0;y===0&&o===0?T=.5/t:y===i&&l===Math.PI&&(T=-.5/t);for(let P=0;P<=t;P++){const E=P/t;p.x=-e*Math.cos(r+E*s)*Math.sin(o+M*a),p.y=e*Math.cos(o+M*a),p.z=e*Math.sin(r+E*s)*Math.sin(o+M*a),v.push(p.x,p.y,p.z),d.copy(p).normalize(),_.push(d.x,d.y,d.z),x.push(E+T,1-M),b.push(c++)}f.push(b)}for(let y=0;y<i;y++)for(let b=0;b<t;b++){const M=f[y][b+1],T=f[y][b],P=f[y+1][b],E=f[y+1][b+1];(y!==0||o>0)&&m.push(M,T,E),(y!==i-1||l<Math.PI)&&m.push(T,P,E)}this.setIndex(m),this.setAttribute("position",new Ge(v,3)),this.setAttribute("normal",new Ge(_,3)),this.setAttribute("uv",new Ge(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class P0 extends fo{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new P0(e.radius,e.detail)}}class R0 extends yt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],f=new F,p=new F,d=new F;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const _=v/r*s,x=m/i*Math.PI*2;p.x=(e+t*Math.cos(x))*Math.cos(_),p.y=(e+t*Math.cos(x))*Math.sin(_),p.z=t*Math.sin(x),a.push(p.x,p.y,p.z),f.x=e*Math.cos(_),f.y=e*Math.sin(_),d.subVectors(p,f).normalize(),l.push(d.x,d.y,d.z),c.push(v/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const _=(r+1)*m+v-1,x=(r+1)*(m-1)+v-1,y=(r+1)*(m-1)+v,b=(r+1)*m+v;o.push(_,x,b),o.push(x,y,b)}this.setIndex(o),this.setAttribute("position",new Ge(a,3)),this.setAttribute("normal",new Ge(l,3)),this.setAttribute("uv",new Ge(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new R0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class L0 extends yt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],p=new F,d=new F,m=new F,v=new F,_=new F,x=new F,y=new F;for(let M=0;M<=i;++M){const T=M/i*s*Math.PI*2;b(T,s,o,e,m),b(T+.01,s,o,e,v),x.subVectors(v,m),y.addVectors(v,m),_.crossVectors(x,y),y.crossVectors(_,x),_.normalize(),y.normalize();for(let P=0;P<=r;++P){const E=P/r*Math.PI*2,L=-t*Math.cos(E),I=t*Math.sin(E);p.x=m.x+(L*y.x+I*_.x),p.y=m.y+(L*y.y+I*_.y),p.z=m.z+(L*y.z+I*_.z),l.push(p.x,p.y,p.z),d.subVectors(p,m).normalize(),c.push(d.x,d.y,d.z),f.push(M/i),f.push(P/r)}}for(let M=1;M<=i;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),E=(r+1)*M+(T-1),L=(r+1)*M+T,I=(r+1)*(M-1)+T;a.push(P,E,I),a.push(E,L,I)}this.setIndex(a),this.setAttribute("position",new Ge(l,3)),this.setAttribute("normal",new Ge(c,3)),this.setAttribute("uv",new Ge(f,2));function b(M,T,P,E,L){const I=Math.cos(M),R=Math.sin(M),C=P/T*M,D=Math.cos(C);L.x=E*(2+D)*.5*I,L.y=E*(2+D)*R*.5,L.z=E*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new L0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class I0 extends yt{constructor(e=new sx(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new pe;let f=new F;const p=[],d=[],m=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new Ge(p,3)),this.setAttribute("normal",new Ge(d,3)),this.setAttribute("uv",new Ge(m,2));function _(){for(let M=0;M<t;M++)x(M);x(s===!1?t:0),b(),y()}function x(M){f=e.getPointAt(M/t,f);const T=o.normals[M],P=o.binormals[M];for(let E=0;E<=r;E++){const L=E/r*Math.PI*2,I=Math.sin(L),R=-Math.cos(L);l.x=R*T.x+I*P.x,l.y=R*T.y+I*P.y,l.z=R*T.z+I*P.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,p.push(a.x,a.y,a.z)}}function y(){for(let M=1;M<=t;M++)for(let T=1;T<=r;T++){const P=(r+1)*(M-1)+(T-1),E=(r+1)*M+(T-1),L=(r+1)*M+T,I=(r+1)*(M-1)+T;v.push(P,E,I),v.push(E,L,I)}}function b(){for(let M=0;M<=t;M++)for(let T=0;T<=r;T++)c.x=M/t,c.y=T/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new I0(new Np[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Y7 extends yt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,f=l.length;c<f;++c){const p=l[c],d=p.start,m=p.count;for(let v=d,_=d+m;v<_;v+=3)for(let x=0;x<3;x++){const y=a.getX(v+x),b=a.getX(v+(x+1)%3);r.fromBufferAttribute(o,y),s.fromBufferAttribute(o,b),B8(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const f=3*a+c,p=3*a+(c+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,p),B8(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ge(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function B8(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var V8=Object.freeze({__proto__:null,BoxGeometry:ba,CapsuleGeometry:_0,CircleGeometry:S0,ConeGeometry:M0,CylinderGeometry:ic,DodecahedronGeometry:b0,EdgesGeometry:W7,ExtrudeGeometry:T0,IcosahedronGeometry:A0,LatheGeometry:Lh,OctahedronGeometry:Ih,PlaneGeometry:tc,PolyhedronGeometry:fo,RingGeometry:E0,ShapeGeometry:C0,SphereGeometry:Dh,TetrahedronGeometry:P0,TorusGeometry:R0,TorusKnotGeometry:L0,TubeGeometry:I0,WireframeGeometry:Y7});class K7 extends Bn{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ve(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Z7 extends yr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ax extends Bn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ve(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J7 extends ax{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return hn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ve(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ve(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ve(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Q7 extends Bn{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ve(16777215),this.specular=new Ve(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class eT extends Bn{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ve(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class tT extends Bn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class nT extends Bn{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ve(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ve(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fi,this.combine=Ah,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class iT extends Bn{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ve(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=uo,this.normalScale=new pe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class rT extends hi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Zo(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function sT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function oT(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function Qv(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function lx(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function d$(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],f=c.getValueSize(),p=[],d=[];for(let m=0;m<c.times.length;++m){const v=c.times[m]*r;if(!(v<t||v>=i)){p.push(c.times[m]);for(let _=0;_<f;++_)d.push(c.values[m*f+_])}}p.length!==0&&(c.times=Zo(p,c.times.constructor),c.values=Zo(d,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function p$(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let f=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=p/3);let d=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const y=f,b=p-f;_=a.values.slice(y,b)}else if(s>=a.times[v]){const y=v*p+f,b=y+p-f;_=a.values.slice(y,b)}else{const y=a.createInterpolant(),b=f,M=p-f;y.evaluate(s),_=y.resultBuffer.slice(b,M)}l==="quaternion"&&new _i().fromArray(_).normalize().conjugate().toArray(_);const x=c.times.length;for(let y=0;y<x;++y){const b=y*m+d;if(l==="quaternion")_i.multiplyQuaternionsFlat(c.values,b,_,0,c.values,b);else{const M=m-d*2;for(let T=0;T<M;++T)c.values[b+T]-=_[T]}}}return n.blendMode=z2,n}const m$={convertArray:Zo,isTypedArray:sT,getKeyframeOrder:oT,sortedArray:Qv,flattenJSON:lx,subclip:d$,makeClipAdditive:p$};class Nh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class aT extends Nh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:qo,endingEnd:qo}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Yo:s=e,a=2*t-i;break;case ku:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Yo:o=e,l=2*i-t;break;case ku:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,f=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=this._offsetPrev,p=this._offsetNext,d=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),_=v*v,x=_*v,y=-d*x+2*d*_-d*v,b=(1+d)*x+(-1.5-2*d)*_+(-.5+d)*v+1,M=(-1-m)*x+(1.5+m)*_+.5*v,T=m*x-m*_;for(let P=0;P!==a;++P)s[P]=y*o[f+P]+b*o[c+P]+M*o[l+P]+T*o[p+P];return s}}class cx extends Nh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,f=(i-t)/(r-t),p=1-f;for(let d=0;d!==a;++d)s[d]=o[c+d]*p+o[l+d]*f;return s}}class lT extends Nh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Sr{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Zo(t,this.TimeBufferType),this.values=Zo(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Zo(e.times,Array),values:Zo(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new lT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new cx(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new aT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ou:t=this.InterpolantFactoryMethodDiscrete;break;case Lp:t=this.InterpolantFactoryMethodLinear;break;case ap:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ou;case this.InterpolantFactoryMethodLinear:return Lp;case this.InterpolantFactoryMethodSmooth:return ap}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&sT(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===ap,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],f=e[a+1];if(c!==f&&(a!==1||c!==e[0]))if(r)l=!0;else{const p=a*i,d=p-i,m=p+i;for(let v=0;v!==i;++v){const _=t[p+v];if(_!==t[d+v]||_!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*i,d=o*i;for(let m=0;m!==i;++m)t[d+m]=t[p+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Sr.prototype.TimeBufferType=Float32Array;Sr.prototype.ValueBufferType=Float32Array;Sr.prototype.DefaultInterpolation=Lp;class wa extends Sr{constructor(e,t,i){super(e,t,i)}}wa.prototype.ValueTypeName="bool";wa.prototype.ValueBufferType=Array;wa.prototype.DefaultInterpolation=Ou;wa.prototype.InterpolantFactoryMethodLinear=void 0;wa.prototype.InterpolantFactoryMethodSmooth=void 0;class ux extends Sr{}ux.prototype.ValueTypeName="color";class Yu extends Sr{}Yu.prototype.ValueTypeName="number";class cT extends Nh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let f=c+a;c!==f;c+=4)_i.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Uh extends Sr{InterpolantFactoryMethodLinear(e){return new cT(this.times,this.values,this.getValueSize(),e)}}Uh.prototype.ValueTypeName="quaternion";Uh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ta extends Sr{constructor(e,t,i){super(e,t,i)}}Ta.prototype.ValueTypeName="string";Ta.prototype.ValueBufferType=Array;Ta.prototype.DefaultInterpolation=Ou;Ta.prototype.InterpolantFactoryMethodLinear=void 0;Ta.prototype.InterpolantFactoryMethodSmooth=void 0;class Ku extends Sr{}Ku.prototype.ValueTypeName="vector";class Zu{constructor(e="",t=-1,i=[],r=l0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Ni(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(v$(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Sr.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const f=oT(l);l=Qv(l,1,f),c=Qv(c,1,f),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new Yu(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.name.match(s);if(f&&f.length>1){const p=f[1];let d=r[p];d||(r[p]=d=[]),d.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,d,m,v,_){if(m.length!==0){const x=[],y=[];lx(m,x,y,v),x.length!==0&&_.push(new p(d,x,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const d=c[p].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let _=0;_<d[v].morphTargets.length;_++)m[d[v].morphTargets[_]]=-1;for(const _ in m){const x=[],y=[];for(let b=0;b!==d[v].morphTargets.length;++b){const M=d[v];x.push(M.time),y.push(M.morphTarget===_?1:0)}r.push(new Yu(".morphTargetInfluence["+_+"]",x,y))}l=m.length*o}else{const m=".bones["+t[p].name+"]";i(Ku,m+".position",d,"pos",r),i(Uh,m+".quaternion",d,"rot",r),i(Ku,m+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function g$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yu;case"vector":case"vector2":case"vector3":case"vector4":return Ku;case"color":return ux;case"quaternion":return Uh;case"bool":case"boolean":return wa;case"string":return Ta}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function v$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=g$(n.type);if(n.times===void 0){const t=[],i=[];lx(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const us={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class hx{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,p){return c.push(f,p),this},this.removeHandler=function(f){const p=c.indexOf(f);return p!==-1&&c.splice(p,2),this},this.getHandler=function(f){for(let p=0,d=c.length;p<d;p+=2){const m=c[p],v=c[p+1];if(m.global&&(m.lastIndex=0),m.test(f))return v}return null}}}const uT=new hx;class Si{constructor(e){this.manager=e!==void 0?e:uT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Si.DEFAULT_MATERIAL_NAME="__DEFAULT";const os={};class y$ extends Error{constructor(e,t){super(e),this.response=t}}class xs extends Si{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=us.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(os[e]!==void 0){os[e].push({onLoad:t,onProgress:i,onError:r});return}os[e]=[],os[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const f=os[e],p=c.body.getReader(),d=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=d?parseInt(d):0,v=m!==0;let _=0;const x=new ReadableStream({start(y){b();function b(){p.read().then(({done:M,value:T})=>{if(M)y.close();else{_+=T.byteLength;const P=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:m});for(let E=0,L=f.length;E<L;E++){const I=f[E];I.onProgress&&I.onProgress(P)}y.enqueue(T),b()}},M=>{y.error(M)})}}});return new Response(x)}else throw new y$(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return c.json();default:if(a===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),d=p&&p[1]?p[1].toLowerCase():void 0,m=new TextDecoder(d);return c.arrayBuffer().then(v=>m.decode(v))}}}).then(c=>{us.add(e,c);const f=os[e];delete os[e];for(let p=0,d=f.length;p<d;p++){const m=f[p];m.onLoad&&m.onLoad(c)}}).catch(c=>{const f=os[e];if(f===void 0)throw this.manager.itemError(e),c;delete os[e];for(let p=0,d=f.length;p<d;p++){const m=f[p];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class x$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new xs(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Zu.parse(e[i]);t.push(r)}return t}}class _$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new y0,l=new xs(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function f(p){l.load(e[p],function(d){const m=s.parse(d,!0);o[p]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Sn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let p=0,d=e.length;p<d;++p)f(p);else l.load(e,function(p){const d=s.parse(p,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let _=0;_<d.mipmapCount;_++)o[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+_]),o[v].format=d.format,o[v].width=d.width,o[v].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=Sn),a.format=d.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Ju extends Si{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=us.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gu("img");function l(){f(),us.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(p){f(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class S$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=new Ph;s.colorSpace=Ki;const o=new Ju(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(f){s.images[c]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class M$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ps,a=new xs(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:er,o.wrapT=c.wrapT!==void 0?c.wrapT:er,o.magFilter=c.magFilter!==void 0?c.magFilter:Sn,o.minFilter=c.minFilter!==void 0?c.minFilter:Sn,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Dr),c.mipmapCount===1&&(o.minFilter=Sn),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class b$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=new rn,o=new Ju(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}let po=class extends Nt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ve(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};class hT extends po{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ve(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const J1=new nt,z8=new F,H8=new F;class fx{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pe(512,512),this.map=null,this.mapPass=null,this.matrix=new nt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Rh,this._frameExtents=new pe(1,1),this._viewportCount=1,this._viewports=[new Ot(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;z8.setFromMatrixPosition(e.matrixWorld),t.position.copy(z8),H8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(H8),t.updateMatrixWorld(),J1.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(J1),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(J1)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class w$ extends fx{constructor(){super(new kn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=$l*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class fT extends po{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new w$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $8=new nt,Wc=new F,Q1=new F;class T$ extends fx{constructor(){super(new kn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pe(4,2),this._viewportCount=6,this._viewports=[new Ot(2,1,1,1),new Ot(0,1,1,1),new Ot(3,1,1,1),new Ot(1,1,1,1),new Ot(3,0,1,1),new Ot(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Wc.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wc),Q1.copy(i.position),Q1.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Q1),i.updateMatrixWorld(),r.makeTranslation(-Wc.x,-Wc.y,-Wc.z),$8.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix($8)}}class dT extends po{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new T$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class A$ extends fx{constructor(){super(new f0(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pT extends po{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nt.DEFAULT_UP),this.updateMatrix(),this.target=new Nt,this.shadow=new A$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class mT extends po{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class gT extends po{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class vT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class yT extends po{constructor(e=new vT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class D0 extends Si{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=D0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ve().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ve().setHex(o.value);break;case"v2":r.uniforms[s].value=new pe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Ot().fromArray(o.value);break;case"m3":r.uniforms[s].value=new dt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new nt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new pe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new pe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:K7,SpriteMaterial:J2,RawShaderMaterial:Z7,ShaderMaterial:yr,PointsMaterial:ex,MeshPhysicalMaterial:J7,MeshStandardMaterial:ax,MeshPhongMaterial:Q7,MeshToonMaterial:eT,MeshNormalMaterial:tT,MeshLambertMaterial:nT,MeshDepthMaterial:K2,MeshDistanceMaterial:Z2,MeshBasicMaterial:ho,MeshMatcapMaterial:iT,LineDashedMaterial:rT,LineBasicMaterial:hi,Material:Bn};return new t[e]}}class ey{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class xT extends yt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class _T extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new xs(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const x=m.interleavedBuffers[v],y=s(m,x.buffer),b=Ml(x.type,y),M=new g0(b,x.stride);return M.uuid=x.uuid,t[v]=M,M}function s(m,v){if(i[v]!==void 0)return i[v];const x=m.arrayBuffers[v],y=new Uint32Array(x).buffer;return i[v]=y,y}const o=e.isInstancedBufferGeometry?new xT:new yt,a=e.data.index;if(a!==void 0){const m=Ml(a.type,a.array);o.setIndex(new kt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let _;if(v.isInterleavedBufferAttribute){const x=r(e.data,v.data);_=new va(x,v.itemSize,v.offset,v.normalized)}else{const x=Ml(v.type,v.array),y=v.isInstancedBufferAttribute?Wl:kt;_=new y(x,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),o.setAttribute(m,_)}const c=e.data.morphAttributes;if(c)for(const m in c){const v=c[m],_=[];for(let x=0,y=v.length;x<y;x++){const b=v[x];let M;if(b.isInterleavedBufferAttribute){const T=r(e.data,b.data);M=new va(T,b.itemSize,b.offset,b.normalized)}else{const T=Ml(b.type,b.array);M=new kt(T,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),_.push(M)}o.morphAttributes[m]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let m=0,v=p.length;m!==v;++m){const _=p[m];o.addGroup(_.start,_.count,_.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new F;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new Zn(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class E$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?ey.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new xs(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const f=c.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?ey.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new xs(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,f),t!==void 0){let p=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new oa().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new v0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new _T;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in V8?a=V8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new D0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Zu.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(f)}else return l.data?{data:Ml(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new hx(t);s=new Ju(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,f=e.length;c<f;c++){const p=e[c],d=p.url;if(Array.isArray(d)){const m=[];for(let v=0,_=d.length;v<_;v++){const x=d[v],y=a(x);y!==null&&(y instanceof HTMLImageElement?m.push(y):m.push(new ps(y.data,y.width,y.height)))}r[p.uuid]=new Ko(m)}else{const m=a(p.url);r[p.uuid]=new Ko(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Ml(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Ju(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const f=[];for(let p=0,d=c.length;p<d;p++){const m=c[p],v=await s(m);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new ps(v.data,v.width,v.height)))}i[l.uuid]=new Ko(f)}else{const f=await s(l.url);i[l.uuid]=new Ko(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let f;Array.isArray(c)?(f=new Ph,c.length===6&&(f.needsUpdate=!0)):(c&&c.data?f=new ps:f=new rn,c&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,C$)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],G8),f.wrapT=i(a.wrap[1],G8)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,W8)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,W8)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let v=0,_=d.length;v<_;v++){const x=d[v];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function c(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let f,p;switch(e.type){case"Scene":o=new L7,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ve(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new m0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new p0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new kn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new f0(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new mT(e.color,e.intensity);break;case"DirectionalLight":o=new pT(e.color,e.intensity);break;case"PointLight":o=new dT(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new gT(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new fT(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new hT(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new yT().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),p=l(e.material),o=new U7(f,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),p=l(e.material),o=new Mn(f,p);break;case"InstancedMesh":f=a(e.geometry),p=l(e.material);const d=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new F7(f,p,d),o.instanceMatrix=new Wl(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Wl(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":f=a(e.geometry),p=l(e.material),o=new O7(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=f,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(_=>{const x=new ui;x.min.fromArray(_.boxMin),x.max.fromArray(_.boxMax);const y=new Zn;return y.radius=_.sphereRadius,y.center.fromArray(_.sphereCenter),{boxInitialized:_.boxInitialized,box:x,sphereInitialized:_.sphereInitialized,sphere:y}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new N7;break;case"Line":o=new ro(a(e.geometry),l(e.material));break;case"LineLoop":o=new k7(a(e.geometry),l(e.material));break;case"LineSegments":o=new jr(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new B7(a(e.geometry),l(e.material));break;case"Sprite":o=new D7(l(e.material));break;case"Group":o=new wl;break;case"Bone":o=new Q2;break;default:o=new Nt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const v=d[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const v=d[m],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const C$={UVMapping:a0,CubeReflectionMapping:ys,CubeRefractionMapping:io,EquirectangularReflectionMapping:Iu,EquirectangularRefractionMapping:Du,CubeUVReflectionMapping:Ql},G8={RepeatWrapping:Nu,ClampToEdgeWrapping:er,MirroredRepeatWrapping:Uu},W8={NearestFilter:In,NearestMipmapNearestFilter:D2,NearestMipmapLinearFilter:Sl,LinearFilter:Sn,LinearMipmapNearestFilter:hu,LinearMipmapLinearFilter:Dr};class P$ extends Si{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=us.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return us.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),us.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});us.add(e,l),s.manager.itemStart(e)}}let Ud;class dx{static getContext(){return Ud===void 0&&(Ud=new(window.AudioContext||window.webkitAudioContext)),Ud}static setContext(e){Ud=e}}class R$ extends Si{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new xs(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);dx.getContext().decodeAudioData(c,function(p){t(p)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const j8=new nt,X8=new nt,Uo=new nt;class L${constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new kn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new kn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Uo.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(ra*t.fov*.5)/t.zoom;let a,l;X8.elements[12]=-r,j8.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Uo.elements[0]=2*t.near/(l-a),Uo.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Uo),a=-o*t.aspect-s,l=o*t.aspect-s,Uo.elements[0]=2*t.near/(l-a),Uo.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Uo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(X8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(j8)}}class ST{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=q8(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=q8();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function q8(){return(typeof performance>"u"?Date:performance).now()}const Fo=new F,Y8=new _i,I$=new F,Oo=new F;class D$ extends Nt{constructor(){super(),this.type="AudioListener",this.context=dx.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ST}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Fo,Y8,I$),Oo.set(0,0,-1).applyQuaternion(Y8),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Fo.x,r),t.positionY.linearRampToValueAtTime(Fo.y,r),t.positionZ.linearRampToValueAtTime(Fo.z,r),t.forwardX.linearRampToValueAtTime(Oo.x,r),t.forwardY.linearRampToValueAtTime(Oo.y,r),t.forwardZ.linearRampToValueAtTime(Oo.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Fo.x,Fo.y,Fo.z),t.setOrientation(Oo.x,Oo.y,Oo.z,i.x,i.y,i.z)}}class MT extends Nt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const ko=new F,K8=new _i,N$=new F,Bo=new F;class U$ extends MT{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ko,K8,N$),Bo.set(0,0,1).applyQuaternion(K8);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(ko.x,i),t.positionY.linearRampToValueAtTime(ko.y,i),t.positionZ.linearRampToValueAtTime(ko.z,i),t.orientationX.linearRampToValueAtTime(Bo.x,i),t.orientationY.linearRampToValueAtTime(Bo.y,i),t.orientationZ.linearRampToValueAtTime(Bo.z,i)}else t.setPosition(ko.x,ko.y,ko.z),t.setOrientation(Bo.x,Bo.y,Bo.z)}}class F${constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class bT{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){_i.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;_i.multiplyQuaternionsFlat(e,o,e,t,e,i),_i.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const px="\\[\\]\\.:\\/",O$=new RegExp("["+px+"]","g"),mx="[^"+px+"]",k$="[^"+px.replace("\\.","")+"]",B$=/((?:WC+[\/:])*)/.source.replace("WC",mx),V$=/(WCOD+)?/.source.replace("WCOD",k$),z$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mx),H$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mx),$$=new RegExp("^"+B$+V$+z$+H$+"$"),G$=["material","materials","bones","map"];class W${constructor(e,t,i){const r=i||Rt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Rt{constructor(e,t,i){this.path=t,this.parsedPath=i||Rt.parseTrackName(t),this.node=Rt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Rt.Composite(e,t,i):new Rt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(O$,"")}static parseTrackName(e){const t=$$.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);G$.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Rt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===c){c=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Rt.Composite=W$;Rt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Rt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Rt.prototype.GetterByBindingType=[Rt.prototype._getValue_direct,Rt.prototype._getValue_array,Rt.prototype._getValue_arrayElement,Rt.prototype._getValue_toArray];Rt.prototype.SetterByBindingTypeAndVersioning=[[Rt.prototype._setValue_direct,Rt.prototype._setValue_direct_setNeedsUpdate,Rt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_array,Rt.prototype._setValue_array_setNeedsUpdate,Rt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_arrayElement,Rt.prototype._setValue_arrayElement_setNeedsUpdate,Rt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Rt.prototype._setValue_fromArray,Rt.prototype._setValue_fromArray_setNeedsUpdate,Rt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class j${constructor(){this.isAnimationObjectGroup=!0,this.uuid=Ni(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let f=0,p=arguments.length;f!==p;++f){const d=arguments[f],m=d.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(d);for(let _=0,x=o;_!==x;++_)s[_].push(new Rt(d,i[_],r[_]))}else if(v<c){a=e[v];const _=--c,x=e[_];t[x.uuid]=v,e[v]=x,t[m]=_,e[_]=d;for(let y=0,b=o;y!==b;++y){const M=s[y],T=M[_];let P=M[v];M[v]=T,P===void 0&&(P=new Rt(d,i[y],r[y])),M[_]=P}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,f=t[c];if(f!==void 0&&f>=s){const p=s++,d=e[p];t[d.uuid]=f,e[f]=d,t[c]=p,e[p]=l;for(let m=0,v=r;m!==v;++m){const _=i[m],x=_[p],y=_[f];_[f]=x,_[p]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,p=t[f];if(p!==void 0)if(delete t[f],p<s){const d=--s,m=e[d],v=--o,_=e[v];t[m.uuid]=p,e[p]=m,t[_.uuid]=d,e[d]=_,e.pop();for(let x=0,y=r;x!==y;++x){const b=i[x],M=b[d],T=b[v];b[p]=M,b[d]=T,b.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=p),e[p]=m,e.pop();for(let v=0,_=r;v!==_;++v){const x=i[v];x[p]=x[d],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,f=this.nCachedObjects_,p=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(p);for(let d=f,m=l.length;d!==m;++d){const v=l[d];p[d]=new Rt(v,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class wT{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:qo,endingEnd:qo};for(let c=0;c!==o;++c){const f=s[c].createInterpolant(null);a[c]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=n7,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case z2:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(o),c[f].accumulateAdditive(a);break;case l0:default:for(let f=0,p=l.length;f!==p;++f)l[f].evaluate(o),c[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===i7;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===t7){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Yo,r.endingEnd=Yo):(e?r.endingStart=this.zeroSlopeAtStart?Yo:qo:r.endingStart=ku,t?r.endingEnd=this.zeroSlopeAtEnd?Yo:qo:r.endingEnd=ku)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const X$=new Float32Array(1);class q$ extends bs{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let f=c[l];f===void 0&&(f={},c[l]=f);for(let p=0;p!==s;++p){const d=r[p],m=d.name;let v=f[m];if(v!==void 0)++v.referenceCount,o[p]=v;else{if(v=o[p],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const _=t&&t._propertyBindings[p].binding.parsedPath;v=new bT(Rt.create(i,m,_),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[p]=v}a[p].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],f=e._byClipCacheIndex;c._byClipCacheIndex=f,l[f]=c,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete p[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new cx(new Float32Array(2),new Float32Array(2),1,X$),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Zu.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=l0),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const f=new wT(this,o,t,i);return this._bindAction(f,c),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Zu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const f=c._cacheIndex,p=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=f,t[f]=p,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class gx{constructor(e){this.value=e}clone(){return new gx(this.value.clone===void 0?this.value:this.value.clone())}}let Y$=0;class K$ extends bs{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Y$++}),this.name="",this.usage=Hu,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Z$ extends g0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class J${constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const Z8=new nt;class Q${constructor(e,t,i=0,r=1/0){this.ray=new ec(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new sa,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return Z8.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(Z8),this}intersectObject(e,t=!0,i=[]){return ty(e,this,i,t),i.sort(J8),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)ty(e[r],this,i,t);return i.sort(J8),i}}function J8(n,e){return n.distance-e.distance}function ty(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)ty(s[o],e,t,!0)}}class eG{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(hn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class tG{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const Q8=new pe;class nG{constructor(e=new pe(1/0,1/0),t=new pe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Q8.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Q8).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const e9=new F,Fd=new F;class iG{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){e9.subVectors(e,this.start),Fd.subVectors(this.end,this.start);const i=Fd.dot(Fd);let s=Fd.dot(e9)/i;return t&&(s=hn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const t9=new F;class rG extends Nt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new yt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new Ge(r,3));const s=new hi({fog:!1,toneMapped:!1});this.cone=new jr(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),t9.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t9),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const $s=new F,Od=new nt,eg=new nt;class sG extends jr{constructor(e){const t=TT(e),i=new yt,r=[],s=[],o=new Ve(0,0,1),a=new Ve(0,1,0);for(let c=0;c<t.length;c++){const f=t[c];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ge(r,3)),i.setAttribute("color",new Ge(s,3));const l=new hi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");eg.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Od.multiplyMatrices(eg,a.matrixWorld),$s.setFromMatrixPosition(Od),r.setXYZ(o,$s.x,$s.y,$s.z),Od.multiplyMatrices(eg,a.parent.matrixWorld),$s.setFromMatrixPosition(Od),r.setXYZ(o+1,$s.x,$s.y,$s.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function TT(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,TT(n.children[t]));return e}class oG extends Mn{constructor(e,t,i){const r=new Dh(t,4,2),s=new ho({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const aG=new F,n9=new Ve,i9=new Ve;class lG extends Nt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Ih(t);r.rotateY(Math.PI*.5),this.material=new ho({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new kt(o,3)),this.add(new Mn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");n9.copy(this.light.color),i9.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?n9:i9;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(aG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class cG extends jr{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ve(i),r=new Ve(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let d=0,m=0,v=-a;d<=t;d++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=d===s?i:r;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const f=new yt;f.setAttribute("position",new Ge(l,3)),f.setAttribute("color",new Ge(c,3));const p=new hi({vertexColors:!0,toneMapped:!1});super(f,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class uG extends jr{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ve(s),o=new Ve(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const d=p/t*(Math.PI*2),m=Math.sin(d)*e,v=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,v);const _=p&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let p=0;p<i;p++){const d=p&1?s:o,m=e-e/i*p;for(let v=0;v<r;v++){let _=v/r*(Math.PI*2),x=Math.sin(_)*m,y=Math.cos(_)*m;a.push(x,0,y),l.push(d.r,d.g,d.b),_=(v+1)/r*(Math.PI*2),x=Math.sin(_)*m,y=Math.cos(_)*m,a.push(x,0,y),l.push(d.r,d.g,d.b)}}const c=new yt;c.setAttribute("position",new Ge(a,3)),c.setAttribute("color",new Ge(l,3));const f=new hi({vertexColors:!0,toneMapped:!1});super(c,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const r9=new F,kd=new F,s9=new F;class hG extends Nt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new yt;r.setAttribute("position",new Ge([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new hi({fog:!1,toneMapped:!1});this.lightPlane=new ro(r,s),this.add(this.lightPlane),r=new yt,r.setAttribute("position",new Ge([0,0,0,0,0,1],3)),this.targetLine=new ro(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),r9.setFromMatrixPosition(this.light.matrixWorld),kd.setFromMatrixPosition(this.light.target.matrixWorld),s9.subVectors(kd,r9),this.lightPlane.lookAt(kd),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(kd),this.targetLine.scale.z=s9.length()}}const Bd=new F,an=new h0;class fG extends jr{constructor(e){const t=new yt,i=new hi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new Ge(r,3)),t.setAttribute("color",new Ge(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new Ve(16755200),f=new Ve(16711680),p=new Ve(43775),d=new Ve(16777215),m=new Ve(3355443);this.setColors(c,f,p,d,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;an.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),pn("c",t,e,an,0,0,-1),pn("t",t,e,an,0,0,1),pn("n1",t,e,an,-i,-r,-1),pn("n2",t,e,an,i,-r,-1),pn("n3",t,e,an,-i,r,-1),pn("n4",t,e,an,i,r,-1),pn("f1",t,e,an,-i,-r,1),pn("f2",t,e,an,i,-r,1),pn("f3",t,e,an,-i,r,1),pn("f4",t,e,an,i,r,1),pn("u1",t,e,an,i*.7,r*1.1,-1),pn("u2",t,e,an,-i*.7,r*1.1,-1),pn("u3",t,e,an,0,r*2,-1),pn("cf1",t,e,an,-i,0,1),pn("cf2",t,e,an,i,0,1),pn("cf3",t,e,an,0,-r,1),pn("cf4",t,e,an,0,r,1),pn("cn1",t,e,an,-i,0,-1),pn("cn2",t,e,an,i,0,-1),pn("cn3",t,e,an,0,-r,-1),pn("cn4",t,e,an,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function pn(n,e,t,i,r,s,o){Bd.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,f=a.length;c<f;c++)l.setXYZ(a[c],Bd.x,Bd.y,Bd.z)}}const Vd=new ui;class dG extends jr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new yt;s.setIndex(new kt(i,1)),s.setAttribute("position",new kt(r,3)),super(s,new hi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Vd.setFromObject(this.object),Vd.isEmpty())return;const t=Vd.min,i=Vd.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pG extends jr{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new yt;s.setIndex(new kt(i,1)),s.setAttribute("position",new Ge(r,3)),super(s,new hi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mG extends ro{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new yt;o.setAttribute("position",new Ge(s,3)),o.computeBoundingSphere(),super(o,new hi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new yt;l.setAttribute("position",new Ge(a,3)),l.computeBoundingSphere(),this.add(new Mn(l,new ho({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const o9=new F;let zd,tg;class gG extends Nt{constructor(e=new F(0,0,1),t=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",zd===void 0&&(zd=new yt,zd.setAttribute("position",new Ge([0,0,0,0,1,0],3)),tg=new ic(0,.5,1,5,1),tg.translate(0,-.5,0)),this.position.copy(t),this.line=new ro(zd,new hi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mn(tg,new ho({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{o9.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(o9,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class vG extends jr{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new yt;r.setAttribute("position",new Ge(t,3)),r.setAttribute("color",new Ge(i,3));const s=new hi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ve,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yG{constructor(){this.type="ShapePath",this.color=new Ve,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const b=[];for(let M=0,T=y.length;M<T;M++){const P=y[M],E=new oa;E.curves=P.curves,b.push(E)}return b}function i(y,b){const M=b.length;let T=!1;for(let P=M-1,E=0;E<M;P=E++){let L=b[P],I=b[E],R=I.x-L.x,C=I.y-L.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(L=b[E],R=-R,I=b[P],C=-C),y.y<L.y||y.y>I.y)continue;if(y.y===L.y){if(y.x===L.x)return!0}else{const D=C*(y.x-L.x)-R*(y.y-L.y);if(D===0)return!0;if(D<0)continue;T=!T}}else{if(y.y!==L.y)continue;if(I.x<=y.x&&y.x<=L.x||L.x<=y.x&&y.x<=I.x)return!0}}return T}const r=Br.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new oa,l.curves=a.curves,c.push(l),c;let f=!r(s[0].getPoints());f=e?!f:f;const p=[],d=[];let m=[],v=0,_;d[v]=void 0,m[v]=[];for(let y=0,b=s.length;y<b;y++)a=s[y],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!f&&d[v]&&v++,d[v]={s:new oa,p:_},d[v].s.curves=a.curves,f&&v++,m[v]=[]):m[v].push({h:a,p:_[0]});if(!d[0])return t(s);if(d.length>1){let y=!1,b=0;for(let M=0,T=d.length;M<T;M++)p[M]=[];for(let M=0,T=d.length;M<T;M++){const P=m[M];for(let E=0;E<P.length;E++){const L=P[E];let I=!0;for(let R=0;R<d.length;R++)i(L.p,d[R].p)&&(M!==R&&b++,I?(I=!1,p[R].push(L)):y=!0);I&&p[M].push(L)}}b>0&&y===!1&&(m=p)}let x;for(let y=0,b=d.length;y<b;y++){l=d[y].s,c.push(l),x=m[y];for(let M=0,T=x.length;M<T;M++)l.holes.push(x[M].h)}return c}}class xG extends vr{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:o0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=o0);const _G=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:zw,AddEquation:Ks,AddOperation:Ow,AdditiveAnimationBlendMode:z2,AdditiveBlending:gv,AgXToneMapping:$w,AlphaFormat:Yw,AlwaysCompare:d7,AlwaysDepth:Rw,AlwaysStencilFunc:jv,AmbientLight:mT,AnimationAction:wT,AnimationClip:Zu,AnimationLoader:x$,AnimationMixer:q$,AnimationObjectGroup:j$,AnimationUtils:m$,ArcCurve:V7,ArrayCamera:R7,ArrowHelper:gG,AttachedBindMode:xv,Audio:MT,AudioAnalyser:F$,AudioContext:dx,AudioListener:D$,AudioLoader:R$,AxesHelper:vG,BackSide:ci,BasicDepthPacking:r7,BasicShadowMap:MF,BatchedMesh:O7,Bone:Q2,BooleanKeyframeTrack:wa,Box2:nG,Box3:ui,Box3Helper:pG,BoxGeometry:ba,BoxHelper:dG,BufferAttribute:kt,BufferGeometry:yt,BufferGeometryLoader:_T,ByteType:jw,Cache:us,Camera:h0,CameraHelper:fG,CanvasTexture:BH,CapsuleGeometry:_0,CatmullRomCurve3:z7,CineonToneMapping:Vw,CircleGeometry:S0,ClampToEdgeWrapping:er,Clock:ST,Color:Ve,ColorKeyframeTrack:ux,ColorManagement:Ft,CompressedArrayTexture:OH,CompressedCubeTexture:kH,CompressedTexture:y0,CompressedTextureLoader:_$,ConeGeometry:M0,ConstantAlphaFactor:Ew,ConstantColorFactor:Tw,CubeCamera:S7,CubeReflectionMapping:ys,CubeRefractionMapping:io,CubeTexture:Ph,CubeTextureLoader:S$,CubeUVReflectionMapping:Ql,CubicBezierCurve:nx,CubicBezierCurve3:H7,CubicInterpolant:aT,CullFaceBack:mv,CullFaceFront:cw,CullFaceFrontBack:SF,CullFaceNone:lw,Curve:_r,CurvePath:G7,CustomBlending:hw,CustomToneMapping:Hw,CylinderGeometry:ic,Cylindrical:tG,Data3DTexture:W2,DataArrayTexture:u0,DataTexture:ps,DataTextureLoader:M$,DataUtils:IO,DecrementStencilOp:DF,DecrementWrapStencilOp:UF,DefaultLoadingManager:uT,DepthFormat:ia,DepthStencilFormat:ga,DepthTexture:Y2,DetachedBindMode:Ww,DirectionalLight:pT,DirectionalLightHelper:hG,DiscreteInterpolant:lT,DisplayP3ColorSpace:c0,DodecahedronGeometry:b0,DoubleSide:Ir,DstAlphaFactor:_w,DstColorFactor:Mw,DynamicCopyUsage:KF,DynamicDrawUsage:GF,DynamicReadUsage:XF,EdgesGeometry:W7,EllipseCurve:x0,EqualCompare:c7,EqualDepth:Iw,EqualStencilFunc:BF,EquirectangularReflectionMapping:Iu,EquirectangularRefractionMapping:Du,Euler:Fi,EventDispatcher:bs,ExtrudeGeometry:T0,FileLoader:xs,Float16BufferAttribute:kO,Float32BufferAttribute:Ge,FloatType:Ii,Fog:m0,FogExp2:p0,FramebufferTexture:FH,FrontSide:vs,Frustum:Rh,GLBufferAttribute:J$,GLSL1:JF,GLSL3:Xv,GreaterCompare:u7,GreaterDepth:Nw,GreaterEqualCompare:f7,GreaterEqualDepth:Dw,GreaterEqualStencilFunc:$F,GreaterStencilFunc:zF,GridHelper:cG,Group:wl,HalfFloatType:Eh,HemisphereLight:hT,HemisphereLightHelper:lG,IcosahedronGeometry:A0,ImageBitmapLoader:P$,ImageLoader:Ju,ImageUtils:g7,IncrementStencilOp:IF,IncrementWrapStencilOp:NF,InstancedBufferAttribute:Wl,InstancedBufferGeometry:xT,InstancedInterleavedBuffer:Z$,InstancedMesh:F7,Int16BufferAttribute:FO,Int32BufferAttribute:OO,Int8BufferAttribute:DO,IntType:N2,InterleavedBuffer:g0,InterleavedBufferAttribute:va,Interpolant:Nh,InterpolateDiscrete:Ou,InterpolateLinear:Lp,InterpolateSmooth:ap,InvertStencilOp:FF,KeepStencilOp:$o,KeyframeTrack:Sr,LOD:N7,LatheGeometry:Lh,Layers:sa,LessCompare:l7,LessDepth:Lw,LessEqualCompare:H2,LessEqualDepth:Lu,LessEqualStencilFunc:VF,LessStencilFunc:kF,Light:po,LightProbe:yT,Line:ro,Line3:iG,LineBasicMaterial:hi,LineCurve:ix,LineCurve3:$7,LineDashedMaterial:rT,LineLoop:k7,LineSegments:jr,LinearDisplayP3ColorSpace:Ch,LinearFilter:Sn,LinearInterpolant:cx,LinearMipMapLinearFilter:AF,LinearMipMapNearestFilter:TF,LinearMipmapLinearFilter:Dr,LinearMipmapNearestFilter:hu,LinearSRGBColorSpace:Ms,LinearToneMapping:kw,LinearTransfer:Bu,Loader:Si,LoaderUtils:ey,LoadingManager:hx,LoopOnce:t7,LoopPingPong:i7,LoopRepeat:n7,LuminanceAlphaFormat:Jw,LuminanceFormat:Zw,MOUSE:xF,Material:Bn,MaterialLoader:D0,MathUtils:mO,Matrix3:dt,Matrix4:nt,MaxEquation:mw,Mesh:Mn,MeshBasicMaterial:ho,MeshDepthMaterial:K2,MeshDistanceMaterial:Z2,MeshLambertMaterial:nT,MeshMatcapMaterial:iT,MeshNormalMaterial:tT,MeshPhongMaterial:Q7,MeshPhysicalMaterial:J7,MeshStandardMaterial:ax,MeshToonMaterial:eT,MinEquation:pw,MirroredRepeatWrapping:Uu,MixOperation:Fw,MultiplyBlending:yv,MultiplyOperation:Ah,NearestFilter:In,NearestMipMapLinearFilter:wF,NearestMipMapNearestFilter:bF,NearestMipmapLinearFilter:Sl,NearestMipmapNearestFilter:D2,NeutralToneMapping:Gw,NeverCompare:a7,NeverDepth:Pw,NeverStencilFunc:OF,NoBlending:fs,NoColorSpace:ls,NoToneMapping:ds,NormalAnimationBlendMode:l0,NormalBlending:na,NotEqualCompare:h7,NotEqualDepth:Uw,NotEqualStencilFunc:HF,NumberKeyframeTrack:Yu,Object3D:Nt,ObjectLoader:E$,ObjectSpaceNormalMap:o7,OctahedronGeometry:Ih,OneFactor:vw,OneMinusConstantAlphaFactor:Cw,OneMinusConstantColorFactor:Aw,OneMinusDstAlphaFactor:Sw,OneMinusDstColorFactor:bw,OneMinusSrcAlphaFactor:Rp,OneMinusSrcColorFactor:xw,OrthographicCamera:f0,P3Primaries:zu,PCFShadowMap:I2,PCFSoftShadowMap:uw,PMREMGenerator:qv,Path:Wu,PerspectiveCamera:kn,Plane:Ys,PlaneGeometry:tc,PlaneHelper:mG,PointLight:dT,PointLightHelper:oG,Points:B7,PointsMaterial:ex,PolarGridHelper:uG,PolyhedronGeometry:fo,PositionalAudio:U$,PropertyBinding:Rt,PropertyMixer:bT,QuadraticBezierCurve:rx,QuadraticBezierCurve3:sx,Quaternion:_i,QuaternionKeyframeTrack:Uh,QuaternionLinearInterpolant:cT,RED_GREEN_RGTC2_Format:Gv,RED_RGTC1_Format:e7,REVISION:o0,RGBADepthPacking:s7,RGBAFormat:ai,RGBAIntegerFormat:V2,RGBA_ASTC_10x10_Format:kv,RGBA_ASTC_10x5_Format:Uv,RGBA_ASTC_10x6_Format:Fv,RGBA_ASTC_10x8_Format:Ov,RGBA_ASTC_12x10_Format:Bv,RGBA_ASTC_12x12_Format:Vv,RGBA_ASTC_4x4_Format:Ev,RGBA_ASTC_5x4_Format:Cv,RGBA_ASTC_5x5_Format:Pv,RGBA_ASTC_6x5_Format:Rv,RGBA_ASTC_6x6_Format:Lv,RGBA_ASTC_8x5_Format:Iv,RGBA_ASTC_8x6_Format:Dv,RGBA_ASTC_8x8_Format:Nv,RGBA_BPTC_Format:op,RGBA_ETC2_EAC_Format:Av,RGBA_PVRTC_2BPPV1_Format:bv,RGBA_PVRTC_4BPPV1_Format:Mv,RGBA_S3TC_DXT1_Format:ip,RGBA_S3TC_DXT3_Format:rp,RGBA_S3TC_DXT5_Format:sp,RGBFormat:Kw,RGB_BPTC_SIGNED_Format:zv,RGB_BPTC_UNSIGNED_Format:Hv,RGB_ETC1_Format:wv,RGB_ETC2_Format:Tv,RGB_PVRTC_2BPPV1_Format:Sv,RGB_PVRTC_4BPPV1_Format:_v,RGB_S3TC_DXT1_Format:np,RGFormat:Qw,RGIntegerFormat:B2,RawShaderMaterial:Z7,Ray:ec,Raycaster:Q$,Rec709Primaries:Vu,RectAreaLight:gT,RedFormat:O2,RedIntegerFormat:k2,ReinhardToneMapping:Bw,RenderTarget:v7,RepeatWrapping:Nu,ReplaceStencilOp:LF,ReverseSubtractEquation:dw,RingGeometry:E0,SIGNED_RED_GREEN_RGTC2_Format:Wv,SIGNED_RED_RGTC1_Format:$v,SRGBColorSpace:Ki,SRGBTransfer:Ht,Scene:L7,ShaderChunk:vt,ShaderLib:pr,ShaderMaterial:yr,ShadowMaterial:K7,Shape:oa,ShapeGeometry:C0,ShapePath:yG,ShapeUtils:Br,ShortType:Xw,Skeleton:v0,SkeletonHelper:sG,SkinnedMesh:U7,Source:Ko,Sphere:Zn,SphereGeometry:Dh,Spherical:eG,SphericalHarmonics3:vT,SplineCurve:ox,SpotLight:fT,SpotLightHelper:rG,Sprite:D7,SpriteMaterial:J2,SrcAlphaFactor:Pp,SrcAlphaSaturateFactor:ww,SrcColorFactor:yw,StaticCopyUsage:YF,StaticDrawUsage:Hu,StaticReadUsage:jF,StereoCamera:L$,StreamCopyUsage:ZF,StreamDrawUsage:WF,StreamReadUsage:qF,StringKeyframeTrack:Ta,SubtractEquation:fw,SubtractiveBlending:vv,TOUCH:_F,TangentSpaceNormalMap:uo,TetrahedronGeometry:P0,Texture:rn,TextureLoader:b$,TorusGeometry:R0,TorusKnotGeometry:L0,Triangle:Li,TriangleFanDrawMode:PF,TriangleStripDrawMode:CF,TrianglesDrawMode:EF,TubeGeometry:I0,UVMapping:a0,Uint16BufferAttribute:j2,Uint32BufferAttribute:X2,Uint8BufferAttribute:NO,Uint8ClampedBufferAttribute:UO,Uniform:gx,UniformsGroup:K$,UniformsLib:Ie,UniformsUtils:_7,UnsignedByteType:Wr,UnsignedInt248Type:ma,UnsignedInt5999Type:qw,UnsignedIntType:pa,UnsignedShort4444Type:U2,UnsignedShort5551Type:F2,UnsignedShortType:Fu,VSMShadowMap:Lr,Vector2:pe,Vector3:F,Vector4:Ot,VectorKeyframeTrack:Ku,VideoTexture:UH,WebGL3DRenderTarget:MO,WebGLArrayRenderTarget:SO,WebGLCoordinateSystem:Nr,WebGLCubeRenderTarget:M7,WebGLMultipleRenderTargets:xG,WebGLRenderTarget:vr,WebGLRenderer:wH,WebGLUtils:P7,WebGPUCoordinateSystem:$u,WireframeGeometry:Y7,WrapAroundEnding:ku,ZeroCurvatureEnding:qo,ZeroFactor:gw,ZeroSlopeEnding:Yo,ZeroStencilOp:RF,createCanvasElement:m7},Symbol.toStringTag,{value:"Module"}));var AT={exports:{}},Aa={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Aa.ConcurrentRoot=1;Aa.ContinuousEventPriority=4;Aa.DefaultEventPriority=16;Aa.DiscreteEventPriority=1;Aa.IdleEventPriority=536870912;Aa.LegacyRoot=0;AT.exports=Aa;var iu=AT.exports,ET={exports:{}},CT={exports:{}},PT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,Q){var oe=k.length;k.push(Q);e:for(;0<oe;){var he=oe-1>>>1,Pe=k[he];if(0<r(Pe,Q))k[he]=Q,k[oe]=Pe,oe=he;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var Q=k[0],oe=k.pop();if(oe!==Q){k[0]=oe;e:for(var he=0,Pe=k.length,st=Pe>>>1;he<st;){var ae=2*(he+1)-1,ge=k[ae],Ee=ae+1,xe=k[Ee];if(0>r(ge,oe))Ee<Pe&&0>r(xe,ge)?(k[he]=xe,k[Ee]=oe,he=Ee):(k[he]=ge,k[ae]=oe,he=ae);else if(Ee<Pe&&0>r(xe,oe))k[he]=xe,k[Ee]=oe,he=Ee;else break e}}return Q}function r(k,Q){var oe=k.sortIndex-Q.sortIndex;return oe!==0?oe:k.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],f=1,p=null,d=3,m=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(k){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=k)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function T(k){if(_=!1,M(k),!v)if(t(l)!==null)v=!0,$(P);else{var Q=t(c);Q!==null&&q(T,Q.startTime-k)}}function P(k,Q){v=!1,_&&(_=!1,y(I),I=-1),m=!0;var oe=d;try{for(M(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||k&&!D());){var he=p.callback;if(typeof he=="function"){p.callback=null,d=p.priorityLevel;var Pe=he(p.expirationTime<=Q);Q=n.unstable_now(),typeof Pe=="function"?p.callback=Pe:p===t(l)&&i(l),M(Q)}else i(l);p=t(l)}if(p!==null)var st=!0;else{var ae=t(c);ae!==null&&q(T,ae.startTime-Q),st=!1}return st}finally{p=null,d=oe,m=!1}}var E=!1,L=null,I=-1,R=5,C=-1;function D(){return!(n.unstable_now()-C<R)}function B(){if(L!==null){var k=n.unstable_now();C=k;var Q=!0;try{Q=L(!0,k)}finally{Q?G():(E=!1,L=null)}}else E=!1}var G;if(typeof b=="function")G=function(){b(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Z=z.port2;z.port1.onmessage=B,G=function(){Z.postMessage(null)}}else G=function(){x(B,0)};function $(k){L=k,E||(E=!0,G())}function q(k,Q){I=x(function(){k(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,$(P))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(k){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var oe=d;d=Q;try{return k()}finally{d=oe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,Q){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var oe=d;d=k;try{return Q()}finally{d=oe}},n.unstable_scheduleCallback=function(k,Q,oe){var he=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?he+oe:he):oe=he,k){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=oe+Pe,k={id:f++,callback:Q,priorityLevel:k,startTime:oe,expirationTime:Pe,sortIndex:-1},oe>he?(k.sortIndex=oe,e(c,k),t(l)===null&&k===t(c)&&(_?(y(I),I=-1):_=!0,q(T,oe-he))):(k.sortIndex=Pe,e(l,k),v||m||(v=!0,$(P))),k},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(k){var Q=d;return function(){var oe=d;d=Q;try{return k.apply(this,arguments)}finally{d=oe}}}})(PT);CT.exports=PT;var ny=CT.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SG=function(e){var t={},i=H,r=ny,s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,g=1;g<arguments.length;g++)h+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),P=Symbol.iterator;function E(u){return u===null||typeof u!="object"?null:(u=P&&u[P]||u["@@iterator"],typeof u=="function"?u:null)}function L(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case f:return"Fragment";case c:return"Portal";case d:return"Profiler";case p:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case _:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case b:return h=u.displayName||null,h!==null?h:L(u.type)||"Memo";case M:h=u._payload,u=u._init;try{return L(u(h))}catch{}}return null}function I(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L(h);case 8:return h===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function R(u){var h=u,g=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(g=h.return),u=h.return;while(u)}return h.tag===3?g:null}function C(u){if(R(u)!==u)throw Error(o(188))}function D(u){var h=u.alternate;if(!h){if(h=R(u),h===null)throw Error(o(188));return h!==u?null:u}for(var g=u,S=h;;){var w=g.return;if(w===null)break;var A=w.alternate;if(A===null){if(S=w.return,S!==null){g=S;continue}break}if(w.child===A.child){for(A=w.child;A;){if(A===g)return C(w),u;if(A===S)return C(w),h;A=A.sibling}throw Error(o(188))}if(g.return!==S.return)g=w,S=A;else{for(var O=!1,X=w.child;X;){if(X===g){O=!0,g=w,S=A;break}if(X===S){O=!0,S=w,g=A;break}X=X.sibling}if(!O){for(X=A.child;X;){if(X===g){O=!0,g=A,S=w;break}if(X===S){O=!0,S=A,g=w;break}X=X.sibling}if(!O)throw Error(o(189))}}if(g.alternate!==S)throw Error(o(190))}if(g.tag!==3)throw Error(o(188));return g.stateNode.current===g?u:h}function B(u){return u=D(u),u!==null?G(u):null}function G(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=G(u);if(h!==null)return h;u=u.sibling}return null}function z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=z(u);if(h!==null)return h}u=u.sibling}return null}var Z=Array.isArray,$=e.getPublicInstance,q=e.getRootHostContext,k=e.getChildHostContext,Q=e.prepareForCommit,oe=e.resetAfterCommit,he=e.createInstance,Pe=e.appendInitialChild,st=e.finalizeInitialChildren,ae=e.prepareUpdate,ge=e.shouldSetTextContent,Ee=e.createTextInstance,xe=e.scheduleTimeout,et=e.cancelTimeout,Je=e.noTimeout,it=e.isPrimaryRenderer,W=e.supportsMutation,fe=e.supportsPersistence,ue=e.supportsHydration,Me=e.getInstanceFromNode,_e=e.preparePortalMount,Se=e.getCurrentEventPriority,Oe=e.detachDeletedInstance,Ne=e.supportsMicrotasks,lt=e.scheduleMicrotask,V=e.supportsTestSelectors,N=e.findFiberRoot,re=e.getBoundingRect,ve=e.getTextContent,de=e.isHiddenSubtree,ye=e.matchAccessibilityRole,qe=e.setFocusIfFocusable,Re=e.setupIntersectionObserver,Le=e.appendChild,ct=e.appendChildToContainer,be=e.commitTextUpdate,$e=e.commitMount,St=e.commitUpdate,ot=e.insertBefore,Ue=e.insertInContainerBefore,mt=e.removeChild,bt=e.removeChildFromContainer,jt=e.resetTextContent,j=e.hideInstance,ke=e.hideTextInstance,ce=e.unhideInstance,me=e.unhideTextInstance,Ae=e.clearContainer,at=e.cloneInstance,At=e.createContainerChildSet,Xt=e.appendChildToContainerChildSet,gn=e.finalizeContainerChildren,Ut=e.replaceContainerChildren,Mi=e.cloneHiddenInstance,bi=e.cloneHiddenTextInstance,Xr=e.canHydrateInstance,lc=e.canHydrateTextInstance,Gh=e.canHydrateSuspenseInstance,cc=e.isSuspenseInstancePending,ws=e.isSuspenseInstanceFallback,Wh=e.registerSuspenseInstanceRetry,Mr=e.getNextHydratableSibling,jh=e.getFirstHydratableChild,Xh=e.getFirstHydratableChildWithinContainer,j0=e.getFirstHydratableChildWithinSuspenseInstance,X0=e.hydrateInstance,q0=e.hydrateTextInstance,U=e.hydrateSuspenseInstance,Y=e.getNextHydratableInstanceAfterSuspenseInstance,ne=e.commitHydratedContainer,ie=e.commitHydratedSuspenseInstance,J=e.clearSuspenseBoundary,Te=e.clearSuspenseBoundaryFromContainer,Be=e.shouldDeleteUnhydratedTailInstances,He=e.didNotMatchHydratedContainerTextInstance,We=e.didNotMatchHydratedTextInstance,Qe;function Ke(u){if(Qe===void 0)try{throw Error()}catch(g){var h=g.stack.trim().match(/\n( *(at )?)/);Qe=h&&h[1]||""}return`
`+Qe+u}var Ye=!1;function Et(u,h){if(!u||Ye)return"";Ye=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(we){var S=we}Reflect.construct(u,[],h)}else{try{h.call()}catch(we){S=we}u.call(h.prototype)}else{try{throw Error()}catch(we){S=we}u()}}catch(we){if(we&&S&&typeof we.stack=="string"){for(var w=we.stack.split(`
`),A=S.stack.split(`
`),O=w.length-1,X=A.length-1;1<=O&&0<=X&&w[O]!==A[X];)X--;for(;1<=O&&0<=X;O--,X--)if(w[O]!==A[X]){if(O!==1||X!==1)do if(O--,X--,0>X||w[O]!==A[X]){var le=`
`+w[O].replace(" at new "," at ");return u.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",u.displayName)),le}while(1<=O&&0<=X);break}}}finally{Ye=!1,Error.prepareStackTrace=g}return(u=u?u.displayName||u.name:"")?Ke(u):""}var qt=Object.prototype.hasOwnProperty,Vt=[],vn=-1;function Mt(u){return{current:u}}function Ce(u){0>vn||(u.current=Vt[vn],Vt[vn]=null,vn--)}function ft(u,h){vn++,Vt[vn]=u.current,u.current=h}var wt={},zt=Mt(wt),bn=Mt(!1),Jn=wt;function br(u,h){var g=u.type.contextTypes;if(!g)return wt;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var w={},A;for(A in g)w[A]=h[A];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=w),w}function Pt(u){return u=u.childContextTypes,u!=null}function wi(){Ce(bn),Ce(zt)}function Pa(u,h,g){if(zt.current!==wt)throw Error(o(168));ft(zt,h),ft(bn,g)}function Qn(u,h,g){var S=u.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return g;S=S.getChildContext();for(var w in S)if(!(w in h))throw Error(o(108,I(u)||"Unknown",w));return s({},g,S)}function Ts(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||wt,Jn=zt.current,ft(zt,u),ft(bn,bn.current),!0}function qh(u,h,g){var S=u.stateNode;if(!S)throw Error(o(169));g?(u=Qn(u,h,Jn),S.__reactInternalMemoizedMergedChildContext=u,Ce(bn),Ce(zt),ft(zt,u)):Ce(bn),ft(bn,g)}var fi=Math.clz32?Math.clz32:SC,xC=Math.log,_C=Math.LN2;function SC(u){return u>>>=0,u===0?32:31-(xC(u)/_C|0)|0}var Yh=64,Kh=4194304;function uc(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Zh(u,h){var g=u.pendingLanes;if(g===0)return 0;var S=0,w=u.suspendedLanes,A=u.pingedLanes,O=g&268435455;if(O!==0){var X=O&~w;X!==0?S=uc(X):(A&=O,A!==0&&(S=uc(A)))}else O=g&~w,O!==0?S=uc(O):A!==0&&(S=uc(A));if(S===0)return 0;if(h!==0&&h!==S&&!(h&w)&&(w=S&-S,A=h&-h,w>=A||w===16&&(A&4194240)!==0))return h;if(S&4&&(S|=g&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=S;0<h;)g=31-fi(h),w=1<<g,S|=u[g],h&=~w;return S}function MC(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bC(u,h){for(var g=u.suspendedLanes,S=u.pingedLanes,w=u.expirationTimes,A=u.pendingLanes;0<A;){var O=31-fi(A),X=1<<O,le=w[O];le===-1?(!(X&g)||X&S)&&(w[O]=MC(X,h)):le<=h&&(u.expiredLanes|=X),A&=~X}}function Y0(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function K0(u){for(var h=[],g=0;31>g;g++)h.push(u);return h}function hc(u,h,g){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-fi(h),u[h]=g}function wC(u,h){var g=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<g;){var w=31-fi(g),A=1<<w;h[w]=0,S[w]=-1,u[w]=-1,g&=~A}}function Z0(u,h){var g=u.entangledLanes|=h;for(u=u.entanglements;g;){var S=31-fi(g),w=1<<S;w&h|u[S]&h&&(u[S]|=h),g&=~w}}var Lt=0;function y3(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var J0=r.unstable_scheduleCallback,x3=r.unstable_cancelCallback,TC=r.unstable_shouldYield,AC=r.unstable_requestPaint,En=r.unstable_now,Q0=r.unstable_ImmediatePriority,EC=r.unstable_UserBlockingPriority,em=r.unstable_NormalPriority,CC=r.unstable_IdlePriority,Jh=null,wr=null;function PC(u){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(Jh,u,void 0,(u.current.flags&128)===128)}catch{}}function RC(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var Tr=typeof Object.is=="function"?Object.is:RC,qr=null,Qh=!1,tm=!1;function _3(u){qr===null?qr=[u]:qr.push(u)}function LC(u){Qh=!0,_3(u)}function Ar(){if(!tm&&qr!==null){tm=!0;var u=0,h=Lt;try{var g=qr;for(Lt=1;u<g.length;u++){var S=g[u];do S=S(!0);while(S!==null)}qr=null,Qh=!1}catch(w){throw qr!==null&&(qr=qr.slice(u+1)),J0(Q0,Ar),w}finally{Lt=h,tm=!1}}return null}var IC=a.ReactCurrentBatchConfig;function ef(u,h){if(Tr(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var g=Object.keys(u),S=Object.keys(h);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var w=g[S];if(!qt.call(h,w)||!Tr(u[w],h[w]))return!1}return!0}function DC(u){switch(u.tag){case 5:return Ke(u.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return u=Et(u.type,!1),u;case 11:return u=Et(u.type.render,!1),u;case 1:return u=Et(u.type,!0),u;default:return""}}function ir(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var g in u)h[g]===void 0&&(h[g]=u[g]);return h}return h}var tf=Mt(null),nf=null,Ra=null,nm=null;function im(){nm=Ra=nf=null}function S3(u,h,g){it?(ft(tf,h._currentValue),h._currentValue=g):(ft(tf,h._currentValue2),h._currentValue2=g)}function rm(u){var h=tf.current;Ce(tf),it?u._currentValue=h:u._currentValue2=h}function sm(u,h,g){for(;u!==null;){var S=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),u===g)break;u=u.return}}function La(u,h){nf=u,nm=Ra=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(Ei=!0),u.firstContext=null)}function Oi(u){var h=it?u._currentValue:u._currentValue2;if(nm!==u)if(u={context:u,memoizedValue:h,next:null},Ra===null){if(nf===null)throw Error(o(308));Ra=u,nf.dependencies={lanes:0,firstContext:u}}else Ra=Ra.next=u;return h}var Er=null,As=!1;function om(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M3(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Yr(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function Es(u,h){var g=u.updateQueue;g!==null&&(g=g.shared,yn!==null&&u.mode&1&&!(_t&2)?(u=g.interleaved,u===null?(h.next=h,Er===null?Er=[g]:Er.push(g)):(h.next=u.next,u.next=h),g.interleaved=h):(u=g.pending,u===null?h.next=h:(h.next=u.next,u.next=h),g.pending=h))}function rf(u,h,g){if(h=h.updateQueue,h!==null&&(h=h.shared,(g&4194240)!==0)){var S=h.lanes;S&=u.pendingLanes,g|=S,h.lanes=g,Z0(u,g)}}function b3(u,h){var g=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var w=null,A=null;if(g=g.firstBaseUpdate,g!==null){do{var O={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};A===null?w=A=O:A=A.next=O,g=g.next}while(g!==null);A===null?w=A=h:A=A.next=h}else w=A=h;g={baseState:S.baseState,firstBaseUpdate:w,lastBaseUpdate:A,shared:S.shared,effects:S.effects},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=h:u.next=h,g.lastBaseUpdate=h}function sf(u,h,g,S){var w=u.updateQueue;As=!1;var A=w.firstBaseUpdate,O=w.lastBaseUpdate,X=w.shared.pending;if(X!==null){w.shared.pending=null;var le=X,we=le.next;le.next=null,O===null?A=we:O.next=we,O=le;var ze=u.alternate;ze!==null&&(ze=ze.updateQueue,X=ze.lastBaseUpdate,X!==O&&(X===null?ze.firstBaseUpdate=we:X.next=we,ze.lastBaseUpdate=le))}if(A!==null){var ut=w.baseState;O=0,ze=we=le=null,X=A;do{var Ze=X.lane,Bt=X.eventTime;if((S&Ze)===Ze){ze!==null&&(ze=ze.next={eventTime:Bt,lane:0,tag:X.tag,payload:X.payload,callback:X.callback,next:null});e:{var Xe=u,Gn=X;switch(Ze=h,Bt=g,Gn.tag){case 1:if(Xe=Gn.payload,typeof Xe=="function"){ut=Xe.call(Bt,ut,Ze);break e}ut=Xe;break e;case 3:Xe.flags=Xe.flags&-65537|128;case 0:if(Xe=Gn.payload,Ze=typeof Xe=="function"?Xe.call(Bt,ut,Ze):Xe,Ze==null)break e;ut=s({},ut,Ze);break e;case 2:As=!0}}X.callback!==null&&X.lane!==0&&(u.flags|=64,Ze=w.effects,Ze===null?w.effects=[X]:Ze.push(X))}else Bt={eventTime:Bt,lane:Ze,tag:X.tag,payload:X.payload,callback:X.callback,next:null},ze===null?(we=ze=Bt,le=ut):ze=ze.next=Bt,O|=Ze;if(X=X.next,X===null){if(X=w.shared.pending,X===null)break;Ze=X,X=Ze.next,Ze.next=null,w.lastBaseUpdate=Ze,w.shared.pending=null}}while(!0);if(ze===null&&(le=ut),w.baseState=le,w.firstBaseUpdate=we,w.lastBaseUpdate=ze,h=w.shared.interleaved,h!==null){w=h;do O|=w.lane,w=w.next;while(w!==h)}else A===null&&(w.shared.lanes=0);Va|=O,u.lanes=O,u.memoizedState=ut}}function w3(u,h,g){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var S=u[h],w=S.callback;if(w!==null){if(S.callback=null,S=g,typeof w!="function")throw Error(o(191,w));w.call(S)}}}var T3=new i.Component().refs;function am(u,h,g,S){h=u.memoizedState,g=g(S,h),g=g==null?h:s({},h,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var of={isMounted:function(u){return(u=u._reactInternals)?R(u)===u:!1},enqueueSetState:function(u,h,g){u=u._reactInternals;var S=ti(),w=Rs(u),A=Yr(S,w);A.payload=h,g!=null&&(A.callback=g),Es(u,A),h=Hi(u,w,S),h!==null&&rf(h,u,w)},enqueueReplaceState:function(u,h,g){u=u._reactInternals;var S=ti(),w=Rs(u),A=Yr(S,w);A.tag=1,A.payload=h,g!=null&&(A.callback=g),Es(u,A),h=Hi(u,w,S),h!==null&&rf(h,u,w)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var g=ti(),S=Rs(u),w=Yr(g,S);w.tag=2,h!=null&&(w.callback=h),Es(u,w),h=Hi(u,S,g),h!==null&&rf(h,u,S)}};function A3(u,h,g,S,w,A,O){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,A,O):h.prototype&&h.prototype.isPureReactComponent?!ef(g,S)||!ef(w,A):!0}function E3(u,h,g){var S=!1,w=wt,A=h.contextType;return typeof A=="object"&&A!==null?A=Oi(A):(w=Pt(h)?Jn:zt.current,S=h.contextTypes,A=(S=S!=null)?br(u,w):wt),h=new h(g,A),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=of,u.stateNode=h,h._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=w,u.__reactInternalMemoizedMaskedChildContext=A),h}function C3(u,h,g,S){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(g,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(g,S),h.state!==u&&of.enqueueReplaceState(h,h.state,null)}function lm(u,h,g,S){var w=u.stateNode;w.props=g,w.state=u.memoizedState,w.refs=T3,om(u);var A=h.contextType;typeof A=="object"&&A!==null?w.context=Oi(A):(A=Pt(h)?Jn:zt.current,w.context=br(u,A)),w.state=u.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(am(u,h,A,g),w.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(h=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),h!==w.state&&of.enqueueReplaceState(w,w.state,null),sf(u,g,w,S),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308)}var Ia=[],Da=0,af=null,lf=0,ki=[],Bi=0,yo=null,Kr=1,Zr="";function xo(u,h){Ia[Da++]=lf,Ia[Da++]=af,af=u,lf=h}function P3(u,h,g){ki[Bi++]=Kr,ki[Bi++]=Zr,ki[Bi++]=yo,yo=u;var S=Kr;u=Zr;var w=32-fi(S)-1;S&=~(1<<w),g+=1;var A=32-fi(h)+w;if(30<A){var O=w-w%5;A=(S&(1<<O)-1).toString(32),S>>=O,w-=O,Kr=1<<32-fi(h)+w|g<<w|S,Zr=A+u}else Kr=1<<A|g<<w|S,Zr=u}function cm(u){u.return!==null&&(xo(u,1),P3(u,1,0))}function um(u){for(;u===af;)af=Ia[--Da],Ia[Da]=null,lf=Ia[--Da],Ia[Da]=null;for(;u===yo;)yo=ki[--Bi],ki[Bi]=null,Zr=ki[--Bi],ki[Bi]=null,Kr=ki[--Bi],ki[Bi]=null}var Ti=null,Ai=null,Yt=!1,fc=!1,rr=null;function R3(u,h){var g=$i(5,null,null,0);g.elementType="DELETED",g.stateNode=h,g.return=u,h=u.deletions,h===null?(u.deletions=[g],u.flags|=16):h.push(g)}function L3(u,h){switch(u.tag){case 5:return h=Xr(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,Ti=u,Ai=jh(h),!0):!1;case 6:return h=lc(h,u.pendingProps),h!==null?(u.stateNode=h,Ti=u,Ai=null,!0):!1;case 13:if(h=Gh(h),h!==null){var g=yo!==null?{id:Kr,overflow:Zr}:null;return u.memoizedState={dehydrated:h,treeContext:g,retryLane:1073741824},g=$i(18,null,null,0),g.stateNode=h,g.return=u,u.child=g,Ti=u,Ai=null,!0}return!1;default:return!1}}function hm(u){return(u.mode&1)!==0&&(u.flags&128)===0}function fm(u){if(Yt){var h=Ai;if(h){var g=h;if(!L3(u,h)){if(hm(u))throw Error(o(418));h=Mr(g);var S=Ti;h&&L3(u,h)?R3(S,g):(u.flags=u.flags&-4097|2,Yt=!1,Ti=u)}}else{if(hm(u))throw Error(o(418));u.flags=u.flags&-4097|2,Yt=!1,Ti=u}}}function I3(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Ti=u}function dc(u){if(!ue||u!==Ti)return!1;if(!Yt)return I3(u),Yt=!0,!1;if(u.tag!==3&&(u.tag!==5||Be(u.type)&&!ge(u.type,u.memoizedProps))){var h=Ai;if(h){if(hm(u)){for(u=Ai;u;)u=Mr(u);throw Error(o(418))}for(;h;)R3(u,h),h=Mr(h)}}if(I3(u),u.tag===13){if(!ue)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Ai=Y(u)}else Ai=Ti?Mr(u.stateNode):null;return!0}function Na(){ue&&(Ai=Ti=null,fc=Yt=!1)}function dm(u){rr===null?rr=[u]:rr.push(u)}function pc(u,h,g){if(u=g.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(o(309));var S=g.stateNode}if(!S)throw Error(o(147,u));var w=S,A=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===A?h.ref:(h=function(O){var X=w.refs;X===T3&&(X=w.refs={}),O===null?delete X[A]:X[A]=O},h._stringRef=A,h)}if(typeof u!="string")throw Error(o(284));if(!g._owner)throw Error(o(290,u))}return u}function cf(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function D3(u){var h=u._init;return h(u._payload)}function N3(u){function h(te,K){if(u){var se=te.deletions;se===null?(te.deletions=[K],te.flags|=16):se.push(K)}}function g(te,K){if(!u)return null;for(;K!==null;)h(te,K),K=K.sibling;return null}function S(te,K){for(te=new Map;K!==null;)K.key!==null?te.set(K.key,K):te.set(K.index,K),K=K.sibling;return te}function w(te,K){return te=Is(te,K),te.index=0,te.sibling=null,te}function A(te,K,se){return te.index=se,u?(se=te.alternate,se!==null?(se=se.index,se<K?(te.flags|=2,K):se):(te.flags|=2,K)):(te.flags|=1048576,K)}function O(te){return u&&te.alternate===null&&(te.flags|=2),te}function X(te,K,se,Fe){return K===null||K.tag!==6?(K=Km(se,te.mode,Fe),K.return=te,K):(K=w(K,se),K.return=te,K)}function le(te,K,se,Fe){var je=se.type;return je===f?ze(te,K,se.props.children,Fe,se.key):K!==null&&(K.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===M&&D3(je)===K.type)?(Fe=w(K,se.props),Fe.ref=pc(te,K,se),Fe.return=te,Fe):(Fe=Vf(se.type,se.key,se.props,null,te.mode,Fe),Fe.ref=pc(te,K,se),Fe.return=te,Fe)}function we(te,K,se,Fe){return K===null||K.tag!==4||K.stateNode.containerInfo!==se.containerInfo||K.stateNode.implementation!==se.implementation?(K=Zm(se,te.mode,Fe),K.return=te,K):(K=w(K,se.children||[]),K.return=te,K)}function ze(te,K,se,Fe,je){return K===null||K.tag!==7?(K=Ao(se,te.mode,Fe,je),K.return=te,K):(K=w(K,se),K.return=te,K)}function ut(te,K,se){if(typeof K=="string"&&K!==""||typeof K=="number")return K=Km(""+K,te.mode,se),K.return=te,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case l:return se=Vf(K.type,K.key,K.props,null,te.mode,se),se.ref=pc(te,null,K),se.return=te,se;case c:return K=Zm(K,te.mode,se),K.return=te,K;case M:var Fe=K._init;return ut(te,Fe(K._payload),se)}if(Z(K)||E(K))return K=Ao(K,te.mode,se,null),K.return=te,K;cf(te,K)}return null}function Ze(te,K,se,Fe){var je=K!==null?K.key:null;if(typeof se=="string"&&se!==""||typeof se=="number")return je!==null?null:X(te,K,""+se,Fe);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return se.key===je?le(te,K,se,Fe):null;case c:return se.key===je?we(te,K,se,Fe):null;case M:return je=se._init,Ze(te,K,je(se._payload),Fe)}if(Z(se)||E(se))return je!==null?null:ze(te,K,se,Fe,null);cf(te,se)}return null}function Bt(te,K,se,Fe,je){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return te=te.get(se)||null,X(K,te,""+Fe,je);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case l:return te=te.get(Fe.key===null?se:Fe.key)||null,le(K,te,Fe,je);case c:return te=te.get(Fe.key===null?se:Fe.key)||null,we(K,te,Fe,je);case M:var xt=Fe._init;return Bt(te,K,se,xt(Fe._payload),je)}if(Z(Fe)||E(Fe))return te=te.get(se)||null,ze(K,te,Fe,je,null);cf(K,Fe)}return null}function Xe(te,K,se,Fe){for(var je=null,xt=null,ht=K,It=K=0,Pn=null;ht!==null&&It<se.length;It++){ht.index>It?(Pn=ht,ht=null):Pn=ht.sibling;var Dt=Ze(te,ht,se[It],Fe);if(Dt===null){ht===null&&(ht=Pn);break}u&&ht&&Dt.alternate===null&&h(te,ht),K=A(Dt,K,It),xt===null?je=Dt:xt.sibling=Dt,xt=Dt,ht=Pn}if(It===se.length)return g(te,ht),Yt&&xo(te,It),je;if(ht===null){for(;It<se.length;It++)ht=ut(te,se[It],Fe),ht!==null&&(K=A(ht,K,It),xt===null?je=ht:xt.sibling=ht,xt=ht);return Yt&&xo(te,It),je}for(ht=S(te,ht);It<se.length;It++)Pn=Bt(ht,te,It,se[It],Fe),Pn!==null&&(u&&Pn.alternate!==null&&ht.delete(Pn.key===null?It:Pn.key),K=A(Pn,K,It),xt===null?je=Pn:xt.sibling=Pn,xt=Pn);return u&&ht.forEach(function(Ds){return h(te,Ds)}),Yt&&xo(te,It),je}function Gn(te,K,se,Fe){var je=E(se);if(typeof je!="function")throw Error(o(150));if(se=je.call(se),se==null)throw Error(o(151));for(var xt=je=null,ht=K,It=K=0,Pn=null,Dt=se.next();ht!==null&&!Dt.done;It++,Dt=se.next()){ht.index>It?(Pn=ht,ht=null):Pn=ht.sibling;var Ds=Ze(te,ht,Dt.value,Fe);if(Ds===null){ht===null&&(ht=Pn);break}u&&ht&&Ds.alternate===null&&h(te,ht),K=A(Ds,K,It),xt===null?je=Ds:xt.sibling=Ds,xt=Ds,ht=Pn}if(Dt.done)return g(te,ht),Yt&&xo(te,It),je;if(ht===null){for(;!Dt.done;It++,Dt=se.next())Dt=ut(te,Dt.value,Fe),Dt!==null&&(K=A(Dt,K,It),xt===null?je=Dt:xt.sibling=Dt,xt=Dt);return Yt&&xo(te,It),je}for(ht=S(te,ht);!Dt.done;It++,Dt=se.next())Dt=Bt(ht,te,It,Dt.value,Fe),Dt!==null&&(u&&Dt.alternate!==null&&ht.delete(Dt.key===null?It:Dt.key),K=A(Dt,K,It),xt===null?je=Dt:xt.sibling=Dt,xt=Dt);return u&&ht.forEach(function(cP){return h(te,cP)}),Yt&&xo(te,It),je}function Gi(te,K,se,Fe){if(typeof se=="object"&&se!==null&&se.type===f&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case l:e:{for(var je=se.key,xt=K;xt!==null;){if(xt.key===je){if(je=se.type,je===f){if(xt.tag===7){g(te,xt.sibling),K=w(xt,se.props.children),K.return=te,te=K;break e}}else if(xt.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===M&&D3(je)===xt.type){g(te,xt.sibling),K=w(xt,se.props),K.ref=pc(te,xt,se),K.return=te,te=K;break e}g(te,xt);break}else h(te,xt);xt=xt.sibling}se.type===f?(K=Ao(se.props.children,te.mode,Fe,se.key),K.return=te,te=K):(Fe=Vf(se.type,se.key,se.props,null,te.mode,Fe),Fe.ref=pc(te,K,se),Fe.return=te,te=Fe)}return O(te);case c:e:{for(xt=se.key;K!==null;){if(K.key===xt)if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){g(te,K.sibling),K=w(K,se.children||[]),K.return=te,te=K;break e}else{g(te,K);break}else h(te,K);K=K.sibling}K=Zm(se,te.mode,Fe),K.return=te,te=K}return O(te);case M:return xt=se._init,Gi(te,K,xt(se._payload),Fe)}if(Z(se))return Xe(te,K,se,Fe);if(E(se))return Gn(te,K,se,Fe);cf(te,se)}return typeof se=="string"&&se!==""||typeof se=="number"?(se=""+se,K!==null&&K.tag===6?(g(te,K.sibling),K=w(K,se),K.return=te,te=K):(g(te,K),K=Km(se,te.mode,Fe),K.return=te,te=K),O(te)):g(te,K)}return Gi}var Ua=N3(!0),U3=N3(!1),mc={},Vi=Mt(mc),gc=Mt(mc),Fa=Mt(mc);function Cr(u){if(u===mc)throw Error(o(174));return u}function pm(u,h){ft(Fa,h),ft(gc,u),ft(Vi,mc),u=q(h),Ce(Vi),ft(Vi,u)}function Oa(){Ce(Vi),Ce(gc),Ce(Fa)}function F3(u){var h=Cr(Fa.current),g=Cr(Vi.current);h=k(g,u.type,h),g!==h&&(ft(gc,u),ft(Vi,h))}function mm(u){gc.current===u&&(Ce(Vi),Ce(gc))}var Jt=Mt(0);function uf(u){for(var h=u;h!==null;){if(h.tag===13){var g=h.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||cc(g)||ws(g)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var gm=[];function vm(){for(var u=0;u<gm.length;u++){var h=gm[u];it?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}gm.length=0}var hf=a.ReactCurrentDispatcher,zi=a.ReactCurrentBatchConfig,ka=0,on=null,zn=null,Cn=null,ff=!1,vc=!1,yc=0,NC=0;function Hn(){throw Error(o(321))}function ym(u,h){if(h===null)return!1;for(var g=0;g<h.length&&g<u.length;g++)if(!Tr(u[g],h[g]))return!1;return!0}function xm(u,h,g,S,w,A){if(ka=A,on=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,hf.current=u===null||u.memoizedState===null?kC:BC,u=g(S,w),vc){A=0;do{if(vc=!1,yc=0,25<=A)throw Error(o(301));A+=1,Cn=zn=null,h.updateQueue=null,hf.current=VC,u=g(S,w)}while(vc)}if(hf.current=vf,h=zn!==null&&zn.next!==null,ka=0,Cn=zn=on=null,ff=!1,h)throw Error(o(300));return u}function _m(){var u=yc!==0;return yc=0,u}function Jr(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cn===null?on.memoizedState=Cn=u:Cn=Cn.next=u,Cn}function Pr(){if(zn===null){var u=on.alternate;u=u!==null?u.memoizedState:null}else u=zn.next;var h=Cn===null?on.memoizedState:Cn.next;if(h!==null)Cn=h,zn=u;else{if(u===null)throw Error(o(310));zn=u,u={memoizedState:zn.memoizedState,baseState:zn.baseState,baseQueue:zn.baseQueue,queue:zn.queue,next:null},Cn===null?on.memoizedState=Cn=u:Cn=Cn.next=u}return Cn}function _o(u,h){return typeof h=="function"?h(u):h}function df(u){var h=Pr(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=u;var S=zn,w=S.baseQueue,A=g.pending;if(A!==null){if(w!==null){var O=w.next;w.next=A.next,A.next=O}S.baseQueue=w=A,g.pending=null}if(w!==null){A=w.next,S=S.baseState;var X=O=null,le=null,we=A;do{var ze=we.lane;if((ka&ze)===ze)le!==null&&(le=le.next={lane:0,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null}),S=we.hasEagerState?we.eagerState:u(S,we.action);else{var ut={lane:ze,action:we.action,hasEagerState:we.hasEagerState,eagerState:we.eagerState,next:null};le===null?(X=le=ut,O=S):le=le.next=ut,on.lanes|=ze,Va|=ze}we=we.next}while(we!==null&&we!==A);le===null?O=S:le.next=X,Tr(S,h.memoizedState)||(Ei=!0),h.memoizedState=S,h.baseState=O,h.baseQueue=le,g.lastRenderedState=S}if(u=g.interleaved,u!==null){w=u;do A=w.lane,on.lanes|=A,Va|=A,w=w.next;while(w!==u)}else w===null&&(g.lanes=0);return[h.memoizedState,g.dispatch]}function pf(u){var h=Pr(),g=h.queue;if(g===null)throw Error(o(311));g.lastRenderedReducer=u;var S=g.dispatch,w=g.pending,A=h.memoizedState;if(w!==null){g.pending=null;var O=w=w.next;do A=u(A,O.action),O=O.next;while(O!==w);Tr(A,h.memoizedState)||(Ei=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),g.lastRenderedState=A}return[A,S]}function O3(){}function k3(u,h){var g=on,S=Pr(),w=h(),A=!Tr(S.memoizedState,w);if(A&&(S.memoizedState=w,Ei=!0),S=S.queue,_c(z3.bind(null,g,S,u),[u]),S.getSnapshot!==h||A||Cn!==null&&Cn.memoizedState.tag&1){if(g.flags|=2048,xc(9,V3.bind(null,g,S,w,h),void 0,null),yn===null)throw Error(o(349));ka&30||B3(g,h,w)}return w}function B3(u,h,g){u.flags|=16384,u={getSnapshot:h,value:g},h=on.updateQueue,h===null?(h={lastEffect:null,stores:null},on.updateQueue=h,h.stores=[u]):(g=h.stores,g===null?h.stores=[u]:g.push(u))}function V3(u,h,g,S){h.value=g,h.getSnapshot=S,H3(h)&&Hi(u,1,-1)}function z3(u,h,g){return g(function(){H3(h)&&Hi(u,1,-1)})}function H3(u){var h=u.getSnapshot;u=u.value;try{var g=h();return!Tr(u,g)}catch{return!0}}function Sm(u){var h=Jr();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:u},h.queue=u,u=u.dispatch=OC.bind(null,on,u),[h.memoizedState,u]}function xc(u,h,g,S){return u={tag:u,create:h,destroy:g,deps:S,next:null},h=on.updateQueue,h===null?(h={lastEffect:null,stores:null},on.updateQueue=h,h.lastEffect=u.next=u):(g=h.lastEffect,g===null?h.lastEffect=u.next=u:(S=g.next,g.next=u,u.next=S,h.lastEffect=u)),u}function $3(){return Pr().memoizedState}function mf(u,h,g,S){var w=Jr();on.flags|=u,w.memoizedState=xc(1|h,g,void 0,S===void 0?null:S)}function gf(u,h,g,S){var w=Pr();S=S===void 0?null:S;var A=void 0;if(zn!==null){var O=zn.memoizedState;if(A=O.destroy,S!==null&&ym(S,O.deps)){w.memoizedState=xc(h,g,A,S);return}}on.flags|=u,w.memoizedState=xc(1|h,g,A,S)}function Mm(u,h){return mf(8390656,8,u,h)}function _c(u,h){return gf(2048,8,u,h)}function G3(u,h){return gf(4,2,u,h)}function W3(u,h){return gf(4,4,u,h)}function j3(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function X3(u,h,g){return g=g!=null?g.concat([u]):null,gf(4,4,j3.bind(null,h,u),g)}function bm(){}function q3(u,h){var g=Pr();h=h===void 0?null:h;var S=g.memoizedState;return S!==null&&h!==null&&ym(h,S[1])?S[0]:(g.memoizedState=[u,h],u)}function Y3(u,h){var g=Pr();h=h===void 0?null:h;var S=g.memoizedState;return S!==null&&h!==null&&ym(h,S[1])?S[0]:(u=u(),g.memoizedState=[u,h],u)}function UC(u,h){var g=Lt;Lt=g!==0&&4>g?g:4,u(!0);var S=zi.transition;zi.transition={};try{u(!1),h()}finally{Lt=g,zi.transition=S}}function K3(){return Pr().memoizedState}function FC(u,h,g){var S=Rs(u);g={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null},Z3(u)?J3(h,g):(Q3(u,h,g),g=ti(),u=Hi(u,S,g),u!==null&&e4(u,h,S))}function OC(u,h,g){var S=Rs(u),w={lane:S,action:g,hasEagerState:!1,eagerState:null,next:null};if(Z3(u))J3(h,w);else{Q3(u,h,w);var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var O=h.lastRenderedState,X=A(O,g);if(w.hasEagerState=!0,w.eagerState=X,Tr(X,O))return}catch{}finally{}g=ti(),u=Hi(u,S,g),u!==null&&e4(u,h,S)}}function Z3(u){var h=u.alternate;return u===on||h!==null&&h===on}function J3(u,h){vc=ff=!0;var g=u.pending;g===null?h.next=h:(h.next=g.next,g.next=h),u.pending=h}function Q3(u,h,g){yn!==null&&u.mode&1&&!(_t&2)?(u=h.interleaved,u===null?(g.next=g,Er===null?Er=[h]:Er.push(h)):(g.next=u.next,u.next=g),h.interleaved=g):(u=h.pending,u===null?g.next=g:(g.next=u.next,u.next=g),h.pending=g)}function e4(u,h,g){if(g&4194240){var S=h.lanes;S&=u.pendingLanes,g|=S,h.lanes=g,Z0(u,g)}}var vf={readContext:Oi,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},kC={readContext:Oi,useCallback:function(u,h){return Jr().memoizedState=[u,h===void 0?null:h],u},useContext:Oi,useEffect:Mm,useImperativeHandle:function(u,h,g){return g=g!=null?g.concat([u]):null,mf(4194308,4,j3.bind(null,h,u),g)},useLayoutEffect:function(u,h){return mf(4194308,4,u,h)},useInsertionEffect:function(u,h){return mf(4,2,u,h)},useMemo:function(u,h){var g=Jr();return h=h===void 0?null:h,u=u(),g.memoizedState=[u,h],u},useReducer:function(u,h,g){var S=Jr();return h=g!==void 0?g(h):h,S.memoizedState=S.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},S.queue=u,u=u.dispatch=FC.bind(null,on,u),[S.memoizedState,u]},useRef:function(u){var h=Jr();return u={current:u},h.memoizedState=u},useState:Sm,useDebugValue:bm,useDeferredValue:function(u){var h=Sm(u),g=h[0],S=h[1];return Mm(function(){var w=zi.transition;zi.transition={};try{S(u)}finally{zi.transition=w}},[u]),g},useTransition:function(){var u=Sm(!1),h=u[0];return u=UC.bind(null,u[1]),Jr().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,g){var S=on,w=Jr();if(Yt){if(g===void 0)throw Error(o(407));g=g()}else{if(g=h(),yn===null)throw Error(o(349));ka&30||B3(S,h,g)}w.memoizedState=g;var A={value:g,getSnapshot:h};return w.queue=A,Mm(z3.bind(null,S,A,u),[u]),S.flags|=2048,xc(9,V3.bind(null,S,A,g,h),void 0,null),g},useId:function(){var u=Jr(),h=yn.identifierPrefix;if(Yt){var g=Zr,S=Kr;g=(S&~(1<<32-fi(S)-1)).toString(32)+g,h=":"+h+"R"+g,g=yc++,0<g&&(h+="H"+g.toString(32)),h+=":"}else g=NC++,h=":"+h+"r"+g.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},BC={readContext:Oi,useCallback:q3,useContext:Oi,useEffect:_c,useImperativeHandle:X3,useInsertionEffect:G3,useLayoutEffect:W3,useMemo:Y3,useReducer:df,useRef:$3,useState:function(){return df(_o)},useDebugValue:bm,useDeferredValue:function(u){var h=df(_o),g=h[0],S=h[1];return _c(function(){var w=zi.transition;zi.transition={};try{S(u)}finally{zi.transition=w}},[u]),g},useTransition:function(){var u=df(_o)[0],h=Pr().memoizedState;return[u,h]},useMutableSource:O3,useSyncExternalStore:k3,useId:K3,unstable_isNewReconciler:!1},VC={readContext:Oi,useCallback:q3,useContext:Oi,useEffect:_c,useImperativeHandle:X3,useInsertionEffect:G3,useLayoutEffect:W3,useMemo:Y3,useReducer:pf,useRef:$3,useState:function(){return pf(_o)},useDebugValue:bm,useDeferredValue:function(u){var h=pf(_o),g=h[0],S=h[1];return _c(function(){var w=zi.transition;zi.transition={};try{S(u)}finally{zi.transition=w}},[u]),g},useTransition:function(){var u=pf(_o)[0],h=Pr().memoizedState;return[u,h]},useMutableSource:O3,useSyncExternalStore:k3,useId:K3,unstable_isNewReconciler:!1};function wm(u,h){try{var g="",S=h;do g+=DC(S),S=S.return;while(S);var w=g}catch(A){w=`
Error generating stack: `+A.message+`
`+A.stack}return{value:u,source:h,stack:w}}function Tm(u,h){try{console.error(h.value)}catch(g){setTimeout(function(){throw g})}}var zC=typeof WeakMap=="function"?WeakMap:Map;function t4(u,h,g){g=Yr(-1,g),g.tag=3,g.payload={element:null};var S=h.value;return g.callback=function(){Df||(Df=!0,$m=S),Tm(u,h)},g}function n4(u,h,g){g=Yr(-1,g),g.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var w=h.value;g.payload=function(){return S(w)},g.callback=function(){Tm(u,h)}}var A=u.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(g.callback=function(){Tm(u,h),typeof S!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var O=h.stack;this.componentDidCatch(h.value,{componentStack:O!==null?O:""})}),g}function i4(u,h,g){var S=u.pingCache;if(S===null){S=u.pingCache=new zC;var w=new Set;S.set(h,w)}else w=S.get(h),w===void 0&&(w=new Set,S.set(h,w));w.has(g)||(w.add(g),u=tP.bind(null,u,h,g),h.then(u,u))}function r4(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function s4(u,h,g,S,w){return u.mode&1?(u.flags|=65536,u.lanes=w,u):(u===h?u.flags|=65536:(u.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(h=Yr(-1,1),h.tag=2,Es(g,h))),g.lanes|=1),u)}function Rr(u){u.flags|=4}function o4(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Sc,Mc,yf,xf;if(W)Sc=function(u,h){for(var g=h.child;g!==null;){if(g.tag===5||g.tag===6)Pe(u,g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Mc=function(){},yf=function(u,h,g,S,w){if(u=u.memoizedProps,u!==S){var A=h.stateNode,O=Cr(Vi.current);g=ae(A,g,u,S,w,O),(h.updateQueue=g)&&Rr(h)}},xf=function(u,h,g,S){g!==S&&Rr(h)};else if(fe){Sc=function(u,h,g,S){for(var w=h.child;w!==null;){if(w.tag===5){var A=w.stateNode;g&&S&&(A=Mi(A,w.type,w.memoizedProps,w)),Pe(u,A)}else if(w.tag===6)A=w.stateNode,g&&S&&(A=bi(A,w.memoizedProps,w)),Pe(u,A);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)A=w.child,A!==null&&(A.return=w),Sc(u,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};var a4=function(u,h,g,S){for(var w=h.child;w!==null;){if(w.tag===5){var A=w.stateNode;g&&S&&(A=Mi(A,w.type,w.memoizedProps,w)),Xt(u,A)}else if(w.tag===6)A=w.stateNode,g&&S&&(A=bi(A,w.memoizedProps,w)),Xt(u,A);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)A=w.child,A!==null&&(A.return=w),a4(u,w,!0,!0);else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===h)break;for(;w.sibling===null;){if(w.return===null||w.return===h)return;w=w.return}w.sibling.return=w.return,w=w.sibling}};Mc=function(u,h){var g=h.stateNode;if(!o4(u,h)){u=g.containerInfo;var S=At(u);a4(S,h,!1,!1),g.pendingChildren=S,Rr(h),gn(u,S)}},yf=function(u,h,g,S,w){var A=u.stateNode,O=u.memoizedProps;if((u=o4(u,h))&&O===S)h.stateNode=A;else{var X=h.stateNode,le=Cr(Vi.current),we=null;O!==S&&(we=ae(X,g,O,S,w,le)),u&&we===null?h.stateNode=A:(A=at(A,we,g,O,S,h,u,X),st(A,g,S,w,le)&&Rr(h),h.stateNode=A,u?Rr(h):Sc(A,h,!1,!1))}},xf=function(u,h,g,S){g!==S?(u=Cr(Fa.current),g=Cr(Vi.current),h.stateNode=Ee(S,u,g,h),Rr(h)):h.stateNode=u.stateNode}}else Mc=function(){},yf=function(){},xf=function(){};function bc(u,h){if(!Yt)switch(u.tailMode){case"hidden":h=u.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function $n(u){var h=u.alternate!==null&&u.alternate.child===u.child,g=0,S=0;if(h)for(var w=u.child;w!==null;)g|=w.lanes|w.childLanes,S|=w.subtreeFlags&14680064,S|=w.flags&14680064,w.return=u,w=w.sibling;else for(w=u.child;w!==null;)g|=w.lanes|w.childLanes,S|=w.subtreeFlags,S|=w.flags,w.return=u,w=w.sibling;return u.subtreeFlags|=S,u.childLanes=g,h}function HC(u,h,g){var S=h.pendingProps;switch(um(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(h),null;case 1:return Pt(h.type)&&wi(),$n(h),null;case 3:return S=h.stateNode,Oa(),Ce(bn),Ce(zt),vm(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(dc(h)?Rr(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,rr!==null&&(jm(rr),rr=null))),Mc(u,h),$n(h),null;case 5:mm(h),g=Cr(Fa.current);var w=h.type;if(u!==null&&h.stateNode!=null)yf(u,h,w,S,g),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(o(166));return $n(h),null}if(u=Cr(Vi.current),dc(h)){if(!ue)throw Error(o(175));u=X0(h.stateNode,h.type,h.memoizedProps,g,u,h,!fc),h.updateQueue=u,u!==null&&Rr(h)}else{var A=he(w,S,g,u,h);Sc(A,h,!1,!1),h.stateNode=A,st(A,w,S,g,u)&&Rr(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return $n(h),null;case 6:if(u&&h.stateNode!=null)xf(u,h,u.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(o(166));if(u=Cr(Fa.current),g=Cr(Vi.current),dc(h)){if(!ue)throw Error(o(176));if(u=h.stateNode,S=h.memoizedProps,(g=q0(u,S,h,!fc))&&(w=Ti,w!==null))switch(A=(w.mode&1)!==0,w.tag){case 3:He(w.stateNode.containerInfo,u,S,A);break;case 5:We(w.type,w.memoizedProps,w.stateNode,u,S,A)}g&&Rr(h)}else h.stateNode=Ee(S,u,g,h)}return $n(h),null;case 13:if(Ce(Jt),S=h.memoizedState,Yt&&Ai!==null&&h.mode&1&&!(h.flags&128)){for(u=Ai;u;)u=Mr(u);return Na(),h.flags|=98560,h}if(S!==null&&S.dehydrated!==null){if(S=dc(h),u===null){if(!S)throw Error(o(318));if(!ue)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));U(u,h)}else Na(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return $n(h),null}return rr!==null&&(jm(rr),rr=null),h.flags&128?(h.lanes=g,h):(S=S!==null,g=!1,u===null?dc(h):g=u.memoizedState!==null,S&&!g&&(h.child.flags|=8192,h.mode&1&&(u===null||Jt.current&1?wn===0&&(wn=3):qm())),h.updateQueue!==null&&(h.flags|=4),$n(h),null);case 4:return Oa(),Mc(u,h),u===null&&_e(h.stateNode.containerInfo),$n(h),null;case 10:return rm(h.type._context),$n(h),null;case 17:return Pt(h.type)&&wi(),$n(h),null;case 19:if(Ce(Jt),w=h.memoizedState,w===null)return $n(h),null;if(S=(h.flags&128)!==0,A=w.rendering,A===null)if(S)bc(w,!1);else{if(wn!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(A=uf(u),A!==null){for(h.flags|=128,bc(w,!1),u=A.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=g,S=h.child;S!==null;)g=S,w=u,g.flags&=14680066,A=g.alternate,A===null?(g.childLanes=0,g.lanes=w,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=A.childLanes,g.lanes=A.lanes,g.child=A.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=A.memoizedProps,g.memoizedState=A.memoizedState,g.updateQueue=A.updateQueue,g.type=A.type,w=A.dependencies,g.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext}),S=S.sibling;return ft(Jt,Jt.current&1|2),h.child}u=u.sibling}w.tail!==null&&En()>Hm&&(h.flags|=128,S=!0,bc(w,!1),h.lanes=4194304)}else{if(!S)if(u=uf(A),u!==null){if(h.flags|=128,S=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),bc(w,!0),w.tail===null&&w.tailMode==="hidden"&&!A.alternate&&!Yt)return $n(h),null}else 2*En()-w.renderingStartTime>Hm&&g!==1073741824&&(h.flags|=128,S=!0,bc(w,!1),h.lanes=4194304);w.isBackwards?(A.sibling=h.child,h.child=A):(u=w.last,u!==null?u.sibling=A:h.child=A,w.last=A)}return w.tail!==null?(h=w.tail,w.rendering=h,w.tail=h.sibling,w.renderingStartTime=En(),h.sibling=null,u=Jt.current,ft(Jt,S?u&1|2:u&1),h):($n(h),null);case 22:case 23:return Xm(),S=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?Ci&1073741824&&($n(h),W&&h.subtreeFlags&6&&(h.flags|=8192)):$n(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var $C=a.ReactCurrentOwner,Ei=!1;function ei(u,h,g,S){h.child=u===null?U3(h,null,g,S):Ua(h,u.child,g,S)}function l4(u,h,g,S,w){g=g.render;var A=h.ref;return La(h,w),S=xm(u,h,g,S,A,w),g=_m(),u!==null&&!Ei?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~w,Qr(u,h,w)):(Yt&&g&&cm(h),h.flags|=1,ei(u,h,S,w),h.child)}function c4(u,h,g,S,w){if(u===null){var A=g.type;return typeof A=="function"&&!Ym(A)&&A.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(h.tag=15,h.type=A,u4(u,h,A,S,w)):(u=Vf(g.type,null,S,h,h.mode,w),u.ref=h.ref,u.return=h,h.child=u)}if(A=u.child,!(u.lanes&w)){var O=A.memoizedProps;if(g=g.compare,g=g!==null?g:ef,g(O,S)&&u.ref===h.ref)return Qr(u,h,w)}return h.flags|=1,u=Is(A,S),u.ref=h.ref,u.return=h,h.child=u}function u4(u,h,g,S,w){if(u!==null&&ef(u.memoizedProps,S)&&u.ref===h.ref)if(Ei=!1,(u.lanes&w)!==0)u.flags&131072&&(Ei=!0);else return h.lanes=u.lanes,Qr(u,h,w);return Am(u,h,g,S,w)}function h4(u,h,g){var S=h.pendingProps,w=S.children,A=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},ft(Ba,Ci),Ci|=g;else if(g&1073741824)h.memoizedState={baseLanes:0,cachePool:null},S=A!==null?A.baseLanes:g,ft(Ba,Ci),Ci|=S;else return u=A!==null?A.baseLanes|g:g,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,ft(Ba,Ci),Ci|=u,null;else A!==null?(S=A.baseLanes|g,h.memoizedState=null):S=g,ft(Ba,Ci),Ci|=S;return ei(u,h,w,g),h.child}function f4(u,h){var g=h.ref;(u===null&&g!==null||u!==null&&u.ref!==g)&&(h.flags|=512,h.flags|=2097152)}function Am(u,h,g,S,w){var A=Pt(g)?Jn:zt.current;return A=br(h,A),La(h,w),g=xm(u,h,g,S,A,w),S=_m(),u!==null&&!Ei?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~w,Qr(u,h,w)):(Yt&&S&&cm(h),h.flags|=1,ei(u,h,g,w),h.child)}function d4(u,h,g,S,w){if(Pt(g)){var A=!0;Ts(h)}else A=!1;if(La(h,w),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),E3(h,g,S),lm(h,g,S,w),S=!0;else if(u===null){var O=h.stateNode,X=h.memoizedProps;O.props=X;var le=O.context,we=g.contextType;typeof we=="object"&&we!==null?we=Oi(we):(we=Pt(g)?Jn:zt.current,we=br(h,we));var ze=g.getDerivedStateFromProps,ut=typeof ze=="function"||typeof O.getSnapshotBeforeUpdate=="function";ut||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==S||le!==we)&&C3(h,O,S,we),As=!1;var Ze=h.memoizedState;O.state=Ze,sf(h,S,O,w),le=h.memoizedState,X!==S||Ze!==le||bn.current||As?(typeof ze=="function"&&(am(h,g,ze,S),le=h.memoizedState),(X=As||A3(h,g,X,S,Ze,le,we))?(ut||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=le),O.props=S,O.state=le,O.context=we,S=X):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{O=h.stateNode,M3(u,h),X=h.memoizedProps,we=h.type===h.elementType?X:ir(h.type,X),O.props=we,ut=h.pendingProps,Ze=O.context,le=g.contextType,typeof le=="object"&&le!==null?le=Oi(le):(le=Pt(g)?Jn:zt.current,le=br(h,le));var Bt=g.getDerivedStateFromProps;(ze=typeof Bt=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(X!==ut||Ze!==le)&&C3(h,O,S,le),As=!1,Ze=h.memoizedState,O.state=Ze,sf(h,S,O,w);var Xe=h.memoizedState;X!==ut||Ze!==Xe||bn.current||As?(typeof Bt=="function"&&(am(h,g,Bt,S),Xe=h.memoizedState),(we=As||A3(h,g,we,S,Ze,Xe,le)||!1)?(ze||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,Xe,le),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,Xe,le)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||X===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=Xe),O.props=S,O.state=Xe,O.context=le,S=we):(typeof O.componentDidUpdate!="function"||X===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||X===u.memoizedProps&&Ze===u.memoizedState||(h.flags|=1024),S=!1)}return Em(u,h,g,S,A,w)}function Em(u,h,g,S,w,A){f4(u,h);var O=(h.flags&128)!==0;if(!S&&!O)return w&&qh(h,g,!1),Qr(u,h,A);S=h.stateNode,$C.current=h;var X=O&&typeof g.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,u!==null&&O?(h.child=Ua(h,u.child,null,A),h.child=Ua(h,null,X,A)):ei(u,h,X,A),h.memoizedState=S.state,w&&qh(h,g,!0),h.child}function p4(u){var h=u.stateNode;h.pendingContext?Pa(u,h.pendingContext,h.pendingContext!==h.context):h.context&&Pa(u,h.context,!1),pm(u,h.containerInfo)}function m4(u,h,g,S,w){return Na(),dm(w),h.flags|=256,ei(u,h,g,S),h.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function Sf(u){return{baseLanes:u,cachePool:null}}function g4(u,h,g){var S=h.pendingProps,w=Jt.current,A=!1,O=(h.flags&128)!==0,X;if((X=O)||(X=u!==null&&u.memoizedState===null?!1:(w&2)!==0),X?(A=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(w|=1),ft(Jt,w&1),u===null)return fm(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?ws(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(w=S.children,u=S.fallback,A?(S=h.mode,A=h.child,w={mode:"hidden",children:w},!(S&1)&&A!==null?(A.childLanes=0,A.pendingProps=w):A=zf(w,S,0,null),u=Ao(u,S,g,null),A.return=h,u.return=h,A.sibling=u,h.child=A,h.child.memoizedState=Sf(g),h.memoizedState=_f,u):Cm(h,w));if(w=u.memoizedState,w!==null){if(X=w.dehydrated,X!==null){if(O)return h.flags&256?(h.flags&=-257,Mf(u,h,g,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(A=S.fallback,w=h.mode,S=zf({mode:"visible",children:S.children},w,0,null),A=Ao(A,w,g,null),A.flags|=2,S.return=h,A.return=h,S.sibling=A,h.child=S,h.mode&1&&Ua(h,u.child,null,g),h.child.memoizedState=Sf(g),h.memoizedState=_f,A);if(!(h.mode&1))h=Mf(u,h,g,null);else if(ws(X))h=Mf(u,h,g,Error(o(419)));else if(S=(g&u.childLanes)!==0,Ei||S){if(S=yn,S!==null){switch(g&-g){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}S=A&(S.suspendedLanes|g)?0:A,S!==0&&S!==w.retryLane&&(w.retryLane=S,Hi(u,S,-1))}qm(),h=Mf(u,h,g,Error(o(421)))}else cc(X)?(h.flags|=128,h.child=u.child,h=nP.bind(null,u),Wh(X,h),h=null):(g=w.treeContext,ue&&(Ai=j0(X),Ti=h,Yt=!0,rr=null,fc=!1,g!==null&&(ki[Bi++]=Kr,ki[Bi++]=Zr,ki[Bi++]=yo,Kr=g.id,Zr=g.overflow,yo=h)),h=Cm(h,h.pendingProps.children),h.flags|=4096);return h}return A?(S=y4(u,h,S.children,S.fallback,g),A=h.child,w=u.child.memoizedState,A.memoizedState=w===null?Sf(g):{baseLanes:w.baseLanes|g,cachePool:null},A.childLanes=u.childLanes&~g,h.memoizedState=_f,S):(g=v4(u,h,S.children,g),h.memoizedState=null,g)}return A?(S=y4(u,h,S.children,S.fallback,g),A=h.child,w=u.child.memoizedState,A.memoizedState=w===null?Sf(g):{baseLanes:w.baseLanes|g,cachePool:null},A.childLanes=u.childLanes&~g,h.memoizedState=_f,S):(g=v4(u,h,S.children,g),h.memoizedState=null,g)}function Cm(u,h){return h=zf({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function v4(u,h,g,S){var w=u.child;return u=w.sibling,g=Is(w,{mode:"visible",children:g}),!(h.mode&1)&&(g.lanes=S),g.return=h,g.sibling=null,u!==null&&(S=h.deletions,S===null?(h.deletions=[u],h.flags|=16):S.push(u)),h.child=g}function y4(u,h,g,S,w){var A=h.mode;u=u.child;var O=u.sibling,X={mode:"hidden",children:g};return!(A&1)&&h.child!==u?(g=h.child,g.childLanes=0,g.pendingProps=X,h.deletions=null):(g=Is(u,X),g.subtreeFlags=u.subtreeFlags&14680064),O!==null?S=Is(O,S):(S=Ao(S,A,w,null),S.flags|=2),S.return=h,g.return=h,g.sibling=S,h.child=g,S}function Mf(u,h,g,S){return S!==null&&dm(S),Ua(h,u.child,null,g),u=Cm(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function x4(u,h,g){u.lanes|=h;var S=u.alternate;S!==null&&(S.lanes|=h),sm(u.return,h,g)}function Pm(u,h,g,S,w){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:w}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=S,A.tail=g,A.tailMode=w)}function _4(u,h,g){var S=h.pendingProps,w=S.revealOrder,A=S.tail;if(ei(u,h,S.children,g),S=Jt.current,S&2)S=S&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&x4(u,g,h);else if(u.tag===19)x4(u,g,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(ft(Jt,S),!(h.mode&1))h.memoizedState=null;else switch(w){case"forwards":for(g=h.child,w=null;g!==null;)u=g.alternate,u!==null&&uf(u)===null&&(w=g),g=g.sibling;g=w,g===null?(w=h.child,h.child=null):(w=g.sibling,g.sibling=null),Pm(h,!1,w,g,A);break;case"backwards":for(g=null,w=h.child,h.child=null;w!==null;){if(u=w.alternate,u!==null&&uf(u)===null){h.child=w;break}u=w.sibling,w.sibling=g,g=w,w=u}Pm(h,!0,g,null,A);break;case"together":Pm(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Qr(u,h,g){if(u!==null&&(h.dependencies=u.dependencies),Va|=h.lanes,!(g&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,g=Is(u,u.pendingProps),h.child=g,g.return=h;u.sibling!==null;)u=u.sibling,g=g.sibling=Is(u,u.pendingProps),g.return=h;g.sibling=null}return h.child}function GC(u,h,g){switch(h.tag){case 3:p4(h),Na();break;case 5:F3(h);break;case 1:Pt(h.type)&&Ts(h);break;case 4:pm(h,h.stateNode.containerInfo);break;case 10:S3(h,h.type._context,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(ft(Jt,Jt.current&1),h.flags|=128,null):g&h.child.childLanes?g4(u,h,g):(ft(Jt,Jt.current&1),u=Qr(u,h,g),u!==null?u.sibling:null);ft(Jt,Jt.current&1);break;case 19:if(S=(g&h.childLanes)!==0,u.flags&128){if(S)return _4(u,h,g);h.flags|=128}var w=h.memoizedState;if(w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ft(Jt,Jt.current),S)break;return null;case 22:case 23:return h.lanes=0,h4(u,h,g)}return Qr(u,h,g)}function WC(u,h){switch(um(h),h.tag){case 1:return Pt(h.type)&&wi(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Oa(),Ce(bn),Ce(zt),vm(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return mm(h),null;case 13:if(Ce(Jt),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));Na()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return Ce(Jt),null;case 4:return Oa(),null;case 10:return rm(h.type._context),null;case 22:case 23:return Xm(),null;case 24:return null;default:return null}}var bf=!1,So=!1,jC=typeof WeakSet=="function"?WeakSet:Set,De=null;function wf(u,h){var g=u.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(S){mi(u,h,S)}else g.current=null}function Rm(u,h,g){try{g()}catch(S){mi(u,h,S)}}var S4=!1;function XC(u,h){for(Q(u.containerInfo),De=h;De!==null;)if(u=De,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,De=h;else for(;De!==null;){u=De;try{var g=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,w=g.memoizedState,A=u.stateNode,O=A.getSnapshotBeforeUpdate(u.elementType===u.type?S:ir(u.type,S),w);A.__reactInternalSnapshotBeforeUpdate=O}break;case 3:W&&Ae(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(X){mi(u,u.return,X)}if(h=u.sibling,h!==null){h.return=u.return,De=h;break}De=u.return}return g=S4,S4=!1,g}function Mo(u,h,g){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var w=S=S.next;do{if((w.tag&u)===u){var A=w.destroy;w.destroy=void 0,A!==void 0&&Rm(h,g,A)}w=w.next}while(w!==S)}}function wc(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var g=h=h.next;do{if((g.tag&u)===u){var S=g.create;g.destroy=S()}g=g.next}while(g!==h)}}function Lm(u){var h=u.ref;if(h!==null){var g=u.stateNode;switch(u.tag){case 5:u=$(g);break;default:u=g}typeof h=="function"?h(u):h.current=u}}function M4(u,h,g){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(Jh,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var S=u=u.next;do{var w=S,A=w.destroy;w=w.tag,A!==void 0&&(w&2||w&4)&&Rm(h,g,A),S=S.next}while(S!==u)}break;case 1:if(wf(h,g),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(O){mi(h,g,O)}break;case 5:wf(h,g);break;case 4:W?C4(u,h,g):fe&&fe&&(h=h.stateNode.containerInfo,g=At(h),Ut(h,g))}}function b4(u,h,g){for(var S=h;;)if(M4(u,S,g),S.child===null||W&&S.tag===4){if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function w4(u){var h=u.alternate;h!==null&&(u.alternate=null,w4(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Oe(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function T4(u){return u.tag===5||u.tag===3||u.tag===4}function A4(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||T4(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function E4(u){if(W){e:{for(var h=u.return;h!==null;){if(T4(h))break e;h=h.return}throw Error(o(160))}var g=h;switch(g.tag){case 5:h=g.stateNode,g.flags&32&&(jt(h),g.flags&=-33),g=A4(u),Dm(u,g,h);break;case 3:case 4:h=g.stateNode.containerInfo,g=A4(u),Im(u,g,h);break;default:throw Error(o(161))}}}function Im(u,h,g){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?Ue(g,u,h):ct(g,u);else if(S!==4&&(u=u.child,u!==null))for(Im(u,h,g),u=u.sibling;u!==null;)Im(u,h,g),u=u.sibling}function Dm(u,h,g){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?ot(g,u,h):Le(g,u);else if(S!==4&&(u=u.child,u!==null))for(Dm(u,h,g),u=u.sibling;u!==null;)Dm(u,h,g),u=u.sibling}function C4(u,h,g){for(var S=h,w=!1,A,O;;){if(!w){w=S.return;e:for(;;){if(w===null)throw Error(o(160));switch(A=w.stateNode,w.tag){case 5:O=!1;break e;case 3:A=A.containerInfo,O=!0;break e;case 4:A=A.containerInfo,O=!0;break e}w=w.return}w=!0}if(S.tag===5||S.tag===6)b4(u,S,g),O?bt(A,S.stateNode):mt(A,S.stateNode);else if(S.tag===18)O?Te(A,S.stateNode):J(A,S.stateNode);else if(S.tag===4){if(S.child!==null){A=S.stateNode.containerInfo,O=!0,S.child.return=S,S=S.child;continue}}else if(M4(u,S,g),S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return,S.tag===4&&(w=!1)}S.sibling.return=S.return,S=S.sibling}}function Nm(u,h){if(W){switch(h.tag){case 0:case 11:case 14:case 15:Mo(3,h,h.return),wc(3,h),Mo(5,h,h.return);return;case 1:return;case 5:var g=h.stateNode;if(g!=null){var S=h.memoizedProps;u=u!==null?u.memoizedProps:S;var w=h.type,A=h.updateQueue;h.updateQueue=null,A!==null&&St(g,A,w,u,S,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));g=h.memoizedProps,be(h.stateNode,u!==null?u.memoizedProps:g,g);return;case 3:ue&&u!==null&&u.memoizedState.isDehydrated&&ne(h.stateNode.containerInfo);return;case 12:return;case 13:Tf(h);return;case 19:Tf(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:Mo(3,h,h.return),wc(3,h),Mo(5,h,h.return);return;case 12:return;case 13:Tf(h);return;case 19:Tf(h);return;case 3:ue&&u!==null&&u.memoizedState.isDehydrated&&ne(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(fe){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Ut(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function Tf(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var g=u.stateNode;g===null&&(g=u.stateNode=new jC),h.forEach(function(S){var w=iP.bind(null,u,S);g.has(S)||(g.add(S),S.then(w,w))})}}function qC(u,h){for(De=h;De!==null;){h=De;var g=h.deletions;if(g!==null)for(var S=0;S<g.length;S++){var w=g[S];try{var A=u;W?C4(A,w,h):b4(A,w,h);var O=w.alternate;O!==null&&(O.return=null),w.return=null}catch(je){mi(w,h,je)}}if(g=h.child,h.subtreeFlags&12854&&g!==null)g.return=h,De=g;else for(;De!==null;){h=De;try{var X=h.flags;if(X&32&&W&&jt(h.stateNode),X&512){var le=h.alternate;if(le!==null){var we=le.ref;we!==null&&(typeof we=="function"?we(null):we.current=null)}}if(X&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var ze=h.alternate;(ze===null||ze.memoizedState===null)&&(zm=En())}break;case 22:var ut=h.memoizedState!==null,Ze=h.alternate,Bt=Ze!==null&&Ze.memoizedState!==null;if(g=h,W){e:if(S=g,w=ut,A=null,W)for(var Xe=S;;){if(Xe.tag===5){if(A===null){A=Xe;var Gn=Xe.stateNode;w?j(Gn):ce(Xe.stateNode,Xe.memoizedProps)}}else if(Xe.tag===6){if(A===null){var Gi=Xe.stateNode;w?ke(Gi):me(Gi,Xe.memoizedProps)}}else if((Xe.tag!==22&&Xe.tag!==23||Xe.memoizedState===null||Xe===S)&&Xe.child!==null){Xe.child.return=Xe,Xe=Xe.child;continue}if(Xe===S)break;for(;Xe.sibling===null;){if(Xe.return===null||Xe.return===S)break e;A===Xe&&(A=null),Xe=Xe.return}A===Xe&&(A=null),Xe.sibling.return=Xe.return,Xe=Xe.sibling}}if(ut&&!Bt&&g.mode&1){De=g;for(var te=g.child;te!==null;){for(g=De=te;De!==null;){S=De;var K=S.child;switch(S.tag){case 0:case 11:case 14:case 15:Mo(4,S,S.return);break;case 1:wf(S,S.return);var se=S.stateNode;if(typeof se.componentWillUnmount=="function"){var Fe=S.return;try{se.props=S.memoizedProps,se.state=S.memoizedState,se.componentWillUnmount()}catch(je){mi(S,Fe,je)}}break;case 5:wf(S,S.return);break;case 22:if(S.memoizedState!==null){L4(g);continue}}K!==null?(K.return=S,De=K):L4(g)}te=te.sibling}}}switch(X&4102){case 2:E4(h),h.flags&=-3;break;case 6:E4(h),h.flags&=-3,Nm(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Nm(h.alternate,h);break;case 4:Nm(h.alternate,h)}}catch(je){mi(h,h.return,je)}if(g=h.sibling,g!==null){g.return=h.return,De=g;break}De=h.return}}}function YC(u,h,g){De=u,P4(u)}function P4(u,h,g){for(var S=(u.mode&1)!==0;De!==null;){var w=De,A=w.child;if(w.tag===22&&S){var O=w.memoizedState!==null||bf;if(!O){var X=w.alternate,le=X!==null&&X.memoizedState!==null||So;X=bf;var we=So;if(bf=O,(So=le)&&!we)for(De=w;De!==null;)O=De,le=O.child,O.tag===22&&O.memoizedState!==null?I4(w):le!==null?(le.return=O,De=le):I4(w);for(;A!==null;)De=A,P4(A),A=A.sibling;De=w,bf=X,So=we}R4(u)}else w.subtreeFlags&8772&&A!==null?(A.return=w,De=A):R4(u)}}function R4(u){for(;De!==null;){var h=De;if(h.flags&8772){var g=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:So||wc(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!So)if(g===null)S.componentDidMount();else{var w=h.elementType===h.type?g.memoizedProps:ir(h.type,g.memoizedProps);S.componentDidUpdate(w,g.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var A=h.updateQueue;A!==null&&w3(h,A,S);break;case 3:var O=h.updateQueue;if(O!==null){if(g=null,h.child!==null)switch(h.child.tag){case 5:g=$(h.child.stateNode);break;case 1:g=h.child.stateNode}w3(h,O,g)}break;case 5:var X=h.stateNode;g===null&&h.flags&4&&$e(X,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(ue&&h.memoizedState===null){var le=h.alternate;if(le!==null){var we=le.memoizedState;if(we!==null){var ze=we.dehydrated;ze!==null&&ie(ze)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}So||h.flags&512&&Lm(h)}catch(ut){mi(h,h.return,ut)}}if(h===u){De=null;break}if(g=h.sibling,g!==null){g.return=h.return,De=g;break}De=h.return}}function L4(u){for(;De!==null;){var h=De;if(h===u){De=null;break}var g=h.sibling;if(g!==null){g.return=h.return,De=g;break}De=h.return}}function I4(u){for(;De!==null;){var h=De;try{switch(h.tag){case 0:case 11:case 15:var g=h.return;try{wc(4,h)}catch(le){mi(h,g,le)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var w=h.return;try{S.componentDidMount()}catch(le){mi(h,w,le)}}var A=h.return;try{Lm(h)}catch(le){mi(h,A,le)}break;case 5:var O=h.return;try{Lm(h)}catch(le){mi(h,O,le)}}}catch(le){mi(h,h.return,le)}if(h===u){De=null;break}var X=h.sibling;if(X!==null){X.return=h.return,De=X;break}De=h.return}}var Af=0,Ef=1,Cf=2,Pf=3,Rf=4;if(typeof Symbol=="function"&&Symbol.for){var Tc=Symbol.for;Af=Tc("selector.component"),Ef=Tc("selector.has_pseudo_class"),Cf=Tc("selector.role"),Pf=Tc("selector.test_id"),Rf=Tc("selector.text")}function Um(u){var h=Me(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=N(u),u===null)throw Error(o(362));return u.stateNode.current}function Fm(u,h){switch(h.$$typeof){case Af:if(u.type===h.value)return!0;break;case Ef:e:{h=h.value,u=[u,0];for(var g=0;g<u.length;){var S=u[g++],w=u[g++],A=h[w];if(S.tag!==5||!de(S)){for(;A!=null&&Fm(S,A);)w++,A=h[w];if(w===h.length){h=!0;break e}else for(S=S.child;S!==null;)u.push(S,w),S=S.sibling}}h=!1}return h;case Cf:if(u.tag===5&&ye(u.stateNode,h.value))return!0;break;case Rf:if((u.tag===5||u.tag===6)&&(u=ve(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case Pf:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Om(u){switch(u.$$typeof){case Af:return"<"+(L(u.value)||"Unknown")+">";case Ef:return":has("+(Om(u)||"")+")";case Cf:return'[role="'+u.value+'"]';case Rf:return'"'+u.value+'"';case Pf:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function D4(u,h){var g=[];u=[u,0];for(var S=0;S<u.length;){var w=u[S++],A=u[S++],O=h[A];if(w.tag!==5||!de(w)){for(;O!=null&&Fm(w,O);)A++,O=h[A];if(A===h.length)g.push(w);else for(w=w.child;w!==null;)u.push(w,A),w=w.sibling}}return g}function km(u,h){if(!V)throw Error(o(363));u=Um(u),u=D4(u,h),h=[],u=Array.from(u);for(var g=0;g<u.length;){var S=u[g++];if(S.tag===5)de(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return h}var KC=Math.ceil,Lf=a.ReactCurrentDispatcher,Bm=a.ReactCurrentOwner,dn=a.ReactCurrentBatchConfig,_t=0,yn=null,xn=null,Un=0,Ci=0,Ba=Mt(0),wn=0,Ac=null,Va=0,If=0,Vm=0,Ec=null,di=null,zm=0,Hm=1/0;function za(){Hm=En()+500}var Df=!1,$m=null,Cs=null,Nf=!1,Ps=null,Uf=0,Cc=0,Gm=null,Ff=-1,Of=0;function ti(){return _t&6?En():Ff!==-1?Ff:Ff=En()}function Rs(u){return u.mode&1?_t&2&&Un!==0?Un&-Un:IC.transition!==null?(Of===0&&(u=Yh,Yh<<=1,!(Yh&4194240)&&(Yh=64),Of=u),Of):(u=Lt,u!==0?u:Se()):1}function Hi(u,h,g){if(50<Cc)throw Cc=0,Gm=null,Error(o(185));var S=kf(u,h);return S===null?null:(hc(S,h,g),(!(_t&2)||S!==yn)&&(S===yn&&(!(_t&2)&&(If|=h),wn===4&&Ls(S,Un)),pi(S,g),h===1&&_t===0&&!(u.mode&1)&&(za(),Qh&&Ar())),S)}function kf(u,h){u.lanes|=h;var g=u.alternate;for(g!==null&&(g.lanes|=h),g=u,u=u.return;u!==null;)u.childLanes|=h,g=u.alternate,g!==null&&(g.childLanes|=h),g=u,u=u.return;return g.tag===3?g.stateNode:null}function pi(u,h){var g=u.callbackNode;bC(u,h);var S=Zh(u,u===yn?Un:0);if(S===0)g!==null&&x3(g),u.callbackNode=null,u.callbackPriority=0;else if(h=S&-S,u.callbackPriority!==h){if(g!=null&&x3(g),h===1)u.tag===0?LC(U4.bind(null,u)):_3(U4.bind(null,u)),Ne?lt(function(){_t===0&&Ar()}):J0(Q0,Ar),g=null;else{switch(y3(S)){case 1:g=Q0;break;case 4:g=EC;break;case 16:g=em;break;case 536870912:g=CC;break;default:g=em}g=G4(g,N4.bind(null,u))}u.callbackPriority=h,u.callbackNode=g}}function N4(u,h){if(Ff=-1,Of=0,_t&6)throw Error(o(327));var g=u.callbackNode;if(To()&&u.callbackNode!==g)return null;var S=Zh(u,u===yn?Un:0);if(S===0)return null;if(S&30||S&u.expiredLanes||h)h=Bf(u,S);else{h=S;var w=_t;_t|=2;var A=k4();(yn!==u||Un!==h)&&(za(),bo(u,h));do try{QC();break}catch(X){O4(u,X)}while(!0);im(),Lf.current=A,_t=w,xn!==null?h=0:(yn=null,Un=0,h=wn)}if(h!==0){if(h===2&&(w=Y0(u),w!==0&&(S=w,h=Wm(u,w))),h===1)throw g=Ac,bo(u,0),Ls(u,S),pi(u,En()),g;if(h===6)Ls(u,S);else{if(w=u.current.alternate,!(S&30)&&!ZC(w)&&(h=Bf(u,S),h===2&&(A=Y0(u),A!==0&&(S=A,h=Wm(u,A))),h===1))throw g=Ac,bo(u,0),Ls(u,S),pi(u,En()),g;switch(u.finishedWork=w,u.finishedLanes=S,h){case 0:case 1:throw Error(o(345));case 2:wo(u,di);break;case 3:if(Ls(u,S),(S&130023424)===S&&(h=zm+500-En(),10<h)){if(Zh(u,0)!==0)break;if(w=u.suspendedLanes,(w&S)!==S){ti(),u.pingedLanes|=u.suspendedLanes&w;break}u.timeoutHandle=xe(wo.bind(null,u,di),h);break}wo(u,di);break;case 4:if(Ls(u,S),(S&4194240)===S)break;for(h=u.eventTimes,w=-1;0<S;){var O=31-fi(S);A=1<<O,O=h[O],O>w&&(w=O),S&=~A}if(S=w,S=En()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*KC(S/1960))-S,10<S){u.timeoutHandle=xe(wo.bind(null,u,di),S);break}wo(u,di);break;case 5:wo(u,di);break;default:throw Error(o(329))}}}return pi(u,En()),u.callbackNode===g?N4.bind(null,u):null}function Wm(u,h){var g=Ec;return u.current.memoizedState.isDehydrated&&(bo(u,h).flags|=256),u=Bf(u,h),u!==2&&(h=di,di=g,h!==null&&jm(h)),u}function jm(u){di===null?di=u:di.push.apply(di,u)}function ZC(u){for(var h=u;;){if(h.flags&16384){var g=h.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var S=0;S<g.length;S++){var w=g[S],A=w.getSnapshot;w=w.value;try{if(!Tr(A(),w))return!1}catch{return!1}}}if(g=h.child,h.subtreeFlags&16384&&g!==null)g.return=h,h=g;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Ls(u,h){for(h&=~Vm,h&=~If,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var g=31-fi(h),S=1<<g;u[g]=-1,h&=~S}}function U4(u){if(_t&6)throw Error(o(327));To();var h=Zh(u,0);if(!(h&1))return pi(u,En()),null;var g=Bf(u,h);if(u.tag!==0&&g===2){var S=Y0(u);S!==0&&(h=S,g=Wm(u,S))}if(g===1)throw g=Ac,bo(u,0),Ls(u,h),pi(u,En()),g;if(g===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,wo(u,di),pi(u,En()),null}function F4(u){Ps!==null&&Ps.tag===0&&!(_t&6)&&To();var h=_t;_t|=1;var g=dn.transition,S=Lt;try{if(dn.transition=null,Lt=1,u)return u()}finally{Lt=S,dn.transition=g,_t=h,!(_t&6)&&Ar()}}function Xm(){Ci=Ba.current,Ce(Ba)}function bo(u,h){u.finishedWork=null,u.finishedLanes=0;var g=u.timeoutHandle;if(g!==Je&&(u.timeoutHandle=Je,et(g)),xn!==null)for(g=xn.return;g!==null;){var S=g;switch(um(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&wi();break;case 3:Oa(),Ce(bn),Ce(zt),vm();break;case 5:mm(S);break;case 4:Oa();break;case 13:Ce(Jt);break;case 19:Ce(Jt);break;case 10:rm(S.type._context);break;case 22:case 23:Xm()}g=g.return}if(yn=u,xn=u=Is(u.current,null),Un=Ci=h,wn=0,Ac=null,Vm=If=Va=0,di=Ec=null,Er!==null){for(h=0;h<Er.length;h++)if(g=Er[h],S=g.interleaved,S!==null){g.interleaved=null;var w=S.next,A=g.pending;if(A!==null){var O=A.next;A.next=w,S.next=O}g.pending=S}Er=null}return u}function O4(u,h){do{var g=xn;try{if(im(),hf.current=vf,ff){for(var S=on.memoizedState;S!==null;){var w=S.queue;w!==null&&(w.pending=null),S=S.next}ff=!1}if(ka=0,Cn=zn=on=null,vc=!1,yc=0,Bm.current=null,g===null||g.return===null){wn=1,Ac=h,xn=null;break}e:{var A=u,O=g.return,X=g,le=h;if(h=Un,X.flags|=32768,le!==null&&typeof le=="object"&&typeof le.then=="function"){var we=le,ze=X,ut=ze.tag;if(!(ze.mode&1)&&(ut===0||ut===11||ut===15)){var Ze=ze.alternate;Ze?(ze.updateQueue=Ze.updateQueue,ze.memoizedState=Ze.memoizedState,ze.lanes=Ze.lanes):(ze.updateQueue=null,ze.memoizedState=null)}var Bt=r4(O);if(Bt!==null){Bt.flags&=-257,s4(Bt,O,X,A,h),Bt.mode&1&&i4(A,we,h),h=Bt,le=we;var Xe=h.updateQueue;if(Xe===null){var Gn=new Set;Gn.add(le),h.updateQueue=Gn}else Xe.add(le);break e}else{if(!(h&1)){i4(A,we,h),qm();break e}le=Error(o(426))}}else if(Yt&&X.mode&1){var Gi=r4(O);if(Gi!==null){!(Gi.flags&65536)&&(Gi.flags|=256),s4(Gi,O,X,A,h),dm(le);break e}}A=le,wn!==4&&(wn=2),Ec===null?Ec=[A]:Ec.push(A),le=wm(le,X),X=O;do{switch(X.tag){case 3:X.flags|=65536,h&=-h,X.lanes|=h;var te=t4(X,le,h);b3(X,te);break e;case 1:A=le;var K=X.type,se=X.stateNode;if(!(X.flags&128)&&(typeof K.getDerivedStateFromError=="function"||se!==null&&typeof se.componentDidCatch=="function"&&(Cs===null||!Cs.has(se)))){X.flags|=65536,h&=-h,X.lanes|=h;var Fe=n4(X,A,h);b3(X,Fe);break e}}X=X.return}while(X!==null)}V4(g)}catch(je){h=je,xn===g&&g!==null&&(xn=g=g.return);continue}break}while(!0)}function k4(){var u=Lf.current;return Lf.current=vf,u===null?vf:u}function qm(){(wn===0||wn===3||wn===2)&&(wn=4),yn===null||!(Va&268435455)&&!(If&268435455)||Ls(yn,Un)}function Bf(u,h){var g=_t;_t|=2;var S=k4();yn===u&&Un===h||bo(u,h);do try{JC();break}catch(w){O4(u,w)}while(!0);if(im(),_t=g,Lf.current=S,xn!==null)throw Error(o(261));return yn=null,Un=0,wn}function JC(){for(;xn!==null;)B4(xn)}function QC(){for(;xn!==null&&!TC();)B4(xn)}function B4(u){var h=$4(u.alternate,u,Ci);u.memoizedProps=u.pendingProps,h===null?V4(u):xn=h,Bm.current=null}function V4(u){var h=u;do{var g=h.alternate;if(u=h.return,h.flags&32768){if(g=WC(g,h),g!==null){g.flags&=32767,xn=g;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{wn=6,xn=null;return}}else if(g=HC(g,h,Ci),g!==null){xn=g;return}if(h=h.sibling,h!==null){xn=h;return}xn=h=u}while(h!==null);wn===0&&(wn=5)}function wo(u,h){var g=Lt,S=dn.transition;try{dn.transition=null,Lt=1,eP(u,h,g)}finally{dn.transition=S,Lt=g}return null}function eP(u,h,g){do To();while(Ps!==null);if(_t&6)throw Error(o(327));var S=u.finishedWork,w=u.finishedLanes;if(S===null)return null;if(u.finishedWork=null,u.finishedLanes=0,S===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var A=S.lanes|S.childLanes;if(wC(u,A),u===yn&&(xn=yn=null,Un=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||Nf||(Nf=!0,G4(em,function(){return To(),null})),A=(S.flags&15990)!==0,S.subtreeFlags&15990||A){A=dn.transition,dn.transition=null;var O=Lt;Lt=1;var X=_t;_t|=4,Bm.current=null,XC(u,S),qC(u,S),oe(u.containerInfo),u.current=S,YC(S),AC(),_t=X,Lt=O,dn.transition=A}else u.current=S;if(Nf&&(Nf=!1,Ps=u,Uf=w),A=u.pendingLanes,A===0&&(Cs=null),PC(S.stateNode),pi(u,En()),h!==null)for(g=u.onRecoverableError,S=0;S<h.length;S++)g(h[S]);if(Df)throw Df=!1,u=$m,$m=null,u;return Uf&1&&u.tag!==0&&To(),A=u.pendingLanes,A&1?u===Gm?Cc++:(Cc=0,Gm=u):Cc=0,Ar(),null}function To(){if(Ps!==null){var u=y3(Uf),h=dn.transition,g=Lt;try{if(dn.transition=null,Lt=16>u?16:u,Ps===null)var S=!1;else{if(u=Ps,Ps=null,Uf=0,_t&6)throw Error(o(331));var w=_t;for(_t|=4,De=u.current;De!==null;){var A=De,O=A.child;if(De.flags&16){var X=A.deletions;if(X!==null){for(var le=0;le<X.length;le++){var we=X[le];for(De=we;De!==null;){var ze=De;switch(ze.tag){case 0:case 11:case 15:Mo(8,ze,A)}var ut=ze.child;if(ut!==null)ut.return=ze,De=ut;else for(;De!==null;){ze=De;var Ze=ze.sibling,Bt=ze.return;if(w4(ze),ze===we){De=null;break}if(Ze!==null){Ze.return=Bt,De=Ze;break}De=Bt}}}var Xe=A.alternate;if(Xe!==null){var Gn=Xe.child;if(Gn!==null){Xe.child=null;do{var Gi=Gn.sibling;Gn.sibling=null,Gn=Gi}while(Gn!==null)}}De=A}}if(A.subtreeFlags&2064&&O!==null)O.return=A,De=O;else e:for(;De!==null;){if(A=De,A.flags&2048)switch(A.tag){case 0:case 11:case 15:Mo(9,A,A.return)}var te=A.sibling;if(te!==null){te.return=A.return,De=te;break e}De=A.return}}var K=u.current;for(De=K;De!==null;){O=De;var se=O.child;if(O.subtreeFlags&2064&&se!==null)se.return=O,De=se;else e:for(O=K;De!==null;){if(X=De,X.flags&2048)try{switch(X.tag){case 0:case 11:case 15:wc(9,X)}}catch(je){mi(X,X.return,je)}if(X===O){De=null;break e}var Fe=X.sibling;if(Fe!==null){Fe.return=X.return,De=Fe;break e}De=X.return}}if(_t=w,Ar(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(Jh,u)}catch{}S=!0}return S}finally{Lt=g,dn.transition=h}}return!1}function z4(u,h,g){h=wm(g,h),h=t4(u,h,1),Es(u,h),h=ti(),u=kf(u,1),u!==null&&(hc(u,1,h),pi(u,h))}function mi(u,h,g){if(u.tag===3)z4(u,u,g);else for(;h!==null;){if(h.tag===3){z4(h,u,g);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Cs===null||!Cs.has(S))){u=wm(g,u),u=n4(h,u,1),Es(h,u),u=ti(),h=kf(h,1),h!==null&&(hc(h,1,u),pi(h,u));break}}h=h.return}}function tP(u,h,g){var S=u.pingCache;S!==null&&S.delete(h),h=ti(),u.pingedLanes|=u.suspendedLanes&g,yn===u&&(Un&g)===g&&(wn===4||wn===3&&(Un&130023424)===Un&&500>En()-zm?bo(u,0):Vm|=g),pi(u,h)}function H4(u,h){h===0&&(u.mode&1?(h=Kh,Kh<<=1,!(Kh&130023424)&&(Kh=4194304)):h=1);var g=ti();u=kf(u,h),u!==null&&(hc(u,h,g),pi(u,g))}function nP(u){var h=u.memoizedState,g=0;h!==null&&(g=h.retryLane),H4(u,g)}function iP(u,h){var g=0;switch(u.tag){case 13:var S=u.stateNode,w=u.memoizedState;w!==null&&(g=w.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(h),H4(u,g)}var $4;$4=function(u,h,g){if(u!==null)if(u.memoizedProps!==h.pendingProps||bn.current)Ei=!0;else{if(!(u.lanes&g)&&!(h.flags&128))return Ei=!1,GC(u,h,g);Ei=!!(u.flags&131072)}else Ei=!1,Yt&&h.flags&1048576&&P3(h,lf,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var w=br(h,zt.current);La(h,g),w=xm(null,h,S,u,w,g);var A=_m();return h.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Pt(S)?(A=!0,Ts(h)):A=!1,h.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,om(h),w.updater=of,h.stateNode=w,w._reactInternals=h,lm(h,S,u,g),h=Em(null,h,S,!0,A,g)):(h.tag=0,Yt&&A&&cm(h),ei(null,h,w,g),h=h.child),h;case 16:S=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,w=S._init,S=w(S._payload),h.type=S,w=h.tag=sP(S),u=ir(S,u),w){case 0:h=Am(null,h,S,u,g);break e;case 1:h=d4(null,h,S,u,g);break e;case 11:h=l4(null,h,S,u,g);break e;case 14:h=c4(null,h,S,ir(S.type,u),g);break e}throw Error(o(306,S,""))}return h;case 0:return S=h.type,w=h.pendingProps,w=h.elementType===S?w:ir(S,w),Am(u,h,S,w,g);case 1:return S=h.type,w=h.pendingProps,w=h.elementType===S?w:ir(S,w),d4(u,h,S,w,g);case 3:e:{if(p4(h),u===null)throw Error(o(387));S=h.pendingProps,A=h.memoizedState,w=A.element,M3(u,h),sf(h,S,null,g);var O=h.memoizedState;if(S=O.element,ue&&A.isDehydrated)if(A={element:S,isDehydrated:!1,cache:O.cache,transitions:O.transitions},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){w=Error(o(423)),h=m4(u,h,S,g,w);break e}else if(S!==w){w=Error(o(424)),h=m4(u,h,S,g,w);break e}else for(ue&&(Ai=Xh(h.stateNode.containerInfo),Ti=h,Yt=!0,rr=null,fc=!1),g=U3(h,null,S,g),h.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Na(),S===w){h=Qr(u,h,g);break e}ei(u,h,S,g)}h=h.child}return h;case 5:return F3(h),u===null&&fm(h),S=h.type,w=h.pendingProps,A=u!==null?u.memoizedProps:null,O=w.children,ge(S,w)?O=null:A!==null&&ge(S,A)&&(h.flags|=32),f4(u,h),ei(u,h,O,g),h.child;case 6:return u===null&&fm(h),null;case 13:return g4(u,h,g);case 4:return pm(h,h.stateNode.containerInfo),S=h.pendingProps,u===null?h.child=Ua(h,null,S,g):ei(u,h,S,g),h.child;case 11:return S=h.type,w=h.pendingProps,w=h.elementType===S?w:ir(S,w),l4(u,h,S,w,g);case 7:return ei(u,h,h.pendingProps,g),h.child;case 8:return ei(u,h,h.pendingProps.children,g),h.child;case 12:return ei(u,h,h.pendingProps.children,g),h.child;case 10:e:{if(S=h.type._context,w=h.pendingProps,A=h.memoizedProps,O=w.value,S3(h,S,O),A!==null)if(Tr(A.value,O)){if(A.children===w.children&&!bn.current){h=Qr(u,h,g);break e}}else for(A=h.child,A!==null&&(A.return=h);A!==null;){var X=A.dependencies;if(X!==null){O=A.child;for(var le=X.firstContext;le!==null;){if(le.context===S){if(A.tag===1){le=Yr(-1,g&-g),le.tag=2;var we=A.updateQueue;if(we!==null){we=we.shared;var ze=we.pending;ze===null?le.next=le:(le.next=ze.next,ze.next=le),we.pending=le}}A.lanes|=g,le=A.alternate,le!==null&&(le.lanes|=g),sm(A.return,g,h),X.lanes|=g;break}le=le.next}}else if(A.tag===10)O=A.type===h.type?null:A.child;else if(A.tag===18){if(O=A.return,O===null)throw Error(o(341));O.lanes|=g,X=O.alternate,X!==null&&(X.lanes|=g),sm(O,g,h),O=A.sibling}else O=A.child;if(O!==null)O.return=A;else for(O=A;O!==null;){if(O===h){O=null;break}if(A=O.sibling,A!==null){A.return=O.return,O=A;break}O=O.return}A=O}ei(u,h,w.children,g),h=h.child}return h;case 9:return w=h.type,S=h.pendingProps.children,La(h,g),w=Oi(w),S=S(w),h.flags|=1,ei(u,h,S,g),h.child;case 14:return S=h.type,w=ir(S,h.pendingProps),w=ir(S.type,w),c4(u,h,S,w,g);case 15:return u4(u,h,h.type,h.pendingProps,g);case 17:return S=h.type,w=h.pendingProps,w=h.elementType===S?w:ir(S,w),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Pt(S)?(u=!0,Ts(h)):u=!1,La(h,g),E3(h,S,w),lm(h,S,w,g),Em(null,h,S,!0,u,g);case 19:return _4(u,h,g);case 22:return h4(u,h,g)}throw Error(o(156,h.tag))};function G4(u,h){return J0(u,h)}function rP(u,h,g,S){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $i(u,h,g,S){return new rP(u,h,g,S)}function Ym(u){return u=u.prototype,!(!u||!u.isReactComponent)}function sP(u){if(typeof u=="function")return Ym(u)?1:0;if(u!=null){if(u=u.$$typeof,u===_)return 11;if(u===b)return 14}return 2}function Is(u,h){var g=u.alternate;return g===null?(g=$i(u.tag,h,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=h,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&14680064,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,h=u.dependencies,g.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g}function Vf(u,h,g,S,w,A){var O=2;if(S=u,typeof u=="function")Ym(u)&&(O=1);else if(typeof u=="string")O=5;else e:switch(u){case f:return Ao(g.children,w,A,h);case p:O=8,w|=8;break;case d:return u=$i(12,g,h,w|2),u.elementType=d,u.lanes=A,u;case x:return u=$i(13,g,h,w),u.elementType=x,u.lanes=A,u;case y:return u=$i(19,g,h,w),u.elementType=y,u.lanes=A,u;case T:return zf(g,w,A,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:O=10;break e;case v:O=9;break e;case _:O=11;break e;case b:O=14;break e;case M:O=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=$i(O,g,h,w),h.elementType=u,h.type=S,h.lanes=A,h}function Ao(u,h,g,S){return u=$i(7,u,S,h),u.lanes=g,u}function zf(u,h,g,S){return u=$i(22,u,S,h),u.elementType=T,u.lanes=g,u.stateNode={},u}function Km(u,h,g){return u=$i(6,u,null,h),u.lanes=g,u}function Zm(u,h,g){return h=$i(4,u.children!==null?u.children:[],u.key,h),h.lanes=g,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function oP(u,h,g,S,w){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Je,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K0(0),this.expirationTimes=K0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K0(0),this.identifierPrefix=S,this.onRecoverableError=w,ue&&(this.mutableSourceEagerHydrationData=null)}function W4(u,h,g,S,w,A,O,X,le){return u=new oP(u,h,g,X,le),h===1?(h=1,A===!0&&(h|=8)):h=0,A=$i(3,null,null,h),u.current=A,A.stateNode=u,A.memoizedState={element:S,isDehydrated:g,cache:null,transitions:null},om(A),u}function j4(u){if(!u)return wt;u=u._reactInternals;e:{if(R(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Pt(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var g=u.type;if(Pt(g))return Qn(u,g,h)}return h}function X4(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=B(h),u===null?null:u.stateNode}function q4(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<h?g:h}}function Jm(u,h){q4(u,h),(u=u.alternate)&&q4(u,h)}function aP(u){return u=B(u),u===null?null:u.stateNode}function lP(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=ti();Hi(u,134217728,h),Jm(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=ti(),g=Rs(u);Hi(u,g,h),Jm(u,g)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var g=uc(h.pendingLanes);g!==0&&(Z0(h,g|1),pi(h,En()),!(_t&6)&&(za(),Ar()))}break;case 13:var S=ti();F4(function(){return Hi(u,1,S)}),Jm(u,1)}},t.batchedUpdates=function(u,h){var g=_t;_t|=1;try{return u(h)}finally{_t=g,_t===0&&(za(),Qh&&Ar())}},t.createComponentSelector=function(u){return{$$typeof:Af,value:u}},t.createContainer=function(u,h,g,S,w,A,O){return W4(u,h,!1,null,g,S,w,A,O)},t.createHasPseudoClassSelector=function(u){return{$$typeof:Ef,value:u}},t.createHydrationContainer=function(u,h,g,S,w,A,O,X,le){return u=W4(g,S,!0,u,w,A,O,X,le),u.context=j4(null),g=u.current,S=ti(),w=Rs(g),A=Yr(S,w),A.callback=h??null,Es(g,A),u.current.lanes=w,hc(u,w,S),pi(u,S),u},t.createPortal=function(u,h,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:h,implementation:g}},t.createRoleSelector=function(u){return{$$typeof:Cf,value:u}},t.createTestNameSelector=function(u){return{$$typeof:Pf,value:u}},t.createTextSelector=function(u){return{$$typeof:Rf,value:u}},t.deferredUpdates=function(u){var h=Lt,g=dn.transition;try{return dn.transition=null,Lt=16,u()}finally{Lt=h,dn.transition=g}},t.discreteUpdates=function(u,h,g,S,w){var A=Lt,O=dn.transition;try{return dn.transition=null,Lt=1,u(h,g,S,w)}finally{Lt=A,dn.transition=O,_t===0&&za()}},t.findAllNodes=km,t.findBoundingRects=function(u,h){if(!V)throw Error(o(363));h=km(u,h),u=[];for(var g=0;g<h.length;g++)u.push(re(h[g]));for(h=u.length-1;0<h;h--){g=u[h];for(var S=g.x,w=S+g.width,A=g.y,O=A+g.height,X=h-1;0<=X;X--)if(h!==X){var le=u[X],we=le.x,ze=we+le.width,ut=le.y,Ze=ut+le.height;if(S>=we&&A>=ut&&w<=ze&&O<=Ze){u.splice(h,1);break}else if(S!==we||g.width!==le.width||Ze<A||ut>O){if(!(A!==ut||g.height!==le.height||ze<S||we>w)){we>S&&(le.width+=we-S,le.x=S),ze<w&&(le.width=w-we),u.splice(h,1);break}}else{ut>A&&(le.height+=ut-A,le.y=A),Ze<O&&(le.height=O-ut),u.splice(h,1);break}}}return u},t.findHostInstance=X4,t.findHostInstanceWithNoPortals=function(u){return u=D(u),u=u!==null?z(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return X4(u)},t.flushControlled=function(u){var h=_t;_t|=1;var g=dn.transition,S=Lt;try{dn.transition=null,Lt=1,u()}finally{Lt=S,dn.transition=g,_t=h,_t===0&&(za(),Ar())}},t.flushPassiveEffects=To,t.flushSync=F4,t.focusWithin=function(u,h){if(!V)throw Error(o(363));for(u=Um(u),h=D4(u,h),h=Array.from(h),u=0;u<h.length;){var g=h[u++];if(!de(g)){if(g.tag===5&&qe(g.stateNode))return!0;for(g=g.child;g!==null;)h.push(g),g=g.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Lt},t.getFindAllNodesFailureDescription=function(u,h){if(!V)throw Error(o(363));var g=0,S=[];u=[Um(u),0];for(var w=0;w<u.length;){var A=u[w++],O=u[w++],X=h[O];if((A.tag!==5||!de(A))&&(Fm(A,X)&&(S.push(Om(X)),O++,O>g&&(g=O)),O<h.length))for(A=A.child;A!==null;)u.push(A,O),A=A.sibling}if(g<h.length){for(u=[];g<h.length;g++)u.push(Om(h[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return $(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:aP,findFiberByHostInstance:u.findFiberByHostInstance||lP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Jh=h.inject(u),wr=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,g,S){if(!V)throw Error(o(363));u=km(u,h);var w=Re(u,g,S).disconnect;return{disconnect:function(){w()}}},t.registerMutableSourceForHydration=function(u,h){var g=h._getVersion;g=g(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,g]:u.mutableSourceEagerHydrationData.push(h,g)},t.runWithPriority=function(u,h){var g=Lt;try{return Lt=u,h()}finally{Lt=g}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,g,S){var w=h.current,A=ti(),O=Rs(w);return g=j4(g),h.context===null?h.context=g:h.pendingContext=g,h=Yr(A,O),h.payload={element:u},S=S===void 0?null:S,S!==null&&(h.callback=S),Es(w,h),u=Hi(w,O,A),u!==null&&rf(u,w,O),O},t};ET.exports=SG;var MG=ET.exports;const bG=Sa(MG),RT={};function wG(n,e){function t(f,{args:p=[],attach:d,...m},v){let _=`${f[0].toUpperCase()}${f.slice(1)}`,x;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=m.object;x=jc(y,{type:f,root:v,attach:d,primitive:!0})}else{const y=RT[_];if(!y)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");x=jc(new y(...p),{type:f,root:v,attach:d,memoizedProps:{args:p}})}return x.__r3f.attach===void 0&&(x instanceof yt?x.__r3f.attach="geometry":x instanceof Bn&&(x.__r3f.attach="material")),_!=="inject"&&rg(x,m),x}function i(f,p){let d=!1;if(p){var m,v;(m=p.__r3f)!=null&&m.attach?ig(f,p,p.__r3f.attach):p.isObject3D&&f.isObject3D&&(f.add(p),d=!0),d||(v=f.__r3f)==null||v.objects.push(p),p.__r3f||jc(p,{}),p.__r3f.parent=f,ry(p),pl(p)}}function r(f,p,d){let m=!1;if(p){var v,_;if((v=p.__r3f)!=null&&v.attach)ig(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){p.parent=f,p.dispatchEvent({type:"added"}),f.dispatchEvent({type:"childadded",child:p});const x=f.children.filter(b=>b!==p),y=x.indexOf(d);f.children=[...x.slice(0,y),p,...x.slice(y)],m=!0}m||(_=f.__r3f)==null||_.objects.push(p),p.__r3f||jc(p,{}),p.__r3f.parent=f,ry(p),pl(p)}}function s(f,p,d=!1){f&&[...f].forEach(m=>o(p,m,d))}function o(f,p,d){if(p){var m,v,_;if(p.__r3f&&(p.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(T=>T!==p)),(v=p.__r3f)!=null&&v.attach)h9(f,p,p.__r3f.attach);else if(p.isObject3D&&f.isObject3D){var x;f.remove(p),(x=p.__r3f)!=null&&x.root&&LG(cp(p),p)}const b=(_=p.__r3f)==null?void 0:_.primitive,M=!b&&(d===void 0?p.dispose!==null:d);if(!b){var y;s((y=p.__r3f)==null?void 0:y.objects,p,M),s(p.children,p,M)}if(delete p.__r3f,M&&p.dispose&&p.type!=="Scene"){const T=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ny.unstable_scheduleCallback(ny.unstable_IdlePriority,T):T()}pl(f)}}function a(f,p,d,m){var v;const _=(v=f.__r3f)==null?void 0:v.parent;if(!_)return;const x=t(p,d,f.__r3f.root);if(f.children){for(const y of f.children)y.__r3f&&i(x,y);f.children=f.children.filter(y=>!y.__r3f)}f.__r3f.objects.forEach(y=>i(x,y)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(_,f),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(_,x),x.raycast&&x.__r3f.eventCount&&cp(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(y=>{y!==null&&(y.stateNode=x,y.ref&&(typeof y.ref=="function"?y.ref(x):y.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:bG({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,p)=>{if(!p)return;const d=f.getState().scene;d.__r3f&&(d.__r3f.root=f,i(d,p))},removeChildFromContainer:(f,p)=>{p&&o(f.getState().scene,p)},insertInContainerBefore:(f,p,d)=>{if(!p||!d)return;const m=f.getState().scene;m.__r3f&&r(m,p,d)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var p;return!!((p=f==null?void 0:f.__r3f)!=null?p:{}).handlers},prepareUpdate(f,p,d,m){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==f)return[!0];{const{args:x=[],children:y,...b}=m,{args:M=[],children:T,...P}=d;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((L,I)=>L!==M[I]))return[!0];const E=IT(f,b,P,!0);return E.changes.length?[!1,E]:null}},commitUpdate(f,[p,d],m,v,_,x){p?a(f,m,_,x):rg(f,d)},commitMount(f,p,d,m){var v;const _=(v=f.__r3f)!=null?v:{};f.raycast&&_.handlers&&_.eventCount&&cp(f).getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>jc(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var p;const{attach:d,parent:m}=(p=f.__r3f)!=null?p:{};d&&m&&h9(m,f,d),f.isObject3D&&(f.visible=!1),pl(f)},unhideInstance(f,p){var d;const{attach:m,parent:v}=(d=f.__r3f)!=null?d:{};m&&v&&ig(v,f,m),(f.isObject3D&&p.visible==null||p.visible)&&(f.visible=!0),pl(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():iu.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&si.fun(performance.now)?performance.now:si.fun(Date.now)?Date.now:()=>0,scheduleTimeout:si.fun(setTimeout)?setTimeout:void 0,cancelTimeout:si.fun(clearTimeout)?clearTimeout:void 0}),applyProps:rg}}var a9,l9;const ng=n=>"colorSpace"in n||"outputColorSpace"in n,TG=()=>{var n;return(n=RT.ColorManagement)!=null?n:null};typeof window<"u"&&((a9=window.document)!=null&&a9.createElement||((l9=window.navigator)==null?void 0:l9.product)==="ReactNative")?H.useLayoutEffect:H.useEffect;class AG extends H.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}AG.getDerivedStateFromError=()=>({error:!0});const LT="__default",c9=new Map,EG=n=>n&&!!n.memoized&&!!n.changes;function cp(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const si={obj:n=>n===Object(n)&&!si.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(si.str(n)||si.num(n)||si.boo(n))return n===e;const s=si.obj(n);if(s&&i==="reference")return n===e;const o=si.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!si.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(si.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function jc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function iy(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const u9=/-\d+$/;function ig(n,e,t){if(si.str(t)){if(u9.test(t)){const s=t.replace(u9,""),{target:o,key:a}=iy(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=iy(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function h9(n,e,t){var i,r;if(si.str(t)){const{target:s,key:o}=iy(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function IT(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const f=n.__r3f,p=Object.entries(r),d=[];if(c){const v=Object.keys(l);for(let _=0;_<v.length;_++)r.hasOwnProperty(v[_])||p.unshift([v[_],LT+"remove"])}p.forEach(([v,_])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&v==="object"||si.equ(_,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return d.push([v,_,!0,[]]);let y=[];v.includes("-")&&(y=v.split("-")),d.push([v,_,!1,y]);for(const b in r){const M=r[b];b.startsWith(`${v}-`)&&d.push([b,M,!1,b.split("-")])}});const m={...r};return f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.args&&(m.args=f.memoizedProps.args),f!=null&&f.memoizedProps&&f!=null&&f.memoizedProps.attach&&(m.attach=f.memoizedProps.attach),{memoized:m,changes:d}}const CG=typeof process<"u"&&!1;function rg(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=EG(e)?e:IT(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let f=0;f<a.length;f++){let[p,d,m,v]=a[f];if(ng(n)){const b="srgb",M="srgb-linear";p==="encoding"?(p="colorSpace",d=d===3001?b:M):p==="outputEncoding"&&(p="outputColorSpace",d=d===3001?b:M)}let _=n,x=_[p];if(v.length&&(x=v.reduce((y,b)=>y[b],n),!(x&&x.set))){const[y,...b]=v.reverse();_=b.reverse().reduce((M,T)=>M[T],n),p=y}if(d===LT+"remove")if(_.constructor){let y=c9.get(_.constructor);y||(y=new _.constructor,c9.set(_.constructor,y)),d=y[p]}else d=0;if(m&&i)d?i.handlers[p]=d:delete i.handlers[p],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof sa)){if(Array.isArray(d))x.fromArray?x.fromArray(d):x.set(...d);else if(x.copy&&d&&d.constructor&&(CG?x.constructor.name===d.constructor.name:x.constructor===d.constructor))x.copy(d);else if(d!==void 0){const y=x instanceof Ve;!y&&x.setScalar?x.setScalar(d):x instanceof sa&&d instanceof sa?x.mask=d.mask:x.set(d),!TG()&&s&&!s.linear&&y&&x.convertSRGBToLinear()}}else if(_[p]=d,_[p]instanceof rn&&_[p].format===ai&&_[p].type===Wr&&s){const y=_[p];ng(y)&&ng(s.gl)?y.colorSpace=s.gl.outputColorSpace:y.encoding=s.gl.outputEncoding}pl(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const f=cp(n).getState().internal,p=f.interaction.indexOf(n);p>-1&&f.interaction.splice(p,1),i.eventCount&&f.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&ry(n),n}function pl(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function ry(n){n.onUpdate==null||n.onUpdate(n)}function PG(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return iu.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return iu.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return iu.ContinuousEventPriority;default:return iu.DefaultEventPriority}}function RG(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function LG(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{RG(t.capturedMap,e,i,r)})}function IG(n,e){const t={callback:n};return e.add(t),()=>void e.delete(t)}let DG=new Set;const NG=n=>IG(n,DG),UG=new Map,{reconciler:FG,applyProps:OG}=wG(UG,PG);FG.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:H.version});var kG=Object.defineProperty,BG=(n,e)=>{for(var t in e)kG(n,t,{get:e[t],enumerable:!0})},jl={};BG(jl,{assign:()=>GG,colors:()=>Qs,createStringInterpolator:()=>bx,skipAnimation:()=>BT,to:()=>kT,willAdvance:()=>wx});var vx=Oh(),Ct=n=>Fh(n,vx),yx=Oh();Ct.write=n=>Fh(n,yx);var N0=Oh();Ct.onStart=n=>Fh(n,N0);var xx=Oh();Ct.onFrame=n=>Fh(n,xx);var _x=Oh();Ct.onFinish=n=>Fh(n,_x);var Ul=[];Ct.setTimeout=(n,e)=>{const t=Ct.now()+e,i=()=>{const s=Ul.findIndex(o=>o.cancel==i);~s&&Ul.splice(s,1),Js-=~s?1:0},r={time:t,handler:n,cancel:i};return Ul.splice(DT(t),0,r),Js+=1,NT(),r};var DT=n=>~(~Ul.findIndex(e=>e.time>n)||~Ul.length);Ct.cancel=n=>{N0.delete(n),xx.delete(n),_x.delete(n),vx.delete(n),yx.delete(n)};Ct.sync=n=>{sy=!0,Ct.batchedUpdates(n),sy=!1};Ct.throttle=n=>{let e;function t(){try{n(...e)}finally{e=null}}function i(...r){e=r,Ct.onStart(t)}return i.handler=n,i.cancel=()=>{N0.delete(t),e=null},i};var Sx=typeof window<"u"?window.requestAnimationFrame:()=>{};Ct.use=n=>Sx=n;Ct.now=typeof performance<"u"?()=>performance.now():Date.now;Ct.batchedUpdates=n=>n();Ct.catch=console.error;Ct.frameLoop="always";Ct.advance=()=>{Ct.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):FT()};var Zs=-1,Js=0,sy=!1;function Fh(n,e){sy?(e.delete(n),n(0)):(e.add(n),NT())}function NT(){Zs<0&&(Zs=0,Ct.frameLoop!=="demand"&&Sx(UT))}function VG(){Zs=-1}function UT(){~Zs&&(Sx(UT),Ct.batchedUpdates(FT))}function FT(){const n=Zs;Zs=Ct.now();const e=DT(Zs);if(e&&(OT(Ul.splice(0,e),t=>t.handler()),Js-=e),!Js){VG();return}N0.flush(),vx.flush(n?Math.min(64,Zs-n):16.667),xx.flush(),yx.flush(),_x.flush()}function Oh(){let n=new Set,e=n;return{add(t){Js+=e==n&&!n.has(t)?1:0,n.add(t)},delete(t){return Js-=e==n&&n.has(t)?1:0,n.delete(t)},flush(t){e.size&&(n=new Set,Js-=e.size,OT(e,i=>i(t)&&n.add(i)),Js+=n.size,e=n)}}}function OT(n,e){n.forEach(t=>{try{e(t)}catch(i){Ct.catch(i)}})}function zG(){}var HG=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),fn={arr:Array.isArray,obj:n=>!!n&&n.constructor.name==="Object",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",und:n=>n===void 0};function $G(n,e){if(fn.arr(n)){if(!fn.arr(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}return n===e}var ms=(n,e)=>n.forEach(e);function oy(n,e,t){if(fn.arr(n)){for(let i=0;i<n.length;i++)e.call(t,n[i],`${i}`);return}for(const i in n)n.hasOwnProperty(i)&&e.call(t,n[i],i)}var Hd=n=>fn.und(n)?[]:fn.arr(n)?n:[n],Mx=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),bx,kT,Qs=null,BT=!1,wx=zG,GG=n=>{n.to&&(kT=n.to),n.now&&(Ct.now=n.now),n.colors!==void 0&&(Qs=n.colors),n.skipAnimation!=null&&(BT=n.skipAnimation),n.createStringInterpolator&&(bx=n.createStringInterpolator),n.requestAnimationFrame&&Ct.use(n.requestAnimationFrame),n.batchedUpdates&&(Ct.batchedUpdates=n.batchedUpdates),n.willAdvance&&(wx=n.willAdvance),n.frameLoop&&(Ct.frameLoop=n.frameLoop)},mu=new Set,Zi=[],sg=[],Up=0,Tx={get idle(){return!mu.size&&!Zi.length},start(n){Up>n.priority?(mu.add(n),Ct.onStart(WG)):(VT(n),Ct(ay))},advance:ay,sort(n){if(Up)Ct.onFrame(()=>Tx.sort(n));else{const e=Zi.indexOf(n);~e&&(Zi.splice(e,1),zT(n))}},clear(){Zi=[],mu.clear()}};function WG(){mu.forEach(VT),mu.clear(),Ct(ay)}function VT(n){Zi.includes(n)||zT(n)}function zT(n){Zi.splice(jG(Zi,e=>e.priority>n.priority),0,n)}function ay(n){const e=sg;for(let t=0;t<Zi.length;t++){const i=Zi[t];Up=i.priority,i.idle||(wx(i),i.advance(n),i.idle||e.push(i))}return Up=0,sg=Zi,sg.length=0,Zi=e,Zi.length>0}function jG(n,e){const t=n.findIndex(e);return t<0?n.length:t}var XG={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},gr="[-+]?\\d*\\.?\\d+",Fp=gr+"%";function U0(...n){return"\\(\\s*("+n.join(")\\s*,\\s*(")+")\\s*\\)"}var qG=new RegExp("rgb"+U0(gr,gr,gr)),YG=new RegExp("rgba"+U0(gr,gr,gr,gr)),KG=new RegExp("hsl"+U0(gr,Fp,Fp)),ZG=new RegExp("hsla"+U0(gr,Fp,Fp,gr)),JG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,QG=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,eW=/^#([0-9a-fA-F]{6})$/,tW=/^#([0-9a-fA-F]{8})$/;function nW(n){let e;return typeof n=="number"?n>>>0===n&&n>=0&&n<=4294967295?n:null:(e=eW.exec(n))?parseInt(e[1]+"ff",16)>>>0:Qs&&Qs[n]!==void 0?Qs[n]:(e=qG.exec(n))?(hl(e[1])<<24|hl(e[2])<<16|hl(e[3])<<8|255)>>>0:(e=YG.exec(n))?(hl(e[1])<<24|hl(e[2])<<16|hl(e[3])<<8|p9(e[4]))>>>0:(e=JG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=tW.exec(n))?parseInt(e[1],16)>>>0:(e=QG.exec(n))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=KG.exec(n))?(f9(d9(e[1]),$d(e[2]),$d(e[3]))|255)>>>0:(e=ZG.exec(n))?(f9(d9(e[1]),$d(e[2]),$d(e[3]))|p9(e[4]))>>>0:null}function og(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function f9(n,e,t){const i=t<.5?t*(1+e):t+e-t*e,r=2*t-i,s=og(r,i,n+1/3),o=og(r,i,n),a=og(r,i,n-1/3);return Math.round(s*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function hl(n){const e=parseInt(n,10);return e<0?0:e>255?255:e}function d9(n){return(parseFloat(n)%360+360)%360/360}function p9(n){const e=parseFloat(n);return e<0?0:e>1?255:Math.round(e*255)}function $d(n){const e=parseFloat(n);return e<0?0:e>100?1:e/100}function m9(n){let e=nW(n);if(e===null)return n;e=e||0;const t=(e&4278190080)>>>24,i=(e&16711680)>>>16,r=(e&65280)>>>8,s=(e&255)/255;return`rgba(${t}, ${i}, ${r}, ${s})`}var Qu=(n,e,t)=>{if(fn.fun(n))return n;if(fn.arr(n))return Qu({range:n,output:e,extrapolate:t});if(fn.str(n.output[0]))return bx(n);const i=n,r=i.output,s=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",l=i.easing||(c=>c);return c=>{const f=rW(c,s);return iW(c,s[f],s[f+1],r[f],r[f+1],l,o,a,i.map)}};function iW(n,e,t,i,r,s,o,a,l){let c=l?l(n):n;if(c<e){if(o==="identity")return c;o==="clamp"&&(c=e)}if(c>t){if(a==="identity")return c;a==="clamp"&&(c=t)}return i===r?i:e===t?n<=e?i:r:(e===-1/0?c=-c:t===1/0?c=c-e:c=(c-e)/(t-e),c=s(c),i===-1/0?c=-c:r===1/0?c=c+i:c=c*(r-i)+i,c)}function rW(n,e){for(var t=1;t<e.length-1&&!(e[t]>=n);++t);return t-1}var eh=Symbol.for("FluidValue.get"),th=Symbol.for("FluidValue.observers"),Op=n=>!!(n&&n[eh]),kp=n=>n&&n[eh]?n[eh]():n;function sW(n,e){n.eventObserved?n.eventObserved(e):n(e)}function ly(n,e){const t=n[th];t&&t.forEach(i=>{sW(i,e)})}var oW=class{constructor(n){if(!n&&!(n=this.get))throw Error("Unknown getter");aW(this,n)}},aW=(n,e)=>$T(n,eh,e);function HT(n,e){if(n[eh]){let t=n[th];t||$T(n,th,t=new Set),t.has(e)||(t.add(e),n.observerAdded&&n.observerAdded(t.size,e))}return e}function cy(n,e){const t=n[th];if(t&&t.has(e)){const i=t.size-1;i?t.delete(e):n[th]=null,n.observerRemoved&&n.observerRemoved(i,e)}}var $T=(n,e,t)=>Object.defineProperty(n,e,{value:t,writable:!0,configurable:!0}),up=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,lW=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,g9=new RegExp(`(${up.source})(%|[a-z]+)`,"i"),cW=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,F0=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,GT=n=>{const[e,t]=uW(n);if(!e||Mx())return n;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(t&&t.startsWith("--")){const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);return r||n}else{if(t&&F0.test(t))return GT(t);if(t)return t}return n},uW=n=>{const e=F0.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]},ag,hW=(n,e,t,i,r)=>`rgba(${Math.round(e)}, ${Math.round(t)}, ${Math.round(i)}, ${r})`,WT=n=>{ag||(ag=Qs?new RegExp(`(${Object.keys(Qs).join("|")})(?!\\w)`,"g"):/^\b$/);const e=n.output.map(s=>kp(s).replace(F0,GT).replace(lW,m9).replace(ag,m9)),t=e.map(s=>s.match(up).map(Number)),r=t[0].map((s,o)=>t.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(s=>Qu({...n,output:s}));return s=>{var l;const o=!g9.test(e[0])&&((l=e.find(c=>g9.test(c)))==null?void 0:l.replace(up,""));let a=0;return e[0].replace(up,()=>`${r[a++](s)}${o||""}`).replace(cW,hW)}},jT="react-spring: ",XT=n=>{const e=n;let t=!1;if(typeof e!="function")throw new TypeError(`${jT}once requires a function parameter`);return(...i)=>{t||(e(...i),t=!0)}},fW=XT(console.warn);function dW(){fW(`${jT}The "interpolate" function is deprecated in v9 (use "to" instead)`)}XT(console.warn);function qT(n){return fn.str(n)&&(n[0]=="#"||/\d/.test(n)||!Mx()&&F0.test(n)||n in(Qs||{}))}var YT=Mx()?H.useEffect:H.useLayoutEffect,pW=()=>{const n=H.useRef(!1);return YT(()=>(n.current=!0,()=>{n.current=!1}),[]),n};function mW(){const n=H.useState()[1],e=pW();return()=>{e.current&&n(Math.random())}}function gW(n,e){const[t]=H.useState(()=>({inputs:e,result:n()})),i=H.useRef(),r=i.current;let s=r;return s?e&&s.inputs&&vW(e,s.inputs)||(s={inputs:e,result:n()}):s=t,H.useEffect(()=>{i.current=s,r==t&&(t.inputs=t.result=void 0)},[s]),s.result}function vW(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}var yW=n=>H.useEffect(n,xW),xW=[],nh=Symbol.for("Animated:node"),_W=n=>!!n&&n[nh]===n,Ax=n=>n&&n[nh],KT=(n,e)=>HG(n,nh,e),Ex=n=>n&&n[nh]&&n[nh].getPayload(),ZT=class{constructor(){KT(this,this)}getPayload(){return this.payload||[]}},O0=class extends ZT{constructor(n){super(),this._value=n,this.done=!0,this.durationProgress=0,fn.num(this._value)&&(this.lastPosition=this._value)}static create(n){return new O0(n)}getPayload(){return[this]}getValue(){return this._value}setValue(n,e){return fn.num(n)&&(this.lastPosition=n,e&&(n=Math.round(n/e)*e,this.done&&(this.lastPosition=n))),this._value===n?!1:(this._value=n,!0)}reset(){const{done:n}=this;this.done=!1,fn.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,n&&(this.lastVelocity=null),this.v0=null)}},Cx=class extends O0{constructor(n){super(0),this._string=null,this._toString=Qu({output:[n,n]})}static create(n){return new Cx(n)}getValue(){const n=this._string;return n??(this._string=this._toString(this._value))}setValue(n){if(fn.str(n)){if(n==this._string)return!1;this._string=n,this._value=1}else if(super.setValue(n))this._string=null;else return!1;return!0}reset(n){n&&(this._toString=Qu({output:[this.getValue(),n]})),this._value=0,super.reset()}},Bp={dependencies:null},Px=class extends ZT{constructor(n){super(),this.source=n,this.setValue(n)}getValue(n){const e={};return oy(this.source,(t,i)=>{_W(t)?e[i]=t.getValue(n):Op(t)?e[i]=kp(t):n||(e[i]=t)}),e}setValue(n){this.source=n,this.payload=this._makePayload(n)}reset(){this.payload&&ms(this.payload,n=>n.reset())}_makePayload(n){if(n){const e=new Set;return oy(n,this._addToPayload,e),Array.from(e)}}_addToPayload(n){Bp.dependencies&&Op(n)&&Bp.dependencies.add(n);const e=Ex(n);e&&ms(e,t=>this.add(t))}},JT=class extends Px{constructor(n){super(n)}static create(n){return new JT(n)}getValue(){return this.source.map(n=>n.getValue())}setValue(n){const e=this.getPayload();return n.length==e.length?e.map((t,i)=>t.setValue(n[i])).some(Boolean):(super.setValue(n.map(SW)),!0)}};function SW(n){return(qT(n)?Cx:O0).create(n)}function MW(n){const e=Ax(n);return e?e.constructor:fn.arr(n)?JT:qT(n)?Cx:O0}var v9=(n,e)=>{const t=!fn.fun(n)||n.prototype&&n.prototype.isReactComponent;return H.forwardRef((i,r)=>{const s=H.useRef(null),o=t&&H.useCallback(v=>{s.current=TW(r,v)},[r]),[a,l]=wW(i,e),c=mW(),f=()=>{const v=s.current;if(t&&!v)return;(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&c()},p=new bW(f,l),d=H.useRef();YT(()=>(d.current=p,ms(l,v=>HT(v,p)),()=>{d.current&&(ms(d.current.deps,v=>cy(v,d.current)),Ct.cancel(d.current.update))})),H.useEffect(f,[]),yW(()=>()=>{const v=d.current;ms(v.deps,_=>cy(_,v))});const m=e.getComponentProps(a.getValue());return H.createElement(n,{...m,ref:o})})},bW=class{constructor(n,e){this.update=n,this.deps=e}eventObserved(n){n.type=="change"&&Ct.write(this.update)}};function wW(n,e){const t=new Set;return Bp.dependencies=t,n.style&&(n={...n,style:e.createAnimatedStyle(n.style)}),n=new Px(n),Bp.dependencies=null,[n,t]}function TW(n,e){return n&&(fn.fun(n)?n(e):n.current=e),e}var y9=Symbol.for("AnimatedComponent"),AW=(n,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:t=r=>new Px(r),getComponentProps:i=r=>r}={})=>{const r={applyAnimatedValues:e,createAnimatedStyle:t,getComponentProps:i},s=o=>{const a=x9(o)||"Anonymous";return fn.str(o)?o=s[o]||(s[o]=v9(o,r)):o=o[y9]||(o[y9]=v9(o,r)),o.displayName=`Animated(${a})`,o};return oy(n,(o,a)=>{fn.arr(n)&&(a=x9(o)),s[a]=s(o)}),{animated:s}},x9=n=>fn.str(n)?n:n&&fn.str(n.displayName)?n.displayName:fn.fun(n)&&n.name||null,_9=n=>n instanceof QT,EW=1,QT=class extends oW{constructor(){super(...arguments),this.id=EW++,this._priority=0}get priority(){return this._priority}set priority(n){this._priority!=n&&(this._priority=n,this._onPriorityChange(n))}get(){const n=Ax(this);return n&&n.getValue()}to(...n){return jl.to(this,n)}interpolate(...n){return dW(),jl.to(this,n)}toJSON(){return this.get()}observerAdded(n){n==1&&this._attach()}observerRemoved(n){n==0&&this._detach()}_attach(){}_detach(){}_onChange(n,e=!1){ly(this,{type:"change",parent:this,value:n,idle:e})}_onPriorityChange(n){this.idle||Tx.sort(this),ly(this,{type:"priority",parent:this,priority:n})}},Rx=({children:n,...e})=>{const t=H.useContext(Vp),i=e.pause||!!t.pause,r=e.immediate||!!t.immediate;e=gW(()=>({pause:i,immediate:r}),[i,r]);const{Provider:s}=Vp;return H.createElement(s,{value:e},n)},Vp=CW(Rx,{});Rx.Provider=Vp.Provider;Rx.Consumer=Vp.Consumer;function CW(n,e){return Object.assign(n,H.createContext(e)),n.Provider._context=n,n.Consumer._context=n,n}var PW=class extends QT{constructor(n,e){super(),this.source=n,this.idle=!0,this._active=new Set,this.calc=Qu(...e);const t=this._get(),i=MW(t);KT(this,i.create(t))}advance(n){const e=this._get(),t=this.get();$G(e,t)||(Ax(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&S9(this._active)&&lg(this)}_get(){const n=fn.arr(this.source)?this.source.map(kp):Hd(kp(this.source));return this.calc(...n)}_start(){this.idle&&!S9(this._active)&&(this.idle=!1,ms(Ex(this),n=>{n.done=!1}),jl.skipAnimation?(Ct.batchedUpdates(()=>this.advance()),lg(this)):Tx.start(this))}_attach(){let n=1;ms(Hd(this.source),e=>{Op(e)&&HT(e,this),_9(e)&&(e.idle||this._active.add(e),n=Math.max(n,e.priority+1))}),this.priority=n,this._start()}_detach(){ms(Hd(this.source),n=>{Op(n)&&cy(n,this)}),this._active.clear(),lg(this)}eventObserved(n){n.type=="change"?n.idle?this.advance():(this._active.add(n.parent),this._start()):n.type=="idle"?this._active.delete(n.parent):n.type=="priority"&&(this.priority=Hd(this.source).reduce((e,t)=>Math.max(e,(_9(t)?t.priority:0)+1),0))}};function RW(n){return n.idle!==!1}function S9(n){return!n.size||Array.from(n).every(RW)}function lg(n){n.idle||(n.idle=!0,ms(Ex(n),e=>{e.done=!0}),ly(n,{type:"idle",parent:n}))}jl.assign({createStringInterpolator:WT,to:(n,e)=>new PW(n,e)});var LW=["primitive"].concat(Object.keys(_G).filter(n=>/^[A-Z]/.test(n)).map(n=>n[0].toLowerCase()+n.slice(1)));jl.assign({createStringInterpolator:WT,colors:XG,frameLoop:"demand"});NG(()=>{Ct.advance()});AW(LW,{applyAnimatedValues:OG});const IW=35,M9=["#CEFF00","#1F91C7","#527EC3","#7A67B2","#964E92","#A23569"];new Array(IW).fill().map(()=>({color:M9[Math.round(Math.random()*(M9.length-1))],args:[.1+Math.random()*9,.1+Math.random()*9,10]}));function ru(...n){return ew(BM(n))}const DW=({children:n,className:e,containerClassName:t,animate:i=!0,...r})=>{const s={initial:{backgroundPosition:"0 50%"},animate:{backgroundPosition:["0, 50%","100% 50%","0 50%"]}};return ee.jsxs("div",{className:ru("relative p-[1px] group",t),...r,children:[ee.jsx(Kt.div,{variants:i?s:void 0,initial:i?"initial":void 0,animate:i?"animate":void 0,transition:i?{duration:5,repeat:1/0,repeatType:"reverse"}:void 0,style:{backgroundSize:i?"400% 400%":void 0},className:ru("absolute inset-0 rounded-3xl z-[1] opacity-60 group-hover:opacity-100 blur-xl  transition duration-500 will-change-transform"," bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]")}),ee.jsx(Kt.div,{variants:i?s:void 0,initial:i?"initial":void 0,animate:i?"animate":void 0,transition:i?{duration:5,repeat:1/0,repeatType:"reverse"}:void 0,style:{backgroundSize:i?"400% 400%":void 0},className:ru("absolute inset-0 rounded-3xl z-[1] will-change-transform","bg-[radial-gradient(circle_farthest-side_at_0_100%,#00ccb1,transparent),radial-gradient(circle_farthest-side_at_100%_0,#7b61ff,transparent),radial-gradient(circle_farthest-side_at_100%_100%,#ffc414,transparent),radial-gradient(circle_farthest-side_at_0_0,#1ca0fb,#141316)]")}),ee.jsx("div",{className:ru("relative z-10",e),children:n})]})};var uy=new Map,Gd=new WeakMap,b9=0,NW=void 0;function UW(n){return n?(Gd.has(n)||(b9+=1,Gd.set(n,b9.toString())),Gd.get(n)):"0"}function FW(n){return Object.keys(n).sort().filter(e=>n[e]!==void 0).map(e=>`${e}_${e==="root"?UW(n.root):n[e]}`).toString()}function OW(n){const e=FW(n);let t=uy.get(e);if(!t){const i=new Map;let r;const s=new IntersectionObserver(o=>{o.forEach(a=>{var l;const c=a.isIntersecting&&r.some(f=>a.intersectionRatio>=f);n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(f=>{f(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},uy.set(e,t)}return t}function kW(n,e,t={},i=NW){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const l=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:r,observer:s,elements:o}=OW(t),a=o.get(n)||[];return o.has(n)||o.set(n,a),a.push(e),s.observe(n),function(){a.splice(a.indexOf(e),1),a.length===0&&(o.delete(n),s.unobserve(n)),o.size===0&&(s.disconnect(),uy.delete(r))}}function BW({threshold:n,delay:e,trackVisibility:t,rootMargin:i,root:r,triggerOnce:s,skip:o,initialInView:a,fallbackInView:l,onChange:c}={}){var f;const[p,d]=H.useState(null),m=H.useRef(),[v,_]=H.useState({inView:!!a,entry:void 0});m.current=c,H.useEffect(()=>{if(o||!p)return;let M;return M=kW(p,(T,P)=>{_({inView:T,entry:P}),m.current&&m.current(T,P),P.isIntersecting&&s&&M&&(M(),M=void 0)},{root:r,rootMargin:i,threshold:n,trackVisibility:t,delay:e},l),()=>{M&&M()}},[Array.isArray(n)?n.toString():n,p,r,i,s,o,t,l,e]);const x=(f=v.entry)==null?void 0:f.target,y=H.useRef();!p&&x&&!s&&!o&&y.current!==x&&(y.current=x,_({inView:!!a,entry:void 0}));const b=[d,v.inView,v.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}const cg=({id:n,children:e,onShow:t})=>{const[i,r]=BW({threshold:.5,triggerOnce:!1});return H.useEffect(()=>{r&&(t==null||t(n))},[r]),ee.jsx(Kt.div,{id:n,className:"flex w-full items-center justify-center",initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},viewport:{once:!0},children:ee.jsx("div",{ref:i,className:"extra-bold-text",style:{fontSize:"10vmin",letterSpacing:"-.75vmin",color:"var(--primary-text)"},children:e})})};function VW(n){for(var e=-1,t=n.length,i,r=n[t-1],s=0;++e<t;)i=r,r=n[e],s+=i[1]*r[0]-i[0]*r[1];return s/2}function zW(n){for(var e=-1,t=n.length,i=n[t-1],r,s,o=i[0],a=i[1],l=0;++e<t;)r=o,s=a,i=n[e],o=i[0],a=i[1],r-=o,s-=a,l+=Math.sqrt(r*r+s*s);return l}var hp={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},HW=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function $W(n){return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&HW.indexOf(n)>=0}function GW(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function WW(n){return(n|32)===97}function fl(n){return n>=48&&n<=57}function jW(n){return n>=48&&n<=57||n===43||n===45||n===46}function XW(n){this.index=0,this.path=n,this.max=n.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function fp(n){for(;n.index<n.max&&$W(n.path.charCodeAt(n.index));)n.index++}function qW(n){var e=n.path.charCodeAt(n.index);if(e===48){n.param=0,n.index++;return}if(e===49){n.param=1,n.index++;return}n.err="SvgPath: arc flag can be 0 or 1 only (at pos "+n.index+")"}function YW(n){var e=n.index,t=e,i=n.max,r=!1,s=!1,o=!1,a=!1,l;if(t>=i){n.err="SvgPath: missed param (at pos "+t+")";return}if(l=n.path.charCodeAt(t),(l===43||l===45)&&(t++,l=t<i?n.path.charCodeAt(t):0),!fl(l)&&l!==46){n.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(l!==46){if(r=l===48,t++,l=t<i?n.path.charCodeAt(t):0,r&&t<i&&l&&fl(l)){n.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;t<i&&fl(n.path.charCodeAt(t));)t++,s=!0;l=t<i?n.path.charCodeAt(t):0}if(l===46){for(a=!0,t++;fl(n.path.charCodeAt(t));)t++,o=!0;l=t<i?n.path.charCodeAt(t):0}if(l===101||l===69){if(a&&!s&&!o){n.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,l=t<i?n.path.charCodeAt(t):0,(l===43||l===45)&&t++,t<i&&fl(n.path.charCodeAt(t)))for(;t<i&&fl(n.path.charCodeAt(t));)t++;else{n.err="SvgPath: invalid float exponent (at pos "+t+")";return}}n.index=t,n.param=parseFloat(n.path.slice(e,t))+0}function ug(n){var e,t;e=n.path[n.segmentStart],t=e.toLowerCase();var i=n.data;if(t==="m"&&i.length>2&&(n.result.push([e,i[0],i[1]]),i=i.slice(2),t="l",e=e==="m"?"l":"L"),t==="r")n.result.push([e].concat(i));else for(;i.length>=hp[t]&&(n.result.push([e].concat(i.splice(0,hp[t]))),!!hp[t]););}function KW(n){var e=n.max,t,i,r,s,o;if(n.segmentStart=n.index,t=n.path.charCodeAt(n.index),i=WW(t),!GW(t)){n.err="SvgPath: bad command "+n.path[n.index]+" (at pos "+n.index+")";return}if(s=hp[n.path[n.index].toLowerCase()],n.index++,fp(n),n.data=[],!s){ug(n);return}for(r=!1;;){for(o=s;o>0;o--){if(i&&(o===3||o===4)?qW(n):YW(n),n.err.length){ug(n);return}n.data.push(n.param),fp(n),r=!1,n.index<e&&n.path.charCodeAt(n.index)===44&&(n.index++,fp(n),r=!0)}if(!r&&(n.index>=n.max||!jW(n.path.charCodeAt(n.index))))break}ug(n)}var ZW=function(e){var t=new XW(e),i=t.max;for(fp(t);t.index<i&&!t.err.length;)KW(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function JW(n,e){return[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],n[0]*e[4]+n[2]*e[5]+n[4],n[1]*e[4]+n[3]*e[5]+n[5]]}function xr(){if(!(this instanceof xr))return new xr;this.queue=[],this.cache=null}xr.prototype.matrix=function(n){return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1&&n[4]===0&&n[5]===0?this:(this.cache=null,this.queue.push(n),this)};xr.prototype.translate=function(n,e){return(n!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,n,e])),this};xr.prototype.scale=function(n,e){return(n!==1||e!==1)&&(this.cache=null,this.queue.push([n,0,0,e,0,0])),this};xr.prototype.rotate=function(n,e,t){var i,r,s;return n!==0&&(this.translate(e,t),i=n*Math.PI/180,r=Math.cos(i),s=Math.sin(i),this.queue.push([r,s,-s,r,0,0]),this.cache=null,this.translate(-e,-t)),this};xr.prototype.skewX=function(n){return n!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(n*Math.PI/180),1,0,0])),this};xr.prototype.skewY=function(n){return n!==0&&(this.cache=null,this.queue.push([1,Math.tan(n*Math.PI/180),0,1,0,0])),this};xr.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var n=1;n<this.queue.length;n++)this.cache=JW(this.cache,this.queue[n]);return this.cache};xr.prototype.calc=function(n,e,t){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),i=this.cache,[n*i[0]+e*i[2]+(t?0:i[4]),n*i[1]+e*i[3]+(t?0:i[5])]):[n,e]};var eA=xr,QW=eA,ej={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},tj=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,nj=/[\s,]+/,ij=function(e){var t=new QW,i,r;return e.split(tj).forEach(function(s){if(s.length){if(typeof ej[s]<"u"){i=s;return}switch(r=s.split(nj).map(function(o){return+o||0}),i){case"matrix":r.length===6&&t.matrix(r);return;case"scale":r.length===1?t.scale(r[0],r[0]):r.length===2&&t.scale(r[0],r[1]);return;case"rotate":r.length===1?t.rotate(r[0],0,0):r.length===3&&t.rotate(r[0],r[1],r[2]);return;case"translate":r.length===1?t.translate(r[0],0):r.length===2&&t.translate(r[0],r[1]);return;case"skewX":r.length===1&&t.skewX(r[0]);return;case"skewY":r.length===1&&t.skewY(r[0]);return}}}),t},gu=Math.PI*2;function w9(n,e,t,i){var r=n*i-e*t<0?-1:1,s=n*t+e*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)}function rj(n,e,t,i,r,s,o,a,l,c){var f=c*(n-t)/2+l*(e-i)/2,p=-l*(n-t)/2+c*(e-i)/2,d=o*o,m=a*a,v=f*f,_=p*p,x=d*m-d*_-m*v;x<0&&(x=0),x/=d*_+m*v,x=Math.sqrt(x)*(r===s?-1:1);var y=x*o/a*p,b=x*-a/o*f,M=c*y-l*b+(n+t)/2,T=l*y+c*b+(e+i)/2,P=(f-y)/o,E=(p-b)/a,L=(-f-y)/o,I=(-p-b)/a,R=w9(1,0,P,E),C=w9(P,E,L,I);return s===0&&C>0&&(C-=gu),s===1&&C<0&&(C+=gu),[M,T,R,C]}function sj(n,e){var t=1.3333333333333333*Math.tan(e/4),i=Math.cos(n),r=Math.sin(n),s=Math.cos(n+e),o=Math.sin(n+e);return[i,r,i-r*t,r+i*t,s+o*t,o-s*t,s,o]}var oj=function(e,t,i,r,s,o,a,l,c){var f=Math.sin(c*gu/360),p=Math.cos(c*gu/360),d=p*(e-i)/2+f*(t-r)/2,m=-f*(e-i)/2+p*(t-r)/2;if(d===0&&m===0)return[];if(a===0||l===0)return[];a=Math.abs(a),l=Math.abs(l);var v=d*d/(a*a)+m*m/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));var _=rj(e,t,i,r,s,o,a,l,f,p),x=[],y=_[2],b=_[3],M=Math.max(Math.ceil(Math.abs(b)/(gu/4)),1);b/=M;for(var T=0;T<M;T++)x.push(sj(y,b)),y+=b;return x.map(function(P){for(var E=0;E<P.length;E+=2){var L=P[E+0],I=P[E+1];L*=a,I*=l;var R=p*L-f*I,C=f*L+p*I;P[E+0]=R+_[0],P[E+1]=C+_[1]}return P})},vu=1e-10,T9=Math.PI/180;function ih(n,e,t){if(!(this instanceof ih))return new ih(n,e,t);this.rx=n,this.ry=e,this.ax=t}ih.prototype.transform=function(n){var e=Math.cos(this.ax*T9),t=Math.sin(this.ax*T9),i=[this.rx*(n[0]*e+n[2]*t),this.rx*(n[1]*e+n[3]*t),this.ry*(-n[0]*t+n[2]*e),this.ry*(-n[1]*t+n[3]*e)],r=i[0]*i[0]+i[2]*i[2],s=i[1]*i[1]+i[3]*i[3],o=((i[0]-i[3])*(i[0]-i[3])+(i[2]+i[1])*(i[2]+i[1]))*((i[0]+i[3])*(i[0]+i[3])+(i[2]-i[1])*(i[2]-i[1])),a=(r+s)/2;if(o<vu*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=i[0]*i[1]+i[2]*i[3];o=Math.sqrt(o);var c=a+o/2,f=a-o/2;return this.ax=Math.abs(l)<vu&&Math.abs(c-s)<vu?90:Math.atan(Math.abs(l)>Math.abs(c-s)?(c-r)/l:l/(c-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(f)):(this.ax+=90,this.rx=Math.sqrt(f),this.ry=Math.sqrt(c)),this};ih.prototype.isDegenerate=function(){return this.rx<vu*this.ry||this.ry<vu*this.rx};var aj=ih,lj=ZW,cj=ij,mo=eA,uj=oj,hj=aj;function nn(n){if(!(this instanceof nn))return new nn(n);var e=lj(n);this.segments=e.segments,this.err=e.err,this.__stack=[]}nn.from=function(n){if(typeof n=="string")return new nn(n);if(n instanceof nn){var e=new nn("");return e.err=n.err,e.segments=n.segments.map(function(t){return t.slice()}),e.__stack=n.__stack.map(function(t){return mo().matrix(t.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+n)};nn.prototype.__matrix=function(n){var e=this,t;n.queue.length&&this.iterate(function(i,r,s,o){var a,l,c,f;switch(i[0]){case"v":a=n.calc(0,i[1],!0),l=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=n.calc(s,i[1],!1),l=a[0]===n.calc(s,o,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=n.calc(i[1],0,!0),l=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=n.calc(i[1],o,!1),l=a[1]===n.calc(s,o,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var p=n.toArray(),d=hj(i[1],i[2],i[3]).transform(p);if(p[0]*p[3]-p[1]*p[2]<0&&(i[5]=i[5]?"0":"1"),a=n.calc(i[6],i[7],i[0]==="a"),i[0]==="A"&&i[6]===s&&i[7]===o||i[0]==="a"&&i[6]===0&&i[7]===0){l=[i[0]==="a"?"l":"L",a[0],a[1]];break}d.isDegenerate()?l=[i[0]==="a"?"l":"L",a[0],a[1]]:l=[i[0],d.rx,d.ry,d.ax,i[4],i[5],a[0],a[1]];break;case"m":f=r>0,a=n.calc(i[1],i[2],f),l=["m",a[0],a[1]];break;default:for(c=i[0],l=[c],f=c.toLowerCase()===c,t=1;t<i.length;t+=2)a=n.calc(i[t],i[t+1],f),l.push(a[0],a[1])}e.segments[r]=l},!0)};nn.prototype.__evaluateStack=function(){var n,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(n=mo(),e=this.__stack.length;--e>=0;)n.matrix(this.__stack[e].toArray());this.__matrix(n),this.__stack=[]}};nn.prototype.toString=function(){var n="",e="",t=!1;this.__evaluateStack();for(var i=0,r=this.segments.length;i<r;i++){var s=this.segments[i],o=s[0];o!==e||o==="m"||o==="M"?(o==="m"&&e==="z"&&(n+=" "),n+=o,t=!1):t=!0;for(var a=1;a<s.length;a++){var l=s[a];a===1?t&&l>=0&&(n+=" "):l>=0&&(n+=" "),n+=l}e=o}return n};nn.prototype.translate=function(n,e){return this.__stack.push(mo().translate(n,e||0)),this};nn.prototype.scale=function(n,e){return this.__stack.push(mo().scale(n,!e&&e!==0?n:e)),this};nn.prototype.rotate=function(n,e,t){return this.__stack.push(mo().rotate(n,e||0,t||0)),this};nn.prototype.skewX=function(n){return this.__stack.push(mo().skewX(n)),this};nn.prototype.skewY=function(n){return this.__stack.push(mo().skewY(n)),this};nn.prototype.matrix=function(n){return this.__stack.push(mo().matrix(n)),this};nn.prototype.transform=function(n){return n.trim()?(this.__stack.push(cj(n)),this):this};nn.prototype.round=function(n){var e=0,t=0,i=0,r=0,s;return n=n||0,this.__evaluateStack(),this.segments.forEach(function(o){var a=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":a&&(o[1]+=i),i=o[1]-o[1].toFixed(n),o[1]=+o[1].toFixed(n);return;case"V":case"v":a&&(o[1]+=r),r=o[1]-o[1].toFixed(n),o[1]=+o[1].toFixed(n);return;case"Z":case"z":i=e,r=t;return;case"M":case"m":a&&(o[1]+=i,o[2]+=r),i=o[1]-o[1].toFixed(n),r=o[2]-o[2].toFixed(n),e=i,t=r,o[1]=+o[1].toFixed(n),o[2]=+o[2].toFixed(n);return;case"A":case"a":a&&(o[6]+=i,o[7]+=r),i=o[6]-o[6].toFixed(n),r=o[7]-o[7].toFixed(n),o[1]=+o[1].toFixed(n),o[2]=+o[2].toFixed(n),o[3]=+o[3].toFixed(n+2),o[6]=+o[6].toFixed(n),o[7]=+o[7].toFixed(n);return;default:s=o.length,a&&(o[s-2]+=i,o[s-1]+=r),i=o[s-2]-o[s-2].toFixed(n),r=o[s-1]-o[s-1].toFixed(n),o.forEach(function(l,c){c&&(o[c]=+o[c].toFixed(n))});return}}),this};nn.prototype.iterate=function(n,e){var t=this.segments,i={},r=!1,s=0,o=0,a=0,l=0,c,f,p;if(e||this.__evaluateStack(),t.forEach(function(d,m){var v=n(d,m,s,o);Array.isArray(v)&&(i[m]=v,r=!0);var _=d[0]===d[0].toLowerCase();switch(d[0]){case"m":case"M":s=d[1]+(_?s:0),o=d[2]+(_?o:0),a=s,l=o;return;case"h":case"H":s=d[1]+(_?s:0);return;case"v":case"V":o=d[1]+(_?o:0);return;case"z":case"Z":s=a,o=l;return;default:s=d[d.length-2]+(_?s:0),o=d[d.length-1]+(_?o:0)}}),!r)return this;for(p=[],c=0;c<t.length;c++)if(typeof i[c]<"u")for(f=0;f<i[c].length;f++)p.push(i[c][f]);else p.push(t[c]);return this.segments=p,this};nn.prototype.abs=function(){return this.iterate(function(n,e,t,i){var r=n[0],s=r.toUpperCase(),o;if(r!==s)switch(n[0]=s,r){case"v":n[1]+=i;return;case"a":n[6]+=t,n[7]+=i;return;default:for(o=1;o<n.length;o++)n[o]+=o%2?t:i}},!0),this};nn.prototype.rel=function(){return this.iterate(function(n,e,t,i){var r=n[0],s=r.toLowerCase(),o;if(r!==s&&!(e===0&&r==="M"))switch(n[0]=s,r){case"V":n[1]-=i;return;case"A":n[6]-=t,n[7]-=i;return;default:for(o=1;o<n.length;o++)n[o]-=o%2?t:i}},!0),this};nn.prototype.unarc=function(){return this.iterate(function(n,e,t,i){var r,s,o,a=[],l=n[0];return l!=="A"&&l!=="a"?null:(l==="a"?(s=t+n[6],o=i+n[7]):(s=n[6],o=n[7]),r=uj(t,i,s,o,n[4],n[5],n[1],n[2],n[3]),r.length===0?[[n[0]==="a"?"l":"L",n[6],n[7]]]:(r.forEach(function(c){a.push(["C",c[2],c[3],c[4],c[5],c[6],c[7]])}),a))}),this};nn.prototype.unshort=function(){var n=this.segments,e,t,i,r,s;return this.iterate(function(o,a,l,c){var f=o[0],p=f.toUpperCase(),d;a&&(p==="T"?(d=f==="t",i=n[a-1],i[0]==="Q"?(e=i[1]-l,t=i[2]-c):i[0]==="q"?(e=i[1]-i[3],t=i[2]-i[4]):(e=0,t=0),r=-e,s=-t,d||(r+=l,s+=c),n[a]=[d?"q":"Q",r,s,o[1],o[2]]):p==="S"&&(d=f==="s",i=n[a-1],i[0]==="C"?(e=i[3]-l,t=i[4]-c):i[0]==="c"?(e=i[3]-i[5],t=i[4]-i[6]):(e=0,t=0),r=-e,s=-t,d||(r+=l,s+=c),n[a]=[d?"c":"C",r,s,o[1],o[2],o[3],o[4]]))}),this};var fj=nn,dj=fj;const pj=Sa(dj);var hg={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},mj=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function gj(n){var e=[];return n.replace(mj,function(t,i,r){var s=i.toLowerCase();for(r=yj(r),s==="m"&&r.length>2&&(e.push([i].concat(r.splice(0,2))),s="l",i=i==="m"?"l":"L");r.length>=0;){if(r.length===hg[s])return r.unshift(i),e.push(r);if(r.length<hg[s])throw new Error("malformed path data");e.push([i].concat(r.splice(0,hg[s])))}}),e}var vj=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function yj(n){var e=n.match(vj);return e?e.map(Number):[]}function ur(n,e,t,i,r,s,o,a){return new hy(n,e,t,i,r,s,o,a)}function hy(n,e,t,i,r,s,o,a){this.a={x:n,y:e},this.b={x:t,y:i},this.c={x:r,y:s},this.d={x:o,y:a},o!=null&&a!==null&&a!==void 0?(this.getArcLength=Cj,this.getPoint=Sj,this.getDerivative=_j):(this.getArcLength=Mj,this.getPoint=tA,this.getDerivative=xj),this.init()}hy.prototype={constructor:hy,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(n){var e=fg(n,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(n){var e=fg(n,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),i=Math.sqrt(t.x*t.x+t.y*t.y),r;return i>0?r={x:t.x/i,y:t.y/i}:r={x:0,y:0},r},getPropertiesAtLength:function(n){var e=fg(n,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),t=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),i=Math.sqrt(t.x*t.x+t.y*t.y),r;i>0?r={x:t.x/i,y:t.y/i}:r={x:0,y:0};var s=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e);return{x:s.x,y:s.y,tangentX:r.x,tangentY:r.y}}};function xj(n,e,t){return{x:(1-t)*2*(n[1]-n[0])+t*2*(n[2]-n[1]),y:(1-t)*2*(e[1]-e[0])+t*2*(e[2]-e[1])}}function _j(n,e,t){var i=tA([3*(n[1]-n[0]),3*(n[2]-n[1]),3*(n[3]-n[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],t);return i}function fg(n,e,t,i,r){for(var s=1,o=n/e,a=(n-t(i,r,o))/e;s>.001;){var l=t(i,r,o+a),c=t(i,r,o-a),f=Math.abs(n-l)/e,p=Math.abs(n-c)/e;f<s?(s=f,o+=a):p<s?(s=p,o-=a):a/=2}return o}function tA(n,e,t){var i=(1-t)*(1-t)*n[0]+2*(1-t)*t*n[1]+t*t*n[2],r=(1-t)*(1-t)*e[0]+2*(1-t)*t*e[1]+t*t*e[2];return{x:i,y:r}}function Sj(n,e,t){var i=(1-t)*(1-t)*(1-t)*n[0]+3*(1-t)*(1-t)*t*n[1]+3*(1-t)*t*t*n[2]+t*t*t*n[3],r=(1-t)*(1-t)*(1-t)*e[0]+3*(1-t)*(1-t)*t*e[1]+3*(1-t)*t*t*e[2]+t*t*t*e[3];return{x:i,y:r}}function Mj(n,e,t){t===void 0&&(t=1);var i=n[0]-2*n[1]+n[2],r=e[0]-2*e[1]+e[2],s=2*n[1]-2*n[0],o=2*e[1]-2*e[0],a=4*(i*i+r*r),l=4*(i*s+r*o),c=s*s+o*o;if(a===0)return t*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(e[2]-e[0],2));var f=l/(2*a),p=c/a,d=t+f,m=p-f*f;return Math.sqrt(a)/2*(d*Math.sqrt(d*d+m)-f*Math.sqrt(f*f+m)+m*Math.log(Math.abs((d+Math.sqrt(d*d+m))/(f+Math.sqrt(f*f+m)))))}var bj=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],wj=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Tj=[[1],[1,1],[1,2,1],[1,3,3,1]];function Aj(n,e){return Tj[n][e]}function fy(n,e,t){var i=t.length-1,r,s,o;if(i===0)return 0;if(n===0){for(s=0,o=0;o<=i;o++)s+=Aj(i,o)*Math.pow(1-e,i-o)*Math.pow(e,o)*t[o];return s}else{for(r=new Array(i),o=0;o<i;o++)r[o]=i*(t[o+1]-t[o]);return fy(n-1,e,r)}}function Ej(n,e,t){var i=fy(1,t,n),r=fy(1,t,e),s=i*i+r*r;return Math.sqrt(s)}function Cj(n,e,t){var i,r,s,o;t===void 0&&(t=1);var a=20;for(i=t/2,r=0,s=0;s<a;s++)o=i*bj[a][s]+i,r+=wj[a][s]*Ej(n,e,o);return i*r}var yu=Math.PI*2;function A9(n,e,t,i){var r=n*i-e*t<0?-1:1,s=n*t+e*i;return s>1&&(s=1),s<-1&&(s=-1),r*Math.acos(s)}function Pj(n,e,t,i,r,s,o,a,l,c){var f=c*(n-t)/2+l*(e-i)/2,p=-l*(n-t)/2+c*(e-i)/2,d=o*o,m=a*a,v=f*f,_=p*p,x=d*m-d*_-m*v;x<0&&(x=0),x/=d*_+m*v,x=Math.sqrt(x)*(r===s?-1:1);var y=x*o/a*p,b=x*-a/o*f,M=c*y-l*b+(n+t)/2,T=l*y+c*b+(e+i)/2,P=(f-y)/o,E=(p-b)/a,L=(-f-y)/o,I=(-p-b)/a,R=A9(1,0,P,E),C=A9(P,E,L,I);return s===0&&C>0&&(C-=yu),s===1&&C<0&&(C+=yu),[M,T,R,C]}function Rj(n,e){var t=1.3333333333333333*Math.tan(e/4),i=Math.cos(n),r=Math.sin(n),s=Math.cos(n+e),o=Math.sin(n+e);return[i,r,i-r*t,r+i*t,s+o*t,o-s*t,s,o]}function Lj(n,e,t,i,r,s,o,a,l){var c=Math.sin(r*yu/360),f=Math.cos(r*yu/360),p=f*(n-a)/2+c*(e-l)/2,d=-c*(n-a)/2+f*(e-l)/2;if(p===0&&d===0)return[];if(t===0||i===0)return[];t=Math.abs(t),i=Math.abs(i);var m=p*p/(t*t)+d*d/(i*i);m>1&&(t*=Math.sqrt(m),i*=Math.sqrt(m));var v=Pj(n,e,a,l,s,o,t,i,c,f),_=[],x=v[2],y=v[3],b=Math.max(Math.ceil(Math.abs(y)/(yu/4)),1);y/=b;for(var M=0;M<b;M++)_.push(Rj(x,y)),x+=y;return _.map(function(T){for(var P=0;P<T.length;P+=2){var E=T[P+0],L=T[P+1];E*=t,L*=i;var I=f*E-c*L,R=c*E+f*L;T[P+0]=I+v[0],T[P+1]=R+v[1]}return T})}function E9(n,e,t,i,r,s,o,a,l){return new dy(n,e,t,i,r,s,o,a,l)}function dy(n,e,t,i,r,s,o,a,l){var c=0,f=[],p=[],d=Lj(n,e,t,i,r,s,o,a,l);d.forEach(function(m){var v=new ur(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7]),_=v.getTotalLength();c+=_,f.push(_),p.push(v)}),this.length=c,this.partialLengths=f,this.curves=p}dy.prototype={constructor:dy,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(n){n<0?n=0:n>this.length&&(n=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=n&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var t=0,i=0;i<e;i++)t+=this.partialLengths[i];return this.curves[e].getPointAtLength(n-t)},getTangentAtLength:function(n){n<0?n=0:n>this.length&&(n=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=n&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var t=0,i=0;i<e;i++)t+=this.partialLengths[i];return this.curves[e].getTangentAtLength(n-t)},getPropertiesAtLength:function(n){var e=this.getTangentAtLength(n),t=this.getPointAtLength(n);return{x:t.x,y:t.y,tangentX:e.x,tangentY:e.y}}};function lr(n,e,t,i){return new kh(n,e,t,i)}function kh(n,e,t,i){this.x0=n,this.x1=e,this.y0=t,this.y1=i}kh.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))};kh.prototype.getPointAtLength=function(n){var e=n/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),t=(this.x1-this.x0)*e,i=(this.y1-this.y0)*e;return{x:this.x0+t,y:this.y0+i}};kh.prototype.getTangentAtLength=function(){var n=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/n,y:(this.y1-this.y0)/n}};kh.prototype.getPropertiesAtLength=function(n){var e=this.getPointAtLength(n),t=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:t.x,tangentY:t.y}};function Ij(n){var e=0,t=[],i=[];function r(o){if(!o)return null;for(var a=gj(o),l=[0,0],c=[0,0],f,p,d=0;d<a.length;d++)a[d][0]==="M"?(l=[a[d][1],a[d][2]],p=[l[0],l[1]],i.push(null)):a[d][0]==="m"?(l=[a[d][1]+l[0],a[d][2]+l[1]],p=[l[0],l[1]],i.push(null)):a[d][0]==="L"?(e=e+Math.sqrt(Math.pow(l[0]-a[d][1],2)+Math.pow(l[1]-a[d][2],2)),i.push(new lr(l[0],a[d][1],l[1],a[d][2])),l=[a[d][1],a[d][2]]):a[d][0]==="l"?(e=e+Math.sqrt(Math.pow(a[d][1],2)+Math.pow(a[d][2],2)),i.push(new lr(l[0],a[d][1]+l[0],l[1],a[d][2]+l[1])),l=[a[d][1]+l[0],a[d][2]+l[1]]):a[d][0]==="H"?(e=e+Math.abs(l[0]-a[d][1]),i.push(new lr(l[0],a[d][1],l[1],l[1])),l[0]=a[d][1]):a[d][0]==="h"?(e=e+Math.abs(a[d][1]),i.push(new lr(l[0],l[0]+a[d][1],l[1],l[1])),l[0]=a[d][1]+l[0]):a[d][0]==="V"?(e=e+Math.abs(l[1]-a[d][1]),i.push(new lr(l[0],l[0],l[1],a[d][1])),l[1]=a[d][1]):a[d][0]==="v"?(e=e+Math.abs(a[d][1]),i.push(new lr(l[0],l[0],l[1],l[1]+a[d][1])),l[1]=a[d][1]+l[1]):a[d][0]==="z"||a[d][0]==="Z"?(e=e+Math.sqrt(Math.pow(p[0]-l[0],2)+Math.pow(p[1]-l[1],2)),i.push(new lr(l[0],p[0],l[1],p[1])),l=[p[0],p[1]]):a[d][0]==="C"?(f=new ur(l[0],l[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6]),e=e+f.getTotalLength(),l=[a[d][5],a[d][6]],i.push(f)):a[d][0]==="c"?(f=new ur(l[0],l[1],l[0]+a[d][1],l[1]+a[d][2],l[0]+a[d][3],l[1]+a[d][4],l[0]+a[d][5],l[1]+a[d][6]),e=e+f.getTotalLength(),l=[a[d][5]+l[0],a[d][6]+l[1]],i.push(f)):a[d][0]==="S"?(d>0&&["C","c","S","s"].indexOf(a[d-1][0])>-1?f=new ur(l[0],l[1],2*l[0]-a[d-1][a[d-1].length-4],2*l[1]-a[d-1][a[d-1].length-3],a[d][1],a[d][2],a[d][3],a[d][4]):f=new ur(l[0],l[1],l[0],l[1],a[d][1],a[d][2],a[d][3],a[d][4]),e=e+f.getTotalLength(),l=[a[d][3],a[d][4]],i.push(f)):a[d][0]==="s"?(d>0&&["C","c","S","s"].indexOf(a[d-1][0])>-1?f=new ur(l[0],l[1],l[0]+f.d.x-f.c.x,l[1]+f.d.y-f.c.y,l[0]+a[d][1],l[1]+a[d][2],l[0]+a[d][3],l[1]+a[d][4]):f=new ur(l[0],l[1],l[0],l[1],l[0]+a[d][1],l[1]+a[d][2],l[0]+a[d][3],l[1]+a[d][4]),e=e+f.getTotalLength(),l=[a[d][3]+l[0],a[d][4]+l[1]],i.push(f)):a[d][0]==="Q"?(l[0]!=a[d][1]&&l[1]!=a[d][2]?f=new ur(l[0],l[1],a[d][1],a[d][2],a[d][3],a[d][4]):f=new lr(a[d][1],a[d][3],a[d][2],a[d][4]),e=e+f.getTotalLength(),i.push(f),l=[a[d][3],a[d][4]],c=[a[d][1],a[d][2]]):a[d][0]==="q"?(a[d][1]==0&&a[d][2]==0?f=new lr(l[0]+a[d][1],l[0]+a[d][3],l[1]+a[d][2],l[1]+a[d][4]):f=new ur(l[0],l[1],l[0]+a[d][1],l[1]+a[d][2],l[0]+a[d][3],l[1]+a[d][4]),e=e+f.getTotalLength(),c=[l[0]+a[d][1],l[1]+a[d][2]],l=[a[d][3]+l[0],a[d][4]+l[1]],i.push(f)):a[d][0]==="T"?(d>0&&["Q","q","T","t"].indexOf(a[d-1][0])>-1?f=new ur(l[0],l[1],2*l[0]-c[0],2*l[1]-c[1],a[d][1],a[d][2]):f=new lr(l[0],a[d][1],l[1],a[d][2]),i.push(f),e=e+f.getTotalLength(),c=[2*l[0]-c[0],2*l[1]-c[1]],l=[a[d][1],a[d][2]]):a[d][0]==="t"?(d>0&&["Q","q","T","t"].indexOf(a[d-1][0])>-1?f=new ur(l[0],l[1],2*l[0]-c[0],2*l[1]-c[1],l[0]+a[d][1],l[1]+a[d][2]):f=new lr(l[0],l[0]+a[d][1],l[1],l[1]+a[d][2]),e=e+f.getTotalLength(),c=[2*l[0]-c[0],2*l[1]-c[1]],l=[a[d][1]+l[0],a[d][2]+l[0]],i.push(f)):a[d][0]==="A"?(f=new E9(l[0],l[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],a[d][6],a[d][7]),e=e+f.getTotalLength(),l=[a[d][6],a[d][7]],i.push(f)):a[d][0]==="a"&&(f=new E9(l[0],l[1],a[d][1],a[d][2],a[d][3],a[d][4],a[d][5],l[0]+a[d][6],l[1]+a[d][7]),e=e+f.getTotalLength(),l=[l[0]+a[d][6],l[1]+a[d][7]],i.push(f)),t.push(e);return r}r.getTotalLength=function(){return e},r.getPointAtLength=function(o){var a=s(o);return i[a.i].getPointAtLength(a.fraction)},r.getTangentAtLength=function(o){var a=s(o);return i[a.i].getTangentAtLength(a.fraction)},r.getPropertiesAtLength=function(o){var a=s(o);return i[a.i].getPropertiesAtLength(a.fraction)};var s=function(o){o<0?o=0:o>e&&(o=e);for(var a=t.length-1;t[a]>=o&&t[a]>0;)a--;return a++,{fraction:o-t[a-1],i:a}};return r(n)}function k0(n,e){return Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1]))}function nA(n,e,t){return[n[0]+(e[0]-n[0])*t,n[1]+(e[1]-n[1])*t]}function Dj(n,e){return k0(n,e)<1e-9}function Nj(n,e,t){let i=n.map((r,s)=>Uj(r,e[s]));return function(r){let s=i.map(o=>o(r));return t?kj(s):s}}function Uj(n,e){return function(t){return n.map((i,r)=>i+t*(e[r]-i))}}function zp(n){return typeof n=="number"&&isFinite(n)}const py=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`;function Fj(n){return new pj(n).abs()}function Oj(n){return n.toString().split("M").map((e,t)=>(e=e.trim(),t&&e?"M"+e:e)).filter(e=>e)}function kj(n){return"M"+n.join("L")+"Z"}function Bj(n,e){let t=Fj(n);return Vj(t)||zj(t,e)}function Vj(n){let e=n.segments||[],t=[];if(!e.length||e[0][0]!=="M")return!1;for(let i=0;i<e.length;i++){let[r,s,o]=e[i];if(r==="M"&&i||r==="Z")break;if(r==="M"||r==="L")t.push([s,o]);else if(r==="H")t.push([s,t[t.length-1][1]]);else if(r==="V")t.push([t[t.length-1][0],s]);else return!1}return t.length?{ring:t}:!1}function zj(n,e){let t=Oj(n)[0],i=[],r,s,o=3;if(!t)throw new TypeError(py);s=Hj(t),r=s.getTotalLength(),e&&zp(e)&&e>0&&(o=Math.max(o,Math.ceil(r/e)));for(let a=0;a<o;a++){let l=s.getPointAtLength(r*a/o);i.push([l.x,l.y])}return{ring:i,skipBisect:!0}}function Hj(n){if(typeof window<"u"&&window&&window.document)try{let e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",n),e}catch{}return Ij(n)}function C9(n,e){const t=n.length+e,i=zW(n)/e;let r=0,s=0,o=i/2;for(;n.length<t;){let a=n[r],l=n[(r+1)%n.length],c=k0(a,l);if(o<=s+c){n.splice(r+1,0,c?nA(a,l,(o-s)/c):a.slice(0)),o+=i;continue}s+=c,r++}}function $j(n,e=1/0){for(let t=0;t<n.length;t++){let i=n[t],r=t===n.length-1?n[0]:n[t+1];for(;k0(i,r)>e;)r=nA(i,r,.5),n.splice(t+1,0,r)}}function P9(n,e){let t,i,r;if(typeof n=="string"){let s=Bj(n,e);n=s.ring,r=s.skipBisect}else if(!Array.isArray(n))throw new TypeError(py);if(t=n.slice(0),!Gj(t))throw new TypeError(py);return t.length>1&&Dj(t[0],t[t.length-1])&&t.pop(),i=VW(t),i>0&&t.reverse(),!r&&e&&zp(e)&&e>0&&$j(t,e),t}function Gj(n){return n.every(function(e){return Array.isArray(e)&&e.length>=2&&zp(e[0])&&zp(e[1])})}function Wj(n,e){let t=n.length,i=1/0,r,s,o;for(let a=0;a<t;a++)s=0,e.forEach(function(l,c){let f=k0(n[(a+c)%t],l);s+=f*f}),s<i&&(i=s,r=a);r&&(o=n.splice(0,r),n.splice(n.length,0,...o))}function jj(n,e,{maxSegmentLength:t=10,string:i=!0}={}){let r=P9(n,t),s=P9(e,t),o=Xj(r,s,i);return!i||typeof n!="string"&&typeof e!="string"?o:a=>a<1e-4&&typeof n=="string"?n:1-a<1e-4&&typeof e=="string"?e:o(a)}function Xj(n,e,t){let i;return i=n.length-e.length,C9(n,i<0?i*-1:0),C9(e,i>0?i:0),Wj(n,e),Nj(n,e,t)}var iA={exports:{}};iA.exports=B0;iA.exports.default=B0;function B0(n,e,t){t=t||2;var i=e&&e.length,r=i?e[0]*t:n.length,s=rA(n,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,f,p,d,m;if(i&&(s=Jj(n,e,s,t)),n.length>80*t){a=c=n[0],l=f=n[1];for(var v=t;v<r;v+=t)p=n[v],d=n[v+1],p<a&&(a=p),d<l&&(l=d),p>c&&(c=p),d>f&&(f=d);m=Math.max(c-a,f-l),m=m!==0?32767/m:0}return rh(s,o,t,a,l,m,0),o}function rA(n,e,t,i,r){var s,o;if(r===vy(n,e,t,i)>0)for(s=e;s<t;s+=i)o=R9(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=R9(s,n[s],n[s+1],o);return o&&V0(o,o.next)&&(oh(o),o=o.next),o}function xa(n,e){if(!n)return n;e||(e=n);var t=n,i;do if(i=!1,!t.steiner&&(V0(t,t.next)||en(t.prev,t,t.next)===0)){if(oh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function rh(n,e,t,i,r,s,o){if(n){!o&&s&&iX(n,i,r,s);for(var a=n,l,c;n.prev!==n.next;){if(l=n.prev,c=n.next,s?Yj(n,i,r,s):qj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),oh(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=Kj(xa(n),e,t),rh(n,e,t,i,r,s,2)):o===2&&Zj(n,e,t,i,r,s):rh(xa(n),e,t,i,r,s,1);break}}}}function qj(n){var e=n.prev,t=n,i=n.next;if(en(e,t,i)>=0)return!1;for(var r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,f=r<s?r<o?r:o:s<o?s:o,p=a<l?a<c?a:c:l<c?l:c,d=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c,v=i.next;v!==e;){if(v.x>=f&&v.x<=d&&v.y>=p&&v.y<=m&&Al(r,a,s,l,o,c,v.x,v.y)&&en(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function Yj(n,e,t,i){var r=n.prev,s=n,o=n.next;if(en(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,c=o.x,f=r.y,p=s.y,d=o.y,m=a<l?a<c?a:c:l<c?l:c,v=f<p?f<d?f:d:p<d?p:d,_=a>l?a>c?a:c:l>c?l:c,x=f>p?f>d?f:d:p>d?p:d,y=my(m,v,e,t,i),b=my(_,x,e,t,i),M=n.prevZ,T=n.nextZ;M&&M.z>=y&&T&&T.z<=b;){if(M.x>=m&&M.x<=_&&M.y>=v&&M.y<=x&&M!==r&&M!==o&&Al(a,f,l,p,c,d,M.x,M.y)&&en(M.prev,M,M.next)>=0||(M=M.prevZ,T.x>=m&&T.x<=_&&T.y>=v&&T.y<=x&&T!==r&&T!==o&&Al(a,f,l,p,c,d,T.x,T.y)&&en(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;M&&M.z>=y;){if(M.x>=m&&M.x<=_&&M.y>=v&&M.y<=x&&M!==r&&M!==o&&Al(a,f,l,p,c,d,M.x,M.y)&&en(M.prev,M,M.next)>=0)return!1;M=M.prevZ}for(;T&&T.z<=b;){if(T.x>=m&&T.x<=_&&T.y>=v&&T.y<=x&&T!==r&&T!==o&&Al(a,f,l,p,c,d,T.x,T.y)&&en(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function Kj(n,e,t){var i=n;do{var r=i.prev,s=i.next.next;!V0(r,s)&&sA(r,i,i.next,s)&&sh(r,s)&&sh(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),oh(i),oh(i.next),i=n=s),i=i.next}while(i!==n);return xa(i)}function Zj(n,e,t,i,r,s){var o=n;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&oX(o,a)){var l=oA(o,a);o=xa(o,o.next),l=xa(l,l.next),rh(o,e,t,i,r,s,0),rh(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Jj(n,e,t,i){var r=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=rA(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(sX(c));for(r.sort(Qj),s=0;s<r.length;s++)t=eX(r[s],t);return t}function Qj(n,e){return n.x-e.x}function eX(n,e){var t=tX(n,e);if(!t)return e;var i=oA(t,n);return xa(i,i.next),xa(t,t.next)}function tX(n,e){var t=e,i=n.x,r=n.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var a=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=i&&a>s&&(s=a,o=t.x<t.next.x?t:t.next,a===i))return o}t=t.next}while(t!==e);if(!o)return null;var l=o,c=o.x,f=o.y,p=1/0,d;t=o;do i>=t.x&&t.x>=c&&i!==t.x&&Al(r<f?i:s,r,c,f,r<f?s:i,r,t.x,t.y)&&(d=Math.abs(r-t.y)/(i-t.x),sh(t,n)&&(d<p||d===p&&(t.x>o.x||t.x===o.x&&nX(o,t)))&&(o=t,p=d)),t=t.next;while(t!==l);return o}function nX(n,e){return en(n.prev,n,e.prev)<0&&en(e.next,n,n.next)<0}function iX(n,e,t,i){var r=n;do r.z===0&&(r.z=my(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,rX(r)}function rX(n){var e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function my(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function sX(n){var e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Al(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function oX(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!aX(n,e)&&(sh(n,e)&&sh(e,n)&&lX(n,e)&&(en(n.prev,n,e.prev)||en(n,e.prev,e))||V0(n,e)&&en(n.prev,n,n.next)>0&&en(e.prev,e,e.next)>0)}function en(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function V0(n,e){return n.x===e.x&&n.y===e.y}function sA(n,e,t,i){var r=jd(en(n,e,t)),s=jd(en(n,e,i)),o=jd(en(t,i,n)),a=jd(en(t,i,e));return!!(r!==s&&o!==a||r===0&&Wd(n,t,e)||s===0&&Wd(n,i,e)||o===0&&Wd(t,n,i)||a===0&&Wd(t,e,i))}function Wd(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function jd(n){return n>0?1:n<0?-1:0}function aX(n,e){var t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&sA(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function sh(n,e){return en(n.prev,n,n.next)<0?en(n,e,n.next)>=0&&en(n,n.prev,e)>=0:en(n,e,n.prev)<0||en(n,n.next,e)<0}function lX(n,e){var t=n,i=!1,r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function oA(n,e){var t=new gy(n.i,n.x,n.y),i=new gy(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function R9(n,e,t,i){var r=new gy(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function oh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function gy(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}B0.deviation=function(n,e,t,i){var r=e&&e.length,s=r?e[0]*t:n.length,o=Math.abs(vy(n,0,s,t));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*t,f=a<l-1?e[a+1]*t:n.length;o-=Math.abs(vy(n,c,f,t))}var p=0;for(a=0;a<i.length;a+=3){var d=i[a]*t,m=i[a+1]*t,v=i[a+2]*t;p+=Math.abs((n[d]-n[v])*(n[m+1]-n[d+1])-(n[d]-n[m])*(n[v+1]-n[d+1]))}return o===0&&p===0?0:Math.abs((p-o)/o)};function vy(n,e,t,i){for(var r=0,s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}B0.flatten=function(n){for(var e=n[0][0].length,t={vertices:[],holes:[],dimensions:e},i=0,r=0;r<n.length;r++){for(var s=0;s<n[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(n[r][s][o]);r>0&&(i+=n[r-1].length,t.holes.push(i))}return t};function aA(n,e){return n<e?-1:n>e?1:n>=e?0:NaN}function cX(n){return n.length===1&&(n=uX(n)),{left:function(e,t,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var s=i+r>>>1;n(e[s],t)<0?i=s+1:r=s}return i},right:function(e,t,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var s=i+r>>>1;n(e[s],t)>0?r=s:i=s+1}return i}}}function uX(n){return function(e,t){return aA(n(e),t)}}cX(aA);const hX=({callback:n,requestedFPS:e=60,delay:t=0})=>{const i=H.useRef(0),r=H.useRef(0),s=H.useRef(0),o=H.useRef(0),a=H.useRef(0),l=H.useRef(0),c=H.useRef(0),f=H.useRef(0),p=m=>{s.current=m,o.current=1e3/s.current,c.current=Date.now(),a.current=c.current,i.current=requestAnimationFrame(d)},d=()=>{if(i.current=requestAnimationFrame(d),l.current=Date.now(),f.current=l.current-c.current,f.current>o.current){c.current=l.current-f.current%o.current;const m=l.current-a.current;r.current+=1;const v=Math.round(1e3/(m/r.current)*100)/100;n(v)}};H.useEffect(()=>(setTimeout(()=>p(e),t),()=>cancelAnimationFrame(i.current)),[e])};function fX(n,e={}){const t=BN(n);return H.useEffect(()=>{const i=jj(t.get(),n);sU(0,1,{...e,onUpdate:r=>t.set(i(r))})},[e,n,t]),t}const dX={key:"A",path:"M 157.2480005493164 124.19100189208984 L 181.61400054931642 124.19100189208984 L 181.61400054931642 123.14300189208984 C 179.5180005493164 121.83300189208984 179.1250005493164 118.82000189208985 179.1250005493164 113.18700189208984 L 179.1250005493164 79.78200189208985 C 179.1250005493164 70.87400189208984 175.7190005493164 64.06200189208984 168.7760005493164 59.739001892089846 C 163.6670005493164 56.59500189208984 157.1170005493164 55.28500189208984 146.8990005493164 55.28500189208984 C 125.9390005493164 55.28500189208984 115.7210005493164 66.15800189208984 115.19700054931641 79.38900189208985 L 138.6460005493164 79.38900189208985 C 139.3010005493164 74.54200189208984 142.0520005493164 71.39800189208984 147.4230005493164 71.39800189208984 C 152.79400054931642 71.39800189208984 154.4970005493164 74.14900189208984 154.4970005493164 77.81700189208985 C 154.4970005493164 82.00900189208984 150.69800054931642 83.71200189208984 136.5500005493164 85.28400189208983 C 123.7120005493164 86.72500189208984 112.31500054931641 91.04800189208984 112.31500054931641 105.85100189208984 C 112.31500054931641 118.95100189208985 121.74700054931641 125.89400189208985 134.58500054931642 125.89400189208985 C 143.2310005493164 125.89400189208985 150.30500054931642 123.01200189208984 154.7590005493164 116.85500189208985 L 155.0210005493164 116.85500189208985 C 155.5450005493164 120.52300189208984 156.3310005493164 122.61900189208984 157.2480005493164 124.19100189208984 Z M 143.8860005493164 111.22200189208985 C 139.8250005493164 111.22200189208985 136.15700054931642 109.25700189208985 136.15700054931642 104.80300189208984 C 136.15700054931642 100.87300189208985 138.3840005493164 98.77700189208984 145.5890005493164 97.20500189208984 C 149.78100054931642 96.28800189208984 152.79400054931642 95.24000189208985 155.1520005493164 94.06100189208985 L 155.1520005493164 99.95600189208984 C 155.1520005493164 107.94700189208984 149.65000054931642 111.22200189208985 143.8860005493164 111.22200189208985 Z",width:65},dg={key:"I",path:"M 115.328 124.191 L 140.087 124.191 L 140.087 57.381 L 115.328 57.381 L 115.328 124.191 Z",width:27},L9={key:"D",path:"M 142.7070005493164 126.41800189208985 C 150.96000054931642 126.41800189208985 158.0340005493164 122.35700189208984 162.3570005493164 114.89000189208984 L 162.6190005493164 114.89000189208984 L 162.6190005493164 124.19100189208984 L 186.1990005493164 124.19100189208984 L 186.1990005493164 30.526001892089837 L 161.4400005493164 30.526001892089837 L 161.4400005493164 64.45500189208984 L 161.0470005493164 64.45500189208984 C 156.7240005493164 58.822001892089844 152.00800054931642 55.28500189208984 142.4450005493164 55.28500189208984 C 124.6290005493164 55.28500189208984 112.57700054931641 69.69500189208983 112.57700054931641 90.65500189208984 C 112.57700054931641 113.71100189208984 125.4150005493164 126.41800189208985 142.7070005493164 126.41800189208985 Z M 149.78100054931642 107.68500189208984 C 142.4450005493164 107.68500189208984 137.7290005493164 100.48000189208985 137.7290005493164 90.26200189208984 C 137.7290005493164 80.04400189208985 142.5760005493164 73.10100189208984 149.78100054931642 73.10100189208984 C 157.1170005493164 73.10100189208984 162.0950005493164 80.69900189208984 162.0950005493164 90.26200189208984 C 162.0950005493164 99.95600189208984 157.1170005493164 107.68500189208984 149.78100054931642 107.68500189208984 Z",width:60},Gs={key:"E",path:"M 149.12600054931642 126.02500189208985 C 157.6410005493164 126.02500189208985 164.3220005493164 124.32200189208984 170.47900054931642 120.39200189208984 C 177.0290005493164 116.20000189208984 181.74500054931642 110.30500189208985 183.18600054931642 104.27900189208984 L 159.2130005493164 104.27900189208984 C 157.3790005493164 107.55400189208984 154.2350005493164 109.25700189208985 149.91200054931642 109.25700189208985 C 142.4450005493164 109.25700189208985 138.2530005493164 104.54100189208984 136.8120005493164 96.81200189208984 L 184.49600054931642 96.81200189208984 C 184.75800054931642 83.58100189208984 180.9590005493164 71.66000189208984 172.8370005493164 64.19300189208984 C 166.68000054931642 58.56000189208984 158.6890005493164 55.15400189208984 148.2090005493164 55.15400189208984 C 127.1180005493164 55.15400189208984 112.57700054931641 70.48100189208984 112.57700054931641 90.65500189208984 C 112.57700054931641 111.09100189208985 127.2490005493164 126.02500189208985 149.12600054931642 126.02500189208985 Z M 148.73300054931642 71.79100189208984 C 154.62800054931643 71.79100189208984 158.8200005493164 76.24500189208985 159.8680005493164 83.71200189208984 L 136.8120005493164 83.71200189208984 C 138.1220005493164 76.37600189208985 141.9210005493164 71.79100189208984 148.73300054931642 71.79100189208984 Z",width:65},pg={key:"N",path:"M 138.9080005493164 57.38100189208984 L 115.32800054931641 57.38100189208984 L 115.32800054931641 124.19100189208984 L 140.0870005493164 124.19100189208984 L 140.0870005493164 88.16600189208984 C 140.0870005493164 80.96100189208984 143.8860005493164 75.45900189208984 150.17400054931642 75.45900189208984 C 156.5930005493164 75.45900189208984 159.4750005493164 80.04400189208985 159.4750005493164 86.98700189208984 L 159.4750005493164 124.19100189208984 L 184.23400054931642 124.19100189208984 L 184.23400054931642 80.96100189208984 C 184.23400054931642 65.63400189208984 176.2430005493164 55.28500189208984 160.7850005493164 55.28500189208984 C 151.48400054931642 55.28500189208984 144.6720005493164 59.215001892089845 139.3010005493164 66.55100189208984 L 138.9080005493164 66.55100189208984 Z",width:70},mg={key:"L",path:"M 115.32800054931641 124.19100189208984 L 140.7420005493164 124.19100189208984 L 140.7420005493164 30.526001892089837 L 115.32800054931641 30.526001892089837 Z",width:28},pX={key:"P",path:"M 115.32800054931641 146.33000189208985 L 140.0870005493164 146.33000189208985 L 140.0870005493164 117.90300189208985 L 140.4800005493164 117.90300189208985 C 144.9340005493164 123.40500189208984 151.0910005493164 126.41800189208985 159.0820005493164 126.41800189208985 C 176.8980005493164 126.41800189208985 188.42600054931643 112.53200189208984 188.42600054931643 90.65500189208984 C 188.42600054931643 71.26700189208984 178.0770005493164 55.28500189208984 160.1300005493164 55.28500189208984 C 150.96000054931642 55.28500189208984 144.1480005493164 58.953001892089844 139.3010005493164 65.24100189208984 L 138.9080005493164 65.24100189208984 L 138.9080005493164 57.38100189208984 L 115.32800054931641 57.38100189208984 Z M 151.74600054931642 108.20900189208984 C 144.1480005493164 108.20900189208984 139.1700005493164 101.39700189208985 139.1700005493164 91.70300189208984 C 139.1700005493164 82.14000189208984 144.1480005493164 75.06600189208984 151.74600054931642 75.06600189208984 C 159.0820005493164 75.06600189208984 163.2740005493164 81.48500189208984 163.2740005493164 91.70300189208984 C 163.2740005493164 101.92100189208985 159.0820005493164 108.20900189208984 151.74600054931642 108.20900189208984 Z",width:65},Xc={key:"R",path:"M 138.9080005493164 57.38100189208984 L 115.32800054931641 57.38100189208984 L 115.32800054931641 124.19100189208984 L 140.0870005493164 124.19100189208984 L 140.0870005493164 96.81200189208984 C 140.0870005493164 81.74700189208984 148.60200054931641 75.19700189208984 163.1430005493164 77.68600189208985 L 163.6670005493164 77.68600189208985 L 163.6670005493164 56.59500189208984 C 162.8810005493164 56.20200189208984 161.5710005493164 55.94000189208984 159.6060005493164 55.94000189208984 C 151.0910005493164 55.94000189208984 144.6720005493164 59.084001892089844 139.3010005493164 67.46800189208984 L 138.9080005493164 67.46800189208984 Z",width:45},mX={key:"V",path:"M 132.88200054931642 124.19100189208984 L 161.8330005493164 124.19100189208984 L 184.75800054931642 57.38100189208984 L 159.8680005493164 57.38100189208984 L 152.27000054931642 83.05700189208984 C 150.30500054931642 89.86900189208984 147.8160005493164 99.17000189208984 147.8160005493164 99.17000189208984 L 147.5540005493164 99.17000189208984 C 147.5540005493164 99.17000189208984 145.1960005493164 89.86900189208984 143.2310005493164 83.05700189208984 L 135.63300054931642 57.38100189208984 L 109.9570005493164 57.38100189208984 Z",width:65},I9={key:"G",path:"M 148.0780005493164 147.50900189208986 C 158.0340005493164 147.50900189208986 166.81100054931642 145.41300189208985 172.9680005493164 140.17300189208984 C 178.8630005493164 135.19500189208983 182.7930005493164 126.94200189208985 182.7930005493164 116.20000189208984 L 182.7930005493164 57.38100189208984 L 159.2130005493164 57.38100189208984 L 159.2130005493164 64.71700189208984 L 158.8200005493164 64.71700189208984 C 155.0210005493164 58.953001892089844 149.25700054931642 55.28500189208984 139.8250005493164 55.28500189208984 C 123.4500005493164 55.28500189208984 112.57700054931641 70.21900189208984 112.57700054931641 89.34500189208984 C 112.57700054931641 110.30500189208985 125.8080005493164 120.91600189208984 141.0040005493164 120.91600189208984 C 148.73300054931642 120.91600189208984 153.9730005493164 117.77200189208985 157.9030005493164 113.31800189208984 L 158.4270005493164 113.31800189208984 L 158.4270005493164 119.34400189208985 C 158.4270005493164 126.28700189208985 155.6760005493164 131.00300189208986 147.6850005493164 131.00300189208986 C 141.7900005493164 131.00300189208986 138.6460005493164 128.12100189208985 137.7290005493164 125.37000189208985 L 113.88700054931641 125.37000189208985 C 116.2450005493164 140.17300189208984 129.3450005493164 147.50900189208986 148.0780005493164 147.50900189208986 Z M 148.0780005493164 103.62400189208984 C 141.1350005493164 103.62400189208984 136.68100054931642 97.20500189208984 136.68100054931642 88.29700189208984 C 136.68100054931642 79.25800189208985 141.1350005493164 73.23200189208984 148.0780005493164 73.23200189208984 C 155.2830005493164 73.23200189208984 159.4750005493164 79.91300189208985 159.4750005493164 88.29700189208984 C 159.4750005493164 97.07400189208984 155.2830005493164 103.62400189208984 148.0780005493164 103.62400189208984 Z",width:70},D9={key:"O",path:"M 149.25700054931642 126.28700189208985 C 171.52700054931643 126.28700189208985 185.6750005493164 111.22200189208985 185.6750005493164 90.91700189208984 C 185.6750005493164 70.61200189208984 171.52700054931643 55.41600189208984 149.25700054931642 55.41600189208984 C 126.9870005493164 55.41600189208984 112.57700054931641 70.61200189208984 112.57700054931641 90.91700189208984 C 112.57700054931641 111.22200189208985 126.9870005493164 126.28700189208985 149.25700054931642 126.28700189208985 Z M 148.99500054931642 109.78100189208985 C 141.3970005493164 109.78100189208985 137.7290005493164 102.18300189208983 137.7290005493164 90.91700189208984 C 137.7290005493164 79.65100189208985 141.3970005493164 72.05300189208984 148.99500054931642 72.05300189208984 C 156.5930005493164 72.05300189208984 160.5230005493164 79.65100189208985 160.5230005493164 90.91700189208984 C 160.5230005493164 102.18300189208983 156.5930005493164 109.78100189208985 148.99500054931642 109.78100189208985 Z",width:65},N9={key:"S",path:"M 145.0650005493164 126.41800189208985 C 163.4050005493164 126.41800189208985 177.9460005493164 119.47500189208985 177.9460005493164 103.49300189208984 C 177.9460005493164 84.89100189208983 162.4880005493164 82.14000189208984 150.30500054931642 80.43700189208984 C 142.7070005493164 79.38900189208985 136.5500005493164 78.60300189208985 136.5500005493164 74.80400189208984 C 136.5500005493164 71.39800189208984 139.9560005493164 69.95700189208983 143.6240005493164 69.95700189208983 C 147.6850005493164 69.95700189208983 151.3530005493164 71.00500189208984 152.00800054931642 75.98300189208985 L 175.3260005493164 75.98300189208985 C 174.4090005493164 62.883001892089844 163.7980005493164 55.28500189208984 143.4930005493164 55.28500189208984 C 127.1180005493164 55.28500189208984 113.10100054931641 62.883001892089844 113.10100054931641 76.63800189208985 C 113.10100054931641 93.40600189208985 126.0700005493164 96.41900189208984 137.3360005493164 98.12200189208984 C 145.9820005493164 99.43200189208984 153.7110005493164 100.08700189208984 153.7110005493164 105.58900189208984 C 153.7110005493164 109.65000189208985 150.04300054931642 111.35300189208985 145.1960005493164 111.35300189208985 C 138.9080005493164 111.35300189208985 135.5020005493164 108.07800189208984 135.10900054931642 102.57600189208983 L 111.39800054931641 102.57600189208983 C 111.52900054931641 117.90300189208985 125.2840005493164 126.41800189208985 145.0650005493164 126.41800189208985 Z",width:60},U9={key:"T",path:"M 111.79100054931641 72.31500189208984 L 120.43700054931641 72.31500189208984 L 120.43700054931641 104.93400189208984 C 120.43700054931641 120.91600189208984 128.6900005493164 125.50100189208985 144.9340005493164 125.50100189208985 C 149.38800054931642 125.50100189208985 153.31800054931642 124.84600189208984 157.1170005493164 123.92900189208984 L 157.1170005493164 105.72000189208984 C 149.38800054931642 106.24400189208984 144.6720005493164 106.11300189208984 144.6720005493164 99.43200189208984 L 144.6720005493164 72.31500189208984 L 157.3790005493164 72.31500189208984 L 157.3790005493164 57.38100189208984 L 144.6720005493164 57.38100189208984 L 144.6720005493164 35.76600189208985 L 120.43700054931641 35.76600189208985 L 120.43700054931641 57.38100189208984 L 111.79100054931641 57.38100189208984 Z",width:44},gX={key:"U",path:"M 183.44800054931642 124.19100189208984 L 183.44800054931642 57.38100189208984 L 158.6890005493164 57.38100189208984 L 158.6890005493164 93.40600189208985 C 158.6890005493164 100.61100189208985 154.89000054931643 105.19600189208984 148.47100054931641 105.19600189208984 C 142.5760005493164 105.19600189208984 139.5630005493164 101.52800189208985 139.5630005493164 94.58500189208985 L 139.5630005493164 57.38100189208984 L 114.80400054931641 57.38100189208984 L 114.80400054931641 100.48000189208985 C 114.80400054931641 115.80700189208984 122.66400054931641 126.28700189208985 138.6460005493164 126.28700189208985 C 147.8160005493164 126.28700189208985 154.36600054931642 122.48800189208984 159.4750005493164 115.54500189208984 L 159.8680005493164 115.54500189208984 L 159.8680005493164 124.19100189208984 Z",width:65},vX={path:"M 24.339 14.462 C 24.339 21.162 18.908 26.595 12.207 26.595 C 5.506 26.595 0.074 21.162 0.074 14.462 C 0.074 7.761 5.506 2.328 12.207 2.328 C 18.908 2.328 24.339 7.761 24.339 14.462 Z"},Ws={key:"SPACE",path:"M 0 0",width:0},yX=()=>{const[n,e]=oU([L9,Gs,mX,Gs,mg,D9,pX,Gs,Xc,Ws,Ws],[Gs,pg,I9,dg,pg,Gs,Gs,Xc,Ws,Ws,Ws],[L9,Gs,N9,dg,I9,pg,Gs,Xc,Ws,Ws,Ws],[dg,mg,mg,gX,N9,U9,Xc,dX,U9,D9,Xc]);hX({callback:()=>{e()},requestedFPS:.5,delay:1.5});const t=n.map(({path:s,width:o,key:a})=>({path:fX(s,{duration:.5}),width:o,key:a})),i=s=>{if(s===-1)return innerWidth;for(var o=0,a=0;a<s;a++)o+=t[a].width;return o},r=t.indexOf(t.find(s=>s.key==="I"));return ee.jsxs("svg",{viewBox:"100 0 824 163",xmlns:"http://www.w3.org/2000/svg",style:{stroke:"var(--primary-text)",strokeWidth:1,strokeLinecap:"round",fill:"var(--primary-text)"},children:[ee.jsx("g",{style:{transition:"all .5s linear"},transform:`translate(${i(r)+115}, 27)`,children:ee.jsx(Kt.path,{fill:"var(--volt)",stroke:"var(--volt)",d:vX.path,initial:!1})}),t.map(({path:s,key:o},a)=>ee.jsx("g",{style:{transition:"all .5s linear"},transform:`translate(${i(a)}, 0)`,children:ee.jsx(Kt.path,{d:s})},`${o}-${a}`))]})},xX=["M 52.17 28.148 C 52.17 35.743 46.013 41.901 38.417 41.901 C 30.822 41.901 24.664 35.743 24.664 28.148 C 24.664 20.552 30.822 14.394 38.417 14.394 C 46.013 14.394 52.17 20.552 52.17 28.148 Z","M 812.877 115.069 C 812.877 121.195 807.911 126.162 801.784 126.162 C 795.658 126.162 790.691 121.195 790.691 115.069 C 790.691 108.942 795.658 103.975 801.784 103.975 C 807.911 103.975 812.877 108.942 812.877 115.069 Z","M 27.777 151.747 C 35.727 151.747 41.877 150.097 46.527 145.297 C 50.427 141.247 53.127 135.097 53.127 123.697 L 53.127 49.147 L 24.777 49.147 L 24.777 122.647 C 24.777 131.797 20.577 131.047 11.727 130.897 L 11.727 150.247 C 16.077 151.147 22.977 151.747 27.777 151.747 Z M 130.427 125.647 L 130.427 49.147 L 102.077 49.147 L 102.077 90.397 C 102.077 98.647 97.727 103.897 90.377 103.897 C 83.627 103.897 80.177 99.697 80.177 91.747 L 80.177 49.147 L 51.827 49.147 L 51.827 98.497 C 51.827 116.047 60.827 128.047 79.127 128.047 C 89.627 128.047 97.127 123.697 102.977 115.747 L 103.427 115.747 L 103.427 125.647 L 130.427 125.647 Z M 177.726 125.647 L 205.626 125.647 L 205.626 124.447 C 203.226 122.947 202.776 119.497 202.776 113.047 L 202.776 74.797 C 202.776 64.597 198.876 56.797 190.926 51.847 C 185.076 48.247 177.576 46.747 165.876 46.747 C 141.876 46.747 130.176 59.197 129.576 74.347 L 156.426 74.347 C 157.176 68.797 160.326 65.197 166.476 65.197 C 172.626 65.197 174.576 68.347 174.576 72.547 C 174.576 77.347 170.226 79.297 154.026 81.097 C 139.326 82.747 126.276 87.697 126.276 104.647 C 126.276 119.647 137.076 127.597 151.776 127.597 C 161.676 127.597 169.776 124.297 174.876 117.247 L 175.176 117.247 C 175.776 121.447 176.676 123.847 177.726 125.647 Z M 162.426 110.797 C 157.776 110.797 153.576 108.547 153.576 103.447 C 153.576 98.947 156.126 96.547 164.376 94.747 C 169.176 93.697 172.626 92.497 175.326 91.147 L 175.326 97.897 C 175.326 107.047 169.026 110.797 162.426 110.797 Z M 229.675 49.147 L 202.675 49.147 L 202.675 125.647 L 231.025 125.647 L 231.025 84.397 C 231.025 76.147 235.375 69.847 242.575 69.847 C 249.925 69.847 253.225 75.097 253.225 83.047 L 253.225 125.647 L 281.575 125.647 L 281.575 76.147 C 281.575 58.597 272.425 46.747 254.725 46.747 C 244.075 46.747 236.275 51.247 230.125 59.647 L 229.675 59.647 L 229.675 49.147 Z M 318.725 49.147 L 291.725 49.147 L 291.725 125.647 L 320.075 125.647 L 320.075 84.397 C 320.075 76.147 324.425 69.847 331.625 69.847 C 338.975 69.847 342.275 75.097 342.275 83.047 L 342.275 125.647 L 370.625 125.647 L 370.625 76.147 C 370.625 58.597 361.475 46.747 343.775 46.747 C 333.125 46.747 325.325 51.247 319.175 59.647 L 318.725 59.647 L 318.725 49.147 Z M 417.324 125.647 L 445.224 125.647 L 445.224 124.447 C 442.824 122.947 442.374 119.497 442.374 113.047 L 442.374 74.797 C 442.374 64.597 438.474 56.797 430.524 51.847 C 424.674 48.247 417.174 46.747 405.474 46.747 C 381.474 46.747 369.774 59.197 369.174 74.347 L 396.024 74.347 C 396.774 68.797 399.924 65.197 406.074 65.197 C 412.224 65.197 414.174 68.347 414.174 72.547 C 414.174 77.347 409.824 79.297 393.624 81.097 C 378.924 82.747 365.874 87.697 365.874 104.647 C 365.874 119.647 376.674 127.597 391.374 127.597 C 401.274 127.597 409.374 124.297 414.474 117.247 L 414.774 117.247 C 415.374 121.447 416.274 123.847 417.324 125.647 Z M 402.024 110.797 C 397.374 110.797 393.174 108.547 393.174 103.447 C 393.174 98.947 395.724 96.547 403.974 94.747 C 408.774 93.697 412.224 92.497 414.924 91.147 L 414.924 97.897 C 414.924 107.047 408.624 110.797 402.024 110.797 Z M 469.273 49.147 L 442.273 49.147 L 442.273 125.647 L 470.623 125.647 L 470.623 94.297 C 470.623 77.047 480.373 69.547 497.023 72.397 L 497.623 72.397 L 497.623 48.247 C 496.723 47.797 495.223 47.497 492.973 47.497 C 483.223 47.497 475.873 51.097 469.723 60.697 L 469.273 60.697 L 469.273 49.147 Z M 516.573 125.647 L 549.723 125.647 L 575.973 49.147 L 547.473 49.147 L 538.773 78.547 C 536.523 86.347 533.673 96.997 533.673 96.997 L 533.373 96.997 C 533.373 96.997 530.673 86.347 528.423 78.547 L 519.723 49.147 L 490.323 49.147 L 516.573 125.647 Z M 614.122 125.647 L 642.022 125.647 L 642.022 124.447 C 639.622 122.947 639.172 119.497 639.172 113.047 L 639.172 74.797 C 639.172 64.597 635.272 56.797 627.322 51.847 C 621.472 48.247 613.972 46.747 602.272 46.747 C 578.272 46.747 566.572 59.197 565.972 74.347 L 592.822 74.347 C 593.572 68.797 596.722 65.197 602.872 65.197 C 609.022 65.197 610.972 68.347 610.972 72.547 C 610.972 77.347 606.622 79.297 590.422 81.097 C 575.722 82.747 562.672 87.697 562.672 104.647 C 562.672 119.647 573.472 127.597 588.172 127.597 C 598.072 127.597 606.172 124.297 611.272 117.247 L 611.572 117.247 C 612.172 121.447 613.072 123.847 614.122 125.647 Z M 598.822 110.797 C 594.172 110.797 589.972 108.547 589.972 103.447 C 589.972 98.947 592.522 96.547 600.772 94.747 C 605.572 93.697 609.022 92.497 611.722 91.147 L 611.722 97.897 C 611.722 107.047 605.422 110.797 598.822 110.797 Z M 592.222 40.747 L 613.522 40.747 L 633.472 17.497 L 600.922 17.497 L 592.222 40.747 Z M 677.771 127.747 C 687.521 127.747 695.171 125.797 702.221 121.297 C 709.721 116.497 715.121 109.747 716.771 102.847 L 689.321 102.847 C 687.221 106.597 683.621 108.547 678.671 108.547 C 670.121 108.547 665.321 103.147 663.671 94.297 L 718.271 94.297 C 718.571 79.147 714.221 65.497 704.921 56.947 C 697.871 50.497 688.721 46.597 676.721 46.597 C 652.571 46.597 635.921 64.147 635.921 87.247 C 635.921 110.647 652.721 127.747 677.771 127.747 Z M 677.321 65.647 C 684.071 65.647 688.871 70.747 690.071 79.297 L 663.671 79.297 C 665.171 70.897 669.521 65.647 677.321 65.647 Z M 711.721 125.647 L 784.171 125.647 L 784.171 104.197 L 758.971 104.197 C 752.071 104.197 746.521 104.497 746.521 104.497 L 746.521 104.047 C 746.521 104.047 751.621 99.397 756.271 94.747 L 781.621 68.797 L 781.621 49.297 L 714.421 49.297 L 714.421 70.597 L 735.271 70.597 C 740.071 70.597 746.071 70.297 746.071 70.297 L 746.071 70.747 C 746.071 70.747 742.321 74.047 738.571 77.797 L 711.721 105.097 L 711.721 125.647 Z"],_X=()=>ee.jsx(PR,{children:ee.jsx("svg",{viewBox:"0 0 824 163",xmlns:"http://www.w3.org/2000/svg",style:{},children:xX.map((n,e)=>ee.jsx(Kt.path,{style:{strokeWidth:3,fill:e==2?"var(--primary-text)":"var(--volt)"},initial:{fillOpacity:0,pathLength:0,strokeOpacity:1,stroke:"var(--volt)"},animate:{fillOpacity:1,strokeOpacity:1,pathLength:1,stroke:e==2?"var(--primary-text)":"var(--volt)"},transition:{duration:3,ease:"easeInOut",delay:1.5},d:n},e))})});var SX="Expected a function",F9=NaN,MX="[object Symbol]",bX=/^\s+|\s+$/g,wX=/^[-+]0x[0-9a-f]+$/i,TX=/^0b[01]+$/i,AX=/^0o[0-7]+$/i,EX=parseInt,CX=typeof Ji=="object"&&Ji&&Ji.Object===Object&&Ji,PX=typeof self=="object"&&self&&self.Object===Object&&self,RX=CX||PX||Function("return this")(),LX=Object.prototype,IX=LX.toString,DX=Math.max,NX=Math.min,gg=function(){return RX.Date.now()};function UX(n,e,t){var i,r,s,o,a,l,c=0,f=!1,p=!1,d=!0;if(typeof n!="function")throw new TypeError(SX);e=O9(e)||0,yy(t)&&(f=!!t.leading,p="maxWait"in t,s=p?DX(O9(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function m(E){var L=i,I=r;return i=r=void 0,c=E,o=n.apply(I,L),o}function v(E){return c=E,a=setTimeout(y,e),f?m(E):o}function _(E){var L=E-l,I=E-c,R=e-L;return p?NX(R,s-I):R}function x(E){var L=E-l,I=E-c;return l===void 0||L>=e||L<0||p&&I>=s}function y(){var E=gg();if(x(E))return b(E);a=setTimeout(y,_(E))}function b(E){return a=void 0,d&&i?m(E):(i=r=void 0,o)}function M(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function T(){return a===void 0?o:b(gg())}function P(){var E=gg(),L=x(E);if(i=arguments,r=this,l=E,L){if(a===void 0)return v(l);if(p)return a=setTimeout(y,e),m(l)}return a===void 0&&(a=setTimeout(y,e)),o}return P.cancel=M,P.flush=T,P}function yy(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function FX(n){return!!n&&typeof n=="object"}function OX(n){return typeof n=="symbol"||FX(n)&&IX.call(n)==MX}function O9(n){if(typeof n=="number")return n;if(OX(n))return F9;if(yy(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=yy(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(bX,"");var t=TX.test(n);return t||AX.test(n)?EX(n.slice(2),t?2:8):wX.test(n)?F9:+n}var kX=UX;const BX=Sa(kX);var lA="Expected a function",k9=NaN,VX="[object Symbol]",zX=/^\s+|\s+$/g,HX=/^[-+]0x[0-9a-f]+$/i,$X=/^0b[01]+$/i,GX=/^0o[0-7]+$/i,WX=parseInt,jX=typeof Ji=="object"&&Ji&&Ji.Object===Object&&Ji,XX=typeof self=="object"&&self&&self.Object===Object&&self,qX=jX||XX||Function("return this")(),YX=Object.prototype,KX=YX.toString,ZX=Math.max,JX=Math.min,vg=function(){return qX.Date.now()};function QX(n,e,t){var i,r,s,o,a,l,c=0,f=!1,p=!1,d=!0;if(typeof n!="function")throw new TypeError(lA);e=B9(e)||0,Hp(t)&&(f=!!t.leading,p="maxWait"in t,s=p?ZX(B9(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function m(E){var L=i,I=r;return i=r=void 0,c=E,o=n.apply(I,L),o}function v(E){return c=E,a=setTimeout(y,e),f?m(E):o}function _(E){var L=E-l,I=E-c,R=e-L;return p?JX(R,s-I):R}function x(E){var L=E-l,I=E-c;return l===void 0||L>=e||L<0||p&&I>=s}function y(){var E=vg();if(x(E))return b(E);a=setTimeout(y,_(E))}function b(E){return a=void 0,d&&i?m(E):(i=r=void 0,o)}function M(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function T(){return a===void 0?o:b(vg())}function P(){var E=vg(),L=x(E);if(i=arguments,r=this,l=E,L){if(a===void 0)return v(l);if(p)return a=setTimeout(y,e),m(l)}return a===void 0&&(a=setTimeout(y,e)),o}return P.cancel=M,P.flush=T,P}function eq(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(lA);return Hp(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),QX(n,e,{leading:i,maxWait:e,trailing:r})}function Hp(n){var e=typeof n;return!!n&&(e=="object"||e=="function")}function tq(n){return!!n&&typeof n=="object"}function nq(n){return typeof n=="symbol"||tq(n)&&KX.call(n)==VX}function B9(n){if(typeof n=="number")return n;if(nq(n))return k9;if(Hp(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Hp(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=n.replace(zX,"");var t=$X.test(n);return t||GX.test(n)?WX(n.slice(2),t?2:8):HX.test(n)?k9:+n}var iq=eq;const rq=Sa(iq),sq=()=>Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),oq=({isFullPageScroll:n,containerRef:e,scrollContainerRef:t,onBottomReach:i})=>{const[r,s]=H.useState(0),[o,a]=H.useState(!1),l=H.useRef(0);return H.useEffect(()=>{if(!n&&!(e!=null&&e.current)&&!(t!=null&&t.current))return;const c=n?window:(t==null?void 0:t.current)||e.current;let f=l.current;const p=BX(()=>{i==null||i(),a(!0)},25),d=()=>{const _=n?window.pageYOffset:((t==null?void 0:t.current)||e.current).scrollTop,x=n?sq():((t==null?void 0:t.current)||e.current).scrollHeight,y=n?document.documentElement.clientHeight:e.current.clientHeight,b=x-y,M=Math.floor(_/b*100);s(M);const T=_>f,P=b-_<=15;i&&T&&P&&p(),_<f&&!P&&o&&a(!1),l.current=_},v=rq(()=>{requestAnimationFrame(d)},25);return c.addEventListener("scroll",v),()=>{c.removeEventListener("scroll",v)}},[o,n,e,i,t]),{progress:r,isAtBottom:o}},cA=H.createContext({});function aq(n){const e=H.useRef(null);return e.current===null&&(e.current=n()),e.current}const Lx=typeof window<"u",lq=Lx?H.useLayoutEffect:H.useEffect,Ix=H.createContext(null),uA=H.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function cq(n=!0){const e=H.useContext(Ix);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=H.useId();H.useEffect(()=>{if(n)return r(s)},[n]);const o=H.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const Xd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],V9={value:null,addProjectionMetrics:null};function uq(n,e){let t=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(p){o.has(p)&&(f.schedule(p),n()),l++,p(a)}const f={schedule:(p,d=!1,m=!1)=>{const _=m&&r?t:i;return d&&o.add(p),_.has(p)||_.add(p),p},cancel:p=>{i.delete(p),o.delete(p)},process:p=>{if(a=p,r){s=!0;return}r=!0,[t,i]=[i,t],t.forEach(c),e&&V9.value&&V9.value.frameloop[e].push(l),l=0,t.clear(),r=!1,s&&(s=!1,f.process(p))}};return f}const _s={},hq=40;function hA(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Xd.reduce((M,T)=>(M[T]=uq(s,e?T:void 0),M),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:f,update:p,preRender:d,render:m,postRender:v}=o,_=()=>{const M=_s.useManualTiming?r.timestamp:performance.now();t=!1,_s.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(M-r.timestamp,hq),1)),r.timestamp=M,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),f.process(r),p.process(r),d.process(r),m.process(r),v.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(_))},x=()=>{t=!0,i=!0,r.isProcessing||n(_)};return{schedule:Xd.reduce((M,T)=>{const P=o[T];return M[T]=(E,L=!1,I=!1)=>(t||x(),P.schedule(E,L,I)),M},{}),cancel:M=>{for(let T=0;T<Xd.length;T++)o[Xd[T]].cancel(M)},state:r,steps:o}}const nr=n=>n,{schedule:sn,cancel:so,state:On,steps:yg}=hA(typeof requestAnimationFrame<"u"?requestAnimationFrame:nr,!0),fA=H.createContext({strict:!1}),z9={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Xl={};for(const n in z9)Xl[n]={isEnabled:e=>z9[n].some(t=>!!e[t])};function fq(n){for(const e in n)Xl[e]={...Xl[e],...n[e]}}const dq=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function $p(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||dq.has(n)}let dA=n=>!$p(n);function pq(n){n&&(dA=e=>e.startsWith("on")?!$p(e):n(e))}try{pq(require("@emotion/is-prop-valid").default)}catch{}function mq(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(dA(r)||t===!0&&$p(r)||!e&&!$p(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function gq(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const z0=H.createContext({});function H0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function ah(n){return typeof n=="string"||Array.isArray(n)}const Dx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nx=["initial",...Dx];function $0(n){return H0(n.animate)||Nx.some(e=>ah(n[e]))}function pA(n){return!!($0(n)||n.variants)}function vq(n,e){if($0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||ah(t)?t:void 0,animate:ah(i)?i:void 0}}return n.inherit!==!1?e:{}}function yq(n){const{initial:e,animate:t}=vq(n,H.useContext(z0));return H.useMemo(()=>({initial:e,animate:t}),[H9(e),H9(t)])}function H9(n){return Array.isArray(n)?n.join(" "):n}const xq=Symbol.for("motionComponentSymbol");function El(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function _q(n,e,t){return H.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):El(t)&&(t.current=i))},[e])}const Ux=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Sq="framerAppearId",mA="data-"+Ux(Sq),gA=H.createContext({}),{schedule:Fx,cancel:Cne}=hA(queueMicrotask,!1);function Mq(n,e,t,i,r){var _,x;const{visualElement:s}=H.useContext(z0),o=H.useContext(fA),a=H.useContext(Ix),l=H.useContext(uA).reducedMotion,c=H.useRef(null);i=i||o.renderer,!c.current&&i&&(c.current=i(n,{visualState:e,parent:s,props:t,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const f=c.current,p=H.useContext(gA);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&bq(c.current,t,r,p);const d=H.useRef(!1);H.useInsertionEffect(()=>{f&&d.current&&f.update(t,a)});const m=t[mA],v=H.useRef(!!m&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,m))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,m)));return lq(()=>{f&&(d.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),Fx.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),H.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),v.current=!1))}),f}function bq(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:f}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:vA(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&El(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:l,layoutRoot:c})}function vA(n){if(n)return n.options.allowProjection!==!1?n.projection:vA(n.parent)}let Gp=()=>{};function wq({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&fq(n);function s(a,l){let c;const f={...H.useContext(uA),...a,layoutId:Tq(a)},{isStatic:p}=f,d=yq(a),m=i(a,p);if(!p&&Lx){Aq();const v=Eq(f);c=v.MeasureLayout,d.visualElement=Mq(r,m,f,e,v.ProjectionNode)}return ee.jsxs(z0.Provider,{value:d,children:[c&&d.visualElement?ee.jsx(c,{visualElement:d.visualElement,...f}):null,t(r,a,_q(m,d.visualElement,l),m,p,d.visualElement)]})}s.displayName=`motion.${typeof r=="string"?r:`create(${r.displayName??r.name??""})`}`;const o=H.forwardRef(s);return o[xq]=r,o}function Tq({layoutId:n}){const e=H.useContext(cA).id;return e&&n!==void 0?e+"-"+n:n}function Aq(n,e){H.useContext(fA).strict}function Eq(n){const{drag:e,layout:t}=Xl;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const yA=n=>e=>typeof e=="string"&&e.startsWith(n),Ox=yA("--"),Cq=yA("var(--"),kx=n=>Cq(n)?Pq.test(n.split("/*")[0].trim()):!1,Pq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,lh={};function Rq(n){for(const e in n)lh[e]=n[e],Ox(e)&&(lh[e].isCSSVariable=!0)}const rc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],sc=new Set(rc);function xA(n,{layout:e,layoutId:t}){return sc.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!lh[n]||n==="opacity")}const Kn=n=>!!(n&&n.getVelocity),_A=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Ss=(n,e,t)=>t>e?e:t<n?n:t,oc={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},ch={...oc,transform:n=>Ss(0,1,n)},qd={...oc,default:1},$9={...oc,transform:Math.round},Bh=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),qs=Bh("deg"),Vr=Bh("%"),rt=Bh("px"),Lq=Bh("vh"),Iq=Bh("vw"),G9={...Vr,parse:n=>Vr.parse(n)/100,transform:n=>Vr.transform(n*100)},Dq={rotate:qs,rotateX:qs,rotateY:qs,rotateZ:qs,scale:qd,scaleX:qd,scaleY:qd,scaleZ:qd,skew:qs,skewX:qs,skewY:qs,distance:rt,translateX:rt,translateY:rt,translateZ:rt,x:rt,y:rt,z:rt,perspective:rt,transformPerspective:rt,opacity:ch,originX:G9,originY:G9,originZ:rt},Bx={borderWidth:rt,borderTopWidth:rt,borderRightWidth:rt,borderBottomWidth:rt,borderLeftWidth:rt,borderRadius:rt,radius:rt,borderTopLeftRadius:rt,borderTopRightRadius:rt,borderBottomRightRadius:rt,borderBottomLeftRadius:rt,width:rt,maxWidth:rt,height:rt,maxHeight:rt,top:rt,right:rt,bottom:rt,left:rt,padding:rt,paddingTop:rt,paddingRight:rt,paddingBottom:rt,paddingLeft:rt,margin:rt,marginTop:rt,marginRight:rt,marginBottom:rt,marginLeft:rt,backgroundPositionX:rt,backgroundPositionY:rt,...Dq,zIndex:$9,fillOpacity:ch,strokeOpacity:ch,numOctaves:$9},Nq={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Uq=rc.length;function Fq(n,e,t){let i="",r=!0;for(let s=0;s<Uq;s++){const o=rc[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=_A(a,Bx[o]);if(!l){r=!1;const f=Nq[o]||o;i+=`${f}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function Vx(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(sc.has(l)){o=!0;continue}else if(Ox(l)){r[l]=c;continue}else{const f=_A(c,Bx[l]);l.startsWith("origin")?(a=!0,s[l]=f):i[l]=f}}if(e.transform||(o||t?i.transform=Fq(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:f=0}=s;i.transformOrigin=`${l} ${c} ${f}`}}const zx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SA(n,e,t){for(const i in e)!Kn(e[i])&&!xA(i,t)&&(n[i]=e[i])}function Oq({transformTemplate:n},e){return H.useMemo(()=>{const t=zx();return Vx(t,e,n),Object.assign({},t.vars,t.style)},[e])}function kq(n,e){const t=n.style||{},i={};return SA(i,t,n),Object.assign(i,Oq(n,e)),i}function Bq(n,e){const t={},i=kq(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const Vq=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hx(n){return typeof n!="string"||n.includes("-")?!1:!!(Vq.indexOf(n)>-1||/[A-Z]/u.test(n))}const zq={offset:"stroke-dashoffset",array:"stroke-dasharray"},Hq={offset:"strokeDashoffset",array:"strokeDasharray"};function $q(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?zq:Hq;n[s.offset]=rt.transform(-i);const o=rt.transform(e),a=rt.transform(t);n[s.array]=`${o} ${a}`}function MA(n,{attrX:e,attrY:t,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,c,f){if(Vx(n,a,c),l){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:d}=n;p.transform&&(d.transform=p.transform,delete p.transform),(d.transform||p.transformOrigin)&&(d.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),d.transform&&(d.transformBox=(f==null?void 0:f.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),r!==void 0&&$q(p,r,s,o,!1)}const bA=()=>({...zx(),attrs:{}}),wA=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Gq(n,e,t,i){const r=H.useMemo(()=>{const s=bA();return MA(s,e,wA(i),n.transformTemplate,n.style),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};SA(s,n.style,n),r.style={...s,...r.style}}return r}function Wq(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(Hx(t)?Gq:Bq)(i,s,o,t),c=mq(i,typeof t=="string",n),f=t!==H.Fragment?{...c,...l,ref:r}:{},{children:p}=i,d=H.useMemo(()=>Kn(p)?p.get():p,[p]);return H.createElement(t,{...f,children:d})}}function W9(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function $x(n,e,t,i){if(typeof e=="function"){const[r,s]=W9(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=W9(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function dp(n){return Kn(n)?n.get():n}function jq({scrapeMotionValuesFromProps:n,createRenderState:e},t,i,r){return{latestValues:Xq(t,i,r,n),renderState:e()}}const TA=n=>(e,t)=>{const i=H.useContext(z0),r=H.useContext(Ix),s=()=>jq(n,e,i,r);return t?s():aq(s)};function Xq(n,e,t,i){const r={},s=i(n,{});for(const d in s)r[d]=dp(s[d]);let{initial:o,animate:a}=n;const l=$0(n),c=pA(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const p=f?a:o;if(p&&typeof p!="boolean"&&!H0(p)){const d=Array.isArray(p)?p:[p];for(let m=0;m<d.length;m++){const v=$x(n,d[m]);if(v){const{transitionEnd:_,transition:x,...y}=v;for(const b in y){let M=y[b];if(Array.isArray(M)){const T=f?M.length-1:0;M=M[T]}M!==null&&(r[b]=M)}for(const b in _)r[b]=_[b]}}}return r}function Gx(n,e,t){var s;const{style:i}=n,r={};for(const o in i)(Kn(i[o])||e.style&&Kn(e.style[o])||xA(o,n)||((s=t==null?void 0:t.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(r[o]=i[o]);return r}const qq={useVisualState:TA({scrapeMotionValuesFromProps:Gx,createRenderState:zx})};function AA(n,e,t){const i=Gx(n,e,t);for(const r in n)if(Kn(n[r])||Kn(e[r])){const s=rc.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}const Yq={useVisualState:TA({scrapeMotionValuesFromProps:AA,createRenderState:bA})};function Kq(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...Hx(i)?Yq:qq,preloadedFeatures:n,useRender:Wq(r),createVisualElement:e,Component:i};return wq(o)}}function uh(n,e,t){const i=n.getProps();return $x(i,e,t!==void 0?t:i.custom,n)}const xy=n=>Array.isArray(n);let pp;function Zq(){pp=void 0}const xi={now:()=>(pp===void 0&&xi.set(On.isProcessing||_s.useManualTiming?On.timestamp:performance.now()),pp),set:n=>{pp=n,queueMicrotask(Zq)}};function Wx(n,e){n.indexOf(e)===-1&&n.push(e)}function jx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Xx{constructor(){this.subscriptions=[]}add(e){return Wx(this.subscriptions,e),()=>jx(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function EA(n,e){return e?n*(1e3/e):0}const j9=30,Jq=n=>!isNaN(parseFloat(n));class Qq{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var o,a;const s=xi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();r&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=xi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Jq(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xx);const i=this.events[e].add(t);return e==="change"?()=>{i(),sn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=xi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>j9)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,j9);return EA(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ql(n,e){return new Qq(n,e)}function eY(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ql(t))}function tY(n){return xy(n)?n[n.length-1]||0:n}function nY(n,e){const t=uh(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=tY(s[o]);eY(n,o,a)}}function iY(n){return!!(Kn(n)&&n.add)}function _y(n,e){const t=n.getValue("willChange");if(iY(t))return t.add(e);if(!t&&_s.WillChange){const i=new _s.WillChange("auto");n.addValue("willChange",i),i.add(e)}}function CA(n){return n.props[mA]}const rY=n=>n!==null;function sY(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(rY),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const oY={type:"spring",stiffness:500,damping:25,restSpeed:10},aY=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),lY={type:"keyframes",duration:.8},cY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uY=(n,{keyframes:e})=>e.length>2?lY:sc.has(n)?n.startsWith("scale")?aY(e[1]):oY:cY;function hY({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...f}){return!!Object.keys(f).length}function qx(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const zr=n=>n*1e3,Hr=n=>n/1e3,xu=n=>Math.round(n*1e5)/1e5,Yx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fY(n){return n==null}const dY=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Kx=(n,e)=>t=>!!(typeof t=="string"&&dY.test(t)&&t.startsWith(n)||e&&!fY(t)&&Object.prototype.hasOwnProperty.call(t,e)),PA=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(Yx);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},pY=n=>Ss(0,255,n),xg={...oc,transform:n=>Math.round(pY(n))},Jo={test:Kx("rgb","red"),parse:PA("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+xg.transform(n)+", "+xg.transform(e)+", "+xg.transform(t)+", "+xu(ch.transform(i))+")"};function mY(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Sy={test:Kx("#"),parse:mY,transform:Jo.transform},Cl={test:Kx("hsl","hue"),parse:PA("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Vr.transform(xu(e))+", "+Vr.transform(xu(t))+", "+xu(ch.transform(i))+")"},Yn={test:n=>Jo.test(n)||Sy.test(n)||Cl.test(n),parse:n=>Jo.test(n)?Jo.parse(n):Cl.test(n)?Cl.parse(n):Sy.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Jo.transform(n):Cl.transform(n)},gY=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vY(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(Yx))==null?void 0:e.length)||0)+(((t=n.match(gY))==null?void 0:t.length)||0)>0}const RA="number",LA="color",yY="var",xY="var(",X9="${}",_Y=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function hh(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(_Y,l=>(Yn.test(l)?(i.color.push(s),r.push(LA),t.push(Yn.parse(l))):l.startsWith(xY)?(i.var.push(s),r.push(yY),t.push(l)):(i.number.push(s),r.push(RA),t.push(parseFloat(l))),++s,X9)).split(X9);return{values:t,split:a,indexes:i,types:r}}function IA(n){return hh(n).values}function DA(n){const{split:e,types:t}=hh(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===RA?s+=xu(r[o]):a===LA?s+=Yn.transform(r[o]):s+=r[o]}return s}}const SY=n=>typeof n=="number"?0:n;function MY(n){const e=IA(n);return DA(n)(e.map(SY))}const oo={test:vY,parse:IA,createTransformer:DA,getAnimatableNone:MY};function _g(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function bY({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=_g(l,a,n+1/3),s=_g(l,a,n),o=_g(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function Wp(n,e){return t=>t>0?e:n}const tn=(n,e,t)=>n+(e-n)*t,Sg=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},wY=[Sy,Jo,Cl],TY=n=>wY.find(e=>e.test(n));function q9(n){const e=TY(n);if(!e)return!1;let t=e.parse(n);return e===Cl&&(t=bY(t)),t}const Y9=(n,e)=>{const t=q9(n),i=q9(e);if(!t||!i)return Wp(n,e);const r={...t};return s=>(r.red=Sg(t.red,i.red,s),r.green=Sg(t.green,i.green,s),r.blue=Sg(t.blue,i.blue,s),r.alpha=tn(t.alpha,i.alpha,s),Jo.transform(r))},My=new Set(["none","hidden"]);function AY(n,e){return My.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}const EY=(n,e)=>t=>e(n(t)),Vh=(...n)=>n.reduce(EY);function CY(n,e){return t=>tn(n,e,t)}function Zx(n){return typeof n=="number"?CY:typeof n=="string"?kx(n)?Wp:Yn.test(n)?Y9:LY:Array.isArray(n)?NA:typeof n=="object"?Yn.test(n)?Y9:PY:Wp}function NA(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>Zx(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function PY(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=Zx(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function RY(n,e){const t=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=n.indexes[s][i[s]],a=n.values[o]??0;t[r]=a,i[s]++}return t}const LY=(n,e)=>{const t=oo.createTransformer(e),i=hh(n),r=hh(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?My.has(n)&&!r.values.length||My.has(e)&&!i.values.length?AY(n,e):Vh(NA(RY(i,r),r.values),t):Wp(n,e)};function UA(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?tn(n,e,t):Zx(n)(n,e)}const IY=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>sn.update(e,t),stop:()=>so(e),now:()=>On.isProcessing?On.timestamp:xi.now()}},FA=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(s/(r-1))+", ";return`linear(${i.substring(0,i.length-2)})`},jp=2e4;function Jx(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<jp;)e+=t,i=n.next(e);return e>=jp?1/0:e}function DY(n,e=100,t){const i=t({...n,keyframes:[0,e]}),r=Math.min(Jx(i),jp);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Hr(r)}}const NY=5;function OA(n,e,t){const i=Math.max(e-NY,0);return EA(t-n(i),e-i)}const un={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Mg=.001;function UY({duration:n=un.duration,bounce:e=un.bounce,velocity:t=un.velocity,mass:i=un.mass}){let r,s,o=1-e;o=Ss(un.minDamping,un.maxDamping,o),n=Ss(un.minDuration,un.maxDuration,Hr(n)),o<1?(r=c=>{const f=c*o,p=f*n,d=f-t,m=by(c,o),v=Math.exp(-p);return Mg-d/m*v},s=c=>{const p=c*o*n,d=p*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,v=Math.exp(-p),_=by(Math.pow(c,2),o);return(-r(c)+Mg>0?-1:1)*((d-m)*v)/_}):(r=c=>{const f=Math.exp(-c*n),p=(c-t)*n+1;return-Mg+f*p},s=c=>{const f=Math.exp(-c*n),p=(t-c)*(n*n);return f*p});const a=5/n,l=OY(r,s,a);if(n=zr(n),isNaN(l))return{stiffness:un.stiffness,damping:un.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const FY=12;function OY(n,e,t){let i=t;for(let r=1;r<FY;r++)i=i-n(i)/e(i);return i}function by(n,e){return n*Math.sqrt(1-e*e)}const kY=["duration","bounce"],BY=["stiffness","damping","mass"];function K9(n,e){return e.some(t=>n[t]!==void 0)}function VY(n){let e={velocity:un.velocity,stiffness:un.stiffness,damping:un.damping,mass:un.mass,isResolvedFromDuration:!1,...n};if(!K9(n,BY)&&K9(n,kY))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Ss(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:un.mass,stiffness:r,damping:s}}else{const t=UY(n);e={...e,...t,mass:un.mass},e.isResolvedFromDuration=!0}return e}function Xp(n=un.visualDuration,e=un.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:f,duration:p,velocity:d,isResolvedFromDuration:m}=VY({...t,velocity:-Hr(t.velocity||0)}),v=d||0,_=c/(2*Math.sqrt(l*f)),x=o-s,y=Hr(Math.sqrt(l/f)),b=Math.abs(x)<5;i||(i=b?un.restSpeed.granular:un.restSpeed.default),r||(r=b?un.restDelta.granular:un.restDelta.default);let M;if(_<1){const P=by(y,_);M=E=>{const L=Math.exp(-_*y*E);return o-L*((v+_*y*x)/P*Math.sin(P*E)+x*Math.cos(P*E))}}else if(_===1)M=P=>o-Math.exp(-y*P)*(x+(v+y*x)*P);else{const P=y*Math.sqrt(_*_-1);M=E=>{const L=Math.exp(-_*y*E),I=Math.min(P*E,300);return o-L*((v+_*y*x)*Math.sinh(I)+P*x*Math.cosh(I))/P}}const T={calculatedDuration:m&&p||null,next:P=>{const E=M(P);if(m)a.done=P>=p;else{let L=P===0?v:0;_<1&&(L=P===0?zr(v):OA(M,P,E));const I=Math.abs(L)<=i,R=Math.abs(o-E)<=r;a.done=I&&R}return a.value=a.done?o:E,a},toString:()=>{const P=Math.min(Jx(T),jp),E=FA(L=>T.next(P*L).value,P,30);return P+"ms "+E},toTransition:()=>{}};return T}Xp.applyToOptions=n=>{const e=DY(n,100,Xp);return n.ease=e.ease,n.duration=zr(e.duration),n.type="keyframes",n};function wy({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:f}){const p=n[0],d={done:!1,value:p},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let _=t*e;const x=p+_,y=o===void 0?x:o(x);y!==x&&(_=y-p);const b=I=>-_*Math.exp(-I/i),M=I=>y+b(I),T=I=>{const R=b(I),C=M(I);d.done=Math.abs(R)<=c,d.value=d.done?y:C};let P,E;const L=I=>{m(d.value)&&(P=I,E=Xp({keyframes:[d.value,v(d.value)],velocity:OA(M,I,d.value),damping:r,stiffness:s,restDelta:c,restSpeed:f}))};return L(0),{calculatedDuration:null,next:I=>{let R=!1;return!E&&P===void 0&&(R=!0,T(I),L(I)),P!==void 0&&I>=P?E.next(I-P):(!R&&T(I),d)}}}const fh=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i};function zY(n,e,t){const i=[],r=t||_s.mix||UA,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||nr:e;a=Vh(l,a)}i.push(a)}return i}function HY(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Gp(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=zY(e,i,r),l=a.length,c=f=>{if(o&&f<n[0])return e[0];let p=0;if(l>1)for(;p<n.length-2&&!(f<n[p+1]);p++);const d=fh(n[p],n[p+1],f);return a[p](d)};return t?f=>c(Ss(n[0],n[s-1],f)):c}function $Y(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=fh(0,e,i);n.push(tn(t,1,r))}}function GY(n){const e=[0];return $Y(e,n.length-1),e}function WY(n,e){return n.map(t=>t*e)}const kA=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,jY=1e-7,XY=12;function qY(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=kA(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>jY&&++a<XY);return o}function zh(n,e,t,i){if(n===e&&t===i)return nr;const r=s=>qY(s,0,1,n,t);return s=>s===0||s===1?s:kA(r(s),e,i)}const YY=zh(.42,0,1,1),KY=zh(0,0,.58,1),BA=zh(.42,0,.58,1),ZY=n=>Array.isArray(n)&&typeof n[0]!="number",VA=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,zA=n=>e=>1-n(1-e),HA=zh(.33,1.53,.69,.99),Qx=zA(HA),$A=VA(Qx),GA=n=>(n*=2)<1?.5*Qx(n):.5*(2-Math.pow(2,-10*(n-1))),e3=n=>1-Math.sin(Math.acos(n)),WA=zA(e3),jA=VA(e3),XA=n=>Array.isArray(n)&&typeof n[0]=="number",Z9={linear:nr,easeIn:YY,easeInOut:BA,easeOut:KY,circIn:e3,circInOut:jA,circOut:WA,backIn:Qx,backInOut:$A,backOut:HA,anticipate:GA},JY=n=>typeof n=="string",J9=n=>{if(XA(n)){Gp(n.length===4);const[e,t,i,r]=n;return zh(e,t,i,r)}else if(JY(n))return Gp(Z9[n]!==void 0),Z9[n];return n};function QY(n,e){return n.map(()=>e||BA).splice(0,n.length-1)}function _u({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=ZY(i)?i.map(J9):J9(i),s={done:!1,value:e[0]},o=WY(t&&t.length===e.length?t:GY(e),n),a=HY(o,e,{ease:Array.isArray(r)?r:QY(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const eK=n=>n!==null;function t3(n,{repeat:e,repeatType:t="loop"},i,r=1){const s=n.filter(eK),a=r<0||e&&t!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const tK={decay:wy,inertia:wy,tween:_u,keyframes:_u,spring:Xp};function qA(n){typeof n.type=="string"&&(n.type=tK[n.type])}class n3{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const nK=n=>n/100;class i3 extends n3{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=(t=!0)=>{var i,r;if(t){const{motionValue:s}=this.options;s&&s.updatedAt!==xi.now()&&this.tick(xi.now())}this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;qA(e);const{type:t=_u,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=t||_u;l!==_u&&typeof a[0]!="number"&&(this.mixKeyframes=Vh(nK,UA(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Jx(c));const{calculatedDuration:f}=c;this.calculatedDuration=f,this.resolvedDuration=f+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:f,repeat:p,repeatType:d,repeatDelay:m,type:v,onUpdate:_,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const y=this.currentTime-c*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?y<0:y>r;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,T=i;if(p){const I=Math.min(this.currentTime,r)/a;let R=Math.floor(I),C=I%1;!C&&I>=1&&(C=1),C===1&&R--,R=Math.min(R,p+1),!!(R%2)&&(d==="reverse"?(C=1-C,m&&(C-=m/a)):d==="mirror"&&(T=o)),M=Ss(0,1,C)*a}const P=b?{done:!1,value:f[0]}:T.next(M);s&&(P.value=s(P.value));let{done:E}=P;!b&&l!==null&&(E=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&E);return L&&v!==wy&&(P.value=t3(f,this.options,x,this.speed)),_&&_(P.value),L&&this.finish(),P}then(e,t){return this.finished.then(e,t)}get duration(){return Hr(this.calculatedDuration)}get time(){return Hr(this.currentTime)}set time(e){var t;e=zr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(xi.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Hr(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=IY,startTime:t}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function iK(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Qo=n=>n*180/Math.PI,Ty=n=>{const e=Qo(Math.atan2(n[1],n[0]));return Ay(e)},rK={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:Ty,rotateZ:Ty,skewX:n=>Qo(Math.atan(n[1])),skewY:n=>Qo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Ay=n=>(n=n%360,n<0&&(n+=360),n),Q9=Ty,eS=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),tS=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),sK={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eS,scaleY:tS,scale:n=>(eS(n)+tS(n))/2,rotateX:n=>Ay(Qo(Math.atan2(n[6],n[5]))),rotateY:n=>Ay(Qo(Math.atan2(-n[2],n[0]))),rotateZ:Q9,rotate:Q9,skewX:n=>Qo(Math.atan(n[4])),skewY:n=>Qo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function nS(n){return n.includes("scale")?1:0}function Ey(n,e){if(!n||n==="none")return nS(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(t)i=sK,r=t;else{const a=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=rK,r=a}if(!r)return nS(e);const s=i[e],o=r[1].split(",").map(aK);return typeof s=="function"?s(o):o[s]}const oK=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Ey(t,e)};function aK(n){return parseFloat(n.trim())}const iS=n=>n===oc||n===rt,lK=new Set(["x","y","z"]),cK=rc.filter(n=>!lK.has(n));function uK(n){const e=[];return cK.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const aa={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Ey(e,"x"),y:(n,{transform:e})=>Ey(e,"y")};aa.translateX=aa.x;aa.translateY=aa.y;const la=new Set;let Cy=!1,Py=!1,Ry=!1;function YA(){if(Py){const n=Array.from(la).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=uK(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))==null||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Py=!1,Cy=!1,la.forEach(n=>n.complete(Ry)),la.clear()}function KA(){la.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Py=!0)})}function hK(){Ry=!0,KA(),YA(),Ry=!1}class r3{constructor(e,t,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(la.add(this),Cy||(Cy=!0,sn.read(KA),sn.resolveKeyframes(YA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&t){const a=i.readValue(t,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}iK(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),la.delete(this)}cancel(){this.state==="scheduled"&&(la.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const fK=n=>n.startsWith("--");function dK(n,e,t){fK(e)?n.style.setProperty(e,t):n.style[e]=t}function s3(n){let e;return()=>(e===void 0&&(e=n()),e)}const pK=s3(()=>window.ScrollTimeline!==void 0),mK={};function gK(n,e){const t=s3(n);return()=>mK[e]??t()}const ZA=gK(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),su=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,rS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:su([0,.65,.55,1]),circOut:su([.55,0,1,.45]),backIn:su([.31,.01,.66,-.59]),backOut:su([.33,1.53,.69,.99])};function JA(n,e){if(n)return typeof n=="function"?ZA()?FA(n,e):"ease-out":XA(n)?su(n):Array.isArray(n)?n.map(t=>JA(t,e)||rS.easeOut):rS[n]}function vK(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const f={[e]:t};l&&(f.offset=l);const p=JA(a,r);Array.isArray(p)&&(f.easing=p);const d={delay:i,duration:r,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(d.pseudoElement=c),n.animate(f,d)}function QA(n){return typeof n=="function"&&"applyToOptions"in n}function yK({type:n,...e}){return QA(n)&&ZA()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class xK extends n3{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Gp(typeof e.type!="string");const c=yK(e);this.animation=vK(t,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const f=t3(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(f):dK(t,i,f),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,i;const e=((i=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:i.call(t).duration)||0;return Hr(Number(e))}get time(){return Hr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=zr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&pK()?(this.animation.timeline=e,nr):t(this)}}const eE={anticipate:GA,backInOut:$A,circInOut:jA};function _K(n){return n in eE}function SK(n){typeof n.ease=="string"&&_K(n.ease)&&(n.ease=eE[n.ease])}const sS=10;class MK extends xK{constructor(e){SK(e),qA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const a=new i3({...o,autoplay:!1}),l=zr(this.finishedTime??this.time);t.setWithVelocity(a.sample(l-sS).value,a.sample(l).value,sS),a.stop()}}const oS=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(oo.test(n)||n==="0")&&!n.startsWith("url("));function bK(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function wK(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=oS(r,e),a=oS(s,e);return!o||!a?!1:bK(n)||(t==="spring"||QA(t))&&i}const TK=new Set(["opacity","clipPath","filter","transform"]),AK=s3(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function EK(n){const{motionValue:e,name:t,repeatDelay:i,repeatType:r,damping:s,type:o}=n;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return AK()&&t&&TK.has(t)&&(t!=="transform"||!l)&&!a&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const CK=40;class PK extends n3{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:f,...p}){var v;super(),this.stop=()=>{var _,x;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=xi.now();const d={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:f,...p},m=(f==null?void 0:f.KeyframeResolver)||r3;this.keyframeResolver=new m(a,(_,x,y)=>this.onKeyframesResolved(_,x,d,!y),l,c,f),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,t,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:f}=i;this.resolvedAt=xi.now(),wK(e,s,o,a)||((_s.instantAnimations||!l)&&(f==null||f(t3(e,i,t))),e[0]=e[e.length-1],i.duration=0,i.repeat=0);const d={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>CK?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},m=!c&&EK(d)?new MK({...d,element:d.motionValue.owner.current}):new i3(d);m.finished.then(()=>this.notifyFinished()).catch(nr),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),hK()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const o3=(n,e,t,i={},r,s)=>o=>{const a=qx(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-zr(l);const f={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:d=>{e.set(d),a.onUpdate&&a.onUpdate(d)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};hY(a)||Object.assign(f,uY(n,f)),f.duration&&(f.duration=zr(f.duration)),f.repeatDelay&&(f.repeatDelay=zr(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let p=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(p=!0)),(_s.instantAnimations||_s.skipAnimations)&&(p=!0,f.duration=0,f.delay=0),f.allowFlatten=!a.type&&!a.ease,p&&!s&&e.get()!==void 0){const d=sY(f.keyframes,a);if(d!==void 0){sn.update(()=>{f.onUpdate(d),f.onComplete()});return}}return a.isSync?new i3(f):new PK(f)},tE=new Set(["width","height","top","left","right","bottom",...rc]);function RK({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function nE(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],c=r&&n.animationState&&n.animationState.getState()[r];for(const f in a){const p=n.getValue(f,n.latestValues[f]??null),d=a[f];if(d===void 0||c&&RK(c,f))continue;const m={delay:t,...qx(s||{},f)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(d)&&d===v&&!m.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const y=CA(n);if(y){const b=window.MotionHandoffAnimation(y,f,sn);b!==null&&(m.startTime=b,_=!0)}}_y(n,f),p.start(o3(f,p,d,n.shouldReduceMotion&&tE.has(f)?{type:!1}:m,n,_));const x=p.animation;x&&l.push(x)}return o&&Promise.all(l).then(()=>{sn.update(()=>{o&&nY(n,o)})}),l}function Ly(n,e,t={}){var l;const i=uh(n,e,t.type==="exit"?(l=n.presenceContext)==null?void 0:l.custom:void 0);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(nE(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:p,staggerDirection:d}=r;return LK(n,e,f+c,p,d,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,f]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(t.delay)])}function LK(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(IK).forEach((c,f)=>{c.notify("AnimationStart",e),o.push(Ly(c,e,{...s,delay:t+l(f)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function IK(n,e){return n.sortNodePosition(e)}function DK(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>Ly(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=Ly(n,e,t);else{const r=typeof e=="function"?uh(n,e,t.custom):e;i=Promise.all(nE(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}function iE(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}const NK=Nx.length;function rE(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?rE(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<NK;t++){const i=Nx[t],r=n.props[i];(ah(r)||r===!1)&&(e[i]=r)}return e}const UK=[...Dx].reverse(),FK=Dx.length;function OK(n){return e=>Promise.all(e.map(({animation:t,options:i})=>DK(n,t,i)))}function kK(n){let e=OK(n),t=aS(),i=!0;const r=l=>(c,f)=>{var d;const p=uh(n,f,l==="exit"?(d=n.presenceContext)==null?void 0:d.custom:void 0);if(p){const{transition:m,transitionEnd:v,..._}=p;c={...c,..._,...v}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,f=rE(n.parent)||{},p=[],d=new Set;let m={},v=1/0;for(let x=0;x<FK;x++){const y=UK[x],b=t[y],M=c[y]!==void 0?c[y]:f[y],T=ah(M),P=y===l?b.isActive:null;P===!1&&(v=x);let E=M===f[y]&&M!==c[y]&&T;if(E&&i&&n.manuallyAnimateOnMount&&(E=!1),b.protectedKeys={...m},!b.isActive&&P===null||!M&&!b.prevProp||H0(M)||typeof M=="boolean")continue;const L=BK(b.prevProp,M);let I=L||y===l&&b.isActive&&!E&&T||x>v&&T,R=!1;const C=Array.isArray(M)?M:[M];let D=C.reduce(r(y),{});P===!1&&(D={});const{prevResolvedValues:B={}}=b,G={...B,...D},z=q=>{I=!0,d.has(q)&&(R=!0,d.delete(q)),b.needsAnimating[q]=!0;const k=n.getValue(q);k&&(k.liveStyle=!1)};for(const q in G){const k=D[q],Q=B[q];if(m.hasOwnProperty(q))continue;let oe=!1;xy(k)&&xy(Q)?oe=!iE(k,Q):oe=k!==Q,oe?k!=null?z(q):d.add(q):k!==void 0&&d.has(q)?z(q):b.protectedKeys[q]=!0}b.prevProp=M,b.prevResolvedValues=D,b.isActive&&(m={...m,...D}),i&&n.blockInitialAnimation&&(I=!1),I&&(!(E&&L)||R)&&p.push(...C.map(q=>({animation:q,options:{type:y}})))}if(d.size){const x={};if(typeof c.initial!="boolean"){const y=uh(n,Array.isArray(c.initial)?c.initial[0]:c.initial);y&&y.transition&&(x.transition=y.transition)}d.forEach(y=>{const b=n.getBaseTarget(y),M=n.getValue(y);M&&(M.liveStyle=!0),x[y]=b??null}),p.push({animation:x})}let _=!!p.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,c){var p;if(t[l].isActive===c)return Promise.resolve();(p=n.variantChildren)==null||p.forEach(d=>{var m;return(m=d.animationState)==null?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const d in t)t[d].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=aS(),i=!0}}}function BK(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!iE(e,n):!1}function Vo(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function aS(){return{animate:Vo(!0),whileInView:Vo(),whileHover:Vo(),whileTap:Vo(),whileDrag:Vo(),whileFocus:Vo(),exit:Vo()}}class go{constructor(e){this.isMounted=!1,this.node=e}update(){}}class VK extends go{constructor(e){super(e),e.animationState||(e.animationState=kK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();H0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let zK=0;class HK extends go{constructor(){super(...arguments),this.id=zK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const $K={animation:{Feature:VK},exit:{Feature:HK}};function dh(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const a3=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Hh(n){return{point:{x:n.pageX,y:n.pageY}}}const GK=n=>e=>a3(e)&&n(e,Hh(e));function Su(n,e,t,i){return dh(n,e,GK(t),i)}function sE({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function WK({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function jK(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}const oE=1e-4,XK=1-oE,qK=1+oE,aE=.01,YK=0-aE,KK=0+aE;function li(n){return n.max-n.min}function ZK(n,e,t){return Math.abs(n-e)<=t}function lS(n,e,t,i=.5){n.origin=i,n.originPoint=tn(e.min,e.max,n.origin),n.scale=li(t)/li(e),n.translate=tn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=XK&&n.scale<=qK||isNaN(n.scale))&&(n.scale=1),(n.translate>=YK&&n.translate<=KK||isNaN(n.translate))&&(n.translate=0)}function Mu(n,e,t,i){lS(n.x,e.x,t.x,i?i.originX:void 0),lS(n.y,e.y,t.y,i?i.originY:void 0)}function cS(n,e,t){n.min=t.min+e.min,n.max=n.min+li(e)}function JK(n,e,t){cS(n.x,e.x,t.x),cS(n.y,e.y,t.y)}function uS(n,e,t){n.min=e.min-t.min,n.max=n.min+li(e)}function bu(n,e,t){uS(n.x,e.x,t.x),uS(n.y,e.y,t.y)}const hS=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pl=()=>({x:hS(),y:hS()}),fS=()=>({min:0,max:0}),mn=()=>({x:fS(),y:fS()});function Yi(n){return[n("x"),n("y")]}function bg(n){return n===void 0||n===1}function Iy({scale:n,scaleX:e,scaleY:t}){return!bg(n)||!bg(e)||!bg(t)}function Wo(n){return Iy(n)||lE(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function lE(n){return dS(n.x)||dS(n.y)}function dS(n){return n&&n!=="0%"}function qp(n,e,t){const i=n-t,r=e*i;return t+r}function pS(n,e,t,i,r){return r!==void 0&&(n=qp(n,r,i)),qp(n,t,i)+e}function Dy(n,e=0,t=1,i,r){n.min=pS(n.min,e,t,i,r),n.max=pS(n.max,e,t,i,r)}function cE(n,{x:e,y:t}){Dy(n.x,e.translate,e.scale,e.originPoint),Dy(n.y,t.translate,t.scale,t.originPoint)}const mS=.999999999999,gS=1.0000000000001;function QK(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ll(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,cE(n,o)),i&&Wo(s.latestValues)&&Ll(n,s.latestValues))}e.x<gS&&e.x>mS&&(e.x=1),e.y<gS&&e.y>mS&&(e.y=1)}function Rl(n,e){n.min=n.min+e,n.max=n.max+e}function vS(n,e,t,i,r=.5){const s=tn(n.min,n.max,r);Dy(n,e,t,s,i)}function Ll(n,e){vS(n.x,e.x,e.scaleX,e.scale,e.originX),vS(n.y,e.y,e.scaleY,e.scale,e.originY)}function uE(n,e){return sE(jK(n.getBoundingClientRect(),e))}function eZ(n,e,t){const i=uE(n,t),{scroll:r}=e;return r&&(Rl(i.x,r.offset.x),Rl(i.y,r.offset.y)),i}const hE=({current:n})=>n?n.ownerDocument.defaultView:null,yS=(n,e)=>Math.abs(n-e);function tZ(n,e){const t=yS(n.x,e.x),i=yS(n.y,e.y);return Math.sqrt(t**2+i**2)}class fE{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Tg(this.lastMoveEventInfo,this.history),d=this.startEvent!==null,m=tZ(p.offset,{x:0,y:0})>=3;if(!d&&!m)return;const{point:v}=p,{timestamp:_}=On;this.history.push({...v,timestamp:_});const{onStart:x,onMove:y}=this.handlers;d||(x&&x(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,d)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=wg(d,this.transformPagePoint),sn.update(this.updatePoint,!0)},this.handlePointerUp=(p,d)=>{this.end();const{onEnd:m,onSessionEnd:v,resumeAnimation:_}=this.handlers;if(this.dragSnapToOrigin&&_&&_(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Tg(p.type==="pointercancel"?this.lastMoveEventInfo:wg(d,this.transformPagePoint),this.history);this.startEvent&&m&&m(p,x),v&&v(p,x)},!a3(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=Hh(e),a=wg(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=On;this.history=[{...l,timestamp:c}];const{onSessionStart:f}=t;f&&f(e,Tg(a,this.history)),this.removeListeners=Vh(Su(this.contextWindow,"pointermove",this.handlePointerMove),Su(this.contextWindow,"pointerup",this.handlePointerUp),Su(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),so(this.updatePoint)}}function wg(n,e){return e?{point:e(n.point)}:n}function xS(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Tg({point:n},e){return{point:n,delta:xS(n,dE(e)),offset:xS(n,nZ(e)),velocity:iZ(e,.1)}}function nZ(n){return n[0]}function dE(n){return n[n.length-1]}function iZ(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=dE(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>zr(e)));)t--;if(!i)return{x:0,y:0};const s=Hr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rZ(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?tn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?tn(t,n,i.max):Math.min(n,t)),n}function _S(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function sZ(n,{top:e,left:t,bottom:i,right:r}){return{x:_S(n.x,t,r),y:_S(n.y,e,i)}}function SS(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function oZ(n,e){return{x:SS(n.x,e.x),y:SS(n.y,e.y)}}function aZ(n,e){let t=.5;const i=li(n),r=li(e);return r>i?t=fh(e.min,e.max-i,n.min):i>r&&(t=fh(n.min,n.max-r,e.min)),Ss(0,1,t)}function lZ(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ny=.35;function cZ(n=Ny){return n===!1?n=0:n===!0&&(n=Ny),{x:MS(n,"left","right"),y:MS(n,"top","bottom")}}function MS(n,e,t){return{min:bS(n,e),max:bS(n,t)}}function bS(n,e){return typeof n=="number"?n:n[e]||0}const fr={x:!1,y:!1};function pE(){return fr.x||fr.y}function uZ(n){return n==="x"||n==="y"?fr[n]?null:(fr[n]=!0,()=>{fr[n]=!1}):fr.x||fr.y?null:(fr.x=fr.y=!0,()=>{fr.x=fr.y=!1})}const hZ=new WeakMap;class fZ{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Hh(f).point)},s=(f,p)=>{const{drag:d,dragPropagation:m,onDragStart:v}=this.getProps();if(d&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uZ(d),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Yi(x=>{let y=this.getAxisMotionValue(x).get()||0;if(Vr.test(y)){const{projection:b}=this.visualElement;if(b&&b.layout){const M=b.layout.layoutBox[x];M&&(y=li(M)*(parseFloat(y)/100))}}this.originPoint[x]=y}),v&&sn.postRender(()=>v(f,p)),_y(this.visualElement,"transform");const{animationState:_}=this.visualElement;_&&_.setActive("whileDrag",!0)},o=(f,p)=>{const{dragPropagation:d,dragDirectionLock:m,onDirectionLock:v,onDrag:_}=this.getProps();if(!d&&!this.openDragLock)return;const{offset:x}=p;if(m&&this.currentDirection===null){this.currentDirection=dZ(x),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",p.point,x),this.updateAxis("y",p.point,x),this.visualElement.render(),_&&_(f,p)},a=(f,p)=>this.stop(f,p),l=()=>Yi(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new fE(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:hE(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&sn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Yd(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=rZ(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&El(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=sZ(i.layoutBox,e):this.constraints=!1,this.elastic=cZ(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Yi(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=lZ(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!El(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=eZ(i,r.root,this.visualElement.getTransformPagePoint());let o=oZ(r.layout.layoutBox,s);if(t){const a=t(WK(o));this.hasMutatedConstraints=!!a,a&&(o=sE(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Yi(f=>{if(!Yd(f,t,this.currentDirection))return;let p=l&&l[f]||{};o&&(p={min:0,max:0});const d=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[f]:0,bounceStiffness:d,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(f,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return _y(this.visualElement,e),i.start(o3(e,i,0,t,this.visualElement,!1))}stopAnimation(){Yi(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Yi(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Yi(t=>{const{drag:i}=this.getProps();if(!Yd(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-tn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!El(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Yi(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=aZ({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Yi(o=>{if(!Yd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(tn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;hZ.set(this.visualElement,this);const e=this.visualElement.current,t=Su(e,"pointerdown",l=>{const{drag:c,dragListener:f=!0}=this.getProps();c&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();El(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),sn.read(i);const o=dh(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Yi(f=>{const p=this.getAxisMotionValue(f);p&&(this.originPoint[f]+=l[f].translate,p.set(p.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=Ny,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Yd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function dZ(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class pZ extends go{constructor(e){super(e),this.removeGroupControls=nr,this.removeListeners=nr,this.controls=new fZ(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||nr}unmount(){this.removeGroupControls(),this.removeListeners()}}const wS=n=>(e,t)=>{n&&sn.postRender(()=>n(e,t))};class mZ extends go{constructor(){super(...arguments),this.removePointerDownListener=nr}onPointerDown(e){this.session=new fE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:wS(e),onStart:wS(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&sn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Su(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const mp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function TS(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const qc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(rt.test(n))n=parseFloat(n);else return n;const t=TS(n,e.target.x),i=TS(n,e.target.y);return`${t}% ${i}%`}},gZ={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=oo.parse(n);if(r.length>5)return i;const s=oo.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=tn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class vZ extends H.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Rq(yZ),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),mp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||sn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function mE(n){const[e,t]=cq(),i=H.useContext(cA);return ee.jsx(vZ,{...n,layoutGroup:i,switchLayoutGroup:H.useContext(gA),isPresent:e,safeToRemove:t})}const yZ={borderRadius:{...qc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qc,borderTopRightRadius:qc,borderBottomLeftRadius:qc,borderBottomRightRadius:qc,boxShadow:gZ};function xZ(n,e,t){const i=Kn(n)?n:ql(n);return i.start(o3("",i,e,t)),i.animation}function _Z(n){return n instanceof SVGElement&&n.tagName!=="svg"}const SZ=(n,e)=>n.depth-e.depth;class MZ{constructor(){this.children=[],this.isDirty=!1}add(e){Wx(this.children,e),this.isDirty=!0}remove(e){jx(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SZ),this.isDirty=!1,this.children.forEach(e)}}function bZ(n,e){const t=xi.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(so(i),n(s-e))};return sn.setup(i,!0),()=>so(i)}const gE=["TopLeft","TopRight","BottomLeft","BottomRight"],wZ=gE.length,AS=n=>typeof n=="string"?parseFloat(n):n,ES=n=>typeof n=="number"||rt.test(n);function TZ(n,e,t,i,r,s){r?(n.opacity=tn(0,t.opacity??1,AZ(i)),n.opacityExit=tn(e.opacity??1,0,EZ(i))):s&&(n.opacity=tn(e.opacity??1,t.opacity??1,i));for(let o=0;o<wZ;o++){const a=`border${gE[o]}Radius`;let l=CS(e,a),c=CS(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ES(l)===ES(c)?(n[a]=Math.max(tn(AS(l),AS(c),i),0),(Vr.test(c)||Vr.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=tn(e.rotate||0,t.rotate||0,i))}function CS(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const AZ=vE(0,.5,WA),EZ=vE(.5,.95,nr);function vE(n,e,t){return i=>i<n?0:i>e?1:t(fh(n,e,i))}function PS(n,e){n.min=e.min,n.max=e.max}function Xi(n,e){PS(n.x,e.x),PS(n.y,e.y)}function RS(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function LS(n,e,t,i,r){return n-=e,n=qp(n,1/t,i),r!==void 0&&(n=qp(n,1/r,i)),n}function CZ(n,e=0,t=1,i=.5,r,s=n,o=n){if(Vr.test(e)&&(e=parseFloat(e),e=tn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=tn(s.min,s.max,i);n===s&&(a-=e),n.min=LS(n.min,e,t,a,r),n.max=LS(n.max,e,t,a,r)}function IS(n,e,[t,i,r],s,o){CZ(n,e[t],e[i],e[r],e.scale,s,o)}const PZ=["x","scaleX","originX"],RZ=["y","scaleY","originY"];function DS(n,e,t,i){IS(n.x,e,PZ,t?t.x:void 0,i?i.x:void 0),IS(n.y,e,RZ,t?t.y:void 0,i?i.y:void 0)}function NS(n){return n.translate===0&&n.scale===1}function yE(n){return NS(n.x)&&NS(n.y)}function US(n,e){return n.min===e.min&&n.max===e.max}function LZ(n,e){return US(n.x,e.x)&&US(n.y,e.y)}function FS(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function xE(n,e){return FS(n.x,e.x)&&FS(n.y,e.y)}function OS(n){return li(n.x)/li(n.y)}function kS(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class IZ{constructor(){this.members=[]}add(e){Wx(this.members,e),e.scheduleRender()}remove(e){if(jx(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DZ(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:f,rotateX:p,rotateY:d,skewX:m,skewY:v}=t;c&&(i=`perspective(${c}px) ${i}`),f&&(i+=`rotate(${f}deg) `),p&&(i+=`rotateX(${p}deg) `),d&&(i+=`rotateY(${d}deg) `),m&&(i+=`skewX(${m}deg) `),v&&(i+=`skewY(${v}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const Ag=["","X","Y","Z"],NZ={visibility:"hidden"},UZ=1e3;let FZ=0;function Eg(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function _E(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=CA(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",sn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&_E(i)}function SE({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=FZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BZ),this.nodes.forEach(GZ),this.nodes.forEach(WZ),this.nodes.forEach(VZ)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new MZ)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xx),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=_Z(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=bZ(p,250),mp.hasAnimatedSinceResize&&(mp.hasAnimatedSinceResize=!1,this.nodes.forEach(VS))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeLayoutChanged:d,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||KZ,{onLayoutAnimationStart:_,onLayoutAnimationComplete:x}=c.getProps(),y=!this.targetLayout||!xE(this.targetLayout,m),b=!p&&d;if(this.options.layoutRoot||this.resumeFrom||b||p&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,b);const M={...qx(v,"layout"),onPlay:_,onComplete:x};(c.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else p||VS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),so(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jZ),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_E(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const p=this.path[f];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(BS);return}this.isUpdating||this.nodes.forEach(HZ),this.isUpdating=!1,this.nodes.forEach($Z),this.nodes.forEach(OZ),this.nodes.forEach(kZ),this.clearAllSnapshots();const a=xi.now();On.delta=Ss(0,1e3/60,a-On.timestamp),On.timestamp=a,On.isProcessing=!0,yg.update.process(On),yg.preRender.process(On),yg.render.process(On),On.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(zZ),this.sharedNodes.forEach(XZ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,sn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){sn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!li(this.snapshot.measuredBox.x)&&!li(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!yE(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,f=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Wo(this.latestValues)||f)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),ZZ(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return mn();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(JZ))){const{scroll:f}=this.root;f&&(Rl(a.x,f.offset.x),Rl(a.y,f.offset.y))}return a}removeElementScroll(o){var l;const a=mn();if(Xi(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:p,options:d}=f;f!==this.root&&p&&d.layoutScroll&&(p.wasRoot&&Xi(a,o),Rl(a.x,p.offset.x),Rl(a.y,p.offset.y))}return a}applyTransform(o,a=!1){const l=mn();Xi(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Ll(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Wo(f.latestValues)&&Ll(l,f.latestValues)}return Wo(this.latestValues)&&Ll(l,this.latestValues),l}removeTransform(o){const a=mn();Xi(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Wo(c.latestValues))continue;Iy(c.latestValues)&&c.updateSnapshot();const f=mn(),p=c.measurePageBox();Xi(f,p),DS(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,f)}return Wo(this.latestValues)&&DS(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==On.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var d;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(d=this.parent)!=null&&d.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=On.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),bu(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mn(),this.targetWithTransforms=mn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xi(this.target,this.layout.layoutBox),cE(this.target,this.targetDelta)):Xi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mn(),this.relativeTargetOrigin=mn(),bu(this.relativeTargetOrigin,this.target,m.target),Xi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Iy(this.parent.latestValues)||lE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===On.timestamp&&(l=!1),l)return;const{layout:c,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||f))return;Xi(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,d=this.treeScale.y;QK(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=mn());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(RS(this.prevProjectionDelta.x,this.projectionDelta.x),RS(this.prevProjectionDelta.y,this.projectionDelta.y)),Mu(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==d||!kS(this.projectionDelta.x,this.prevProjectionDelta.x)||!kS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pl(),this.projectionDelta=Pl(),this.projectionDeltaWithTransform=Pl()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},f={...this.latestValues},p=Pl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const d=mn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,_=m!==v,x=this.getStack(),y=!x||x.members.length<=1,b=!!(_&&!y&&this.options.crossfade===!0&&!this.path.some(YZ));this.animationProgress=0;let M;this.mixTargetDelta=T=>{const P=T/1e3;zS(p.x,o.x,P),zS(p.y,o.y,P),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bu(d,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qZ(this.relativeTarget,this.relativeTargetOrigin,d,P),M&&LZ(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=mn()),Xi(M,this.relativeTarget)),_&&(this.animationValues=f,TZ(f,c,this.latestValues,P,b,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(!1),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(!1),this.pendingAnimation&&(so(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=sn.update(()=>{mp.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ql(0)),this.currentAnimation=xZ(this.motionValue,[0,1e3],{...o,isSync:!0,onUpdate:f=>{this.mixTargetDelta(f),o.onUpdate&&o.onUpdate(f)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(UZ),this.currentAnimation.stop(!1)),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:f}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&ME(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||mn();const p=li(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const d=li(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+d}Xi(a,l),Ll(a,f),Mu(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new IZ),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Eg("z",o,c,this.animationValues);for(let f=0;f<Ag.length;f++)Eg(`rotate${Ag[f]}`,o,c,this.animationValues),Eg(`skew${Ag[f]}`,o,c,this.animationValues);o.render();for(const f in c)o.setStaticValue(f,c[f]),this.animationValues&&(this.animationValues[f]=c[f]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return NZ;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=dp(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=dp(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Wo(this.latestValues)&&(m.transform=l?l({},""):"none",this.hasProjected=!1),m}const f=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=DZ(this.projectionDeltaWithTransform,this.treeScale,f),l&&(a.transform=l(f,a.transform));const{x:p,y:d}=this.projectionDelta;a.transformOrigin=`${p.origin*100}% ${d.origin*100}% 0`,c.animationValues?a.opacity=c===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:a.opacity=c===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in lh){if(f[m]===void 0)continue;const{correct:v,applyTo:_,isCSSVariable:x}=lh[m],y=a.transform==="none"?f[m]:v(f[m],c);if(_){const b=_.length;for(let M=0;M<b;M++)a[_[M]]=y}else x?this.options.visualElement.renderState.vars[m]=y:a[m]=y}return this.options.layoutId&&(a.pointerEvents=c===this?dp(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop(!1)}),this.root.nodes.forEach(BS),this.root.sharedNodes.clear()}}}function OZ(n){n.updateLayout()}function kZ(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=e.source!==n.layout.source;s==="size"?Yi(p=>{const d=o?e.measuredBox[p]:e.layoutBox[p],m=li(d);d.min=i[p].min,d.max=d.min+m}):ME(s,e.layoutBox,i)&&Yi(p=>{const d=o?e.measuredBox[p]:e.layoutBox[p],m=li(i[p]);d.max=d.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+m)});const a=Pl();Mu(a,i,e.layoutBox);const l=Pl();o?Mu(l,n.applyTransform(r,!0),e.measuredBox):Mu(l,i,e.layoutBox);const c=!yE(a);let f=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:d,layout:m}=p;if(d&&m){const v=mn();bu(v,e.layoutBox,d.layoutBox);const _=mn();bu(_,i,m.layoutBox),xE(v,_)||(f=!0),p.options.layoutRoot&&(n.relativeTarget=_,n.relativeTargetOrigin=v,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function BZ(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function VZ(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function zZ(n){n.clearSnapshot()}function BS(n){n.clearMeasurements()}function HZ(n){n.isLayoutDirty=!1}function $Z(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function VS(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function GZ(n){n.resolveTargetDelta()}function WZ(n){n.calcProjection()}function jZ(n){n.resetSkewAndRotation()}function XZ(n){n.removeLeadSnapshot()}function zS(n,e,t){n.translate=tn(e.translate,0,t),n.scale=tn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function HS(n,e,t,i){n.min=tn(e.min,t.min,i),n.max=tn(e.max,t.max,i)}function qZ(n,e,t,i){HS(n.x,e.x,t.x,i),HS(n.y,e.y,t.y,i)}function YZ(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const KZ={duration:.45,ease:[.4,0,.1,1]},$S=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),GS=$S("applewebkit/")&&!$S("chrome/")?Math.round:nr;function WS(n){n.min=GS(n.min),n.max=GS(n.max)}function ZZ(n){WS(n.x),WS(n.y)}function ME(n,e,t){return n==="position"||n==="preserve-aspect"&&!ZK(OS(e),OS(t),.2)}function JZ(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const QZ=SE({attachResizeListener:(n,e)=>dh(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cg={current:void 0},bE=SE({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Cg.current){const n=new QZ({});n.mount(window),n.setOptions({layoutScroll:!0}),Cg.current=n}return Cg.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),eJ={pan:{Feature:mZ},drag:{Feature:pZ,ProjectionNode:bE,MeasureLayout:mE}};function tJ(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){const r=document.querySelectorAll(n);return r?Array.from(r):[]}return Array.from(n)}function wE(n,e){const t=tJ(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function jS(n){return!(n.pointerType==="touch"||pE())}function nJ(n,e,t={}){const[i,r,s]=wE(n,t),o=a=>{if(!jS(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const f=p=>{jS(p)&&(c(p),l.removeEventListener("pointerleave",f))};l.addEventListener("pointerleave",f,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}function XS(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&sn.postRender(()=>s(e,Hh(e)))}class iJ extends go{mount(){const{current:e}=this.node;e&&(this.unmount=nJ(e,(t,i)=>(XS(this.node,i,"Start"),r=>XS(this.node,r,"End"))))}unmount(){}}class rJ extends go{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vh(dh(this.node.current,"focus",()=>this.onFocus()),dh(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const TE=(n,e)=>e?n===e?!0:TE(n,e.parentElement):!1,sJ=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oJ(n){return sJ.has(n.tagName)||n.tabIndex!==-1}const gp=new WeakSet;function qS(n){return e=>{e.key==="Enter"&&n(e)}}function Pg(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aJ=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=qS(()=>{if(gp.has(t))return;Pg(t,"down");const r=qS(()=>{Pg(t,"up")}),s=()=>Pg(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function YS(n){return a3(n)&&!pE()}function lJ(n,e,t={}){const[i,r,s]=wE(n,t),o=a=>{const l=a.currentTarget;if(!YS(a))return;gp.add(l);const c=e(l,a),f=(m,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",d),gp.has(l)&&gp.delete(l),YS(m)&&typeof c=="function"&&c(m,{success:v})},p=m=>{f(m,l===window||l===document||t.useGlobalTarget||TE(l,m.target))},d=m=>{f(m,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",d,r)};return i.forEach(a=>{(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a instanceof HTMLElement&&(a.addEventListener("focus",c=>aJ(c,r)),!oJ(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function KS(n,e,t){const{props:i}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&sn.postRender(()=>s(e,Hh(e)))}class cJ extends go{mount(){const{current:e}=this.node;e&&(this.unmount=lJ(e,(t,i)=>(KS(this.node,i,"Start"),(r,{success:s})=>KS(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Uy=new WeakMap,Rg=new WeakMap,uJ=n=>{const e=Uy.get(n.target);e&&e(n)},hJ=n=>{n.forEach(uJ)};function fJ({root:n,...e}){const t=n||document;Rg.has(t)||Rg.set(t,{});const i=Rg.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(hJ,{root:n,...e})),i[r]}function dJ(n,e,t){const i=fJ(e);return Uy.set(n,t),i.observe(n),()=>{Uy.delete(n),i.unobserve(n)}}const pJ={some:0,all:1};class mJ extends go{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:pJ[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:f,onViewportLeave:p}=this.node.getProps(),d=c?f:p;d&&d(l)};return dJ(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(gJ(e,t))&&this.startObserver()}unmount(){}}function gJ({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const vJ={inView:{Feature:mJ},tap:{Feature:cJ},focus:{Feature:rJ},hover:{Feature:iJ}},yJ={layout:{ProjectionNode:bE,MeasureLayout:mE}},Fy={current:null},AE={current:!1};function xJ(){if(AE.current=!0,!!Lx)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Fy.current=n.matches;n.addListener(e),e()}else Fy.current=!1}const _J=new WeakMap;function SJ(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Kn(r))n.addValue(i,r);else if(Kn(s))n.addValue(i,ql(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,ql(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const EE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),CE=n=>/^0[^.\s]+$/u.test(n),MJ={test:n=>n==="auto",parse:n=>n},PE=n=>e=>e.test(n),RE=[oc,rt,Vr,qs,Iq,Lq,MJ],ZS=n=>RE.find(PE(n)),bJ=[...RE,Yn,oo],wJ=n=>bJ.find(PE(n)),TJ=new Set(["brightness","contrast","saturate","opacity"]);function AJ(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Yx)||[];if(!i)return n;const r=t.replace(i,"");let s=TJ.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const EJ=/\b([a-z-]*)\(.*?\)/gu,Oy={...oo,getAnimatableNone:n=>{const e=n.match(EJ);return e?e.map(AJ).join(" "):n}},CJ={...Bx,color:Yn,backgroundColor:Yn,outlineColor:Yn,fill:Yn,stroke:Yn,borderColor:Yn,borderTopColor:Yn,borderRightColor:Yn,borderBottomColor:Yn,borderLeftColor:Yn,filter:Oy,WebkitFilter:Oy},LE=n=>CJ[n];function IE(n,e){let t=LE(n);return t!==Oy&&(t=oo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const JS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PJ{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=r3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const d=xi.now();this.renderScheduledAt<d&&(this.renderScheduledAt=d,sn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=$0(t),this.isVariantNode=pA(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const d in p){const m=p[d];l[d]!==void 0&&Kn(m)&&m.set(l[d],!1)}}mount(e){this.current=e,_J.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),AE.current||xJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Fy.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),so(this.notifyUpdate),so(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=sc.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&sn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Xl){const t=Xl[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<JS.length;i++){const r=JS[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=SJ(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=ql(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(EE(i)||CE(i))?i=parseFloat(i):!wJ(i)&&oo.test(t)&&(i=IE(e,t)),this.setBaseTarget(e,Kn(i)?i.get():i)),Kn(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var s;const{initial:t}=this.props;let i;if(typeof t=="string"||typeof t=="object"){const o=$x(this.props,t,(s=this.presenceContext)==null?void 0:s.custom);o&&(i=o[e])}if(t&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Kn(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Xx),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}const RJ=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function LJ(n){const e=RJ.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function DE(n,e,t=1){const[i,r]=LJ(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return EE(o)?parseFloat(o):o}return kx(r)?DE(r,e,t+1):r}function IJ(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||CE(n):!0}const DJ=new Set(["auto","none","0"]);function NJ(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!DJ.has(s)&&hh(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=IE(t,r)}class UJ extends r3{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),kx(c))){const f=DE(c,t.current);f!==void 0&&(e[l]=f),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!tE.has(i)||e.length!==2)return;const[r,s]=e,o=ZS(r),a=ZS(s);if(o!==a)if(iS(o)&&iS(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else aa[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||IJ(e[r]))&&i.push(r);i.length&&NJ(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=aa[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var a;const{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(t);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=aa[t](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}class NE extends PJ{constructor(){super(...arguments),this.KeyframeResolver=UJ}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function UE(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}function FJ(n){return window.getComputedStyle(n)}class OJ extends NE{constructor(){super(...arguments),this.type="html",this.renderInstance=UE}readValueFromInstance(e,t){if(sc.has(t))return oK(e,t);{const i=FJ(e),r=(Ox(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return uE(e,t)}build(e,t,i){Vx(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return Gx(e,t,i)}}const FE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function kJ(n,e,t,i){UE(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(FE.has(r)?r:Ux(r),e.attrs[r])}class BJ extends NE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(sc.has(t)){const i=LE(t);return i&&i.default||0}return t=FE.has(t)?t:Ux(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return AA(e,t,i)}build(e,t,i){MA(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,r){kJ(e,t,i,r)}mount(e){this.isSVGTag=wA(e.tagName),super.mount(e)}}const VJ=(n,e)=>Hx(n)?new BJ(e):new OJ(e,{allowProjection:n!==H.Fragment}),zJ=Kq({...$K,...vJ,...eJ,...yJ},VJ),HJ=gq(zJ);function $J(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var l3=$J,GJ=typeof Ji=="object"&&Ji&&Ji.Object===Object&&Ji,WJ=GJ,jJ=WJ,XJ=typeof self=="object"&&self&&self.Object===Object&&self,qJ=jJ||XJ||Function("return this")(),OE=qJ,YJ=OE,KJ=function(){return YJ.Date.now()},ZJ=KJ,JJ=/\s/;function QJ(n){for(var e=n.length;e--&&JJ.test(n.charAt(e)););return e}var eQ=QJ,tQ=eQ,nQ=/^\s+/;function iQ(n){return n&&n.slice(0,tQ(n)+1).replace(nQ,"")}var rQ=iQ,sQ=OE,oQ=sQ.Symbol,kE=oQ,QS=kE,BE=Object.prototype,aQ=BE.hasOwnProperty,lQ=BE.toString,Yc=QS?QS.toStringTag:void 0;function cQ(n){var e=aQ.call(n,Yc),t=n[Yc];try{n[Yc]=void 0;var i=!0}catch{}var r=lQ.call(n);return i&&(e?n[Yc]=t:delete n[Yc]),r}var uQ=cQ,hQ=Object.prototype,fQ=hQ.toString;function dQ(n){return fQ.call(n)}var pQ=dQ,eM=kE,mQ=uQ,gQ=pQ,vQ="[object Null]",yQ="[object Undefined]",tM=eM?eM.toStringTag:void 0;function xQ(n){return n==null?n===void 0?yQ:vQ:tM&&tM in Object(n)?mQ(n):gQ(n)}var _Q=xQ;function SQ(n){return n!=null&&typeof n=="object"}var MQ=SQ,bQ=_Q,wQ=MQ,TQ="[object Symbol]";function AQ(n){return typeof n=="symbol"||wQ(n)&&bQ(n)==TQ}var EQ=AQ,CQ=rQ,nM=l3,PQ=EQ,iM=NaN,RQ=/^[-+]0x[0-9a-f]+$/i,LQ=/^0b[01]+$/i,IQ=/^0o[0-7]+$/i,DQ=parseInt;function NQ(n){if(typeof n=="number")return n;if(PQ(n))return iM;if(nM(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=nM(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=CQ(n);var t=LQ.test(n);return t||IQ.test(n)?DQ(n.slice(2),t?2:8):RQ.test(n)?iM:+n}var UQ=NQ,FQ=l3,Lg=ZJ,rM=UQ,OQ="Expected a function",kQ=Math.max,BQ=Math.min;function VQ(n,e,t){var i,r,s,o,a,l,c=0,f=!1,p=!1,d=!0;if(typeof n!="function")throw new TypeError(OQ);e=rM(e)||0,FQ(t)&&(f=!!t.leading,p="maxWait"in t,s=p?kQ(rM(t.maxWait)||0,e):s,d="trailing"in t?!!t.trailing:d);function m(E){var L=i,I=r;return i=r=void 0,c=E,o=n.apply(I,L),o}function v(E){return c=E,a=setTimeout(y,e),f?m(E):o}function _(E){var L=E-l,I=E-c,R=e-L;return p?BQ(R,s-I):R}function x(E){var L=E-l,I=E-c;return l===void 0||L>=e||L<0||p&&I>=s}function y(){var E=Lg();if(x(E))return b(E);a=setTimeout(y,_(E))}function b(E){return a=void 0,d&&i?m(E):(i=r=void 0,o)}function M(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function T(){return a===void 0?o:b(Lg())}function P(){var E=Lg(),L=x(E);if(i=arguments,r=this,l=E,L){if(a===void 0)return v(l);if(p)return clearTimeout(a),a=setTimeout(y,e),m(l)}return a===void 0&&(a=setTimeout(y,e)),o}return P.cancel=M,P.flush=T,P}var VE=VQ;const zQ=Sa(VE);var HQ=VE,$Q=l3,GQ="Expected a function";function WQ(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(GQ);return $Q(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),HQ(n,e,{leading:i,maxWait:e,trailing:r})}var jQ=WQ;const XQ=Sa(jQ),qQ=(n,e,t,i)=>{switch(e){case"debounce":return zQ(n,t,i);case"throttle":return XQ(n,t,i);default:return n}},YQ=n=>{const e=H.useRef(n);return H.useEffect(()=>{e.current=n}),H.useMemo(()=>(...t)=>{var i;return(i=e.current)===null||i===void 0?void 0:i.call(e,...t)},[])},KQ=n=>{const[e,t]=H.useState((n==null?void 0:n.current)||null);return n&&setTimeout(()=>{n.current!==e&&t(n.current)},0),{refProxy:H.useMemo(()=>new Proxy(r=>{r!==e&&t(r)},{get(r,s){return s==="current"?e:r[s]},set(r,s,o){return s==="current"?t(o):r[s]=o,!0}}),[e]),refElement:e,setRefElement:t}},ZQ=(n,e)=>e==="border-box"?{width:n.borderBoxSize[0].inlineSize,height:n.borderBoxSize[0].blockSize}:e==="content-box"?{width:n.contentBoxSize[0].inlineSize,height:n.contentBoxSize[0].blockSize}:{width:n.contentRect.width,height:n.contentRect.height};function JQ({skipOnMount:n=!1,refreshMode:e,refreshRate:t=1e3,refreshOptions:i,handleWidth:r=!0,handleHeight:s=!0,targetRef:o,observerOptions:a,onResize:l}={}){const c=H.useRef(n),f=YQ(l),[p,d]=H.useState({width:void 0,height:void 0}),{refProxy:m,refElement:v}=KQ(o),{box:_}=a||{},x=H.useCallback(b=>{if(!r&&!s)return;if(c.current){c.current=!1;return}const M=(T,P)=>r&&T.width!==P.width||s&&T.height!==P.height;b.forEach(T=>{const P=ZQ(T,_);d(E=>M(E,P)?(f==null||f({width:P.width,height:P.height,entry:T}),P):E)})},[r,s,c,_]),y=H.useCallback(qQ(x,e,t,i),[x,e,t,i]);return H.useEffect(()=>{let b;return v?(b=new window.ResizeObserver(y),b.observe(v,a)):(p.width||p.height)&&(f==null||f({width:null,height:null,entry:null}),d({width:void 0,height:void 0})),()=>{var M,T,P;(M=b==null?void 0:b.disconnect)===null||M===void 0||M.call(b),(P=(T=y).cancel)===null||P===void 0||P.call(T)}},[y,v]),Object.assign({ref:m},p)}var zE={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sM=Wt.createContext&&Wt.createContext(zE),eo=function(){return eo=Object.assign||function(n){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},eo.apply(this,arguments)},QQ=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};function HE(n){return n&&n.map(function(e,t){return Wt.createElement(e.tag,eo({key:t},e.attr),HE(e.child))})}function G0(n){return function(e){return Wt.createElement(eee,eo({attr:eo({},n.attr)},e),HE(n.child))}}function eee(n){var e=function(t){var i=n.attr,r=n.size,s=n.title,o=QQ(n,["attr","size","title"]),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Wt.createElement("svg",eo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:eo(eo({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Wt.createElement("title",null,s),n.children)};return sM!==void 0?Wt.createElement(sM.Consumer,null,function(t){return e(t)}):e(zE)}function tee(n){return G0({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.293 7.293c-.391.391-.391 1.023 0 1.414l2.293 2.293h-7.586c-.552 0-1 .448-1 1s.448 1 1 1h7.586l-2.293 2.293c-.391.391-.391 1.023 0 1.414.195.195.451.293.707.293s.512-.098.707-.293l4.707-4.707-4.707-4.707c-.391-.391-1.023-.391-1.414 0z"}}]})(n)}function nee(n){return G0({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12 21c-4.963 0-9-4.038-9-9s4.037-9 9-9 9 4.038 9 9-4.037 9-9 9zm0-16c-3.859 0-7 3.14-7 7s3.141 7 7 7 7-3.14 7-7-3.141-7-7-7zM13.565 12.626c.171 0 .316.084.441.255.124.169.187.378.187.625 0 .248-.062.457-.187.626-.125.169-.271.254-.441.254-.181 0-.337-.084-.461-.254-.124-.169-.187-.378-.187-.626s.062-.456.187-.625c.125-.171.281-.255.461-.255m2.21-2.289c.482.522.725 1.155.725 1.898 0 .482-.057.915-.166 1.301-.111.384-.252.698-.42.939-.171.242-.378.454-.627.635-.249.184-.478.316-.685.401-.208.085-.446.15-.716.196-.266.047-.467.072-.606.079l-.44.009-.352.01-.488.011-.488-.011-.352-.01-.44-.009c-.14-.007-.341-.032-.606-.079-.271-.045-.508-.11-.716-.196-.207-.084-.436-.217-.684-.401-.25-.182-.457-.394-.628-.635-.168-.241-.309-.555-.42-.939-.109-.386-.166-.819-.166-1.301 0-.743.242-1.376.725-1.898-.053-.026-.056-.286-.008-.782.043-.496.148-.953.319-1.37.602.064 1.343.404 2.23 1.017.3-.078.71-.118 1.233-.118.549 0 .959.04 1.234.118.404-.273.791-.496 1.16-.666.374-.168.644-.267.814-.293l.254-.058c.172.417.277.875.32 1.37.05.496.047.756-.006.782m-3.754 5.027c1.083 0 1.899-.129 2.454-.39.553-.26.833-.796.833-1.605 0-.469-.176-.861-.529-1.174-.181-.17-.394-.273-.638-.313-.238-.039-.607-.039-1.104 0-.495.04-.834.058-1.016.058-.248 0-.517-.013-.851-.039l-.783-.049c-.191-.006-.395.018-.616.069-.223.053-.404.143-.55.273-.336.3-.507.691-.507 1.174 0 .809.274 1.345.821 1.605.547.261 1.361.39 2.444.39m-1.524-2.737c.17 0 .316.084.44.255.124.169.187.378.187.625 0 .248-.062.457-.187.626-.124.169-.271.254-.44.254-.182 0-.337-.084-.462-.254-.124-.169-.187-.378-.187-.626s.062-.456.187-.625c.125-.171.28-.255.462-.255"}}]}]})(n)}function iee(n){return G0({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M10.033 15.3h-1.6v-5.199h1.6v5.199zm-.8-5.866c-.577 0-.866-.267-.866-.8 0-.223.082-.412.25-.567.166-.155.371-.233.616-.233.577 0 .866.268.866.801s-.288.799-.866.799zm6.734 5.866h-1.633v-2.9c0-.755-.268-1.133-.801-1.133-.422 0-.699.211-.834.633-.043.067-.066.201-.066.4v3h-1.633v-3.533c0-.8-.012-1.355-.033-1.666h1.4l.1.699c.367-.556.9-.833 1.633-.833.557 0 1.006.194 1.35.583.346.389.518.95.518 1.684v3.066zM12 21c-4.963 0-9-4.037-9-9s4.037-9 9-9 9 4.037 9 9-4.037 9-9 9zm0-16c-3.859 0-7 3.141-7 7s3.141 7 7 7 7-3.141 7-7-3.141-7-7-7z"}}]}]})(n)}const ree=({slide:n,index:e,current:t,handleSlideClick:i})=>{const r=H.useRef(null),s=H.useRef(0),o=H.useRef(0),a=H.useRef();H.useEffect(()=>{const d=()=>{if(!r.current)return;const m=s.current,v=o.current;r.current.style.setProperty("--x",`${m}px`),r.current.style.setProperty("--y",`${v}px`),a.current=requestAnimationFrame(d)};return a.current=requestAnimationFrame(d),()=>{a.current&&cancelAnimationFrame(a.current)}},[]);const l=d=>{d.currentTarget.style.opacity="1"},{src:c,button:f,title:p}=n;return ee.jsx("div",{className:"[perspective:1200px] [transform-style:preserve-3d]",children:ee.jsx("li",{ref:r,className:"flex flex-1 flex-col items-center justify-center relative text-center text-white opacity-100 transition-all duration-300 ease-in-out w-[40vmin] h-[25vmin] mx-[4vmin] z-10 rounded-2xl overflow-hidden",onClick:()=>i(e),style:{transform:t!==e?"scale(0.98) rotateX(8deg)":"scale(1) rotateX(0deg)",transition:"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)",transformOrigin:"bottom"},children:ee.jsx("div",{className:"absolute flex top-0 left-0 w-full h-full bg-[#1D1F2F] rounded-[1%] overflow-hidden transition-all duration-150 ease-out",style:{transform:t===e?"translate3d(calc(var(--x) / 30), calc(var(--y) / 30), 0)":"none"},children:ee.jsx("img",{className:"absolute inset-0 w-[40vmin] h-[25vmin] object-cover opacity-100 transition-opacity duration-600 ease-in-out",style:{opacity:t===e?1:.5},alt:p,src:c,onLoad:l,loading:"eager",decoding:"sync"})})})})},oM=({type:n,title:e,handleClick:t})=>ee.jsx("button",{className:`w-10 h-10 flex items-center mx-2 justify-center bg-neutral-200 dark:bg-neutral-800 border-3 border-transparent rounded-full focus:border-[#6D64F7] focus:outline-none hover:-translate-y-0.5 active:translate-y-0.5 transition duration-200 ${n==="previous"?"rotate-180":""}`,title:e,onClick:t,children:ee.jsx(tee,{className:"text-neutral-600 dark:text-neutral-200"})});function see({slides:n}){const[e,t]=H.useState(0),i=()=>{const a=e-1;t(a<0?n.length-1:a)},r=()=>{const a=e+1;t(a===n.length?0:a)},s=a=>{e!==a&&t(a)},o=H.useId();return ee.jsxs("div",{className:"flex flex-col gap-6 overflow-hidden",children:[ee.jsx("div",{className:"rounded-2xl overflow-hidden items-center max-w-[40vmin]",children:ee.jsx("div",{className:"relative min-w-[40vmin] min-h-[25vmin] mx-auto","aria-labelledby":`carousel-heading-${o}`,children:ee.jsx("ul",{className:"absolute flex mx-[-4vmin] transition-transform duration-1000 ease-in-out",style:{transform:`translateX(-${e*(100/n.length)}%)`},children:n.map((a,l)=>ee.jsx(ree,{slide:a,index:l,current:e,handleSlideClick:s},l))})})}),ee.jsxs("div",{className:"flex justify-center w-full",children:[ee.jsx(oM,{type:"previous",title:"Go to previous slide",handleClick:i}),ee.jsx(oM,{type:"next",title:"Go to next slide",handleClick:r})]})]})}class aM extends Map{constructor(e,t=lee){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(lM(this,e))}has(e){return super.has(lM(this,e))}set(e,t){return super.set(oee(this,e),t)}delete(e){return super.delete(aee(this,e))}}function lM({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):t}function oee({_intern:n,_key:e},t){const i=e(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function aee({_intern:n,_key:e},t){const i=e(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function lee(n){return n!==null&&typeof n=="object"?n.valueOf():n}function cee(n,e){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(e).domain(n);break}return this}const cM=Symbol("implicit");function $E(){var n=new aM,e=[],t=[],i=cM;function r(s){let o=n.get(s);if(o===void 0){if(i!==cM)return i;n.set(s,o=e.push(s)-1)}return t[o%t.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new aM;for(const o of s)n.has(o)||n.set(o,e.push(o)-1);return r},r.range=function(s){return arguments.length?(t=Array.from(s),r):t.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return $E(e,t).unknown(i)},cee.apply(r,arguments),r}function ac(n,e,t){n.prototype=e.prototype=t,t.constructor=n}function $h(n,e){var t=Object.create(n.prototype);for(var i in e)t[i]=e[i];return t}function vo(){}var _a=.7,Yl=1/_a,Fl="\\s*([+-]?\\d+)\\s*",ph="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",$r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uee=/^#([0-9a-f]{3,8})$/,hee=new RegExp(`^rgb\\(${Fl},${Fl},${Fl}\\)$`),fee=new RegExp(`^rgb\\(${$r},${$r},${$r}\\)$`),dee=new RegExp(`^rgba\\(${Fl},${Fl},${Fl},${ph}\\)$`),pee=new RegExp(`^rgba\\(${$r},${$r},${$r},${ph}\\)$`),mee=new RegExp(`^hsl\\(${ph},${$r},${$r}\\)$`),gee=new RegExp(`^hsla\\(${ph},${$r},${$r},${ph}\\)$`),uM={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ac(vo,c3,{copy(n){return Object.assign(new this.constructor,this,n)},displayable(){return this.rgb().displayable()},hex:hM,formatHex:hM,formatHex8:vee,formatHsl:yee,formatRgb:fM,toString:fM});function hM(){return this.rgb().formatHex()}function vee(){return this.rgb().formatHex8()}function yee(){return GE(this).formatHsl()}function fM(){return this.rgb().formatRgb()}function c3(n){var e,t;return n=(n+"").trim().toLowerCase(),(e=uee.exec(n))?(t=e[1].length,e=parseInt(e[1],16),t===6?dM(e):t===3?new Dn(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?Kd(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?Kd(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=hee.exec(n))?new Dn(e[1],e[2],e[3],1):(e=fee.exec(n))?new Dn(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=dee.exec(n))?Kd(e[1],e[2],e[3],e[4]):(e=pee.exec(n))?Kd(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=mee.exec(n))?gM(e[1],e[2]/100,e[3]/100,1):(e=gee.exec(n))?gM(e[1],e[2]/100,e[3]/100,e[4]):uM.hasOwnProperty(n)?dM(uM[n]):n==="transparent"?new Dn(NaN,NaN,NaN,0):null}function dM(n){return new Dn(n>>16&255,n>>8&255,n&255,1)}function Kd(n,e,t,i){return i<=0&&(n=e=t=NaN),new Dn(n,e,t,i)}function u3(n){return n instanceof vo||(n=c3(n)),n?(n=n.rgb(),new Dn(n.r,n.g,n.b,n.opacity)):new Dn}function ky(n,e,t,i){return arguments.length===1?u3(n):new Dn(n,e,t,i??1)}function Dn(n,e,t,i){this.r=+n,this.g=+e,this.b=+t,this.opacity=+i}ac(Dn,ky,$h(vo,{brighter(n){return n=n==null?Yl:Math.pow(Yl,n),new Dn(this.r*n,this.g*n,this.b*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new Dn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb(){return this},clamp(){return new Dn(ca(this.r),ca(this.g),ca(this.b),Yp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pM,formatHex:pM,formatHex8:xee,formatRgb:mM,toString:mM}));function pM(){return`#${ea(this.r)}${ea(this.g)}${ea(this.b)}`}function xee(){return`#${ea(this.r)}${ea(this.g)}${ea(this.b)}${ea((isNaN(this.opacity)?1:this.opacity)*255)}`}function mM(){const n=Yp(this.opacity);return`${n===1?"rgb(":"rgba("}${ca(this.r)}, ${ca(this.g)}, ${ca(this.b)}${n===1?")":`, ${n})`}`}function Yp(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ca(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function ea(n){return n=ca(n),(n<16?"0":"")+n.toString(16)}function gM(n,e,t,i){return i<=0?n=e=t=NaN:t<=0||t>=1?n=e=NaN:e<=0&&(n=NaN),new mr(n,e,t,i)}function GE(n){if(n instanceof mr)return new mr(n.h,n.s,n.l,n.opacity);if(n instanceof vo||(n=c3(n)),!n)return new mr;if(n instanceof mr)return n;n=n.rgb();var e=n.r/255,t=n.g/255,i=n.b/255,r=Math.min(e,t,i),s=Math.max(e,t,i),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-i)/a+(t<i)*6:t===s?o=(i-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new mr(o,a,l,n.opacity)}function By(n,e,t,i){return arguments.length===1?GE(n):new mr(n,e,t,i??1)}function mr(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}ac(mr,By,$h(vo,{brighter(n){return n=n==null?Yl:Math.pow(Yl,n),new mr(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new mr(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=this.h%360+(this.h<0)*360,e=isNaN(n)||isNaN(this.s)?0:this.s,t=this.l,i=t+(t<.5?t:1-t)*e,r=2*t-i;return new Dn(Ig(n>=240?n-240:n+120,r,i),Ig(n,r,i),Ig(n<120?n+240:n-120,r,i),this.opacity)},clamp(){return new mr(vM(this.h),Zd(this.s),Zd(this.l),Yp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const n=Yp(this.opacity);return`${n===1?"hsl(":"hsla("}${vM(this.h)}, ${Zd(this.s)*100}%, ${Zd(this.l)*100}%${n===1?")":`, ${n})`}`}}));function vM(n){return n=(n||0)%360,n<0?n+360:n}function Zd(n){return Math.max(0,Math.min(1,n||0))}function Ig(n,e,t){return(n<60?e+(t-e)*n/60:n<180?t:n<240?e+(t-e)*(240-n)/60:e)*255}const WE=Math.PI/180,jE=180/Math.PI,Kp=18,XE=.96422,qE=1,YE=.82521,KE=4/29,Ol=6/29,ZE=3*Ol*Ol,_ee=Ol*Ol*Ol;function JE(n){if(n instanceof Gr)return new Gr(n.l,n.a,n.b,n.opacity);if(n instanceof hs)return QE(n);n instanceof Dn||(n=u3(n));var e=Fg(n.r),t=Fg(n.g),i=Fg(n.b),r=Dg((.2225045*e+.7168786*t+.0606169*i)/qE),s,o;return e===t&&t===i?s=o=r:(s=Dg((.4360747*e+.3850649*t+.1430804*i)/XE),o=Dg((.0139322*e+.0971045*t+.7141733*i)/YE)),new Gr(116*r-16,500*(s-r),200*(r-o),n.opacity)}function Vy(n,e,t,i){return arguments.length===1?JE(n):new Gr(n,e,t,i??1)}function Gr(n,e,t,i){this.l=+n,this.a=+e,this.b=+t,this.opacity=+i}ac(Gr,Vy,$h(vo,{brighter(n){return new Gr(this.l+Kp*(n??1),this.a,this.b,this.opacity)},darker(n){return new Gr(this.l-Kp*(n??1),this.a,this.b,this.opacity)},rgb(){var n=(this.l+16)/116,e=isNaN(this.a)?n:n+this.a/500,t=isNaN(this.b)?n:n-this.b/200;return e=XE*Ng(e),n=qE*Ng(n),t=YE*Ng(t),new Dn(Ug(3.1338561*e-1.6168667*n-.4906146*t),Ug(-.9787684*e+1.9161415*n+.033454*t),Ug(.0719453*e-.2289914*n+1.4052427*t),this.opacity)}}));function Dg(n){return n>_ee?Math.pow(n,1/3):n/ZE+KE}function Ng(n){return n>Ol?n*n*n:ZE*(n-KE)}function Ug(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Fg(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function See(n){if(n instanceof hs)return new hs(n.h,n.c,n.l,n.opacity);if(n instanceof Gr||(n=JE(n)),n.a===0&&n.b===0)return new hs(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var e=Math.atan2(n.b,n.a)*jE;return new hs(e<0?e+360:e,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function zy(n,e,t,i){return arguments.length===1?See(n):new hs(n,e,t,i??1)}function hs(n,e,t,i){this.h=+n,this.c=+e,this.l=+t,this.opacity=+i}function QE(n){if(isNaN(n.h))return new Gr(n.l,0,0,n.opacity);var e=n.h*WE;return new Gr(n.l,Math.cos(e)*n.c,Math.sin(e)*n.c,n.opacity)}ac(hs,zy,$h(vo,{brighter(n){return new hs(this.h,this.c,this.l+Kp*(n??1),this.opacity)},darker(n){return new hs(this.h,this.c,this.l-Kp*(n??1),this.opacity)},rgb(){return QE(this).rgb()}}));var eC=-.14861,h3=1.78277,f3=-.29227,W0=-.90649,mh=1.97294,yM=mh*W0,xM=mh*h3,_M=h3*f3-W0*eC;function Mee(n){if(n instanceof ua)return new ua(n.h,n.s,n.l,n.opacity);n instanceof Dn||(n=u3(n));var e=n.r/255,t=n.g/255,i=n.b/255,r=(_M*i+yM*e-xM*t)/(_M+yM-xM),s=i-r,o=(mh*(t-r)-f3*s)/W0,a=Math.sqrt(o*o+s*s)/(mh*r*(1-r)),l=a?Math.atan2(o,s)*jE-120:NaN;return new ua(l<0?l+360:l,a,r,n.opacity)}function Hy(n,e,t,i){return arguments.length===1?Mee(n):new ua(n,e,t,i??1)}function ua(n,e,t,i){this.h=+n,this.s=+e,this.l=+t,this.opacity=+i}ac(ua,Hy,$h(vo,{brighter(n){return n=n==null?Yl:Math.pow(Yl,n),new ua(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?_a:Math.pow(_a,n),new ua(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*WE,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(n),r=Math.sin(n);return new Dn(255*(e+t*(eC*i+h3*r)),255*(e+t*(f3*i+W0*r)),255*(e+t*(mh*i)),this.opacity)}}));const d3=n=>()=>n;function tC(n,e){return function(t){return n+t*e}}function bee(n,e,t){return n=Math.pow(n,t),e=Math.pow(e,t)-n,t=1/t,function(i){return Math.pow(n+i*e,t)}}function p3(n,e){var t=e-n;return t?tC(n,t>180||t<-180?t-360*Math.round(t/360):t):d3(isNaN(n)?e:n)}function wee(n){return(n=+n)==1?Nn:function(e,t){return t-e?bee(e,t,n):d3(isNaN(e)?t:e)}}function Nn(n,e){var t=e-n;return t?tC(n,t):d3(isNaN(n)?e:n)}const Tee=function n(e){var t=wee(e);function i(r,s){var o=t((r=ky(r)).r,(s=ky(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),c=Nn(r.opacity,s.opacity);return function(f){return r.r=o(f),r.g=a(f),r.b=l(f),r.opacity=c(f),r+""}}return i.gamma=n,i}(1);function Aee(n,e){return n=+n,e=+e,function(t){return Math.round(n*(1-t)+e*t)}}function nC(n){return function(e,t){var i=n((e=By(e)).h,(t=By(t)).h),r=Nn(e.s,t.s),s=Nn(e.l,t.l),o=Nn(e.opacity,t.opacity);return function(a){return e.h=i(a),e.s=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const Eee=nC(p3);var Cee=nC(Nn);function Pee(n,e){var t=Nn((n=Vy(n)).l,(e=Vy(e)).l),i=Nn(n.a,e.a),r=Nn(n.b,e.b),s=Nn(n.opacity,e.opacity);return function(o){return n.l=t(o),n.a=i(o),n.b=r(o),n.opacity=s(o),n+""}}function iC(n){return function(e,t){var i=n((e=zy(e)).h,(t=zy(t)).h),r=Nn(e.c,t.c),s=Nn(e.l,t.l),o=Nn(e.opacity,t.opacity);return function(a){return e.h=i(a),e.c=r(a),e.l=s(a),e.opacity=o(a),e+""}}}const Ree=iC(p3);var Lee=iC(Nn);function rC(n){return function e(t){t=+t;function i(r,s){var o=n((r=Hy(r)).h,(s=Hy(s)).h),a=Nn(r.s,s.s),l=Nn(r.l,s.l),c=Nn(r.opacity,s.opacity);return function(f){return r.h=o(f),r.s=a(f),r.l=l(Math.pow(f,t)),r.opacity=c(f),r+""}}return i.gamma=e,i}(1)}const Iee=rC(p3);var Dee=rC(Nn);const Og=new Date,kg=new Date;function Vn(n,e,t,i){function r(s){return n(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(n(s=new Date(+s)),s),r.ceil=s=>(n(s=new Date(s-1)),e(s,1),n(s),s),r.round=s=>{const o=r(s),a=r.ceil(s);return s-o<a-s?o:a},r.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),r.range=(s,o,a)=>{const l=[];if(s=r.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let c;do l.push(c=new Date(+s)),e(s,a),n(s);while(c<s&&s<o);return l},r.filter=s=>Vn(o=>{if(o>=o)for(;n(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;e(o,-1),!s(o););else for(;--a>=0;)for(;e(o,1),!s(o););}),t&&(r.count=(s,o)=>(Og.setTime(+s),kg.setTime(+o),n(Og),n(kg),Math.floor(t(Og,kg))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?o=>i(o)%s===0:o=>r.count(0,o)%s===0):r)),r}const gh=1e3,ao=gh*60,vh=ao*60,yh=vh*24,sC=yh*7,m3=Vn(n=>{n.setTime(n-n.getMilliseconds())},(n,e)=>{n.setTime(+n+e*gh)},(n,e)=>(e-n)/gh,n=>n.getUTCSeconds());m3.range;const oC=Vn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*gh)},(n,e)=>{n.setTime(+n+e*ao)},(n,e)=>(e-n)/ao,n=>n.getMinutes());oC.range;const aC=Vn(n=>{n.setUTCSeconds(0,0)},(n,e)=>{n.setTime(+n+e*ao)},(n,e)=>(e-n)/ao,n=>n.getUTCMinutes());aC.range;const lC=Vn(n=>{n.setTime(n-n.getMilliseconds()-n.getSeconds()*gh-n.getMinutes()*ao)},(n,e)=>{n.setTime(+n+e*vh)},(n,e)=>(e-n)/vh,n=>n.getHours());lC.range;const cC=Vn(n=>{n.setUTCMinutes(0,0,0)},(n,e)=>{n.setTime(+n+e*vh)},(n,e)=>(e-n)/vh,n=>n.getUTCHours());cC.range;const uC=Vn(n=>n.setHours(0,0,0,0),(n,e)=>n.setDate(n.getDate()+e),(n,e)=>(e-n-(e.getTimezoneOffset()-n.getTimezoneOffset())*ao)/yh,n=>n.getDate()-1);uC.range;const hC=Vn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yh,n=>n.getUTCDate()-1);hC.range;const Nee=Vn(n=>{n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCDate(n.getUTCDate()+e)},(n,e)=>(e-n)/yh,n=>Math.floor(n/yh));Nee.range;function Ea(n){return Vn(e=>{e.setDate(e.getDate()-(e.getDay()+7-n)%7),e.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+t*7)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ao)/sC)}const fC=Ea(0),Uee=Ea(1),Fee=Ea(2),Oee=Ea(3),kee=Ea(4),Bee=Ea(5),Vee=Ea(6);fC.range;Uee.range;Fee.range;Oee.range;kee.range;Bee.range;Vee.range;function Ca(n){return Vn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-n)%7),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t*7)},(e,t)=>(t-e)/sC)}const dC=Ca(0),zee=Ca(1),Hee=Ca(2),$ee=Ca(3),Gee=Ca(4),Wee=Ca(5),jee=Ca(6);dC.range;zee.range;Hee.range;$ee.range;Gee.range;Wee.range;jee.range;const pC=Vn(n=>{n.setDate(1),n.setHours(0,0,0,0)},(n,e)=>{n.setMonth(n.getMonth()+e)},(n,e)=>e.getMonth()-n.getMonth()+(e.getFullYear()-n.getFullYear())*12,n=>n.getMonth());pC.range;const mC=Vn(n=>{n.setUTCDate(1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCMonth(n.getUTCMonth()+e)},(n,e)=>e.getUTCMonth()-n.getUTCMonth()+(e.getUTCFullYear()-n.getUTCFullYear())*12,n=>n.getUTCMonth());mC.range;const g3=Vn(n=>{n.setMonth(0,1),n.setHours(0,0,0,0)},(n,e)=>{n.setFullYear(n.getFullYear()+e)},(n,e)=>e.getFullYear()-n.getFullYear(),n=>n.getFullYear());g3.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Vn(e=>{e.setFullYear(Math.floor(e.getFullYear()/n)*n),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t*n)});g3.range;const v3=Vn(n=>{n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},(n,e)=>{n.setUTCFullYear(n.getUTCFullYear()+e)},(n,e)=>e.getUTCFullYear()-n.getUTCFullYear(),n=>n.getUTCFullYear());v3.every=n=>!isFinite(n=Math.floor(n))||!(n>0)?null:Vn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/n)*n),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t*n)});v3.range;function Xee(n,e){e.domain&&("nice"in n||"quantiles"in n||"padding"in n,n.domain(e.domain))}function qee(n,e){e.range&&("padding"in n,n.range(e.range))}function Yee(n,e){"align"in n&&"align"in e&&typeof e.align<"u"&&n.align(e.align)}function Kee(n,e){"base"in n&&"base"in e&&typeof e.base<"u"&&n.base(e.base)}function Zee(n,e){"clamp"in n&&"clamp"in e&&typeof e.clamp<"u"&&n.clamp(e.clamp)}function Jee(n,e){"constant"in n&&"constant"in e&&typeof e.constant<"u"&&n.constant(e.constant)}function Qee(n,e){"exponent"in n&&"exponent"in e&&typeof e.exponent<"u"&&n.exponent(e.exponent)}var SM={lab:Pee,hcl:Ree,"hcl-long":Lee,hsl:Eee,"hsl-long":Cee,cubehelix:Iee,"cubehelix-long":Dee,rgb:Tee};function ete(n){switch(n){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return SM[n]}var e=n.type,t=n.gamma,i=SM[e];return typeof t>"u"?i:i.gamma(t)}function tte(n,e){if("interpolate"in e&&"interpolate"in n&&typeof e.interpolate<"u"){var t=ete(e.interpolate);n.interpolate(t)}}var nte=new Date(Date.UTC(2020,1,2,3,4,5)),ite="%Y-%m-%d %H:%M";function rte(n){var e=n.tickFormat(1,ite)(nte);return e==="2020-02-02 03:04"}var MM={day:uC,hour:lC,minute:oC,month:pC,second:m3,week:fC,year:g3},bM={day:hC,hour:cC,minute:aC,month:mC,second:m3,week:dC,year:v3};function ste(n,e){if("nice"in e&&typeof e.nice<"u"&&"nice"in n){var t=e.nice;if(typeof t=="boolean")t&&n.nice();else if(typeof t=="number")n.nice(t);else{var i=n,r=rte(i);if(typeof t=="string")i.nice(r?bM[t]:MM[t]);else{var s=t.interval,o=t.step,a=(r?bM[s]:MM[s]).every(o);a!=null&&i.nice(a)}}}}function ote(n,e){"padding"in n&&"padding"in e&&typeof e.padding<"u"&&n.padding(e.padding),"paddingInner"in n&&"paddingInner"in e&&typeof e.paddingInner<"u"&&n.paddingInner(e.paddingInner),"paddingOuter"in n&&"paddingOuter"in e&&typeof e.paddingOuter<"u"&&n.paddingOuter(e.paddingOuter)}function ate(n,e){if(e.reverse){var t=n.range().slice().reverse();"padding"in n,n.range(t)}}function lte(n,e){"round"in e&&typeof e.round<"u"&&(e.round&&"interpolate"in e&&typeof e.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",e):"round"in n?n.round(e.round):"interpolate"in n&&e.round&&n.interpolate(Aee))}function cte(n,e){"unknown"in n&&"unknown"in e&&typeof e.unknown<"u"&&n.unknown(e.unknown)}function ute(n,e){if("zero"in e&&e.zero===!0){var t=n.domain(),i=t[0],r=t[1],s=r<i,o=s?[r,i]:[i,r],a=o[0],l=o[1],c=[Math.min(0,a),Math.max(0,l)];n.domain(s?c.reverse():c)}}var hte=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],fte={domain:Xee,nice:ste,zero:ute,interpolate:tte,round:lte,align:Yee,base:Kee,clamp:Zee,constant:Jee,exponent:Qee,padding:ote,range:qee,reverse:ate,unknown:cte};function dte(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var i=new Set(e),r=hte.filter(function(s){return i.has(s)});return function(o,a){return typeof a<"u"&&r.forEach(function(l){fte[l](o,a)}),o}}var pte=dte("domain","range","reverse","unknown");function mte(n){return pte($E(),n)}const gC=({children:n,background:e,color:t})=>ee.jsx(nF,{className:"flex items-center rounded-full px-3 uppercase text-[var(--bg-primary)] align-middle",style:{background:e,color:t},size:"sm",children:n}),gte=["#CEFF00","#1F91C7","#527EC3","#7A67B2","#964E92","#A23569"],vte=({tags:n})=>{const e=H.useMemo(()=>mte({domain:n,range:gte}),[n]);return!n||n.length===0?null:ee.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(t=>ee.jsx(gC,{background:e(t),children:t},t))})},yte=({item:{logo:n,years:e,title:t,organizations:i,positions:r,highlights:s,images:o,tags:a}})=>{const l=H.useMemo(()=>ee.jsxs("div",{className:"flex flex-col gap-4",children:[ee.jsxs("div",{className:"flex gap-4 items-center",children:[n?ee.jsx("div",{className:"min-w-[8vmin] max-w-[8vmin] min-h-[8vmin] max-h-[8vmin] bg-cover bg-no-repeat overflow-hidden rounded-full",style:{backgroundImage:`url(${n})`,border:"0.5vmin solid var(--primary-text)"}}):null,ee.jsx("div",{className:"tracking-tighter flex justify-center text-center",children:t})]}),ee.jsxs("div",{className:"flex flex-col gap-1",children:[e?ee.jsx("div",{className:"tracking-tighter font-bold text-[2vmin] leading-[2.5vmin] uppercase opacity-[.6]",children:e}):null,r?ee.jsx("div",{className:"flex lowercase font-bold text-[2.5vmin] leading-[3vmin] opacity-[.9] tracking-tighter",children:r.join(" ← ")}):null,i!=null&&i.length?ee.jsx("div",{className:"tracking-tighter font-bold text-[2.5vmin] leading-[3vmin] uppercase opacity-[.6] pt-2",children:ee.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(c=>ee.jsx(gC,{background:"var(--slate-700)",color:"var(--slate-300)",children:c},c))})}):null]})]}),[n,e,t,i,r]);return ee.jsxs("div",{className:"flex justify-start pb-10 md:pt-20 md:gap-10",style:{contentVisibility:"auto"},children:[ee.jsxs("div",{className:"sticky flex flex-col md:flex-row z-40 items-center top-40 self-start max-w-xs lg:max-w-sm md:w-full",children:[ee.jsx("div",{className:"h-10 absolute left-3 md:left-3 w-10 rounded-full bg-[var(--bg-primary)] flex items-center justify-center",children:ee.jsx("div",{className:"h-4 w-4 rounded-full bg-neutral-200 dark:bg-neutral-800 border border-[var(--volt)] p-2"})}),ee.jsx("h3",{className:"hidden md:block text-xl md:pl-20 md:text-5xl font-bold text-foreground",children:l})]}),ee.jsxs("div",{className:"relative pl-20 pr-4 md:pl-6 w-full",children:[ee.jsx("h3",{className:"md:hidden block text-2xl mb-4 text-left font-bold text-foreground",children:l}),ee.jsxs("div",{className:"flex flex-col gap-8",children:[ee.jsx(vte,{tags:a}),ee.jsx("div",{className:"rounded-[22px] p-6 bg-[var(--bg-primary)] flex flex-col gap-2 w-full",style:{border:"1px solid #1e1e1e"},children:ee.jsx("div",{className:"light-text text-foreground font-normal flex flex-col",children:s==null?void 0:s.map((c,f)=>ee.jsx("div",{children:c},`highlight-${f}`))})}),o!=null&&o.length?ee.jsx("div",{className:"rounded-3xl overflow-x-hidden w-full flex items-center justify-center",children:ee.jsx(see,{slides:o.map(c=>({src:c}))})}):null]})]})]})},wM=({data:n,scrollContainerRef:e})=>{const t=H.useRef(null),{height:i,ref:r}=JQ({handleHeight:!0,refreshMode:"debounce",refreshRate:1e3}),{progress:s}=oq({scrollContainerRef:e,containerRef:t});return ee.jsxs("div",{className:"relative w-full md:px-10",ref:t,children:[ee.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 lg:px-10"}),ee.jsxs("div",{ref:r,className:"relative max-w-7xl mx-auto flex flex-col gap-10",children:[ee.jsx("div",{style:{height:i+"px"},className:"absolute md:left-8 left-8 top-0 overflow-hidden min-w-[.125rem] bg-[linear-gradient(to_bottom,var(--tw-gradient-stops))] from-transparent from-[0%] via-neutral-200 dark:via-neutral-700 to-transparent to-[99%]  [mask-image:linear-gradient(to_bottom,transparent_0%,black_10%,black_90%,transparent_100%)] ",children:ee.jsx(HJ.div,{style:{height:`${Math.max(5,s)/100*(i||0)}px`,opacity:`${Math.max(5,s)/100*(i||0)}`,transition:"all .1s ease"},className:"absolute inset-x-0 top-0  min-w-[.125rem] bg-gradient-to-t from-[var(--cyan)] via-[var(--volt)] to-transparent from-[10%] via-[20%] rounded-full"})}),n.map((o,a)=>ee.jsx(yte,{item:o},a))]})]})},xte="/assets/anedot-C5fUS9bH.png",_te="/assets/apple-Welwgyzc.jpg",vC="/assets/avatar-CjN6Hpi2.png",Ste="/assets/beta-reports-DK3PbyMK.png",Mte="/assets/cerner_cardio-DOEB9WCl.png",bte="/assets/flexible1-COZUtOdR.png",wte="/assets/hudl-Dh_ghLhY.jpg",Tte="/assets/insights_module-BA4czrgG.png",TM="/assets/oracle-Nbiya-m_.jpg",Ate="/assets/patented-Btxveai0.jpg",Ete="/assets/skyvue_1-oiG1alHR.png",Cte="/assets/vannevar_logo-B1Qm7S86.png",AM="/assets/washu-CAF_z2FZ.png",Pte=[{logo:Cte,title:"vannevar labs",years:"Sept . 2023  -  present",positions:["Senior Staff Engineer"],organizations:["information environment","hardware","sensors","platform"],highlights:["TAK Server / Integration","RF Detection Heatmap Visualizations","Handheld RF Sensor w/ SDR | Touchscreen | Keyboard | LTE | GPS | TAK Capabilities","Micro-frontend container + platform","Realtime FFT visualization system from remote devices","Software provisioning system for remote sensors","ADS-B / AIS / RF sweep signal collection + visualization","Real-time remote spectrum analyzer","Spectrogram viewer + visualization tools","Sentiment / Topic visualization","Authentication + authorization services / web components based on OpenID + OpenFGA","Designed + developed reusable platform components for scaffolding full stack applications","App launcher framework + UI","Integrated OpenTelemetry into full stack","Helped take multiple applications from MVP to Product","Frontend OAuth + instrumentation interceptors","Backend OAuth filters","Created shared UI libraries + design system","Designed + devleoped shared geospatial libraries + layer services based on leaflet / mapbox","Designed + devleoped Variety of visualizations and filtering for data modeling and analysis","Reusable GH workflows"],tags:["react","typescript","git","asana","lean","hero-ui","tailwind","node","vite","express","rest","oauth","web performance","uma","uhd","visx","signals","sdr","ais","ads-b","python","iot","rf","tak","webrtc","realtime"]},{title:"anedot",years:"feb . 2022  -  sept . 2023",logo:xte,positions:["Director of Engineering","Lead Software Engineer","sr. Software Engineer"],organizations:["Engineering","Action Pages","Infrastructure"],highlights:["Led teams implementing Anedot X feature uplift + rollout","Worked to create pixel - perfect replications of visual designs and interactions","Developed next iteration of page builder","Oversaw contributions to newest frontend","Mentored junior engineers on team","Various custom UI components","Context aware multi-monitor React components"],tags:["react","typescript","jest","git","clickup","lean","chakra-ui","npm","yarn","vite","ruby","rails"]},{title:"hudl",years:"oct . 2021  -  feb . 2022",logo:wte,positions:["Lead Engineer"],organizations:["Hudl Beta"],highlights:["Implemented cacets of new Insights Module","Overview stats report","Various visualization modules","Dynamic layout system","Multi-monitor layout manager"],tags:["react","video processing","dot net","webdriver.io","jest","git","jira","microservices","micro frontends","rest","webpack","automated testing","npm"],images:[Tte,Ste,bte]},{title:"oracle",years:"oct . 2017  -  oct . 2021",logo:TM,positions:["Associate Principal Engineer","Senior Software Architect"],organizations:["Clinical Imaging"],highlights:["Designed / developed Cerner ImageViewer as a successor to Cerner SkyVue","IHE Compliant web app for biewing / evaluating / manipulating / measuring clinical image datasets","Developed an image cache / layered strategy to support high FPS rendering in the browser of ultrasound + other clinical images","Multi-monitor React components","Automated testing framework","Reusable dashboard for aggregating automated test data + regulatory reporting","Dashboard for the Presentation + Management of Imaging Archive Data","XZ Decoder in JavaScript","Snappy Framed Decoder in JavaScript"],tags:["react","3d rendering","svg","vector processing","image processing","parallel algorithms","ruby","2D / 3D measurements","rails","jwt","oauth","openid","webdriver.io","jest","dicom","git","jira","microservices","micro frontends","rest","webpack","automated testing","npm","kubernetes","containerized deployments","data visualization","data aggregation","data registration"],images:[Mte,Ete]},{title:"apple",years:"jan . 2014  -  oct . 2017",logo:_te,positions:["POI Engineer"],organizations:["Maps"],highlights:["Worked on internal web app for processing POI data for the Maps platform","Visualization and editing of Transit Shape Data","Designed / Developed features for real time reporting + management of transit incidents","Apple Pay data ingest","Developed visualizations for managing vendor data mapping + normalization"],tags:["sbt","maven","angular","play","visualizations","d3","svg","geojson","leaflet","gis","radar","git","data visualization","data aggregation","data registration"]},{title:"oracle",years:"june . 2007  -  jan . 2014",logo:TM,positions:["Software Architect","Senior Software Engineer","Entry Level Engineer"],organizations:["Clinical Imaging"],highlights:["Designed + developed the Cerner SkyVue Imaging Platform","Java / C++ based desktop application for diagnostic + distribution imaging","Zero footprint imaging application","Custom SWT UI components","Developed a multi-monitor SWT Workbench","Real-time application monitoring services + visualizations","Web application for workflow assessments","High availability distributed disk cache","Java HTTP libaries","DICOM WADO web services","WMI library to bridge into Java","OAuth utilities + configuration management framework","HTTP streaming libraries for desktop mirroring via AirPlay 1","Parallel JPEG encoder"],tags:["Java","SWT","RCP","osgi","dicom","compression","hl7","ihe","JavaScipt","spring","java ee","servlets","maven","svn","git","jira","oauth","parallel processing","data visualization","data aggregation","data regsitration"]},{title:"intellectual property",logo:Ate,highlights:["Patent on Remote Desktop Visualization / Compression / Delivery to a Browser","Provisional Patent on Image Caching for High Frame Rates","Provisional Patent on Modeling of Relationships of 2D/3D Images for Linked Display + Navigation"]},{title:"individual work",logo:vC,highlights:["COVID 19 data visualization","Exterior / Interior Home Design","Consulting for cornerstoneJS Tooling","Holeshot BMX iOS/Android App","Race Day BMX iOS/Android App","Sprint Training iOS App"],tags:["dicom","2D / 3D measurements","gis","svg","vector processing","3d rendering","bluetooth","mobile","hardware control","location services","data visualization","data aggregation","data registration"]}],Rte=[{title:"washington university in st. louis",years:"sept . 2005  -  may . 2007",logo:AM,positions:["m.s.e.e."],highlights:["Master's of Electrical Engineering","Focus on radiological imaging + mathematics"]},{title:"washington university in st. louis",years:"sept . 2002  -  may . 2006",logo:AM,positions:["b.s.e.e."],highlights:["Bachelor's of Electrical Engineering","Minor in Mathematics","Worked in human genetics research within the Washington University in St. Louis Medical School","Worked in microbiology research within the St. Louis University Medical School","Published papers in both positions"]}],Lte=({onShow:n})=>{const e=H.useRef(null);return ee.jsxs(sF,{className:"ml-[110px] overflow-y-auto flex flex-col overflow-x-hidden z-10 pb-20 pr-8",ref:e,children:[ee.jsx(cg,{id:"intro",onShow:n}),ee.jsx("div",{className:"flex items-center justify-center pt-16 px-16 mt-[15%]",children:ee.jsx(_X,{})}),ee.jsx(Kt.div,{style:{x:"75%",width:"60%"},className:"mt-[-5%]",children:ee.jsx(Kt.div,{className:"flex w-full mb-[25%]",style:{filter:"drop-shadow(5px 5px 4px var(--bg-primary))",contentVisibility:"auto"},initial:{x:"-100vw"},animate:{x:0},transition:{delay:1},children:ee.jsx(yX,{})})}),ee.jsx(Kt.div,{initial:{opacity:0,y:40,scale:0},animate:{x:0},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0},transition:{delay:2,ease:"easeInOut"},className:"flex flex-col gap-4 p-12 w-full",children:ee.jsx("div",{className:"flex max-w-[75%] ml-auto",children:ee.jsxs(DW,{className:"rounded-[22px] p-8 bg-[var(--bg-primary)] text-[var(--primary-text)] gap-4 flex flex-col",children:[ee.jsx("div",{className:"extra-bold-text text-[4vmin] justify-start",children:"hello!"}),ee.jsx("p",{className:"light-text text-right text-[3.25vmin]",children:"I'm Juan Narváez, and I enjoy desiging and writing software (amongst other things). I've spent most of my career working on frontend applications in the realm of visualization and image processing (mostly medical imaging). I've also written a variety of backend services for processing and stroeaming image data, as well as the corresponding frontend components to take advantage of those services."})]})})}),ee.jsx("div",{className:"flex w-full items-center justify-center py-[3.5vmin]",children:ee.jsx(cg,{id:"experience",onShow:n,children:"experience"})}),ee.jsx(wM,{data:Pte,scrollContainerRef:e}),ee.jsx("div",{className:"flex w-full items-center justify-center py-[3.5vmin]",children:ee.jsx(cg,{id:"education",onShow:n,children:"education"})}),ee.jsx(wM,{data:Rte,scrollContainerRef:e})]})},Ite="/assets/NeueHaasDisplay-XThin-C4dWMoTc.ttf",Dte="/assets/NeueHaasDisplay-Roman-A6ipJltx.ttf",Nte="/assets/NeueHaasDisplay-Bold-BP6G_pDf.ttf",Ute="/assets/NeueHaasDisplay-Black-Crye6Ndo.woff",Fte=H.memo(()=>{const n=document.createElement("style");return n.innerHTML=`
    html, body, .visx-annotationlabel text {
      font-family: 'Neue Haas', sans-serif !important;
    }

    @font-face {
      font-family: 'Neue Haas Display Light';
      src: url(${Ite}) format('truetype');
      font-weight: 100;
      font-style: normal;
    }

    @font-face {
      font-family: 'Neue Haas';
      src: url(${Dte}) format('truetype');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Neue Haas';
      src: url(${Nte}) format('truetype');
      font-weight: 700;
      font-style: normal;
    }

    @font-face {
      font-family: 'Neue Haas';
      src: url(${Ute}) format('woff');
      font-weight: 900;
      font-style: normal;
    }

    .light-text {
      font-family: 'Neue Haas Display Light';
      font-weight: 100;
    }

    .bold-text {
      font-family: 'Neue Haas';
      font-weight: 700;
    }

    .extra-bold-text {
      font-family: 'Neue Haas';
      font-weight: 900;
    }
  `,document.head.appendChild(n),null}),Ote=()=>{const n=["M 287.762 688.897 A 45.5 45.5 0 0 1 242.262 734.397 A 45.5 45.5 0 0 1 196.762 688.897 A 45.5 45.5 0 0 1 242.262 643.397 A 45.5 45.5 0 0 1 287.762 688.897 Z","M 551.238 63.278 A 45.5 45.5 0 0 1 505.738 108.778 A 45.5 45.5 0 0 1 460.238 63.278 A 45.5 45.5 0 0 1 505.738 17.778 A 45.5 45.5 0 0 1 551.238 63.278 Z","M 156.545 337.231 L 248.461 337.231 L 248.461 569.272 C 248.461 598.86 246.32 619.811 242.04 632.126 C 237.76 644.442 229.838 654.43 218.273 662.089 C 206.708 669.748 190.188 673.578 168.712 673.578 C 150.989 673.578 128.987 670.95 102.704 665.694 L 116.446 599.009 C 123.805 600.512 129.211 601.263 132.667 601.263 C 140.476 601.263 146.408 598.597 150.463 593.265 C 154.519 587.933 156.545 577.307 156.545 561.387 L 156.545 337.231 Z M 506.114 246.217 L 506.114 576.481 L 420.28 576.481 L 420.28 541.112 C 408.266 556.13 397.303 566.269 387.39 571.526 C 374.173 578.434 359.455 581.888 343.234 581.888 C 310.643 581.888 285.749 569.498 268.553 544.716 C 251.356 519.935 242.758 489.822 242.758 454.379 C 242.758 414.729 252.257 384.39 271.257 363.364 C 290.255 342.338 314.399 331.824 343.684 331.824 C 357.952 331.824 370.907 334.227 382.546 339.034 C 394.186 343.839 404.511 351.048 413.522 360.66 L 413.522 246.217 L 506.114 246.217 Z M 414.198 456.181 C 414.198 437.407 410.219 423.402 402.258 414.164 C 394.298 404.929 384.235 400.31 372.07 400.31 C 361.407 400.31 352.472 404.741 345.262 413.602 C 338.053 422.463 334.448 437.332 334.448 458.207 C 334.448 477.732 338.166 492.038 345.599 501.125 C 353.034 510.21 362.232 514.754 373.197 514.754 C 384.912 514.754 394.675 510.173 402.484 501.012 C 410.294 491.85 414.198 476.906 414.198 456.181 Z M 509.648 337.231 L 595.03 337.231 L 595.03 376.204 C 607.795 360.286 620.711 348.907 633.779 342.074 C 646.845 335.241 662.765 331.824 681.537 331.824 C 706.921 331.824 726.782 339.371 741.126 354.465 C 755.468 369.559 762.639 392.877 762.639 424.416 L 762.639 576.481 L 670.499 576.481 L 670.499 444.915 C 670.499 429.898 667.721 419.272 662.163 413.039 C 656.607 406.806 648.798 403.689 638.734 403.689 C 627.621 403.689 618.609 407.894 611.701 416.305 C 604.792 424.715 601.337 439.809 601.337 461.588 L 601.337 576.481 L 509.648 576.481 L 509.648 337.231 Z"];return ee.jsx("svg",{viewBox:"0 0 800 800",xmlns:"http://www.w3.org/2000/svg",children:n.map((e,t)=>ee.jsx(Kt.path,{style:{strokeWidth:3,fill:t===2?"var(--primary-text)":"var(--volt)",stroke:t===2?"var(--primary-text)":"var(--volt)"},transform:t===2?"matrix(0, -1, 1, 0, -27.226006, 892.569031)":"",initial:{fillOpacity:0,pathLength:0,strokeOpacity:1},animate:{fillOpacity:1,strokeOpacity:1,pathLength:1},transition:{duration:3,ease:"easeInOut",delay:1.5},d:e},t))})};function kte(n){return G0({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm2.59-11.41L16 10l-4 4-4-4 1.41-1.41L11 10.17V6h2v4.17l1.59-1.58zM17 17H7v-2h10v2z"}}]})(n)}const Bte="_navbar_1o9he_1",Vte="_navItemContent_1o9he_14",zte="_inner_1o9he_14",Hte="_navbarInner_1o9he_22",$te="_navbarList_1o9he_32",Gte="_selectorActive_1o9he_56",Wte="_left_1o9he_78",jte="_rightBottom_1o9he_89",Xte="_rightTop_1o9he_101",qte="_right_1o9he_89",Yte="_rightBlock_1o9he_125",dr={navbar:Bte,navItemContent:Vte,inner:zte,navbarInner:Hte,navbarList:$te,selectorActive:Gte,left:Wte,rightBottom:jte,rightTop:Xte,right:qte,rightBlock:Yte},Kte="/assets/jdnarvaez_resume-BSConi4A.pdf",EM={type:"spring",stiffness:500,damping:30},Zte=({children:n,idx:e,isActive:t,onClick:i})=>{const r={visible:{opacity:1,transform:"translate(0%, 0%)"},hidden:{opacity:0,transform:"translate(110%, 0%)"}};return ee.jsx(Kt.div,{variants:r,children:ee.jsxs(Kt.div,{style:{position:"relative",display:"flex",fontWeight:t?"900":"700"},initial:!1,animate:{color:t?"#CEFF00":"var(--primary-text)"},transition:EM,children:[t&&ee.jsxs(Kt.div,{layoutId:"outline",initial:!1,transition:EM,className:dr.selectorActive,children:[ee.jsx("div",{className:dr.left}),ee.jsx("div",{className:dr.right}),ee.jsx("div",{className:dr.rightTop}),ee.jsx("div",{className:dr.rightBottom}),ee.jsx("div",{className:dr.rightBlock})]}),ee.jsx("div",{className:dr.navItemContent,children:ee.jsx(Kt.div,{onClick:i,className:`${dr.inner} text-sm md:text-xl lg:text-3xl`,children:n})})]})})},Jte=({children:n,activeItem:e})=>{const t={visible:{opacity:1,transition:{when:"beforeChildren",staggerChildren:.3}},hidden:{opacity:0,transition:{when:"afterChildren"}}};return ee.jsxs(Kt.div,{className:dr.navbar,children:[ee.jsx("div",{style:{zIndex:10,padding:"20px 15px 10px 0px"},children:ee.jsx(Ote,{})}),ee.jsx(Kt.div,{style:{height:"100%"},className:dr.navbarInner,initial:{transform:"translate(-110%, 0%)"},animate:{transform:"translate(0%, 0%)"},transition:{duration:.4,when:"beforeChildren"}}),ee.jsx(Kt.div,{className:dr.navbarList,initial:"hidden",animate:"visible",variants:t,children:n}),ee.jsx(Kt.div,{initial:{transform:"translate(-110%, 0%)"},animate:{transform:"translate(0%, 0%)"},style:{marginTop:"auto",zIndex:1,color:"var(--primary-text)",fontSize:"50px",justifyContent:"center",display:"flex",marginRight:"14px",marginBottom:"5px",cursor:"pointer"},title:"Download Resume",onClick:()=>open(Kte,"_blank"),children:ee.jsx(kte,{})}),ee.jsx(Kt.div,{initial:{transform:"translate(-110%, 0%)"},animate:{transform:"translate(0%, 0%)"},style:{zIndex:1,color:"var(--primary-text)",fontSize:"55px",justifyContent:"center",display:"flex",marginRight:"12.5px",cursor:"pointer"},onClick:()=>open("https://github.com/jdnarvaez","_blank"),children:ee.jsx(nee,{})}),ee.jsx(Kt.div,{initial:{transform:"translate(-110%, 0%)"},animate:{transform:"translate(0%, 0%)"},style:{zIndex:1,color:"var(--primary-text)",fontSize:"55px",justifyContent:"center",display:"flex",marginRight:"12.5px",cursor:"pointer"},onClick:()=>open("https://linkedin.com/in/jdnarvaez","_blank"),children:ee.jsx(iee,{})}),ee.jsx(Kt.div,{initial:{transform:"translate(-110%, 0%)"},animate:{transform:"translate(0%, 0%)"},style:{zIndex:1,display:"flex",width:"100px",height:"100px",alignItems:"center",justifyContent:"center"},children:ee.jsx("div",{style:{width:"75px",height:"75px",borderRadius:"50%",overflow:"hidden",border:"3px solid var(--volt)",boxSizing:"border-box"},children:ee.jsx("img",{style:{maxWidth:"100%",maxHeight:"100%"},src:vC})})})]})},CM=["M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875","M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867","M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859","M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851","M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843","M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835","M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827","M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819","M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811","M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803","M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795","M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787","M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779","M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771","M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763","M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755","M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747","M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739","M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731","M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723","M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715","M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707","M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699","M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691","M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683","M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675","M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667","M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659","M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651","M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643","M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635","M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627","M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619","M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611","M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603","M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595","M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587","M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579","M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571","M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563","M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555","M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547","M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539","M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531","M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523","M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515","M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507","M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499","M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491","M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483"],yC=H.memo(({className:n})=>ee.jsxs("div",{className:ru("absolute h-full w-full inset-0  [mask-size:40px] [mask-repeat:no-repeat] flex items-center justify-center",n),children:[ee.jsxs("svg",{className:" z-0 h-full w-full pointer-events-none absolute ",width:"100%",height:"100%",viewBox:"0 0 696 316",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[ee.jsx("path",{d:"M-380 -189C-380 -189 -312 216 152 343C616 470 684 875 684 875M-373 -197C-373 -197 -305 208 159 335C623 462 691 867 691 867M-366 -205C-366 -205 -298 200 166 327C630 454 698 859 698 859M-359 -213C-359 -213 -291 192 173 319C637 446 705 851 705 851M-352 -221C-352 -221 -284 184 180 311C644 438 712 843 712 843M-345 -229C-345 -229 -277 176 187 303C651 430 719 835 719 835M-338 -237C-338 -237 -270 168 194 295C658 422 726 827 726 827M-331 -245C-331 -245 -263 160 201 287C665 414 733 819 733 819M-324 -253C-324 -253 -256 152 208 279C672 406 740 811 740 811M-317 -261C-317 -261 -249 144 215 271C679 398 747 803 747 803M-310 -269C-310 -269 -242 136 222 263C686 390 754 795 754 795M-303 -277C-303 -277 -235 128 229 255C693 382 761 787 761 787M-296 -285C-296 -285 -228 120 236 247C700 374 768 779 768 779M-289 -293C-289 -293 -221 112 243 239C707 366 775 771 775 771M-282 -301C-282 -301 -214 104 250 231C714 358 782 763 782 763M-275 -309C-275 -309 -207 96 257 223C721 350 789 755 789 755M-268 -317C-268 -317 -200 88 264 215C728 342 796 747 796 747M-261 -325C-261 -325 -193 80 271 207C735 334 803 739 803 739M-254 -333C-254 -333 -186 72 278 199C742 326 810 731 810 731M-247 -341C-247 -341 -179 64 285 191C749 318 817 723 817 723M-240 -349C-240 -349 -172 56 292 183C756 310 824 715 824 715M-233 -357C-233 -357 -165 48 299 175C763 302 831 707 831 707M-226 -365C-226 -365 -158 40 306 167C770 294 838 699 838 699M-219 -373C-219 -373 -151 32 313 159C777 286 845 691 845 691M-212 -381C-212 -381 -144 24 320 151C784 278 852 683 852 683M-205 -389C-205 -389 -137 16 327 143C791 270 859 675 859 675M-198 -397C-198 -397 -130 8 334 135C798 262 866 667 866 667M-191 -405C-191 -405 -123 0 341 127C805 254 873 659 873 659M-184 -413C-184 -413 -116 -8 348 119C812 246 880 651 880 651M-177 -421C-177 -421 -109 -16 355 111C819 238 887 643 887 643M-170 -429C-170 -429 -102 -24 362 103C826 230 894 635 894 635M-163 -437C-163 -437 -95 -32 369 95C833 222 901 627 901 627M-156 -445C-156 -445 -88 -40 376 87C840 214 908 619 908 619M-149 -453C-149 -453 -81 -48 383 79C847 206 915 611 915 611M-142 -461C-142 -461 -74 -56 390 71C854 198 922 603 922 603M-135 -469C-135 -469 -67 -64 397 63C861 190 929 595 929 595M-128 -477C-128 -477 -60 -72 404 55C868 182 936 587 936 587M-121 -485C-121 -485 -53 -80 411 47C875 174 943 579 943 579M-114 -493C-114 -493 -46 -88 418 39C882 166 950 571 950 571M-107 -501C-107 -501 -39 -96 425 31C889 158 957 563 957 563M-100 -509C-100 -509 -32 -104 432 23C896 150 964 555 964 555M-93 -517C-93 -517 -25 -112 439 15C903 142 971 547 971 547M-86 -525C-86 -525 -18 -120 446 7C910 134 978 539 978 539M-79 -533C-79 -533 -11 -128 453 -1C917 126 985 531 985 531M-72 -541C-72 -541 -4 -136 460 -9C924 118 992 523 992 523M-65 -549C-65 -549 3 -144 467 -17C931 110 999 515 999 515M-58 -557C-58 -557 10 -152 474 -25C938 102 1006 507 1006 507M-51 -565C-51 -565 17 -160 481 -33C945 94 1013 499 1013 499M-44 -573C-44 -573 24 -168 488 -41C952 86 1020 491 1020 491M-37 -581C-37 -581 31 -176 495 -49C959 78 1027 483 1027 483M-30 -589C-30 -589 38 -184 502 -57C966 70 1034 475 1034 475M-23 -597C-23 -597 45 -192 509 -65C973 62 1041 467 1041 467M-16 -605C-16 -605 52 -200 516 -73C980 54 1048 459 1048 459M-9 -613C-9 -613 59 -208 523 -81C987 46 1055 451 1055 451M-2 -621C-2 -621 66 -216 530 -89C994 38 1062 443 1062 443M5 -629C5 -629 73 -224 537 -97C1001 30 1069 435 1069 435M12 -637C12 -637 80 -232 544 -105C1008 22 1076 427 1076 427M19 -645C19 -645 87 -240 551 -113C1015 14 1083 419 1083 419",stroke:"url(#paint0_radial_242_278)",strokeOpacity:"0.05",strokeWidth:"0.5"}),CM.map((e,t)=>ee.jsx(Kt.path,{d:e,stroke:`url(#linearGradient-${t})`,strokeOpacity:"0.4",strokeWidth:"0.5"},"path-"+t)),ee.jsxs("defs",{children:[CM.map((e,t)=>ee.jsxs(Kt.linearGradient,{id:`linearGradient-${t}`,initial:{x1:"0%",x2:"0%",y1:"0%",y2:"0%"},animate:{x1:["0%","100%"],x2:["0%","95%"],y1:["0%","100%"],y2:["0%",`${93+Math.random()*8}%`]},transition:{duration:Math.random()*10+10,ease:"easeInOut",repeat:1/0,delay:Math.random()*10},children:[ee.jsx("stop",{stopColor:"#ff71d2",stopOpacity:"0"}),ee.jsx("stop",{stopColor:"#ff8f89"}),ee.jsx("stop",{offset:"32.5%",stopColor:"#00e8ff"}),ee.jsx("stop",{offset:"100%",stopColor:"#ceff00",stopOpacity:"0"})]},`gradient-${t}`)),ee.jsxs("radialGradient",{id:"paint0_radial_242_278",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(352 34) rotate(90) scale(555 1560.62)",children:[ee.jsx("stop",{offset:"0.0666667",stopColor:"var(--neutral-300)"}),ee.jsx("stop",{offset:"0.243243",stopColor:"var(--neutral-300)"}),ee.jsx("stop",{offset:"0.43594",stopColor:"white",stopOpacity:"0"})]})]})]}),ee.jsx("div",{className:"absolute top-0 bottom-0 right-0 left-0 pointer-events-none",style:{background:"linear-gradient(90deg, var(--bg-primary) 0%, var(--bg-primary) 11%, rgba(0,0,0,0) 50%)"}})]}));yC.displayName="BackgroundBeams";const PM=["intro","experience","education"];function Rne(){const[n,e]=H.useState(PM[0]),t=i=>{var r;(r=document==null?void 0:document.getElementById(i))==null||r.scrollIntoView({behavior:"smooth",block:"start"}),e(i)};return ee.jsx(aU,{children:ee.jsx(SR,{children:ee.jsxs(Kt.div,{className:"relative w-full h-full flex flex-col gap-4 overflow-hidden",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},children:[ee.jsx(Fte,{}),ee.jsx(vF,{url:yF}),ee.jsx(Jte,{activeItem:n,children:PM.map((i,r)=>ee.jsx(Zte,{idx:r,isActive:i===n,onClick:()=>t(i),children:i},r))}),ee.jsx(yC,{}),ee.jsx(Lte,{onShow:i=>e(i)})]})})})}export{Rne as default};
